(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,function(e,t,n){"use strict";var r=n(11);n.d(t,"PageItems",function(){return r.b});n(8);var i=n(3);n.o(i,"CAppBase")&&n.d(t,"CAppBase",function(){return i.CAppBase}),n.o(i,"CBase")&&n.d(t,"CBase",function(){return i.CBase}),n.o(i,"CSub")&&n.d(t,"CSub",function(){return i.CSub}),n.o(i,"EasyDate")&&n.d(t,"EasyDate",function(){return i.EasyDate}),n.o(i,"Edit")&&n.d(t,"Edit",function(){return i.Edit}),n.o(i,"FA")&&n.d(t,"FA",function(){return i.FA}),n.o(i,"Form")&&n.d(t,"Form",function(){return i.Form}),n.o(i,"FormField")&&n.d(t,"FormField",function(){return i.FormField}),n.o(i,"IconText")&&n.d(t,"IconText",function(){return i.IconText}),n.o(i,"Image")&&n.d(t,"Image",function(){return i.Image}),n.o(i,"LMR")&&n.d(t,"LMR",function(){return i.LMR}),n.o(i,"List")&&n.d(t,"List",function(){return i.List}),n.o(i,"Loading")&&n.d(t,"Loading",function(){return i.Loading}),n.o(i,"Muted")&&n.d(t,"Muted",function(){return i.Muted}),n.o(i,"NavView")&&n.d(t,"NavView",function(){return i.NavView}),n.o(i,"Page")&&n.d(t,"Page",function(){return i.Page}),n.o(i,"PropGrid")&&n.d(t,"PropGrid",function(){return i.PropGrid}),n.o(i,"SearchBox")&&n.d(t,"SearchBox",function(){return i.SearchBox}),n.o(i,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",function(){return i.TabCaptionComponent}),n.o(i,"Tabs")&&n.d(t,"Tabs",function(){return i.Tabs}),n.o(i,"UpdownWidget")&&n.d(t,"UpdownWidget",function(){return i.UpdownWidget}),n.o(i,"VPage")&&n.d(t,"VPage",function(){return i.VPage}),n.o(i,"View")&&n.d(t,"View",function(){return i.View}),n.o(i,"nav")&&n.d(t,"nav",function(){return i.nav}),n.o(i,"start")&&n.d(t,"start",function(){return i.start}),n.o(i,"tv")&&n.d(t,"tv",function(){return i.tv}),n.o(i,"userApi")&&n.d(t,"userApi",function(){return i.userApi});var o=n(113);n.d(t,"userApi",function(){return o.a});var s=n(23);n.d(t,"tv",function(){return s.d});var a=n(85);n.o(a,"CAppBase")&&n.d(t,"CAppBase",function(){return a.CAppBase}),n.o(a,"CBase")&&n.d(t,"CBase",function(){return a.CBase}),n.o(a,"CSub")&&n.d(t,"CSub",function(){return a.CSub}),n.o(a,"EasyDate")&&n.d(t,"EasyDate",function(){return a.EasyDate}),n.o(a,"Edit")&&n.d(t,"Edit",function(){return a.Edit}),n.o(a,"FA")&&n.d(t,"FA",function(){return a.FA}),n.o(a,"Form")&&n.d(t,"Form",function(){return a.Form}),n.o(a,"FormField")&&n.d(t,"FormField",function(){return a.FormField}),n.o(a,"IconText")&&n.d(t,"IconText",function(){return a.IconText}),n.o(a,"Image")&&n.d(t,"Image",function(){return a.Image}),n.o(a,"LMR")&&n.d(t,"LMR",function(){return a.LMR}),n.o(a,"List")&&n.d(t,"List",function(){return a.List}),n.o(a,"Loading")&&n.d(t,"Loading",function(){return a.Loading}),n.o(a,"Muted")&&n.d(t,"Muted",function(){return a.Muted}),n.o(a,"NavView")&&n.d(t,"NavView",function(){return a.NavView}),n.o(a,"Page")&&n.d(t,"Page",function(){return a.Page}),n.o(a,"PropGrid")&&n.d(t,"PropGrid",function(){return a.PropGrid}),n.o(a,"SearchBox")&&n.d(t,"SearchBox",function(){return a.SearchBox}),n.o(a,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",function(){return a.TabCaptionComponent}),n.o(a,"Tabs")&&n.d(t,"Tabs",function(){return a.Tabs}),n.o(a,"UpdownWidget")&&n.d(t,"UpdownWidget",function(){return a.UpdownWidget}),n.o(a,"VPage")&&n.d(t,"VPage",function(){return a.VPage}),n.o(a,"View")&&n.d(t,"View",function(){return a.View}),n.o(a,"nav")&&n.d(t,"nav",function(){return a.nav}),n.o(a,"start")&&n.d(t,"start",function(){return a.start});var u=n(109);n.d(t,"CAppBase",function(){return u.a}),n.d(t,"CBase",function(){return u.b}),n.d(t,"CSub",function(){return u.c}),n.d(t,"start",function(){return u.d})},function(e,t,n){"use strict";var r=n(9);n.d(t,"NavView",function(){return r.a}),n.d(t,"nav",function(){return r.b});n(39);var i=n(14);n.d(t,"Page",function(){return i.a});var o=n(75);n.d(t,"Controller",function(){return o.a}),n.d(t,"VPage",function(){return o.b}),n.d(t,"View",function(){return o.c});var s=n(76);n.o(s,"CAppBase")&&n.d(t,"CAppBase",function(){return s.CAppBase}),n.o(s,"CBase")&&n.d(t,"CBase",function(){return s.CBase}),n.o(s,"CSub")&&n.d(t,"CSub",function(){return s.CSub}),n.o(s,"EasyDate")&&n.d(t,"EasyDate",function(){return s.EasyDate}),n.o(s,"Edit")&&n.d(t,"Edit",function(){return s.Edit}),n.o(s,"FA")&&n.d(t,"FA",function(){return s.FA}),n.o(s,"Form")&&n.d(t,"Form",function(){return s.Form}),n.o(s,"FormField")&&n.d(t,"FormField",function(){return s.FormField}),n.o(s,"IconText")&&n.d(t,"IconText",function(){return s.IconText}),n.o(s,"Image")&&n.d(t,"Image",function(){return s.Image}),n.o(s,"LMR")&&n.d(t,"LMR",function(){return s.LMR}),n.o(s,"List")&&n.d(t,"List",function(){return s.List}),n.o(s,"Loading")&&n.d(t,"Loading",function(){return s.Loading}),n.o(s,"Muted")&&n.d(t,"Muted",function(){return s.Muted}),n.o(s,"PropGrid")&&n.d(t,"PropGrid",function(){return s.PropGrid}),n.o(s,"SearchBox")&&n.d(t,"SearchBox",function(){return s.SearchBox}),n.o(s,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",function(){return s.TabCaptionComponent}),n.o(s,"Tabs")&&n.d(t,"Tabs",function(){return s.Tabs}),n.o(s,"UpdownWidget")&&n.d(t,"UpdownWidget",function(){return s.UpdownWidget}),n.o(s,"emailRegex")&&n.d(t,"emailRegex",function(){return s.emailRegex}),n.o(s,"mobileRegex")&&n.d(t,"mobileRegex",function(){return s.mobileRegex}),n.o(s,"resLang")&&n.d(t,"resLang",function(){return s.resLang}),n.o(s,"start")&&n.d(t,"start",function(){return s.start}),n.o(s,"tv")&&n.d(t,"tv",function(){return s.tv}),n.o(s,"userApi")&&n.d(t,"userApi",function(){return s.userApi});var a=n(107);n.d(t,"Form",function(){return a.a}),n.d(t,"FormField",function(){return a.b}),n.d(t,"UpdownWidget",function(){return a.c});var u=n(108);n.d(t,"Edit",function(){return u.a});var c=n(32);n.d(t,"resLang",function(){return c.a});var l=n(112);n.d(t,"TabCaptionComponent",function(){return l.a}),n.d(t,"Tabs",function(){return l.b});var d=n(47);n.d(t,"Loading",function(){return d.a});var h=n(25);n.d(t,"Image",function(){return h.a});n(48);var p=n(80);n.d(t,"emailRegex",function(){return p.a}),n.d(t,"mobileRegex",function(){return p.b});var f=n(110);n.d(t,"List",function(){return f.a});n(81);var m=n(82);n.d(t,"EasyDate",function(){return m.a});var v=n(111);n.d(t,"PropGrid",function(){return v.a});var b=n(52);n.d(t,"FA",function(){return b.a}),n.d(t,"IconText",function(){return b.b}),n.d(t,"LMR",function(){return b.c}),n.d(t,"Muted",function(){return b.d});n(83);var y=n(84);n.d(t,"SearchBox",function(){return y.a})},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return u});var r=n(0),i=n(3),o=n(33),s=n(49),a=function(e){function t(t,n,r,i){var o=e.call(this,t,i)||this;Object.setPrototypeOf(o.x,t.x);var a=n.name,u=n.typeName;return o.entity=n,o.ui=r,o.label=o.res.label||a,o.icon=s.a[u],o}return r.d(t,e),t.prototype.beforeStart=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.entity.loadSchema()];case 1:return e.sent(),[2,!0]}})})},t.prototype.createForm=function(e,t,n){var r=this.buildFormOptions(n),i=new o.b(r,e);return i.setValues(t),i},t.prototype.buildFormOptions=function(e){var t,n,r,i,s,a=this.entity,u=a.fields,c=a.arrFields;void 0!==this.res&&(t=this.res.none,n=this.res.submit,r=this.res.arrNew,i=this.res.arrEdit,s=this.res.arrTitleNewButton),void 0===t&&(t=this.cUq.res.none||"none"),void 0===n&&(n=this.cUq.res.submit||"Submit"),void 0===r&&(r=this.cUq.res.arrNew||"New"),void 0===i&&(i=this.cUq.res.arrEdit||"Edit"),void 0===s&&(s=this.cUq.res.arrTitleNewButton),void 0===e&&(e=o.a.new);var l=this.ui.form;return{fields:u,arrs:c,ui:l,res:this.res||{},inputs:this.buildInputs(l),none:t,submitCaption:n,arrNewCaption:r,arrEditCaption:i,arrTitleNewButton:s,mode:e}},t.prototype.buildInputs=function(e){var t=this.entity,n=t.fields,r=t.arrFields,i={};if(this.buildFieldsInputs(i,n,void 0,e),void 0!==r)for(var o=0,s=r;o<s.length;o++){var a=s[o],u=a.name,c=a.fields,l=e&&e.items;this.buildFieldsInputs(i,c,u,l&&l[u])}return i},t.prototype.buildFieldsInputs=function(e,t,n,r){if(void 0!==n){var i=e[n];void 0===i&&(e[n]=i={},e=i)}for(var o=0,s=t;o<s.length;o++){var a=s[o],u=a.name,c=a._tuid;if(void 0!==c){var l=c.tuid,d=r&&r.items&&r.items[u];e[u]={select:this.buildSelect(a,n,d),content:this.buildContent(a,n),placeHolder:this.cUq.getTuidPlaceHolder(l)}}}},t.prototype.buildSelect=function(e,t,n){var i=this;return function(e,t,o){return r.b(i,void 0,Promise,function(){var i,o,s,a,u,c;return r.e(this,function(r){switch(r.label){case 0:return i=t._tuid,i.tuid,o=i.ownerField,s=void 0,a=void 0,void 0!==o&&(a=e.getValue(o.name)),n&&!0===n.autoList&&(console.log("select search set param=empty string"),a=""),[4,s.call(a)];case 1:return u=r.sent(),s.removeCeased(),void 0===u?[2,void 0]:(c=s.idFromItem(u),i.useId(c),[2,c])}})})}},t.prototype.buildContent=function(e,t){},t.prototype.cQuerySelect=function(e){return this.cUq.cQuerySelect(e)},t}(n(50).a),u=function(e){function t(t){var n=e.call(this,t)||this;return n.entity=t.entity,n.ui=t.ui,n}return r.d(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return this.controller.label},enumerable:!0,configurable:!0}),t.prototype.createForm=function(e,t,n){return this.controller.createForm(e,t,n)},t}(i.VPage)},function(e,t,n){"use strict";var r=n(21),i=n(38),o=n(0),s=n(26),a=n(16),u=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.guest=function(){return o.b(this,void 0,Promise,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return[4,this.get("",{})];case 1:switch(typeof(e=t.sent())){default:return[2];case"string":return[2,Object(s.a)(e)];case"object":return[2,Object(s.a)(e.token)]}return[2]}})})},t.prototype.unitFromName=function(e){return o.b(this,void 0,Promise,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.get(e)];case 1:return[2,(t=n.sent())&&t.unit]}})})},t}(a.a))("tv/guest/",void 0),c=function(){function e(e){this.method="POST",this.params=e}return e.prototype.buildParams=function(){return this.params},Object.defineProperty(e.prototype,"headers",{get:function(){},enumerable:!0,configurable:!0}),e}(),l=n(13),d=n(27);n.d(t,"f",function(){return r.a}),n.d(t,"m",function(){return r.b}),n.d(t,"n",function(){return i.b}),n.d(t,"i",function(){return u}),n.d(t,"a",function(){return c}),n.d(t,"l",function(){return a.h}),n.d(t,"e",function(){return a.d}),n.d(t,"d",function(){return a.c}),n.d(t,"q",function(){return a.j}),n.d(t,"p",function(){return a.i}),n.d(t,"b",function(){return a.a}),n.d(t,"c",function(){return a.b}),n.d(t,"k",function(){return a.g}),n.d(t,"g",function(){return l.a}),n.d(t,"h",function(){return l.f}),n.d(t,"o",function(){return d.b}),n.d(t,"j",function(){return d.a})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return g}),n.d(t,"b",function(){return w});var r,i=n(0),o=n(1),s=n(4),a=n(14),u=n(72),c=n(114),l=n(13),d=n(11),h=n(8),p=n(21),f=n(32),m=n(47),v=(n(74),n(124),n(138),n(140),n(52)),b=(new RegExp("Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|IEMobile|Mobile","i").test(navigator.userAgent),n(125),[]),y=1,g=function(t){function n(e){var n=t.call(this,e)||this;return n.waitCount=0,n.upgradeUq=function(){w.start()},n.isHistoryBack=!1,n.clearError=function(){n.setState({fetchError:void 0})},n.back=n.back.bind(n),n.navBack=n.navBack.bind(n),n.stack=[],n.state={stack:n.stack,wait:0,fetchError:void 0},n}return i.d(n,t),n.prototype.componentWillMount=function(){return i.b(this,void 0,void 0,function(){return i.e(this,function(e){return window.addEventListener("popstate",this.navBack),[2]})})},n.prototype.componentDidMount=function(){return i.b(this,void 0,void 0,function(){return i.e(this,function(e){switch(e.label){case 0:return w.set(this),[4,w.start()];case 1:return e.sent(),[2]}})})},Object.defineProperty(n.prototype,"level",{get:function(){return this.stack.length},enumerable:!0,configurable:!0}),n.prototype.startWait=function(){var t=this;0===this.waitCount&&(this.setState({wait:1}),this.waitTimeHandler=e.setTimeout(function(){t.waitTimeHandler=void 0,t.setState({wait:2})},1e3)),++this.waitCount,this.setState({fetchError:void 0})},n.prototype.endWait=function(){var e=this;setTimeout(function(){--e.waitCount,0===e.waitCount&&(void 0!==e.waitTimeHandler&&(clearTimeout(e.waitTimeHandler),e.waitTimeHandler=void 0),e.setState({wait:0}))},100)},n.prototype.onError=function(e){return i.b(this,void 0,void 0,function(){var t;return i.e(this,function(n){switch(n.label){case 0:return void 0===(t=e.error)||!0!==t.unauthorized?[3,2]:[4,w.showLogin(void 0)];case 1:return n.sent(),[2];case 2:return this.setState({fetchError:e}),[2]}})})},n.prototype.showUpgradeUq=function(e,t){return i.b(this,void 0,Promise,function(){return i.e(this,function(n){return this.show(o.createElement(a.a,{header:!1},o.createElement("div",null,"UQ\u5347\u7ea7\u4e86\uff0c\u8bf7\u70b9\u51fb\u6309\u94ae\u5347\u7ea7 ",o.createElement("br",null),o.createElement("small",{className:"text-muted"},e," ver-",t),o.createElement("button",{className:"btn btn-primary",onClick:this.upgradeUq},"\u5347\u7ea7")))),[2]})})},n.prototype.show=function(e,t){return this.clear(),this.push(e,t)},n.prototype.push=function(e,t){this.removeCeased(),this.stack.length>0&&window.history.pushState("forward",null,null);var n=y++;return this.stack.push({key:n,view:e,ceased:!1,disposer:t}),this.refresh(),n},n.prototype.replace=function(e,t){var n=void 0,r=this.stack;r.length>0&&(n=r.pop());var i=y++;return this.stack.push({key:i,view:e,ceased:!1,disposer:t}),void 0!==n&&this.dispose(n.disposer),this.refresh(),i},n.prototype.ceaseTop=function(e){void 0===e&&(e=1);for(var t=this.stack.length-1,n=0;n<e&&!(t<0);n++,t--){this.stack[t].ceased=!0}},n.prototype.pop=function(e){void 0===e&&(e=1);var t=this.stack,n=t.length;if(!(e<=0||n<=1)){n<e&&(e=n);for(var r=0,i=0;i<e&&0!==t.length;i++)this.popAndDispose(),++r;r>=n&&r--,this.refresh(),this.isHistoryBack}},n.prototype.popTo=function(e){if(void 0!==e&&void 0!==this.stack.find(function(t){return t.key===e}))for(;this.stack.length>0;){var t=this.stack.length;if(this.stack[t-1].key===e)break;this.pop()}},n.prototype.topKey=function(){var e=this.stack.length;if(0!==e)return this.stack[e-1].key},n.prototype.removeCeased=function(){for(;;){var e=this.stack.length-1;if(e<0)break;if(!1===this.stack[e].ceased)break;var t=this.stack.pop().disposer;this.dispose(t)}this.refresh()},n.prototype.popAndDispose=function(){this.removeCeased();var e=this.stack.pop();if(void 0!==e){var t=e.disposer;return this.dispose(t),this.removeCeased(),e}},n.prototype.dispose=function(e){void 0!==e&&(void 0===this.stack.find(function(t){return t.disposer===e})&&e())},n.prototype.clear=function(){for(this.stack.length;this.stack.length>0;)this.popAndDispose()},n.prototype.regConfirmClose=function(e){var t=this.stack,n=t.length;0!==n&&(t[n-1].confirmClose=e)},n.prototype.navBack=function(){w.log("backbutton pressed - nav level: "+this.stack.length),this.isHistoryBack=!0,this.back(!0),this.isHistoryBack=!1},n.prototype.back=function(e){return void 0===e&&(e=!0),i.b(this,void 0,void 0,function(){var t,n,r;return i.e(this,function(i){switch(i.label){case 0:return t=this.stack,0===(n=t.length)?[2]:1===n?(self!=window.top&&window.top.postMessage({type:"pop-app"},"*"),[2]):(r=t[n-1],!0===e&&r.confirmClose?[4,r.confirmClose()]:[3,2]);case 1:return!0===i.sent()&&this.pop(),[3,3];case 2:this.pop(),i.label=3;case 3:return[2]}})})},n.prototype.confirmBox=function(e){return window.confirm(e)},n.prototype.render=function(){var e=this.state,t=e.wait,n=e.fetchError,r=this.state.stack,s=r.length-1,a=null,u=null;switch(t){case 1:a=o.createElement("li",{className:"va-wait va-wait1"});break;case 2:a=o.createElement("li",{className:"va-wait va-wait2"},o.createElement(m.a,null))}n&&(u=o.createElement(c.a,i.a({clearError:this.clearError},n)));var l=!0===w.testing&&o.createElement("span",{className:"cursor-pointer position-absolute",style:{lineHeight:0}},o.createElement(v.a,{className:"text-warning",name:"info-circle"}));return o.createElement("ul",{className:"va"},r.map(function(e,t){var n=e.key,r=e.view;return o.createElement("li",{key:n,style:t<s?{visibility:"hidden"}:void 0},r)}),a,u,l)},n.prototype.refresh=function(){this.setState({stack:this.stack})},n}(o.Component),w=new(function(){function e(){this.local=new d.a,this.user=void 0,this.arrs=["/test","/test/"];var e=f.b.lang,t=f.b.district;this.language=e,this.culture=t,this.testing=!1}return Object.defineProperty(e.prototype,"guest",{get:function(){var e=this.local.guest;if(void 0===e)return 0;var t=e.get();return void 0===t?0:t.guest},enumerable:!0,configurable:!0}),e.prototype.set=function(e){this.nav=e},e.prototype.registerReceiveHandler=function(e){if(void 0!==this.ws)return this.ws.onWsReceiveAny(e)},e.prototype.unregisterReceiveHandler=function(e){void 0!==this.ws&&void 0!==e&&this.ws.endWsReceive(e)},e.prototype.onReceive=function(e){return i.b(this,void 0,void 0,function(){return i.e(this,function(t){switch(t.label){case 0:return void 0===this.ws?[2]:[4,this.ws.receive(e)];case 1:return t.sent(),[2]}})})},e.prototype.getPredefinedUnitName=function(){return i.b(this,void 0,void 0,function(){var e;return i.e(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),e=this.unitJsonPath(),[4,fetch(e,{})];case 1:return[4,t.sent().json()];case 2:return[2,t.sent().unit];case 3:return t.sent(),this.local.unit.remove(),[2];case 4:return[2]}})})},e.prototype.loadPredefinedUnit=function(){return i.b(this,void 0,void 0,function(){var e,t,n,r;return i.e(this,function(i){switch(i.label){case 0:return void 0!==(e=Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_UNIT)?[2,Number(e)]:void 0===(n=this.local.unit.get())?[3,2]:!0!==d.c.isDevelopment?[2,n.id]:[4,this.getPredefinedUnitName()];case 1:return void 0===(t=i.sent())?[2]:n.name===t?[2,n.id]:[3,4];case 2:return[4,this.getPredefinedUnitName()];case 3:if(void 0===(t=i.sent()))return[2];i.label=4;case 4:return[4,h.i.unitFromName(t)];case 5:return void 0!==(r=i.sent())&&this.local.unit.set({id:r,name:t}),[2,r]}})})},e.prototype.setSettings=function(e){this.navSettings=e},e.prototype.unitJsonPath=function(){var e=document.location.href;e=e.toLowerCase();for(var t=0,n=this.arrs;t<n.length;t++){var r=n[t];if(!0===e.endsWith(r)){e=e.substr(0,e.length-r.length);break}}return!0!==e.endsWith("/")&&!0!==e.endsWith("\\")||(e=e.substr(0,e.length-1)),e+"/unit.json"},e.prototype.start=function(){return i.b(this,void 0,void 0,function(){var e,t,n,r,o,s,a,u,c,f,m;return i.e(this,function(i){switch(i.label){case 0:return i.trys.push([0,11,12,13]),this.testing=d.c.testing,[4,h.j.start(this.testing)];case 1:return i.sent(),void 0!==(e=document.location.hash)&&e.length>0&&((t=Object(l.g)())<0&&(t=void 0),this.hashParam=e.substring(1,t)),w.clear(),this.startWait(),n=h.j.url,r=h.j.ws,o=h.j.resHost,this.centerHost=n,this.resUrl=Object(h.o)(o),this.wsHost=r,Object(h.q)(n),void 0!==(s=this.local.guest.get())?[3,3]:[4,h.i.guest()];case 2:s=i.sent(),i.label=3;case 3:return w.setGuest(s),a=Object(l.f)(),u=Object(l.j)(a),void 0!==a&&window!==window.parent&&void 0!==u?(this.ws=p.d,console.log("this.ws = wsBridge in sub frame"),self!==window.parent&&window.parent.postMessage({type:"sub-frame-started",hash:u.hash},"*"),[2]):[4,this.loadPredefinedUnit()];case 4:return c=i.sent(),u.predefinedUnit=c,void 0!==(f=this.local.user.get())?[3,9]:void 0===(m=this.nav.props.notLogined)?[3,6]:[4,m()];case 5:return i.sent(),[3,8];case 6:return[4,w.showLogin(void 0)];case 7:i.sent(),i.label=8;case 8:return[2];case 9:return[4,w.logined(f)];case 10:return i.sent(),[3,13];case 11:return i.sent(),[3,13];case 12:return this.endWait(),[7];case 13:return[2]}})})},e.prototype.showAppView=function(){return i.b(this,void 0,void 0,function(){var e;return i.e(this,function(t){switch(t.label){case 0:return void 0===(e=this.nav.props.onLogined)?(w.push(o.createElement("div",null,"NavView has no prop onLogined")),[2]):(w.clear(),[4,e()]);case 1:return t.sent(),console.log("logined: AppView shown"),[2]}})})},e.prototype.setGuest=function(e){this.local.guest.set(e),u.a.set(0,e.token)},e.prototype.saveLocalUser=function(){this.local.user.set(this.user)},e.prototype.logined=function(e,t){return i.b(this,void 0,void 0,function(){return i.e(this,function(n){switch(n.label){case 0:return Object(h.l)(),console.log("logined: %s",JSON.stringify(e)),this.user=e,this.saveLocalUser(),u.a.set(e.id,e.token),void 0===t?[3,1]:(t(e),[3,3]);case 1:return[4,this.showAppView()];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.wsConnect=function(){(this.ws=new h.f(this.wsHost,this.user.token)).connect()},e.prototype.loginTop=function(e){return this.navSettings&&this.navSettings.loginTop||e},e.prototype.showLogin=function(e,t){return i.b(this,void 0,void 0,function(){var r,s;return i.e(this,function(i){switch(i.label){case 0:return[4,n.e(1).then(n.bind(null,280))];case 1:return r=i.sent(),s=o.createElement(r.default,{withBack:t,callback:e}),!0!==t&&(this.nav.clear(),this.pop()),this.nav.push(s),[2]}})})},e.prototype.showLogout=function(e){return i.b(this,void 0,void 0,function(){var t=this;return i.e(this,function(n){return w.push(o.createElement(a.a,{header:"\u5b89\u5168\u9000\u51fa",back:"close"},o.createElement("div",{className:"m-5 border border-info bg-white rounded p-3 text-center"},o.createElement("div",null,"\u9000\u51fa\u5f53\u524d\u8d26\u53f7\u4e0d\u4f1a\u5220\u9664\u4efb\u4f55\u5386\u53f2\u6570\u636e\uff0c\u4e0b\u6b21\u767b\u5f55\u4f9d\u7136\u53ef\u4ee5\u4f7f\u7528\u672c\u8d26\u53f7"),o.createElement("div",{className:"mt-3"},o.createElement("button",{className:"btn btn-danger",onClick:function(){return t.logout(e)}},"\u9000\u51fa"))))),[2]})})},e.prototype.logout=function(e){return i.b(this,void 0,void 0,function(){var t;return i.e(this,function(n){switch(n.label){case 0:return h.g.unit=void 0,this.local.logoutClear(),this.user=void 0,Object(h.l)(),t=this.local.guest.get(),Object(h.p)(0,t&&t.token),this.ws=void 0,void 0!==e?[3,2]:[4,w.start()];case 1:return n.sent(),[3,4];case 2:return[4,e()];case 3:n.sent(),n.label=4;case 4:return[2]}})})},e.prototype.changePassword=function(){return i.b(this,void 0,void 0,function(){var e;return i.e(this,function(t){switch(t.label){case 0:return[4,n.e(2).then(n.bind(null,279))];case 1:return e=t.sent(),w.push(o.createElement(e.ChangePasswordPage,null)),[2]}})})},Object.defineProperty(e.prototype,"level",{get:function(){return this.nav.level},enumerable:!0,configurable:!0}),e.prototype.startWait=function(){this.nav.startWait()},e.prototype.endWait=function(){this.nav.endWait()},e.prototype.onError=function(e){return i.b(this,void 0,void 0,function(){return i.e(this,function(t){switch(t.label){case 0:return[4,this.nav.onError(e)];case 1:return t.sent(),[2]}})})},e.prototype.showUpgradeUq=function(e,t){return i.b(this,void 0,Promise,function(){return i.e(this,function(n){switch(n.label){case 0:return[4,this.nav.showUpgradeUq(e,t)];case 1:return n.sent(),[2]}})})},e.prototype.show=function(e,t){this.nav.show(e,t)},e.prototype.push=function(e,t){this.nav.push(e,t)},e.prototype.replace=function(e,t){this.nav.replace(e,t)},e.prototype.pop=function(e){void 0===e&&(e=1),this.nav.pop(e)},e.prototype.topKey=function(){return this.nav.topKey()},e.prototype.popTo=function(e){this.nav.popTo(e)},e.prototype.clear=function(){this.nav.clear()},e.prototype.navBack=function(){this.nav.navBack()},e.prototype.ceaseTop=function(e){this.nav.ceaseTop(e)},e.prototype.removeCeased=function(){this.nav.removeCeased()},e.prototype.back=function(e){return void 0===e&&(e=!0),i.b(this,void 0,void 0,function(){return i.e(this,function(t){switch(t.label){case 0:return[4,this.nav.back(e)];case 1:return t.sent(),[2]}})})},e.prototype.regConfirmClose=function(e){this.nav.regConfirmClose(e)},e.prototype.confirmBox=function(e){return this.nav.confirmBox(e)},e.prototype.navToApp=function(e,t,n,r,s){return i.b(this,void 0,Promise,function(){var a=this;return i.e(this,function(i){return[2,new Promise(function(i,u){var c=!0===a.centerHost.includes("http://localhost:")?"sheet_debug":"sheet",d=void 0===s?Object(l.c)(e,t):Object(l.c)(e,t,c,[n,r,s]);console.log("navToApp: %s",JSON.stringify(d)),w.push(o.createElement("article",{className:"app-container"},o.createElement("span",{id:d.hash,onClick:function(){return a.back()}},o.createElement("i",{className:"fa fa-arrow-left"})),o.createElement("iframe",{src:d.url})),function(){i()})})]})})},e.prototype.navToSite=function(e){window.open(e)},Object.defineProperty(e.prototype,"logs",{get:function(){return b},enumerable:!0,configurable:!0}),e.prototype.log=function(e){b.push(e)},e.prototype.logMark=function(){var e=new Date;r=e.getTime(),b.push("log-mark: "+e.toTimeString())},e.prototype.logStep=function(e){b.push(e+": "+((new Date).getTime()-r))},i.c([s.m],e.prototype,"user",void 0),e}())}).call(this,n(35))},,function(e,t,n){"use strict";n(26),n(19);var r=n(46),i=n(0),o=n(4),s=(function(){function e(e){void 0===e&&(e=100),this.arr=[],this.dict=new Map,this.maxCount=e}e.prototype.loadIds=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];if(null!==i){var o=this.dict.get(i);void 0===o&&(t.push(i),o={id:i},this.dict.set(i,o))}}this.loadId(t)},e.prototype.get=function(e){if(void 0===e||null===e)return null;var t=this.dict.get(e);return void 0===t&&(this.dict.set(e,{id:e}),this.loadId([e]),t=this.dict.get(e)),t},e.prototype.setItem=function(e,t){void 0===t?(this.dict.set(e,null),this.arr.push({id:e})):(this.dict.set(e,t),this.arr.push(t)),this.arr.length>this.maxCount&&(t=this.arr.shift(),this.dict.delete(t.id))},e.prototype.loadId=function(e){return i.b(this,void 0,void 0,function(){var t,n,r,o,s,a,u,c,l;return i.e(this,function(i){switch(i.label){case 0:return[4,this._loadIds(e)];case 1:if(void 0!==(t=i.sent()))return[3,6];n=0,r=e,i.label=2;case 2:return n<r.length?null===(l=r[n])?[3,4]:[4,this._loadId(l)]:[3,5];case 3:o=i.sent(),this.setItem(l,o),i.label=4;case 4:return n++,[3,2];case 5:return[3,7];case 6:for(s=function(e){var n=t.find(function(t){return t.id===e});a.setItem(e,n)},a=this,u=0,c=e;u<c.length;u++)l=c[u],s(l);i.label=7;case 7:return[2]}})})},i.c([o.m],e.prototype,"dict",void 0)}(),n(10)),a=n.n(s),u=new(function(){function e(){}return e.prototype.getItem=function(e){return localStorage.getItem(e)},e.prototype.setItem=function(e,t){localStorage.setItem(e,t)},e.prototype.removeItem=function(e){localStorage.removeItem(e)},e}()),c=function(){function e(e,t){this.local=e,this.key=t}return e.prototype.get=function(){try{var e=this.local.getItem(this.key);if(null===e)return;if(void 0===e)return;return JSON.parse(e)}catch(t){return void this.local.removeItem(this.key)}},e.prototype.set=function(e){var t=JSON.stringify(e);this.local.setItem(this.key,t)},e.prototype.remove=function(e){void 0===e?this.local.removeItem(this.key):this.local.removeLocal(e)},e.prototype.child=function(e){return this.local.child(e)},e.prototype.arr=function(e){return this.local.arr(e)},e.prototype.map=function(e){return this.local.map(e)},e}(),l=function(){function e(e){this.name=e,this.caches={},this.locals={}}return e.prototype.getItem=function(e){var t=this.keyForGet(e);if(void 0!==t)return u.getItem(t)},e.prototype.setItem=function(e,t){var n=this.keyForSet(e);u.setItem(n,t)},e.prototype.removeItem=function(e){var t=this.keyForSet(e);void 0!==t&&localStorage.removeItem(t)},e.prototype.arr=function(e){var t=String(e),n=this.locals[t];if(void 0===n){var r=this.keyForSet(e);this.locals[t]=n=new d(r)}return n},e.prototype.map=function(e){var t=String(e),n=this.locals[t];if(void 0===n){var r=this.keyForSet(e);this.locals[t]=n=new h(r)}return n},e.prototype.removeLocal=function(e){var t=e.name,n=this.keyForRemove(t);if(void 0!==n){var r=this.locals[t];void 0===r?r=new d(n):this.locals[t]=void 0,r.removeAll()}},e.prototype.child=function(e){var t=String(e),n=this.caches[t];return void 0!==n?n:this.caches[t]=new c(this,e)},e}(),d=function(e){function t(t){var n=e.call(this,t)||this,r=u.getItem(n.name);return n.index=null===r?[]:r.split("\n").map(function(e){return Number(e)}),n}return i.d(t,e),t.prototype.saveIndex=function(){u.setItem(this.name,this.index.join("\n"))},t.prototype.keyForGet=function(e){if(!(a.a.indexOf(this.index,e)<0))return this.name+"."+e},t.prototype.keyForSet=function(e){var t=a.a.indexOf(this.index,e);return t<0?(this.index.unshift(e),this.index.length>500&&this.index.pop()):(this.index.splice(t,1),this.index.unshift(e)),this.saveIndex(),this.name+"."+e},t.prototype.keyForRemove=function(e){var t=a.a.indexOf(this.index,e);if(!(t<0))return this.index.splice(t,1),this.saveIndex(),this.name+"."+e},t.prototype.removeAll=function(){for(var e=0,t=this.index;e<t.length;e++){var n=t[e];u.removeItem(this.name+"."+n)}u.removeItem(this.name),this.index.splice(0)},t.prototype.item=function(e){return this.child(e)},t}(l),h=function(e){function t(t){var n=e.call(this,t)||this;n.max=0,n.index={};var r=u.getItem(n.name);null!==r&&r.split("\n").forEach(function(e){var t=e.indexOf("\t");if(!(t<0)){var r=e.substr(0,t),i=Number(e.substr(t+1));!0!==isNaN(i)&&(n.index[r]=i,i>n.max&&(n.max=i))}});return n}return i.d(t,e),t.prototype.saveIndex=function(){var e=[];for(var t in this.index){var n=this.index[t];void 0!==n&&e.push(t+"\t"+n)}u.setItem(this.name,e.join("\n"))},t.prototype.keyForGet=function(e){var t=this.index[e];if(void 0!==t)return this.name+"."+t},t.prototype.keyForSet=function(e){var t=this.index[e];return void 0===t&&(++this.max,t=this.max,this.index[e]=t,this.saveIndex()),this.name+"."+t},t.prototype.keyForRemove=function(e){var t=this.index[e];if(void 0!==t)return this.index[e]=void 0,this.saveIndex(),this.name+"."+t},t.prototype.removeAll=function(){for(var e in this.index)u.removeItem(this.name+"."+this.index[e]),this.index[e]=void 0;u.removeItem(this.name),this.max=0},t.prototype.item=function(e){return this.child(e)},t}(l),p=["/test","/test/","-test","-test/"];var f,m={testing:f=function(){for(var e=document.location.pathname.toLowerCase(),t=0,n=p;t<n.length;t++){var r=n[t];if(!0===e.endsWith(r))return!0}return!1}(),isDevelopment:!1,localDb:new h(!0===f?"$$":"$")},v=function(){function e(){this.user=m.localDb.child("user"),this.guest=m.localDb.child("guest"),this.unit=m.localDb.child("unit")}return e.prototype.logoutClear=function(){[this.user,this.unit].forEach(function(e){return e.remove()})},e}();n.d(t,"b",function(){return r.a}),n.d(t,"a",function(){return v}),n.d(t,"c",function(){return m})},function(e,t,n){"use strict";function r(e,t){switch(e.substr(0,1)){default:return t;case"$":case"_":return}}function i(e){return JSON.stringify(e,r," ")}var o=n(1),s=function(e,t){return o.createElement(o.Fragment,null,"content: ",JSON.stringify(e))};n.d(t,"b",function(){return i}),n.d(t,"a",function(){return s})},function(e,t,n){"use strict";n.d(t,"i",function(){return h}),n.d(t,"a",function(){return f}),n.d(t,"h",function(){return m}),n.d(t,"j",function(){return g}),n.d(t,"g",function(){return w}),n.d(t,"f",function(){return E}),n.d(t,"c",function(){return C}),n.d(t,"e",function(){return k}),n.d(t,"b",function(){return P}),n.d(t,"d",function(){return x});var r=n(0),i=n(10),o=n.n(i),s=n(3),a=n(19),u=n(16),c=n(21),l=n(27),d={};function h(){for(var e in d)d[e]=void 0}var p={},f=new(function(){function e(){}return Object.defineProperty(e.prototype,"unit",{get:function(){return this._unit},set:function(e){this._unit=e},enumerable:!0,configurable:!0}),e}());function m(){return self!==window.parent}function v(e){return r.b(this,void 0,void 0,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return console.log("initSubWin: set nav.user",e),t=s.nav.user=e,Object(u.i)(t.id,t.token),[4,s.nav.showAppView()];case 1:return n.sent(),[2]}})})}function b(e,t){return r.b(this,void 0,Promise,function(){var n,i,o,s,a,c,l,d,h;return r.e(this,function(r){switch(r.label){case 0:return void 0===(n=p[e])?[2,{name:t,db:void 0,url:void 0,token:void 0}]:(i=n.unit,o=n.predefinedUnit,(i=i||o)||console.error("no unit defined in unit.json or not logined in",i),s=t.split("/"),a={unit:i,uqOwner:s[0],uqName:s[1]},console.log("uqTokenApi.uq onReceiveAppApiMessage",a),[4,u.k.uq(a)]);case 1:return c=r.sent(),l=c.db,d=c.url,h=c.token,[2,{name:t,db:l,url:d,token:h}]}})})}function y(e){return r.b(this,void 0,void 0,function(){var t,n,i,o,s,a,u;return r.e(this,function(r){if(t=e.apiName,n=e.db,i=e.url,o=e.urlTest,s=e.token,void 0===(a=N[t]))throw"error app api return";return u=l.a.getUrlOrTest(n,i,o),console.log("onAppApiReturn(message:any): url="+i+", real="+u),a.resolve({name:t,db:n,url:u,token:s}),[2]})})}function g(e){if(e){var t=e.split("-"),n=t.length;if(n>0){var r=1;f.hash=t[r++],n>0&&(f.unit=Number(t[r++])),n>1&&(f.page=t[r++]),n>2&&(f.param=t.slice(r++))}}return f}function w(){var e=document.location.hash;if(void 0!==e&&e.length>0){var t=e.lastIndexOf("#tv-");return t<0&&(t=e.lastIndexOf("#tvdebug-")),t}return-1}function E(){var e=w();if(!(e<0))return document.location.hash.substring(e)}function C(e,t,n,r){for(var i;;){if(i=Object(a.a)(),void 0===p[i]){p[i]={hash:i,unit:t};break}}if(e+="#tv-"+i+"-"+t,void 0!==n&&(e+="-"+n,void 0!==r))for(var o=0;o<r.length;o++)e+="-"+r[o];return{url:e,hash:i}}window.addEventListener("message",function(e){return r.b(this,void 0,void 0,function(){var t,n;return r.e(this,function(r){switch(r.label){case 0:switch(t=e.data,t.type){case"sub-frame-started":return[3,1];case"ws":return[3,2];case"init-sub-win":return[3,4];case"pop-app":return[3,6];case"center-api":return[3,7];case"center-api-return":return[3,9];case"app-api":return[3,10];case"app-api-return":return[3,12]}return[3,14];case 1:return function(e){var t=e.data,n=e.source;Object(c.c)(n),r=t.hash,i=document.getElementById(r),void 0!==i&&(i.hidden=!0);var r,i;var a=o.a.clone(s.nav.user);a.type="init-sub-win",n.postMessage(a,"*")}(e),[3,15];case 2:return[4,s.nav.onReceive(t.msg)];case 3:return r.sent(),[3,15];case 4:return[4,v(t)];case 5:return r.sent(),[3,15];case 6:return s.nav.navBack(),[3,15];case 7:return[4,F(e.source,t)];case 8:return r.sent(),[3,15];case 9:return function(e){var t=e.callId,n=e.result,r=S[t];if(void 0===r)return;S[t]=void 0,r.resolve(n)}(t),[3,15];case 10:return[4,b(t.hash,t.apiName)];case 11:return n=r.sent(),e.source.postMessage({type:"app-api-return",apiName:t.apiName,db:n.db,url:n.url,token:n.token},"*"),[3,15];case 12:return console.log("app-api-return: %s",JSON.stringify(t)),console.log("await onAppApiReturn(message);"),[4,y(t)];case 13:return r.sent(),[3,15];case 14:return this.console.log("message: %s",JSON.stringify(t)),[3,15];case 15:return[2]}})})});var N={};function k(e,t,n){return r.b(this,void 0,Promise,function(){var i,o,s,a,c,h,p=this;return r.e(this,function(v){switch(v.label){case 0:return m()?[3,2]:(i=function(){var e=f.unit,t=f.predefinedUnit,n=e||t;if(void 0===n)throw"no unit defined in unit.json or not logined in";return n}(),[4,u.k.uq({unit:i,uqOwner:t,uqName:n})]);case 1:return void 0===(o=v.sent()).token&&(o.token=u.f),s=o.db,a=o.url,c=o.urlTest,h=l.a.getUrlOrTest(s,a,c),console.log("realUrl: %s",h),o.url=h,d[e]=o,[2,o];case 2:return console.log("**** before buildAppUq ****",f),void 0!==N[e]?[2]:[2,new Promise(function(t,n){N[e]={resolve:function(n){return r.b(p,void 0,void 0,function(){var i,o,s,a;return r.e(this,function(r){switch(r.label){case 0:return[4,n];case 1:return i=r.sent(),o=i.db,s=i.url,a=i.token,d[e]={name:e,db:o,url:s,token:a},N[e]=void 0,console.log("**** after buildAppUq ****",f),t(),[2]}})})},reject:n},(window.opener||window.parent).postMessage({type:"app-api",apiName:e,hash:f.hash},"*")})]}})})}function P(e){return d[e]}var S={};function x(e,t,n){return r.b(this,void 0,Promise,function(){var i=this;return r.e(this,function(o){switch(o.label){case 0:return console.log("bridgeCenterApi: url=%s, method=%s",e,t),[4,new Promise(function(o,s){return r.b(i,void 0,void 0,function(){var i;return r.e(this,function(r){for(;;)if(i=Object(a.a)(),void 0===S[i]){S[i]={id:i,resolve:o,reject:s};break}return(window.opener||window.parent).postMessage({type:"center-api",callId:i,url:e,method:t,body:n},"*"),[2]})})})];case 1:return[2,o.sent()]}})})}function F(e,t){return r.b(this,void 0,Promise,function(){var n,i,o,s,a;return r.e(this,function(r){switch(r.label){case 0:return n=t.callId,i=t.url,o=t.method,s=t.body,[4,u.e.directCall(i,o,s)];case 1:return a=r.sent(),e.postMessage({type:"center-api-return",callId:n,result:a},"*"),[2]}})})}},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),i=n(1),o=n(5),s=n(6),a=n.n(s),u=n(10),c=n.n(u),l=n(39),d=100,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bottomTime=0,t.topTime=0,t.onScroll=function(e){return r.b(t,void 0,void 0,function(){var t,n,i,o,s,a,u;return r.e(this,function(r){return t=this.props,n=t.onScroll,i=t.onScrollTop,o=t.onScrollBottom,n&&this.props.onScroll(e),(s=e.target).scrollTop<30&&void 0!==i&&(a=(new Date).getTime())-this.topTime>d&&(this.topTime=a,i()),s.scrollTop+s.offsetHeight>s.scrollHeight-30&&void 0!==o&&(u=(new Date).getTime())-this.bottomTime>d&&(this.bottomTime=u,o()),[2]})})},t}return r.d(t,e),t.prototype.eachChild=function(e,t){var n=this,r=e.props;if(void 0!==r){var o=r.children;void 0!==o&&i.Children.forEach(o,function(e,r){var i=e._$scroll;i&&i(t),console.log(e.toString()),n.eachChild(e,t)})}},t.prototype.render=function(){return i.createElement("main",{className:this.props.className,onScroll:this.onScroll},this.props.children)},t}(i.Component),p=function(e){function t(t){var n,r=e.call(this,t)||this,i=t.tabs;if(void 0===i||0===i.length)return r;r.tabs=i;for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s],l=c.a.clone(u);void 0===n&&!0===l.isSelected?n=l:l.isSelected=!1,l.isMounted=!1,o.push(l)}return r.state={cur:n,tabs:o},r}return r.d(t,e),t.prototype.componentDidMount=function(){return r.b(this,void 0,void 0,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return void 0===this.tabs?[2]:void 0===(e=this.state.tabs.find(function(e){return!0===e.isSelected}))&&void 0===(e=this.state.tabs[0])?[2]:[4,e.load];case 1:return t.sent()?[4,e.load()]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.onTabClick=function(e){return r.b(this,void 0,void 0,function(){var t,n,i,o,s,a;return r.e(this,function(r){switch(r.label){case 0:if(!0===e.isSelected)return[2];for(n=this.state.tabs,i=0,o=n;i<o.length;i++)(s=o[i])===e?(s.isSelected=!0,t=s):s.isSelected=!1;return!0===t.isMounted?[3,2]:void 0===(a=t.load)?[3,2]:[4,a()];case 1:r.sent(),r.label=2;case 2:return this.setState({cur:t,tabs:n}),[2]}})})},t.prototype.onTouchStart=function(e){},t.prototype.renderTabs=function(e){var t=this,n=this.props,r=n.header,o=n.back,s=n.right,u=n.keepHeader,c=n.headerClassName,d=n.tabPosition,p=this.state.cur,f=i.createElement("div",null,this.state.tabs.map(function(e,n){var r,o,s,u=e.icon,c=e.isSelected,l=e.title,d=e.redDot,h=e.className;if(void 0!==u&&(r=i.createElement("img",{src:u})),void 0!==d){var p=d.get();p<0?(s=a()("red-dot",h),o=i.createElement("u",null)):p>0&&(s=a()("red-dot","num",h),o=i.createElement("u",null,p))}return i.createElement("div",{key:n,className:a()("va-tab",{cur:c}),onClick:function(){return t.onTabClick(e)}},r,i.createElement("div",{className:s},l,o))})),m=!1!==r&&i.createElement(l.a,{back:o,center:!0===u?r:p&&(p.header||p.title),right:s,className:c});return i.createElement("article",{className:"page-container"},m,"top"===d&&f,i.createElement("section",{className:"position-relative"},this.props.sideBar,this.state.tabs.map(function(e,t){var n=e.isSelected,r=e.isMounted,o=e.content;if(!0===n||!0===r)return e.isMounted=!0,i.createElement(h,{key:t,className:a()({invisible:!1===n}),onScroll:e.onScroll,onScrollTop:e.onScrollTop,onScrollBottom:e.onScrollBottom},"function"===typeof o?o():o)})),"top"!==d&&f,e)},t.prototype.renderSingle=function(e){var t=this.props,n=t.back,r=t.header,o=t.right,s=t.onScroll,a=t.onScrollTop,u=t.onScrollBottom,c=t.children,d=t.headerClassName,p=!1!==r&&i.createElement(l.a,{back:n,center:r,right:o,logout:this.props.logout,className:d});return i.createElement("article",{className:"page-container",onTouchStart:this.onTouchStart},p,i.createElement("section",{className:"position-relative"},this.props.sideBar,i.createElement(h,{onScroll:s,onScrollTop:a,onScrollBottom:u},c)),e)},t.prototype.render=function(){var e=this.props.footer,t=void 0!==e&&i.createElement("footer",null,e);return void 0!==this.tabs?this.renderTabs(t):this.renderSingle(t)},t=r.c([o.a],t)}(i.Component)},function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return u});var r=n(1),i=n(5),o=n(12),s=function(){function e(){}return e.prototype.render=function(e){return void 0===this.view?r.createElement("div",null,"??? viewModel \u5fc5\u987b\u5b9a\u4e49 view ???"):r.createElement(this.view,{vm:this,className:e})},e}(),a=Object(i.a)(o.a),u=function(e){return r.createElement("div",{className:"px-3 py-2"},Object(o.b)(e))}},function(e,t,n){"use strict";var r=n(0),i=n(10),o=n.n(i),s=n(13),a=n(9),u=n(11),c=["POST","PUT"],l=function(){function e(e,t,n){var i=this;this.startWait=function(){void 0!==i.ui&&i.ui.startWait()},this.endWait=function(e,t){void 0!==i.ui&&i.ui.endWait(),void 0!==t&&t("\u8bbf\u95eewebapi\u8d85\u65f6 "+e)},this.showError=function(e){return r.b(i,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return void 0===this.ui?[3,2]:[4,this.ui.showError(e)];case 1:t.sent(),t.label=2;case 2:return[2]}})})},this.hostUrl=e,this.apiToken=t,this.ui=n,this.timeout=!0===u.c.isDevelopment?5e5:5e3}return e.prototype.used=function(){this.post("",{})},e.prototype.xcall=function(e,t){return r.b(this,void 0,Promise,function(){var n,i,o,s,a,u,l;return r.e(this,function(r){switch(r.label){case 0:if(n=this.buildOptions(),i=t.headers,o=t.path,s=t.method,void 0!==i)for(u in a=n.headers,i)a.append(u,encodeURI(i[u]));return n.method=s,l=t.buildParams(),c.indexOf(s)>=0&&void 0!==l&&(n.body=JSON.stringify(l)),[4,this.innerFetch(e+o,n)];case 1:return[2,r.sent()]}})})},e.prototype.innerFetchResult=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.innerFetch(e,t)];case 1:return[2,n.sent().res]}})})},e.prototype.get=function(e,t){return void 0===t&&(t=void 0),r.b(this,void 0,Promise,function(){var n,i,o,s,a,u;return r.e(this,function(r){switch(r.label){case 0:if(t&&(n=Object.keys(t)).length>0)for(i="?",o=0,s=n;o<s.length;o++)a=s[o],void 0!==t[a]&&(e+=i+a+"="+t[a],i="&");return(u=this.buildOptions()).method="GET",[4,this.innerFetchResult(e,u)];case 1:return[2,r.sent()]}})})},e.prototype.post=function(e,t){return r.b(this,void 0,Promise,function(){var n;return r.e(this,function(r){switch(r.label){case 0:return(n=this.buildOptions()).method="POST",n.body=JSON.stringify(t),[4,this.innerFetchResult(e,n)];case 1:return[2,r.sent()]}})})},e.prototype.put=function(e,t){return r.b(this,void 0,Promise,function(){var n;return r.e(this,function(r){switch(r.label){case 0:return(n=this.buildOptions()).method="PUT",n.body=JSON.stringify(t),[4,this.innerFetchResult(e,n)];case 1:return[2,r.sent()]}})})},e.prototype.delete=function(e,t){return r.b(this,void 0,Promise,function(){var n;return r.e(this,function(r){switch(r.label){case 0:return(n=this.buildOptions()).method="DELETE",n.body=JSON.stringify(t),[4,this.innerFetchResult(e,n)];case 1:return[2,r.sent()]}})})},e.prototype.fetch=function(e,t,n,i){return r.b(this,void 0,Promise,function(){function o(e){return{channel:s,url:u,options:t,resolve:n,reject:i,error:e}}var s,u,c,l,d,h,p,f=this;return r.e(this,function(m){switch(m.label){case 0:s=this,this.startWait(),u=e,m.label=1;case 1:return m.trys.push([1,6,,8]),console.log("%s %s",t.method,u),c=setTimeout(function(){return s.endWait(e,i)},this.timeout),[4,fetch(encodeURI(u),t)];case 2:if(!1===(l=m.sent()).ok)throw clearTimeout(c),s.endWait(),console.log("call error %s",l.statusText),l.statusText;return(d=l.headers.get("content-type"))&&d.indexOf("json")>=0?[2,l.json().then(function(e){return r.b(f,void 0,void 0,function(){var t;return r.e(this,function(r){switch(r.label){case 0:return clearTimeout(c),s.endWait(),!0===e.ok?("object"!==typeof e||Array.isArray(e),[2,n(e)]):void 0!==(t=e.error)?[3,2]:[4,s.showError(o("not valid tonva json"))];case 1:return r.sent(),[3,4];case 2:return[4,s.showError(o(t))];case 3:r.sent(),i(t),r.label=4;case 4:return[2]}})})}).catch(function(e){return r.b(f,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,s.showError(o(e))];case 1:return t.sent(),[2]}})})})]:[3,3];case 3:return[4,l.text()];case 4:h=m.sent(),clearTimeout(c),s.endWait(),n(h),m.label=5;case 5:return[3,8];case 6:return"string"===typeof(p=m.sent())&&!0===p.toLowerCase().startsWith("unauthorized")?(a.b.logout(),[2]):[4,this.showError(o(p.message))];case 7:return m.sent(),[3,8];case 8:return[2]}})})},e.prototype.callFetch=function(e,t,n){return r.b(this,void 0,Promise,function(){var i,o=this;return r.e(this,function(s){switch(s.label){case 0:return(i=this.buildOptions()).method=t,i.body=n,[4,new Promise(function(t,n){return r.b(o,void 0,void 0,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.fetch(e,i,t,n)];case 1:return r.sent(),[2]}})})})];case 1:return[2,s.sent()]}})})},e.prototype.buildOptions=function(){return{headers:this.buildHeaders(),method:void 0,body:void 0}},e.prototype.buildHeaders=function(){var e=a.b.language,t=a.b.culture,n=new Headers;n.append("Content-Type","application/json;charset=UTF-8");var r=e;return t&&(r+="-"+t),n.append("Accept-Language",r),this.apiToken&&n.append("Authorization",this.apiToken),n},e}(),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.innerFetch=function(e,t){return r.b(this,void 0,Promise,function(){var n,i=this;return r.e(this,function(o){switch(o.label){case 0:return n=this.hostUrl+e,void 0===this.apiToken&&Object(s.h)()?[4,Object(s.d)(n,t.method,t.body)]:[3,2];case 1:return[2,o.sent()];case 2:return[4,new Promise(function(e,o){return r.b(i,void 0,void 0,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.fetch(n,t,e,o)];case 1:return r.sent(),[2]}})})})];case 3:return[2,o.sent()]}})})},t}(l),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.innerFetch=function(e,t){return r.b(this,void 0,Promise,function(){var n,i=this;return r.e(this,function(o){switch(o.label){case 0:return n=this.hostUrl+e,[4,new Promise(function(e,o){return r.b(i,void 0,void 0,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.fetch(n,t,e,o)];case 1:return r.sent(),[2]}})})})];case 1:return[2,o.sent()]}})})},t}(l),p=function(){function e(){}return e.prototype.startWait=function(){a.b.startWait()},e.prototype.endWait=function(){a.b.endWait()},e.prototype.showError=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return a.b.endWait(),[4,a.b.onError(e)];case 1:return t.sent(),[2]}})})},e.prototype.showUpgradeUq=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,a.b.showUpgradeUq(e,t)];case 1:return n.sent(),[2]}})})},e}(),f=n(38),m=n(27),v=n(3);n.d(t,"h",function(){return g}),n.d(t,"d",function(){return w}),n.d(t,"c",function(){return N}),n.d(t,"j",function(){return k}),n.d(t,"f",function(){return x}),n.d(t,"i",function(){return I}),n.d(t,"a",function(){return O}),n.d(t,"k",function(){return A}),n.d(t,"e",function(){return q}),n.d(t,"b",function(){return V}),n.d(t,"g",function(){return D});var b={},y={};function g(){b={},y={},E={},Object(s.i)()}var w=function(e){function t(t,n,r,i,o){var s=e.call(this,t,o)||this;return r&&(s.uqOwner=n,s.uqName=r,s.uq=n+"/"+r),s.access=i,s.showWaiting=o,s}return r.d(t,e),t.prototype.init=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,Object(s.e)(this.uq,this.uqOwner,this.uqName)];case 1:return e.sent(),[2]}})})},t.prototype.getHttpChannel=function(){return r.b(this,void 0,Promise,function(){var e,t,n,i,o,a;return r.e(this,function(r){switch(r.label){case 0:return!0===this.showWaiting||void 0===this.showWaiting?(e=b,t=new p):e=y,void 0!==(n=e[this.uq])?[2,n]:(i=Object(s.b)(this.uq))?[3,2]:[4,this.init()];case 1:r.sent(),i=Object(s.b)(this.uq),r.label=2;case 2:return o=i.url,a=i.token,this.token=a,n=new h(o,a,t),[2,e[this.uq]=n]}})})},t.prototype.loadAccess=function(){return r.b(this,void 0,Promise,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return e=void 0===this.access?"":this.access.join("|"),[4,this.get("access",{acc:e})];case 1:return[2,t.sent()]}})})},t.prototype.schema=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.get("schema/"+e)];case 1:return[2,t.sent()]}})})},t.prototype.queueModify=function(e,t,n){return r.b(this,void 0,void 0,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.post("queue-modify",{start:e,page:t,entities:n})];case 1:return[2,r.sent()]}})})},t}(f.a),E={};var C,N=function(e){function t(t){var n=e.call(this,"tv/",void 0,void 0,void 0,!0)||this;return n.unitId=t,n}return r.d(t,e),t.prototype.getHttpChannel=function(){return r.b(this,void 0,Promise,function(){var e,t,n;return r.e(this,function(r){switch(r.label){case 0:return void 0!==(e=E[this.unitId])?[2,e]:(t=E,n=this.unitId,[4,this.buildChannel()]);case 1:return[2,t[n]=r.sent()]}})})},t.prototype.buildChannel=function(){return r.b(this,void 0,Promise,function(){var e,t,n,i,o,s,a;return r.e(this,function(r){switch(r.label){case 0:return e=new p,[4,new V("tv/",void 0).unitxUq(this.unitId)];case 1:return t=r.sent(),n=t.token,i=t.db,o=t.url,s=t.urlTest,a=m.a.getUrlOrTest(i,o,s),this.token=n,[2,new h(a,n,e)]}})})},t}(w);function k(e){console.log("setCenterUrl %s",e),C=e,x=void 0,S=void 0,P=void 0}var P,S,x=void 0,F=0;function I(e,t){F=e,x=t,console.log("setCenterToken %s",t),S=void 0,P=void 0}var O=function(e){function t(t,n){return e.call(this,t,n)||this}return r.d(t,e),t.prototype.getHttpChannel=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){return[2,!0===this.showWaiting||void 0===this.showWaiting?void 0!==P?P:P=new d(C,x,new p):void 0!==S?S:S=new d(C,x)]})})},t}(f.a),T="uqTokens",A=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.localMap=u.c.localDb.map(T),t}return r.d(t,e),t.prototype.uq=function(e){return r.b(this,void 0,Promise,function(){var t,n,i,s,a,u,c,l,d,h,p,f,v,b,y;return r.e(this,function(r){switch(r.label){case 0:t=e.uqOwner,n=e.uqName,i=t+"/"+n,s=this.localMap.child(i),r.label=1;case 1:return r.trys.push([1,3,,4]),void 0!==(a=s.get())&&(f=a.unit,u=a.user,f===e.unit&&u===F||(s.remove(),a=void 0)),c=Math.floor(Date.now()/1e3),void 0!==a&&(l=a.tick,void 0!==(d=a.value)&&c-l<86400)?[2,o.a.clone(d)]:((h=o.a.clone(e)).testing=m.a.testing,[4,this.get("app-uq",h)]);case 2:if(void 0===(p=r.sent()))throw f=e.unit,v=e.uqOwner,b=e.uqName,"center get app-uq(unit="+f+", '"+v+"/"+b+"') - not exists or no unit-service";return a={unit:e.unit,user:F,tick:c,value:p},s.set(a),[2,o.a.clone(p)];case 3:throw y=r.sent(),s.remove(),y;case 4:return[2]}})})},t}(O))("tv/tie/",void 0),q=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.directCall=function(e,t,n){return this.call(e,t,n)},t}(O))("",void 0),j="appUqs",V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.local=u.c.localDb.item(j),t}return r.d(t,e),t.prototype.uqs=function(e,t){return r.b(this,void 0,Promise,function(){var n,i,o,s;return r.e(this,function(r){switch(r.label){case 0:return(i=this.local.get())&&(o=i.appOwner,s=i.appName,e===o&&t===s&&(n=i)),void 0!==n?[3,2]:[4,this.uqsPure(e,t)];case 1:(n=r.sent()).appName=t,n.appOwner=e,this.local.set(n),r.label=2;case 2:return[2,n]}})})},t.prototype.uqsPure=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.get("tie/app-uqs",{appOwner:e,appName:t})];case 1:return[2,n.sent()]}})})},t.prototype.isOkCheckUqs=function(e,t){return r.b(this,void 0,Promise,function(){var n,i,s,a,u,c,l,d;return r.e(this,function(r){switch(r.label){case 0:return[4,this.uqsPure(e,t)];case 1:if(n=r.sent(),i=this.local.get(),s=i.id,a=i.uqs,u=n.id,c=n.uqs,s!==u)return[2,!1];if(a.length!==c.length)return[2,!1];for(l=a.length,d=0;d<l;d++)if(!1===o.a.isMatch(a[d],c[d]))return[2,!1];return[2,!0]}})})},t.prototype.checkUqs=function(e,t){return r.b(this,void 0,Promise,function(){var n;return r.e(this,function(r){switch(r.label){case 0:return[4,this.isOkCheckUqs(e,t)];case 1:return!1===(n=r.sent())&&(this.local.remove(),v.nav.start()),[2,n]}})})},t.prototype.unitxUq=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.get("tie/unitx-uq",{unit:e})];case 1:return[2,t.sent()]}})})},t.prototype.changePassword=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.post("tie/change-password",e)];case 1:return[2,t.sent()]}})})},t}(O);function D(e,t){return r.b(this,void 0,Promise,function(){var n,i;return r.e(this,function(r){switch(r.label){case 0:return[4,(n=new V("tv/",void 0)).uqs(e,t)];case 1:return i=r.sent(),[4,n.checkUqs(e,t)];case 2:return r.sent(),[2,i]}})})}},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(6),s=n.n(o),a=function(e){function t(t){var n=e.call(this)||this;return n.onClick=function(){return r.b(n,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.controller.start()];case 1:return e.sent(),[2]}})})},n.controller=t,n.icon=t.icon,n.label=t.label,n}return r.d(t,e),t.prototype.render=function(e){return i.createElement("div",{className:s()("px-3","py-2","align-items-center","cursor-pointer",e),onClick:this.onClick},this.icon," \xa0 ",this.label)},t}(function(){return function(){}}());n.d(t,"a",function(){return a})},,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",i=8;function o(){for(var e=r.length,t="",n=0;n<i;n++)t+=r.charAt(Math.floor(Math.random()*e));return t}},,function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"d",function(){return c}),n.d(t,"a",function(){return l});var r,i=n(0);function o(e){r=e}function s(e){window.top.postMessage({type:"ws",msg:e},"*")}var a=function(){function e(){this.handlerSeed=1,this.anyHandlers={},this.msgHandlers={}}return e.prototype.onWsReceiveAny=function(e){var t=this.handlerSeed++;return this.anyHandlers[t]=e,t},e.prototype.onWsReceive=function(e,t){var n=this.handlerSeed++;return this.msgHandlers[n]={type:e,handler:t},n},e.prototype.endWsReceive=function(e){delete this.anyHandlers[e],delete this.msgHandlers[e]},e.prototype.receive=function(e){return i.b(this,void 0,void 0,function(){var t,n,r,o,s,a,u,c,l,d,h;return i.e(this,function(i){switch(i.label){case 0:for(r in t=e.$type,n=[],this.anyHandlers)n.push(r);o=0,i.label=1;case 1:return o<n.length?(c=n[o],[4,this.anyHandlers[c](e)]):[3,4];case 2:i.sent(),i.label=3;case 3:return o++,[3,1];case 4:for(a in s=[],this.msgHandlers)s.push(a);u=0,i.label=5;case 5:return u<s.length?(c=s[u],l=this.msgHandlers[c],d=l.type,h=l.handler,d!==t?[3,7]:[4,h(e)]):[3,8];case 6:i.sent(),i.label=7;case 7:return u++,[3,5];case 8:return[2]}})})},e}(),u=1,c=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wsBaseId="WsBridge seed "+u++,t}return i.d(t,e),t}(a)),l=function(e){function t(t,n){var r=e.call(this)||this;return r.wsBaseId="WSChannel seed "+u++,r.wsHost=t,r.token=n,r}return i.d(t,e),t.setCenterToken=function(e){t.centerToken=e},t.prototype.connect=function(){var e=this;if(void 0===this.ws){var n=this;return new Promise(function(r,o){var s=new WebSocket(e.wsHost,e.token||t.centerToken);console.log("connect webSocket %s",e.wsHost),s.onopen=function(t){console.log("webSocket connected %s",e.wsHost),n.ws=s,r()},s.onerror=function(e){o("webSocket can't open!")},s.onmessage=function(t){return i.b(e,void 0,void 0,function(){return i.e(this,function(e){switch(e.label){case 0:return[4,n.wsMessage(t)];case 1:return[2,e.sent()]}})})},s.onclose=function(e){n.ws=void 0,console.log("webSocket closed!")}})}},t.prototype.close=function(){void 0!==this.ws&&(this.ws.close(),this.ws=void 0)},t.prototype.wsMessage=function(e){return i.b(this,void 0,Promise,function(){var t,n;return i.e(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),console.log("websocket message: %s",e.data),function(e){void 0!==r&&r.postMessage({type:"ws",msg:e},"*")}(t=JSON.parse(e.data)),[4,this.receive(t)];case 1:return i.sent(),[3,3];case 2:return n=i.sent(),console.log("ws msg error: ",n),[3,3];case 3:return[2]}})})},t.prototype.sendWs=function(e){var t=this;this.connect().then(function(){t.ws.send(e)})},t}(a)},,function(e,t,n){"use strict";var r=n(0),i=n(10),o=n.n(i),s=n(8),a=(n(59),function(){function e(e,t,n){this.ver=0,this.fieldMaps={},this.uq=e,this.name=t,this.typeId=n,this.sys=this.name.indexOf("$")>=0,this.cache=this.uq.localMap.item(this.name),this.uqApi=this.uq.uqApi}return Object.defineProperty(e.prototype,"sName",{get:function(){return this.jName||this.name},enumerable:!0,configurable:!0}),e.prototype.fieldMap=function(e){void 0===e&&(e="$");var t=this.fieldMaps[e];if(void 0===t){var n=void 0;if("$"===e)n=this.fields;else if(void 0!==this.arrFields){void 0!==(r=this.arrFields.find(function(t){return t.name===e}))&&(n=r.fields)}else if(void 0!==this.returns){var r;void 0!==(r=this.returns.find(function(t){return t.name===e}))&&(n=r.fields)}if(void 0===n)return{};t={};for(var i=0,o=n;i<o.length;i++){var s=o[i];t[s.name]=s}this.fieldMaps[e]=t}return t},e.prototype.loadSchema=function(){return r.b(this,void 0,Promise,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return void 0!==this.schema?[2]:(e=this.cache.get())?[3,2]:[4,this.uq.loadEntitySchema(this.name)];case 1:e=t.sent(),t.label=2;case 2:return this.setSchema(e),this.buildFieldsTuid(),[2]}})})},e.prototype.clearSchema=function(){this.schema=void 0},e.prototype.setSchema=function(e){if(void 0!==e){var t=e.name,n=e.version;this.ver=n||0,t!==this.name&&(this.jName=t),this.cache.set(e),this.schema=e}},e.prototype.buildFieldsTuid=function(){var e=this.schema,t=e.fields,n=e.arrs,r=e.returns;this.uq.buildFieldTuid(this.fields=t),this.uq.buildArrFieldsTuid(this.arrFields=n,t),this.uq.buildArrFieldsTuid(this.returns=r,t)},e.prototype.schemaStringify=function(){return JSON.stringify(this.schema,function(e,t){if("_tuid"!==e)return t},4)},e.prototype.tuidFromName=function(e,t){if(void 0!==this.schema){var n=this.schema,r=n.fields,i=n.arrs,o=this.uq,s=e.toLowerCase();if(void 0===t)return c(s,r);if(void 0!==i){var a=t.toLowerCase(),u=i.find(function(e){return e.name===a});if(void 0!==u)return c(s,u.fields)}}function c(e,t){if(void 0!==t){var n=t.find(function(t){return t.name===e});if(void 0!==n)return o.getTuid(n.tuid)}}},e.prototype.buildParams=function(e){var t={},n=this.fields;void 0!==n&&this.buildFieldsParams(t,n,e);var r=this.arrFields;if(void 0!==r)for(var i=0,o=r;i<o.length;i++){var s=o[i],a=s.name,u=s.fields;if(void 0!==e[a]){var c=[];t[a]=c;for(var l=0,d=e;l<d.length;l++){var h=d[l],p={};this.buildFieldsParams(p,u,h),c.push(p)}}}return t},e.prototype.buildFieldsParams=function(e,t,n){for(var r=0,i=t;r<i.length;r++){var o=i[r],s=o.name,a=o.type,u=n[s],c=void 0;if("datetime"===a)c=this.buildDateTimeParam(u);else switch(typeof u){default:c=u;break;case"object":var l=o._tuid;c=void 0===l?u.id:l.getIdFromObj(u)}e[s]=c}},e.prototype.buildDateTimeParam=function(e){var t;switch(typeof e){default:throw"escape datetime field in pack data error: value="+e;case"undefined":return;case"object":t=e;break;case"string":case"number":t=new Date(e)}return Math.floor(t.getTime()/1e3)},e.prototype.buildDateParam=function(e){var t;switch(typeof e){default:throw"escape datetime field in pack data error: value="+e;case"undefined":return;case"string":return e;case"object":t=e;break;case"number":t=new Date(e)}var n=t.toISOString(),r=n.indexOf("T");return r>0?n.substr(0,r):n},e.prototype.pack=function(e){var t=[],n=this.fields;void 0!==n&&this.packRow(t,n,e);var r=this.arrFields;if(void 0!==r)for(var i=0,o=r;i<o.length;i++){var s=o[i];this.packArr(t,s.fields,e[s.name])}return t.join("")},e.prototype.escape=function(e,t){var n=e[t.name];switch(t.type){case"datetime":return this.buildDateTimeParam(n);default:switch(typeof n){default:return n;case"object":var r=t._tuid;return void 0===r?n.id:r.getIdFromObj(n);case"string":for(var i=n.length,o="",s=0,a=0;a<i;a++){switch(n.charCodeAt(a)){case 9:o+=n.substring(s,a)+"\\t",s=a+1;break;case 10:o+=n.substring(s,a)+"\\n",s=a+1}}return o+n.substring(s);case"undefined":return""}}},e.prototype.packRow=function(e,t,n){var r=t.length;if(0!==r){var i="";i+=this.escape(n,t[0]);for(var o=1;o<r;o++){var s=t[o];i+="\t"+this.escape(n,s)}e.push(i+"\n")}},e.prototype.packArr=function(e,t,n){if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r];this.packRow(e,t,o)}e.push("\n")},e.prototype.cacheFieldsInValue=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n],o=i.name,s=i._tuid;if(void 0!==s){var a=e[o];e[o]=s.boxId(a)}}},e.prototype.unpackTuidIdsOfFields=function(e,t){if(void 0===t)return e;for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];if(o)for(var s=o.length,a=0;a<s;){if(10===o.charCodeAt(a)){++a;break}var u={};a=this.unpackRow(u,t,o,a),n.push(u)}}return n},e.prototype.unpackSheet=function(e){var t={},n=this.fields,r=0;void 0!==n&&(r=this.unpackRow(t,n,e,r));var i=this.arrFields;if(void 0!==i)for(var o=0,s=i;o<s.length;o++){var a=s[o];r=this.unpackArr(t,a,e,r)}return t},e.prototype.unpackReturns=function(e){var t={},n=0,r=this.returns;if(void 0!==r)for(var i=0,o=r;i<o.length;i++){var s=o[i];n=this.unpackArr(t,s,e,n)}return t},e.prototype.unpackRow=function(e,t,n,r){for(var i=0,o=0,s=r,a=0,u=n.length,c=t.length;r<u;r++)if(i=o,9===(o=n.charCodeAt(r))){var l=t[a],d=l.name;if(8!==i){if(r>s){var h=n.substring(s,r);e[d]=this.to(e,h,l)}}else e[d]=null;if(s=r+1,++a>=c)return(r=n.indexOf("\n",s))>=0?++r:r=u,r}else if(10===o){var p=t[a],f=p.name;if(8!==i){if(r>s){h=n.substring(s,r);e[f]=this.to(e,h,p)}}else e[f]=null;return++a,++r}var m=t[a],v=m.name;if(8!==i){h=n.substring(s);e[v]=this.to(e,h,m)}return u},e.prototype.to=function(e,t,n){switch(n.type){default:return t;case"datetime":case"time":var r=Number(t);return!0===isNaN(r)?new Date(t):new Date(1e3*r);case"date":var i=t.split("-");return new Date(Number(i[0]),Number(i[1])-1,Number(i[2]));case"tinyint":case"smallint":case"int":case"bigint":case"dec":return Number(t);case"id":var o=Number(t),s=n._tuid;return void 0===s?o:s.boxId(o)}},e.prototype.unpackArr=function(e,t,n,r){for(var i=[],o=n.length,s=t.name,a=t.fields;r<o;){if(10===n.charCodeAt(r)){++r;break}var u={};i.push(u),r=this.unpackRow(u,a,n,r)}return e[s]=i,r},e}()),u=function(e){function t(t,n){var r=e.call(this,n)||this;return r.tries=0,r.entity=t,r}return r.d(t,e),t.prototype.request=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.entity.loadSchema()];case 1:return e.sent(),[4,this.innerRequest()];case 2:return[2,e.sent()]}})})},t.prototype.innerCall=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.entity.uqApi.xcall(this)];case 1:return[2,e.sent()]}})})},t.prototype.innerRequest=function(){return r.b(this,void 0,Promise,function(){var e,t,n,i;return r.e(this,function(r){switch(r.label){case 0:return[4,this.innerCall()];case 1:return e=r.sent(),t=e.$uq,n=e.$modify,i=e.res,this.entity.uq.pullModify(n),void 0===t?[2,this.xresult(i)]:[4,this.retry(t)];case 2:return[2,r.sent()]}})})},t.prototype.xresult=function(e){return e},Object.defineProperty(t.prototype,"headers",{get:function(){var e=this.entity,t=e.ver;return{uq:""+e.uq.uqVersion,en:""+t}},enumerable:!0,configurable:!0}),t.prototype.retry=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:if(++this.tries,this.tries>5)throw"can not get right uq response schema, 5 tries";return this.rebuildSchema(e),[4,this.innerRequest()];case 1:return[2,t.sent()]}})})},t.prototype.rebuildSchema=function(e){var t=e.uq,n=e.entity;void 0!==t&&this.entity.uq.buildEntities(t),void 0!==n&&this.entity.setSchema(n)},t}(s.a),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t}(u),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"query/"+this.entity.name},enumerable:!0,configurable:!0}),t.prototype.xresult=function(e){return this.entity.unpackReturns(e)},t.prototype.buildParams=function(){return this.entity.buildParams(this.params)},t}(u),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"query-page/"+this.entity.name},enumerable:!0,configurable:!0}),t.prototype.buildParams=function(){var e,t=this.params,n=t.pageStart,r=t.pageSize,i=t.params;return(e=void 0===i?{key:""}:this.entity.buildParams(i)).$pageStart=n,e.$pageSize=r,e},t.prototype.xresult=function(e){return this.entity.unpackReturns(e).$page},t}(u),h=n(4),p=n(115),f=function(){function e(e){this.queue=[],this.cache=h.m.map({},{deep:!1}),this.waitingIds=[],this.divName=void 0,this.tuidInner=e,this.initLocalArr()}return e.prototype.initLocalArr=function(){this.localArr=this.tuidInner.cache.arr(this.tuidInner.name+".ids")},e.prototype.useId=function(e,t){if(void 0!==e&&0!==e&&!1!==Object(p.isNumber)(e))if(!0!==this.cache.has(e))if(this.tuidInner.cacheTuids(!0===t?70:20),this.cache.set(e,e),this.waitingIds.findIndex(function(t){return t===e})>=0)this.moveToHead(e);else{if(this.queue.length>=1e3){var n=this.queue.shift();if(n===e)return void this.queue.push(n);if(!0===this.cache.has(n))this.cache.delete(n);else{var r=this.waitingIds.findIndex(function(e){return e===n});this.waitingIds.splice(r,1)}}this.waitingIds.push(e),this.queue.push(e)}else this.moveToHead(e)},e.prototype.moveToHead=function(e){var t=this.queue.findIndex(function(t){return t===e});this.queue.splice(t,1),this.queue.push(e)},e.prototype.getValue=function(e){return this.cache.get(e)},e.prototype.remove=function(e){this.cache.delete(e);var t=this.queue.findIndex(function(t){return t===e});this.queue.splice(t,1)},e.prototype.valueFromId=function(e){var t;switch(typeof e){case"object":t=e.id;break;case"number":t=e;break;default:return}return this.getValue(t)},e.prototype.resetCache=function(e){this.remove(e),this.useId(e)},e.prototype.cacheValue=function(e){if(void 0===e)return!1;var t=this.getIdFromObj(e);if(void 0===t)return!1;var n=this.waitingIds.findIndex(function(e){return e===t});return n>=0&&this.waitingIds.splice(n,1),this.cache.set(t,e),!0},e.prototype.getIdFromObj=function(e){return this.tuidInner.getIdFromObj(e)},e.prototype.cacheIds=function(){return r.b(this,void 0,Promise,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return 0===this.waitingIds.length?[2]:[4,this.loadIds()];case 1:return e=t.sent(),[4,this.cacheIdValues(e)];case 2:return t.sent(),[2]}})})},e.prototype.cacheIdValues=function(e){return r.b(this,void 0,void 0,function(){var t,n,i,o;return r.e(this,function(r){if(void 0===e)return[2];for(t=this.unpackTuidIds(e),n=0,i=t;n<i.length;n++)o=i[n],!1!==this.cacheValue(o)&&this.cacheTuidFieldValues(o);return[2]})})},e.prototype.modifyIds=function(e){return r.b(this,void 0,Promise,function(){var t,n,i=this;return r.e(this,function(r){switch(r.label){case 0:return[4,this.loadTuidIdsOrLocal(e)];case 1:return t=r.sent(),0===(n=t.filter(function(e){var t=e.indexOf("\t");t<0&&(t=e.length);var n=Number(e.substr(0,t));return void 0!==i.localArr.getItem(n)})).length?[2]:[4,this.cacheIdValues(n)];case 2:return r.sent(),[2]}})})},e.prototype.loadIds=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.loadTuidIdsOrLocal(this.waitingIds)];case 1:return[2,e.sent()]}})})},e.prototype.unpackTuidIds=function(e){return this.tuidInner.unpackTuidIds(e)},e.prototype.cacheTuidFieldValues=function(e){this.tuidInner.cacheTuidFieldValues(e)},e.prototype.assureObj=function(e){return r.b(this,void 0,Promise,function(){var t;return r.e(this,function(n){switch(n.label){case 0:switch(typeof this.cache.get(e)){case"object":return[2];case"number":this.cache.set(e,e)}return[4,this.loadTuidIdsOrLocal([e])];case 1:return t=n.sent(),[4,this.cacheIdValues(t)];case 2:return n.sent(),[2]}})})},e.prototype.loadTuidIdsOrLocal=function(e){return r.b(this,void 0,Promise,function(){var t,n,i,s,a,u,c,l,d,h,p;return r.e(this,function(r){switch(r.label){case 0:for(t=[],n=[],i=0,s=e;i<s.length;i++)a=s[i],void 0===(u=this.localArr.getItem(a))?n.push(a):t.push(u);return(c=n.length)>0?[4,this.tuidInner.loadTuidIds(this.divName,n)]:[3,2];case 1:for(l=r.sent(),d=function(e){var r=l[e];if(!r)return"continue";var i=r.indexOf("\t");i<0&&(i=r.length);var s=Number(r.substr(0,i));o.a.remove(n,function(e){return e===s}),t.push(r),h.localArr.setItem(s,r)},h=this,p=0;p<c;p++)d(p);for(c=n.length,p=0;p<c;p++)this.localArr.setItem(n[p],"");r.label=2;case 2:return[2,t]}})})},e}(),m=function(e){function t(t,n){var r=e.call(this,t)||this;return r.div=n,r.divName=n.name,r.localArr=t.cache.arr(t.name+".ids."+r.divName),r}return r.d(t,e),t.prototype.initLocalArr=function(){},t.prototype.getIdFromObj=function(e){return this.div.getIdFromObj(e)},t.prototype.unpackTuidIds=function(e){return this.div.unpackTuidIds(e)},t.prototype.cacheTuidFieldValues=function(e){this.div.cacheTuidFieldValues(e)},t}(f),v=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.typeName="tuid",i.isImport=!1,i}return r.d(t,e),t.prototype.setSchema=function(t){e.prototype.setSchema.call(this,t);var n=t.id;this.idName=n},t.prototype.buildTuidBox=function(){return new F(this)},t.prototype.getIdFromObj=function(e){return e[this.idName]},t.prototype.cacheIds=function(){},t.prototype.modifyIds=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return[2]})})},t}(a),b=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.idCache=new f(i),i.localArr=i.cache.arr(i.name+".whole"),!0===t.newVersion&&i.localArr.removeAll(),i}return r.d(t,e),t.prototype.setSchema=function(t){e.prototype.setSchema.call(this,t);var n=t.arrs;if(void 0!==n){this.divs={};for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o.name,a=new I(this.uq,this,s);this.divs[s]=a,a.setSchema(o),a.buildFieldsTuid()}}},t.prototype.useId=function(e,t){this.idCache.useId(e,t)},t.prototype.boxId=function(e){if("object"===typeof e)return e;this.useId(e);var t=this.uq.createBoxId;return t?t(this,e):{id:e}},t.prototype.valueFromId=function(e){return this.idCache.getValue(e)},t.prototype.assureBox=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.idCache.assureObj(e)];case 1:return t.sent(),[2]}})})},t.prototype.cacheIds=function(){if(this.idCache.cacheIds(),void 0!==this.divs)for(var e in this.divs)this.divs[e].cacheIds()},t.prototype.modifyIds=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.idCache.modifyIds(e)];case 1:return t.sent(),[2]}})})},t.prototype.cacheTuids=function(e){this.uq.cacheTuids(e)},Object.defineProperty(t.prototype,"hasDiv",{get:function(){return void 0!==this.divs},enumerable:!0,configurable:!0}),t.prototype.div=function(e){return this.divs&&this.divs[e]},t.prototype.loadTuidIds=function(e,t){return r.b(this,void 0,Promise,function(){var n;return r.e(this,function(r){switch(r.label){case 0:return[4,new w(this,{divName:e,ids:t}).request()];case 1:return(n=r.sent()).length>0&&(this.cached=!0),[2,n]}})})},t.prototype.loadMain=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return"object"===typeof e&&(e=e.id),[4,this.idCache.assureObj(e)];case 1:return t.sent(),[2,this.idCache.valueFromId(e)]}})})},t.prototype.load=function(e){return r.b(this,void 0,Promise,function(){var t,n,i,o,s,a,u,c;return r.e(this,function(r){switch(r.label){case 0:return void 0===e||0===e?[2]:("object"===typeof e&&(e=e.id),(t=this.localArr.getItem(e))?(n=JSON.parse(t),[3,3]):[3,1]);case 1:return[4,new g(this,e).request()];case 2:void 0!==(n=r.sent())&&this.localArr.setItem(e,JSON.stringify(n)),r.label=3;case 3:if(void 0===n)return[2];for(i=0,o=this.schema.fields;i<o.length;i++)s=o[i],void 0!==(a=s.tuid)&&void 0!==(u=this.uq.getTuid(a))&&(c=s.name,n[c]=u.boxId(n[c]));return this.idCache.cacheValue(n),this.cacheTuidFieldValues(n),[2,n]}})})},t.prototype.cacheTuidFieldValues=function(e){var t=this.schema,n=t.fields,r=t.arrs;if(this.cacheFieldsInValue(e,n),void 0!==r)for(var i=0,o=r;i<o.length;i++){var s=o[i],a=s.name,u=s.fields,c=e[a];if(void 0!==c)for(var l=this.div(a),d=0,h=c;d<h.length;d++){var p=h[d];l.cacheValue(p),this.cacheFieldsInValue(p,u)}}},t.prototype.buildFieldsTuid=function(){e.prototype.buildFieldsTuid.call(this);var t=this.schema.mainFields;this.uq.buildFieldTuid(this.cacheFields=t||this.fields)},t.prototype.unpackTuidIds=function(e){return this.unpackTuidIdsOfFields(e,this.cacheFields)},t.prototype.save=function(e,t){return r.b(this,void 0,Promise,function(){var n;return r.e(this,function(r){return n=new E(this,{id:e,props:t}).request(),void 0!==e&&(this.idCache.remove(e),this.localArr.removeItem(e)),[2,n]})})},t.prototype.all=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,new N(this,{}).request()];case 1:return[2,e.sent()]}})})},t.prototype.search=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.searchArr(void 0,e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.searchArr=function(e,t,n,i){return r.b(this,void 0,Promise,function(){var o,s,a,u,c;return r.e(this,function(r){switch(r.label){case 0:return[4,new C(this,{arr:void 0,owner:e,key:t,pageStart:n,pageSize:i}).request()];case 1:for(o=r.sent(),s=this.schema.fields,a=0,u=o;a<u.length;a++)c=u[a],this.cacheFieldsInValue(c,s);return[2,o]}})})},t.prototype.loadArr=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return void 0===n||0===n?[2]:[4,new k(this,{arr:e,owner:t,id:n}).request()];case 1:return[2,r.sent()]}})})},t.prototype.saveArr=function(e,t,n,i){return r.b(this,void 0,void 0,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,new P(this,{arr:e,owner:t,id:n,props:i}).request()];case 1:return[2,r.sent()]}})})},t.prototype.posArr=function(e,t,n,i){return r.b(this,void 0,void 0,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,new S(this,{arr:e,owner:t,id:n,order:i}).request()];case 1:return[2,r.sent()]}})})},t}(v),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t}(u),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.method="GET",t}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"tuid/"+this.entity.name+"/"+this.params},enumerable:!0,configurable:!0}),t}(y),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){var e=this.params.divName;return"tuidids/"+this.entity.name+"/"+(void 0!==e?e:"$")},enumerable:!0,configurable:!0}),t.prototype.buildParams=function(){return this.params.ids},t.prototype.xresult=function(e){return e.split("\n")},t}(y),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"tuid/"+this.entity.name},enumerable:!0,configurable:!0}),t.prototype.buildParams=function(){var e=this.entity.schema,t=e.fields,n=e.arrs,r=this.params,i=r.id,o=r.props,s={$id:i};if(this.transParams(s,o,t),void 0!==n)for(var a=0,u=n;a<u.length;a++){var c=u[a],l=c.name,d=[],h=c.fields,p=o[l];if(void 0!==p)for(var f=0,m=p;f<m.length;f++){var v=m[f],b={};this.transParams(b,v,h),d.push(b)}s[l]=d}return s},t.prototype.transParams=function(e,t,n){if(void 0!==t)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o.name,a=o.tuid,u=o.type,c=t[s];if(void 0!==a)"object"===typeof c&&null!==c&&(c=c.id);else switch(u){case"date":c=this.entity.buildDateParam(c);break;case"datetime":c=this.entity.buildDateTimeParam(c)}e[s]=c}},t}(y),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"tuids/"+this.entity.name},enumerable:!0,configurable:!0}),t}(y),N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.method="GET",t}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"tuid-all/"+this.entity.name},enumerable:!0,configurable:!0}),t}(y),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.method="GET",t}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){var e=this.params,t=e.arr,n=e.owner,r=e.id;return"tuid-arr/"+this.entity.name+"/"+n+"/"+t+"/"+r},enumerable:!0,configurable:!0}),t}(y),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){var e=this.params,t=e.arr,n=e.owner;return"tuid-arr/"+this.entity.name+"/"+n+"/"+t+"/"},enumerable:!0,configurable:!0}),t.prototype.buildParams=function(){var e=this.params,t=e.id,n=e.props,r=o.a.clone(n);return r.$id=t,r},t}(y),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){var e=this.params,t=e.arr,n=e.owner;return"tuid-arr-pos/"+this.entity.name+"/"+n+"/"+t+"/"},enumerable:!0,configurable:!0}),t.prototype.buildParams=function(){var e=this.params;return{bid:e.id,$order:e.order}},t}(y),x=function(e){function t(t,n,r,i){var o=e.call(this,t,n,r)||this;return o.isImport=!0,o.from=i,o}return r.d(t,e),t.prototype.setFrom=function(e){this.tuidLocal=e},t.prototype.useId=function(e){this.tuidLocal.useId(e)},t.prototype.boxId=function(e){return this.tuidLocal.boxId(e)},t.prototype.valueFromId=function(e){return this.tuidLocal.valueFromId(e)},t.prototype.assureBox=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.tuidLocal.assureBox(e)];case 1:return t.sent(),[2]}})})},Object.defineProperty(t.prototype,"hasDiv",{get:function(){return this.tuidLocal.hasDiv},enumerable:!0,configurable:!0}),t.prototype.div=function(e){return this.tuidLocal.div(e)},t.prototype.loadMain=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.tuidLocal.loadMain(e)];case 1:return[2,t.sent()]}})})},t.prototype.load=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.tuidLocal.load(e)];case 1:return[2,t.sent()]}})})},t.prototype.save=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.tuidLocal.save(e,t)];case 1:return[2,n.sent()]}})})},t.prototype.all=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.tuidLocal.all()];case 1:return[2,e.sent()]}})})},t.prototype.search=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.tuidLocal.search(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.searchArr=function(e,t,n,i){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.tuidLocal.searchArr(e,t,n,i)];case 1:return[2,r.sent()]}})})},t.prototype.loadArr=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.tuidLocal.loadArr(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.saveArr=function(e,t,n,i){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.tuidLocal.saveArr(e,t,n,i)];case 1:return r.sent(),[2]}})})},t.prototype.posArr=function(e,t,n,i){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.tuidLocal.posArr(e,t,n,i)];case 1:return r.sent(),[2]}})})},t}(v),F=function(){function e(e){this.ownerField=void 0,this.tuid=e}return e.prototype.boxId=function(e){return this.tuid.boxId(e)},e.prototype.getIdFromObj=function(e){return this.tuid.getIdFromObj(e)},e.prototype.useId=function(e){return this.tuid.useId(e)},e.prototype.showInfo=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return alert("showInfo not implemented"),[2]})})},e}(),I=function(e){function t(t,n,r){var i=e.call(this,t,r,0)||this;return i.typeName="div",i.tuid=n,i.idName="id",i.idCache=new m(n,i),i}return r.d(t,e),Object.defineProperty(t.prototype,"owner",{get:function(){return this.tuid},enumerable:!0,configurable:!0}),t.prototype.buildFieldsTuid=function(){e.prototype.buildFieldsTuid.call(this);var t=this.schema.mainFields;this.uq.buildFieldTuid(this.cacheFields=t)},t.prototype.buildTuidDivBox=function(e){return new O(this.tuid,this,e)},t.prototype.getIdFromObj=function(e){return e[this.idName]},t.prototype.cacheValue=function(e){this.idCache.cacheValue(e)},t.prototype.useId=function(e,t){this.idCache.useId(e,t)},t.prototype.valueFromId=function(e){return this.idCache.getValue(e)},t.prototype.assureBox=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.idCache.assureObj(e)];case 1:return t.sent(),[2]}})})},t.prototype.cacheIds=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.idCache.cacheIds()];case 1:return e.sent(),[2]}})})},t.prototype.cacheTuidFieldValues=function(e){var t=this.schema.fields;this.cacheFieldsInValue(e,t)},t.prototype.unpackTuidIds=function(e){return this.unpackTuidIdsOfFields(e,this.cacheFields)},t}(b),O=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.div=n,i.ownerField=r,i}return r.d(t,e),t.prototype.boxId=function(e){return this.div.boxId(e)},t.prototype.getIdFromObj=function(e){return this.div.getIdFromObj(e)},t.prototype.useId=function(e){return this.div.useId(e)},t}(F),T=function(){function e(e){var t=this;this.loadIds=function(){t.clearCacheTimer();var e=t.uq.tuids;for(var n in e){e[n].cacheIds()}},this.uq=e}return e.prototype.cacheTuids=function(e){this.clearCacheTimer(),this.cacheTimer=setTimeout(this.loadIds,e)},e.prototype.clearCacheTimer=function(){void 0!==this.cacheTimer&&(clearTimeout(this.cacheTimer),this.cacheTimer=void 0)},e.prototype.pullModify=function(e){if(void 0!==e){var t=Math.floor(Date.now()/1e3);void 0===this.modifyMax&&(this.modifyMax=this.uq.localModifyMax.get(),void 0===this.modifyMax&&(this.modifyMax={max:e,seconds:t},this.uq.localModifyMax.set(this.modifyMax)));var n=this.modifyMax,r=n.max;if(!(t-n.seconds<3600)&&!(e<=r)){var i=[],o=this.uq.tuids;for(var s in o)i.push(s);0!==i.length&&(this.modifyMax.seconds=t,this.innerPullModify(i.join("\t")))}}},e.prototype.innerPullModify=function(e){return r.b(this,void 0,Promise,function(){var t,n,i,o,s,a,u,c,l,d,h,p,f,m,v,b,y,g,w,E,C,N;return r.e(this,function(r){switch(r.label){case 0:return t=this.uq,n=t.uqApi,i=t.tuids,o=this.modifyMax.max,[4,n.queueModify(o,30,e)];case 1:for(s=r.sent(),a={},u=0,c=0,l=s.queue;c<l.length;c++)d=l[c],h=d.id,p=d.entity,f=d.key,void 0!==(E=i[p])&&(void 0===(m=a[p])&&(m=a[p]={tuid:E,ids:[]}),m.ids.push(f),h>u&&(u=h));for(b in v=[],a)v.push(b);y=0,r.label=2;case 2:return y<v.length?(g=v[y],w=a[g],E=w.tuid,C=w.ids,[4,E.modifyIds(C)]):[3,5];case 3:r.sent(),r.label=4;case 4:return y++,[3,2];case 5:return N=Math.floor(Date.now()/1e3),this.modifyMax={max:u,seconds:N},this.uq.localModifyMax.set(this.modifyMax),[2]}})})},e}(),A=n(1),q=n(5),j=function(e,t,n){return A.createElement(A.Fragment,null,e,": ",function(e){var t="{";if(void 0===e)return"undefined";for(var n in e){var r=e[n];if(t+=n+": ",void 0===r)t+="undefined";else if(null===r)t+="null";else switch(typeof r){default:t+=r;break;case"function":t+="function";break;case"object":t+="{obj}"}t+=", "}return t+"}"}(t))};var V=function(){function e(e,t,n){this.id=e,this.tuid=t,this.ui=n,this.isUndefined=void 0===this.tuid}return Object.defineProperty(e.prototype,"obj",{get:function(){return this.tuid.valueFromId(this.id)},enumerable:!0,configurable:!0}),e.prototype.render=function(e,t){if(void 0!==this.id&&null!==this.id){var n=this.boxName,r=this.obj;if(!0===this.isUndefined)return void 0!==e?e(r,t):j(n,r,t);switch(typeof r){case"undefined":return A.createElement("del",{className:"text-black-50"},n," undefined");case"number":return A.createElement("del",{className:"text-black-50"},n," ",this.id)}if(void 0===e&&(e=this.ui),void 0!==e&&("function"!==typeof e&&(e=e.content),void 0!==e)){var i=e(r);return void 0!==i?i:A.createElement("del",{className:"text-danger"},n," ",this.id)}return j(n,r)}},Object.defineProperty(e.prototype,"boxName",{get:function(){return this.tuid.name},enumerable:!0,configurable:!0}),e.prototype.assure=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.tuid.assureBox(this.id)];case 1:return e.sent(),[2]}})})},e}();var D=Object(q.a)(function(e){var t=e.tuidValue,n=e.ui,r=e.x,i=e.nullUI;if(void 0===t)return void 0===i?A.createElement(A.Fragment,null,"[undefined]"):i();if(null===t)return void 0===i?A.createElement(A.Fragment,null,"[null]"):i();var o=typeof t;switch(o){default:if(void 0===n)return A.createElement(A.Fragment,null,o,"-",t);var s=n(t,r);return void 0!==s?s:A.createElement(A.Fragment,null,t);case"object":var a=function(e,t,n){var r,i=e;switch(typeof e){case"undefined":r=A.createElement(A.Fragment,null,"boxId undefined");break;case"number":r=A.createElement(A.Fragment,null,"id:",e);break;default:if("function"!==typeof i.render){if(void 0!==t)return t(e,n);r=j(e.boxName,e,n)}}return void 0!==r?A.createElement("del",{className:"text-danger"},r):i.render(t,n)}(t,n,r);return void 0!==a?a:void 0===i?A.createElement(A.Fragment,null,"id null"):i();case"number":return A.createElement(A.Fragment,null,"id...",t)}}),R=function(e,t,n,r){return A.createElement(D,{tuidValue:e,ui:t,x:n,nullUI:r})},L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"typeName",{get:function(){return"action"},enumerable:!0,configurable:!0}),t.prototype.submit=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,new U(this,e).request()];case 1:return[2,t.sent()]}})})},t.prototype.submitReturns=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,new M(this,e).request()];case 1:return[2,t.sent()]}})})},t}(a),U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"action/"+this.entity.name},enumerable:!0,configurable:!0}),t.prototype.buildParams=function(){return{data:this.entity.pack(this.params)}},t}(c),M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"action/"+this.entity.name+"/returns"},enumerable:!0,configurable:!0}),t.prototype.xresult=function(e){for(var t=this.entity.returns,n=t.length,r={},i=0;i<n;i++){r[t[i].name]=e[i]}return r},t}(U),B=n(46),W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"typeName",{get:function(){return"sheet"},enumerable:!0,configurable:!0}),t.prototype.setSchema=function(t){e.prototype.setSchema.call(this,t),this.states=t.states},t.prototype.build=function(e){this.states=[];for(var t=0,n=e.ops;t<n.length;t++){var r=n[t];this.states.push({name:r,actions:void 0})}},t.prototype.createSheetState=function(e,t){var n={name:e,actions:[]},r=n.actions;for(var i in t){var o={name:i};r.push(o)}return n},t.prototype.save=function(e,t){return r.b(this,void 0,Promise,function(){var n;return r.e(this,function(r){switch(r.label){case 0:return n=this.uq.id,[4,new z(this,{app:n,discription:e,data:t}).request()];case 1:return[2,r.sent()]}})})},t.prototype.action=function(e,t,n,i){return r.b(this,void 0,void 0,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,new K(this,{id:e,flow:t,state:n,action:i}).request()];case 1:return[2,r.sent()]}})})},t.prototype.unpack=function(e){var t=e[0][0];return{brief:t,data:this.unpackSheet(t.data),flows:e[1]}},t.prototype.getSheet=function(e){return r.b(this,void 0,Promise,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return[4,new Q(this,e).request()];case 1:return 0!==(t=n.sent())[0].length?[3,3]:[4,this.getArchive(e)];case 2:return[2,n.sent()];case 3:return[2,this.unpack(t)]}})})},t.prototype.getArchive=function(e){return r.b(this,void 0,Promise,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return[4,new J(this,e).request()];case 1:return t=n.sent(),[2,this.unpack(t)]}})})},t.prototype.getArchives=function(e,t){return r.b(this,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,new G(this,{pageStart:e,pageSize:t}).request()];case 1:return[2,n.sent()]}})})},t.prototype.getStateSheets=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,new X(this,{state:e,pageStart:t,pageSize:n}).request()];case 1:return[2,r.sent()]}})})},t.prototype.createPageStateItems=function(){return new $(this)},t.prototype.stateSheetCount=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,new Z(this,void 0).request()];case 1:return[2,e.sent()]}})})},t.prototype.mySheets=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,new Y(this,{state:e,pageStart:t,pageSize:n}).request()];case 1:return[2,r.sent()]}})})},t}(a),H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"sheet/"+this.entity.name+"/"+this.suffix},enumerable:!0,configurable:!0}),t}(u),z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"sheet/"+this.entity.name},enumerable:!0,configurable:!0}),t.prototype.buildParams=function(){var e=this.params,t=e.app,n=e.discription,r=e.data;return{app:t,discription:n,data:this.entity.pack(r)}},t}(H),K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.method="PUT",t}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"sheet/"+this.entity.name},enumerable:!0,configurable:!0}),t}(H),Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.method="GET",t}return r.d(t,e),t.prototype.buildParams=function(){},Object.defineProperty(t.prototype,"path",{get:function(){return"sheet/"+this.entity.name+"/get/"+this.params},enumerable:!0,configurable:!0}),t}(H),J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.method="GET",t}return r.d(t,e),t.prototype.buildParams=function(){},Object.defineProperty(t.prototype,"path",{get:function(){return"sheet/"+this.entity.name+"/archive/"+this.params},enumerable:!0,configurable:!0}),t}(H),G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.suffix="archives",t}return r.d(t,e),t}(H),X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.suffix="states",t}return r.d(t,e),t}(H),Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.method="GET",t.suffix="statecount",t}return r.d(t,e),t.prototype.xresult=function(e){return this.entity.states.map(function(t){var n=t.name,r=0,i=e.find(function(e){return e.state===n});return void 0!==i&&(r=i.count),{state:n,count:r}})},t}(H),Y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.suffix="my-sheets",t}return r.d(t,e),t.prototype.xresult=function(e){return e},t}(H),$=function(e){function t(t){var n=e.call(this,!0)||this;return n.sheet=t,n.pageSize=10,n}return r.d(t,e),t.prototype.load=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.sheet.getStateSheets(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.setPageStart=function(e){this.pageStart=void 0===e?0:e.id},t}(B.a),_=n(11),ee=(function(e){function t(t,n,r){var i=e.call(this)||this;return i.query=t,void 0!==n&&(i.pageSize=n),void 0!==r&&(i.firstSize=r),i}r.d(t,e),t.prototype.onLoad=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return void 0!==this.query.schema?[3,2]:[4,this.query.loadSchema()];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.load=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return void 0===t&&(t=0),[4,this.query.page(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.setPageStart=function(e){var t=this.query.schema;if(void 0!==t){var n=t.returns.find(function(e){return"$page"===e.name});if(void 0!==n){var r=n.order;if(void 0!==r){var i,o=r.field,s=r.type,a=r.asc;if(void 0!==e&&(i=e[o]),!1===a)switch(this.appendPosition="head",s){default:case"tinyint":case"smallint":case"int":case"bigint":case"dec":i=999999999999;break;case"date":case"datetime":i=void 0;break;case"char":i=""}else switch(this.appendPosition="tail",s){default:case"tinyint":case"smallint":case"int":case"bigint":case"dec":i=0;break;case"date":case"datetime":i="1970-1-1";break;case"char":i=""}this.pageStart=i}}}}}(_.b),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"typeName",{get:function(){return"query"},enumerable:!0,configurable:!0}),t.prototype.setSchema=function(t){e.prototype.setSchema.call(this,t);var n=t.returns;this.isPaged=n&&void 0!==n.find(function(e){return"$page"===e.name})},t.prototype.resetPage=function(e,t){this.pageStart=void 0,this.pageSize=e,this.params=t,this.more=!1,this.list=void 0},Object.defineProperty(t.prototype,"hasMore",{get:function(){return this.more},enumerable:!0,configurable:!0}),t.prototype.loadPage=function(){return r.b(this,void 0,Promise,function(){var e,t,n,i;return r.e(this,function(r){switch(r.label){case 0:if(void 0===this.pageSize)throw"call resetPage(size:number, params:any) first";if(void 0!==this.pageStart)switch(this.startField.type){default:t=this.pageStart;break;case"date":case"time":case"datetime":t=this.pageStart.getTime()}return[4,this.page(this.params,t,this.pageSize+1)];case 1:return n=r.sent(),this.list=h.m.array([],{deep:!1}),void 0!==n&&(n.length>this.pageSize?(this.more=!0,n.pop(),i=this.returns.find(function(e){return"$page"===e.name}),this.startField=i.fields[0],this.pageStart=n[n.length-1][this.startField.name]):this.more=!1,(e=this.list).push.apply(e,n)),[2]}})})},t.prototype.page=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,new d(this,{pageStart:t,pageSize:n+1,params:e}).request()];case 1:return[2,r.sent()]}})})},t.prototype.query=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,new l(this,e).request()];case 1:return[2,t.sent()]}})})},t.prototype.table=function(e){return r.b(this,void 0,Promise,function(){var t,n;return r.e(this,function(r){switch(r.label){case 0:return[4,this.query(e)];case 1:for(n in t=r.sent())return[2,t[n]];return[2]}})})},t.prototype.obj=function(e){return r.b(this,void 0,Promise,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return[4,this.table(e)];case 1:return(t=n.sent()).length>0?[2,t[0]]:[2]}})})},t.prototype.scalar=function(e){return r.b(this,void 0,Promise,function(){var t,n;return r.e(this,function(r){switch(r.label){case 0:return[4,this.obj(e)];case 1:for(n in t=r.sent())return[2,t[n]];return[2]}})})},r.c([h.m],t.prototype,"list",void 0),t}(a)),te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.queryApiName="book",t}return r.d(t,e),Object.defineProperty(t.prototype,"typeName",{get:function(){return"book"},enumerable:!0,configurable:!0}),t}(ee),ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.queryApiName="history",t}return r.d(t,e),Object.defineProperty(t.prototype,"typeName",{get:function(){return"history"},enumerable:!0,configurable:!0}),t}(ee),re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actions={},t.queries={},t}return r.d(t,e),Object.defineProperty(t.prototype,"typeName",{get:function(){return"map"},enumerable:!0,configurable:!0}),t.prototype.setSchema=function(t){e.prototype.setSchema.call(this,t),this.schemaFrom=this.schema.from;var n=t.actions,r=t.queries,i=t.keys;for(var o in this.uq.buildFieldTuid(this.keys=i),n){var s=n[o],a=s.name,u=this.uq.newAction(a,void 0);u.setSchema(s),u.buildFieldsTuid(),this.actions[o]=u}for(var o in r){var c=r[o],l=(a=c.name,this.uq.newQuery(a,void 0));l.setSchema(c),l.buildFieldsTuid(),this.queries[o]=l}},t.prototype.add=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,new oe(this,e).request()];case 1:return[2,t.sent()]}})})},t.prototype.del=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,new se(this,e).request()];case 1:return[2,t.sent()]}})})},t.prototype.all=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,new ae(this,void 0).request()];case 1:return[2,e.sent()]}})})},t.prototype.page=function(e,t,n){return r.b(this,void 0,void 0,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,new ue(this,{pageStart:t,pageSize:n,param:e}).request()];case 1:return[2,r.sent()]}})})},t.prototype.query=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,new ce(this,e).request()];case 1:return[2,t.sent()]}})})},t.prototype.table=function(e){return r.b(this,void 0,Promise,function(){var t,n;return r.e(this,function(r){switch(r.label){case 0:return[4,this.query(e)];case 1:for(n in t=r.sent())return[2,t[n]];return[2]}})})},t.prototype.obj=function(e){return r.b(this,void 0,Promise,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return[4,this.table(e)];case 1:return(t=n.sent()).length>0?[2,t[0]]:[2]}})})},t.prototype.scalar=function(e){return r.b(this,void 0,Promise,function(){var t,n;return r.e(this,function(r){switch(r.label){case 0:return[4,this.obj(e)];case 1:for(n in t=r.sent())return[2,t[n]];return[2]}})})},t}(a),ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.innerCall=function(){return r.b(this,void 0,Promise,function(){var e,t;return r.e(this,function(n){switch(n.label){case 0:return e=this.getCaller(this.params),[4,this.entity.uqApi.xcall(e)];case 1:return t=n.sent(),[2,{res:e.xresult(t.res)}]}})})},t.prototype.buildParams=function(){return e.prototype.buildParams.call(this)},t}(u),oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.getCaller=function(e){return new le(this.entity,this.entity.actions.add,e)},t}(ie),se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.getCaller=function(e){return new de(this.entity,this.entity.actions.add,e)},t}(ie),ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.getCaller=function(e){return new he(this.entity,this.entity.queries.all,e)},t}(ie),ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.getCaller=function(e){return new pe(this.entity,this.entity.queries.page,e)},t}(ie),ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.getCaller=function(e){return new fe(this.entity,this.entity.queries.query,e)},t}(ie),le=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.map=t,i}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"map/"+this.map.name+"/add"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headers",{get:function(){},enumerable:!0,configurable:!0}),t}(U),de=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.map=t,i}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"map/"+this.map.name+"/del"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headers",{get:function(){},enumerable:!0,configurable:!0}),t}(U),he=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.map=t,i}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"map/"+this.map.name+"/all"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headers",{get:function(){},enumerable:!0,configurable:!0}),t}(d),pe=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.map=t,i}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"map/"+this.map.name+"/page"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headers",{get:function(){},enumerable:!0,configurable:!0}),t}(d),fe=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.map=t,i}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"map/"+this.map.name+"/query"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headers",{get:function(){},enumerable:!0,configurable:!0}),t}(l),me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.queryApiName="pending",t}return r.d(t,e),Object.defineProperty(t.prototype,"typeName",{get:function(){return"pending"},enumerable:!0,configurable:!0}),t}(ee);function ve(e){switch(e){case"tinyint":case"smallint":case"int":case"bigint":case"dec":return 0;case"char":case"text":return"";case"datetime":case"date":return"2000-1-1";case"time":return"0:00"}}var be=function(){function e(e,t,n,r){var i=this;this.actions={},this.sheets={},this.queries={},this.books={},this.maps={},this.histories={},this.pendings={},this.tuids={},this.createBoxIdFromTVs=function(e,t){var n=e.name;e.sName;return new V(t,e,i.tvs[n])},this.tuidArr=[],this.actionArr=[],this.sheetArr=[],this.queryArr=[],this.bookArr=[],this.mapArr=[],this.historyArr=[],this.pendingArr=[],this.createBoxId=n,void 0===n&&(this.createBoxId=this.createBoxIdFromTVs,this.tvs=r||{});var o=t.id,a=t.uqOwner,u=t.uqName,c=t.access,l=t.newVersion;this.newVersion=l,this.uqOwner=a,this.uqName=u,this.id=o,this.name=a+"/"+u,this.uqVersion=0,this.localMap=e.localMap.map(this.name),this.localModifyMax=this.localMap.child("$modifyMax"),this.localAccess=this.localMap.child("$access");var d;document.location.hash;d=null===c||void 0===c||"*"===c?[]:c.split(";").map(function(e){return e.trim()}).filter(function(e){return e.length>0}),"$$$/$unitx"===this.name?this.uqApi=new s.d(s.g.unit):this.uqApi=new s.e("tv/",a,u,d,!0),this.tuidsCache=new T(this)}return Object.defineProperty(e.prototype,"entities",{get:function(){return o.a.merge({},this.actions,this.sheets,this.queries,this.books,this.maps,this.histories,this.pendings,this.tuids)},enumerable:!0,configurable:!0}),e.prototype.tuid=function(e){return this.tuids[e.toLowerCase()]},e.prototype.tuidDiv=function(e,t){var n=this.tuids[e.toLowerCase()];return n&&n.div(t.toLowerCase())},e.prototype.action=function(e){return this.actions[e.toLowerCase()]},e.prototype.sheet=function(e){return this.sheets[e.toLowerCase()]},e.prototype.query=function(e){return this.queries[e.toLowerCase()]},e.prototype.book=function(e){return this.books[e.toLowerCase()]},e.prototype.map=function(e){return this.maps[e.toLowerCase()]},e.prototype.history=function(e){return this.histories[e.toLowerCase()]},e.prototype.pending=function(e){return this.pendings[e.toLowerCase()]},e.prototype.sheetFromTypeId=function(e){for(var t in this.sheets){var n=this.sheets[t];if(n.typeId===e)return n}},e.prototype.init=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.uqApi.init()];case 1:return e.sent(),[2]}})})},e.prototype.loadEntities=function(){return r.b(this,void 0,Promise,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),(e=this.localAccess.get())?[3,2]:[4,this.uqApi.loadAccess()];case 1:e=t.sent(),t.label=2;case 2:return e?(this.buildEntities(e),"common"===this.uqName&&this.pullModify(12),[3,4]):[2];case 3:return[2,t.sent()];case 4:return[2]}})})},e.prototype.buildEntities=function(e){this.localAccess.set(e);var t=e.access,n=e.tuids,r=e.version;this.uqVersion=r,this.buildTuids(n),this.buildAccess(t)},e.prototype.loadEntitySchema=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.uqApi.schema(e)];case 1:return[2,t.sent()]}})})},e.prototype.getTuid=function(e){return this.tuids[e]},e.prototype.buildTuids=function(e){for(var t in e){(i=e[t]).name;var n=i.typeId,r=i.from;this.newTuid(t,n,r).sys=!0}for(var t in e){var i=e[t];this.getTuid(t).setSchema(i)}for(var t in this.tuids){this.tuids[t].buildFieldsTuid()}},e.prototype.buildAccess=function(e){for(var t in e){var n=e[t];switch(typeof n){case"string":this.fromType(t,n);break;case"object":this.fromObj(t,n)}}},e.prototype.cacheTuids=function(e){this.tuidsCache.cacheTuids(e)},e.prototype.newAction=function(e,t){var n=this.actions[e];return void 0!==n?n:(n=this.actions[e]=new L(this,e,t),this.actionArr.push(n),n)},e.prototype.newTuid=function(e,t,n){var r=this.tuids[e];return void 0!==r?r:(r=void 0!==n?new x(this,e,t,n):new b(this,e,t),this.tuids[e]=r,this.tuidArr.push(r),r)},e.prototype.newQuery=function(e,t){var n=this.queries[e];return void 0!==n?n:(n=this.queries[e]=new ee(this,e,t),this.queryArr.push(n),n)},e.prototype.newBook=function(e,t){var n=this.books[e];return void 0!==n?n:(n=this.books[e]=new te(this,e,t),this.bookArr.push(n),n)},e.prototype.newMap=function(e,t){var n=this.maps[e];return void 0!==n?n:(n=this.maps[e]=new re(this,e,t),this.mapArr.push(n),n)},e.prototype.newHistory=function(e,t){var n=this.histories[e];if(void 0===n)return n=this.histories[e]=new ne(this,e,t),this.historyArr.push(n),n},e.prototype.newPending=function(e,t){var n=this.pendings[e];if(void 0===n)return n=this.pendings[e]=new me(this,e,t),this.pendingArr.push(n),n},e.prototype.newSheet=function(e,t){var n=this.sheets[e];return void 0!==n?n:(n=this.sheets[e]=new W(this,e,t),this.sheetArr.push(n),n)},e.prototype.fromType=function(e,t){var n=t.split("|");t=n[0];var r=Number(n[1]);switch(t){case"tuid":break;case"action":this.newAction(e,r);break;case"query":this.newQuery(e,r);break;case"book":this.newBook(e,r);break;case"map":this.newMap(e,r);break;case"history":this.newHistory(e,r);break;case"sheet":this.newSheet(e,r);break;case"pending":this.newPending(e,r)}},e.prototype.fromObj=function(e,t){switch(t.$){case"sheet":this.buildSheet(e,t)}},e.prototype.buildSheet=function(e,t){var n=this.sheets[e];void 0===n&&(n=this.newSheet(e,t.id)),n.build(t)},e.prototype.buildFieldTuid=function(e,t){if(void 0!==e){for(var n=0,r=e;n<r.length;n++){var i=(l=r[n]).tuid;if(void 0!==i){var o=this.getTuid(i);void 0!==o&&(l._tuid=o.buildTuidBox())}}for(var s=function(n){var r=n.owner;if(void 0===r)return"continue";var i=e.find(function(e){return e.name===r});if(void 0===i&&(void 0!==t&&(i=t.find(function(e){return e.name===r})),void 0===i))throw"owner field "+r+" is undefined";var o=n.arr,s=n.tuid,u=a.getTuid(i._tuid.tuid.name);if(void 0===u)return"continue";var c=u.div(o||s);if(n._tuid=c&&c.buildTuidDivBox(i),void 0===n._tuid)throw"owner field ${owner} is not tuid"},a=this,u=0,c=e;u<c.length;u++){var l;s(l=c[u])}}},e.prototype.buildArrFieldsTuid=function(e,t){if(void 0!==e)for(var n=0,r=e;n<r.length;n++){var i=r[n].fields;void 0!==i&&this.buildFieldTuid(i,t)}},e.prototype.pullModify=function(e){this.tuidsCache.pullModify(e)},e}(),ye=function(){function e(e,t){this.tvs=t||{},this.buildTVs(),this.collection={};var n=e.split("/");if(2!==n.length)throw"tonvaApp name must be / separated, owner/app";this.appOwner=n[0],this.appName=n[1],this.localMap=_.c.localDb.map(e),this.localData=this.localMap.child("uqData")}return e.prototype.addUq=function(e){this.collection[e.name]=e},e.prototype.buildTVs=function(){for(var e in this.tvs){var t=this.tvs[e];if(void 0!==t){var n=e.toLowerCase();if(n!==e)for(var r in this.tvs[n]=t,t){var i=t[r];if(void 0!==i){var o=r.toLowerCase();o!==r&&(t[o]=i)}}}}},e.prototype.init=function(e){return r.b(this,void 0,Promise,function(){var t,n,i,o,s,a,u,c,l;return r.e(this,function(r){switch(r.label){case 0:for(t=[],n=0,i=e;n<i.length;n++)o=i[n],o.id,s=o.uqOwner,a=o.uqName,o.access,u=s+"/"+a,c=new be(this,o,void 0,this.tvs[u]||this.tvs[a]),this.collection[u]=c,(l=u.toLowerCase())!==u&&(this.collection[l]=c),t.push(c.init());return[4,Promise.all(t)];case 1:return r.sent(),[2]}})})},e.prototype.load=function(){return r.b(this,void 0,Promise,function(){var e,t,n,i,o,s,a,u,c;return r.e(this,function(r){switch(r.label){case 0:for(n in e=[],t=[],this.collection)i=this.collection[n],t.push(i.loadEntities());return[4,Promise.all(t)];case 1:for(o=r.sent(),s=0,a=o;s<a.length;s++)u=a[s],void 0===(c=u)||e.push(c);return[2,e]}})})},e.prototype.writeUQs=function(e){for(var t in this.collection){for(var n=this.collection[t],r=n.uqName,i=r.toLowerCase(),o=n.entities,s=0,a=Object.keys(o);s<a.length;s++){var u=o[a[s]],c=u.name,l=u.sName;c!==l&&(o[l]=u)}e[t]=o,e[r]=o,i!==r&&(e[i]=o)}},e.prototype.setTuidImportsLocal=function(){var e=[];for(var t in this.collection)for(var n=0,r=this.collection[t].tuidArr;n<r.length;n++){var i=r[n];if(!0===i.isImport){var o=this.setInner(i);o&&e.push(o)}}return e},e.prototype.setInner=function(e){var t=e.from,n=t.owner+"/"+t.uq,r=this.collection[n];if(void 0===r)return"setInner(tuidImport: TuidImport): uq "+n+" is not loaded";var i=e.name,o=r.tuid(i);return void 0===o?"setInner(tuidImport: TuidImport): uq "+n+" has no Tuid "+i:!0===o.isImport?"setInner(tuidImport: TuidImport): uq "+n+" Tuid "+i+" is import":void e.setFrom(o)},e}();n.d(t,"c",function(){return ve}),n.d(t,"b",function(){return be}),n.d(t,"d",function(){return R}),n.d(t,"a",function(){return ye})},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n(9),o=n(4),s=function(){function e(e,t,n,r){this.isChanged=!1,this.itemSchema=e,this.uiItem=t,this.value=r;var i=e.name;this.name=i,this.label=n}return e.prototype.start=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.internalStart()];case 1:return[2,e.sent()]}})})},e.prototype.end=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.internalEnd()];case 1:return e.sent(),[2]}})})},e.prototype.internalEnd=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){return i.b.pop(),[2]})})},e.prototype.verifyValue=function(){if(void 0!==this.uiItem){var e=this.uiItem.rules;if(void 0!==e){var t=this.newValue;if(Array.isArray(e))for(var n=0,r=e;n<r.length;n++){var i=o(r[n]);if(void 0!==i){this.error=i;break}}else this.error=o(e)}}function o(e,n){var r=e(t);if(void 0!==r)return"object"!==typeof r?r:JSON.stringify(r)}},r.c([o.m],e.prototype,"error",void 0),r.c([o.m],e.prototype,"isChanged",void 0),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(6),o=n.n(i),s=n(9);function a(e){var t=e.className,n=e.style,i=e.src,a=e.altImage;return i?(!0===i.startsWith(":")&&(i=s.b.resUrl+i.substr(1)),r.createElement("img",{src:i,className:t,style:n,onError:function(e){e.currentTarget.src=a||"https://tv.jkchemical.com/imgs/0001.png"}})):r.createElement("div",{className:o()(t,"image-none"),style:n},r.createElement("i",{className:"fa fa-file-o"}))}},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s});var r=n(71),i=n.n(r);function o(e){var t=i()(e);return{id:t.id,name:t.name,guest:t.guest,token:e}}function s(e){return{id:0,guest:i()(e).guest,token:e}}},function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return l});var r=n(0),i=n(11),o=Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_RES_HOST||"https://tv.jkchemical.com",s={centerhost:{value:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_CENTER_DEBUG_HOST||"localhost:3000",local:!1},reshost:{value:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_RES_DEBUG_HOST||"localhost:3015",local:!1},uqhost:{value:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_UQ_DEBUG_HOST||"localhost:3015",local:!1},unitxhost:{value:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_UQ_DEBUG_HOST||"localhost:3015",local:!1},"uq-build":{value:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_UQ_DEBUG_BUILDER_HOST||"localhost:3009",local:!1}};function a(e){return!0===e.startsWith("https://")?e.endsWith("/")?e:e+"/":"http://"+e+"/"}function u(e){return a(e)+"res/"}var c={method:"GET",mode:"no-cors",headers:{"Content-Type":"text/plain"}},l=new(function(){function e(){}return e.prototype.start=function(e){return r.b(this,void 0,void 0,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return this.testing=e,!0!==i.c.isDevelopment?[3,2]:[4,this.tryLocal()];case 1:n.sent(),n.label=2;case 2:return t=this.getCenterHost(),this.url=function(e){return a(e)}(t),this.ws=function(e){return!0===e.startsWith("https://")?(!0===(e=e.substr("https://".length)).endsWith("/")&&(e=e.substr(0,e.length-1)),"wss://"+e+"/tv/"):"ws://"+e+"/tv/"}(t),this.resHost=this.getResHost(),[2]}})})},e.prototype.debugHostUrl=function(e){return"http://"+e+"/hello"},e.prototype.tryLocal=function(){return r.b(this,void 0,void 0,function(){var e,t,n,i,o,a,u,c,l,d,h,f,m,v;return r.e(this,function(r){switch(r.label){case 0:for(d in e=[],t=[],n=function(e){var n=s[e].value;t.findIndex(function(e){return e===n})<0&&t.push(n)},s)n(d);for(i=0,o=t;i<o.length;i++)a=o[i],u=this.debugHostUrl(a),e.push(p(u));return[4,Promise.all(e)];case 1:for(c=r.sent(),l=t.length,d=0;d<l;d++)for(m in h=c[d],f=t[d],s)(v=s[m]).value===f&&(v.local=h);return[2]}})})},e.prototype.getCenterHost=function(){var e=s.centerhost,t=e.value,n=e.local;return!0===document.location.hash.includes("sheet_debug")?t:!0===i.c.isDevelopment&&!0===n?t:"https://tv.jkchemical.com"},e.prototype.getResHost=function(){var e=s.reshost,t=e.value,n=e.local;return!0===document.location.hash.includes("sheet_debug")?t:!0===i.c.isDevelopment&&!0===n?t:o},e.prototype.getUrlOrDebug=function(e,t){if(void 0===t&&(t="uqhost"),!1===i.c.isDevelopment)return e;var n=s[t];if(void 0===n)return e;var r=n.value;return!1===n.local?e:"http://"+r+"/"},e.prototype.getUrlOrTest=function(e,t,n){var r;return!0===this.testing?("-"!==n&&(t=n),r="uq/test/"+e+"/"):r="uq/prod/"+e+"/",(t=this.getUrlOrDebug(t))+r},e.prototype.localCheck=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,p(e)];case 1:return[2,t.sent()]}})})},e}()),d=200;function h(e){return new Promise(function(t,n){fetch(e,c).then(function(e){e.text().then(t).catch(n)}).catch(n);var r=new Error("Connection timed out");setTimeout(n,d,r)})}function p(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,h(e)];case 1:return t.sent(),[2,!0];case 2:return t.sent(),[2,!1];case 3:return[2]}})})}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAABz1SURBVHja1Ht5eBzVle+5tXb1JnWrtcuSbNmSjY2RWcxmiIGEDIEJMEmALB8fecMkhJdMlknCy3skE4YhkH0jTDIZAsO8gQyEhLwQJiFgMEsMBizvkixrX1otqffu6q6qW/e+c6sleZNsky//pP2VW6rl1j3b7/zOuVeEcw47128B3zndAIzB4ocA0LEpUDtWAcfzUsAPUlUYiCJD4Ze/AZbJgtLSAtwqg7Z2DZCaGsCh8DmC5yywX3sDuOMASybBTaVAX9cFbjaH1yXgpgmsWARjy0Xg33opgE8DbtvgJmZg2Y8Yt2wBy+UBJAlO64MTIqoKPJf7YOnNXV8/f7SnVYG/lA8KyUslcEdHPSFO9xmQlag7l/x4OZdfIU795QgsrGUYINfVAqeuZ/FT3S+8hqWz77EHhy5Jq1LxL0tgDCsSMEBqqAeeyZ2WWzuzs808lf4KI0Sa0aT4X5bAntAIEsK6rgsVwICTx3wqfRufTa4pIEZkm2NDpyuwUKUsnAQPesoXLULe4jMM+DEPkfkxRSAG8Mh548474indWsPHqsPLuDRZ/EIAfAedit8u4+tTuhovVocfO1bgEwYgAp2vc4aGbkKtBtWu1dvkjrbvmS/+kQmE9lyK4EOEcHEvQZdjmQwiMxWxcy0CzAc5pTJQ+v+Iz/cIyLKY8GX43//AwYPgMsrL9nbURZBI0ll4fS+O+T28VjqZ1bz3Vt59oj7Q8t5ZSa6iI2N3SaVSlOF7Mwp5yyHkmSMCs0qASz4fAgKtqIgQPzdLH3X6Dr0XdI3JK5pfZvkiE0iJL2zBmNqC6WUN3t+P9/4RNHUSheaEOuBMTl2GqegGFATkttYDxrouwiYnrqej418DRekiqgJSKPhjIpPtck30QRyzGzSN4/tDpxJYpEiR9o6JYQ/By+CMjgsEl8C2vkDHJy+RMQVmZXCnNfIq3jWzKLCwijMwjHm1CaTq6oV8vJoVCp1cyK7pE1K46hnn0CC4E5NXcc7uwTfXsHyuzMxypzMy+qRslj4mogaNbrj5wpmACpRbmvKha646ZI+O3mYPj30DJxuUNC2jdnY8TCcm70RlWSyZ6ncz2QOsVHwSBTJPGcMuXR6whBc59HI6NHordylqW4EZXUrkA8arflqJGk9gIkvA8gUov/EWaKs7PA0Sv389KxQbOQ4ihwIjbnz6MOEsjNb4Ki+a3UpT4yVqe1un1bPnZzQx24iTkLmLSEqkNaxorhSTkiIRlc4l7yi98PJKls0GcczDJBT8RzkafZROTnnehMr6KnqQD8MmiYounDKvLiesiC7OY2x45EvpXLbej8Ji+ELcJ+9QDKOHmkU4JoaJonjoh25XcRlVbcL4q0IXoeiGL7izcyU5HGzAeIySfMECx7nCGR59N1ptVNa0e/E7KUKa5bKbkGHVEU0DdCsfutmZgGFAdB2kcOgFbV3no55rIgvzAFCSBr14XDiWFXbp69680Sg4Z12amftcNp28LCMTqMZ7kwq3Erry32CVC4xxOAGlOXNBaW4CuTYWLu/bfw4UCgKXTElVd+I58b46KRBQEAF9bjJ9l9zSPKKsaPkoJvYXZNsCFakmWuo8jGVjgRl5VtdVzm0HpeRbpGBgE/7co52xDuNN86zsIe/JPkhnl1QGKsw60CuIiCwr6u1sNvnpMaCkWtJBQQHHwlqf0dD4NHrmIv4v+IcAi050iprKFd4mSdK53mQVZVquqtotydJ7rYO9j9L4dJVkGHnOERFVZRKBKYJT+RzG5nl4r4bx3YWuSTwcUJW0HI38GM/vJmgF5MFr7AN9Zwjr43nk58Z8PiVLI7K4JksntbwIRZaY2SL1HfrspJn1F3QV6ogKyOD5uCH/X0VREqgNDGfliMC8XP4OL5nPIHX7FE3MyOWdb651c/l6MQ+5oX4nc90Wa9+B+91kqg7d55MkGv0UWmecDg1f6AwcflwKh7+MYNdEZ2dX4QRavXjSdQuF+pYcqb6dBIMD81RPwXR0Jf7sBwEiboVEiAxxjFuLOMX7nYFBvOYIxVYEl44cooiZd/MWJV+4J1vIrxivq4a22noIOAyGg3oKve8ZfCtwvE8cR1A6X7jVC6dYzUfQEjKz6TsxRsNSdbgkRaMPOYcPb2KZ3ArJb7yCk9uJSpmSDeOvmeO8T0wWh0qCrh4mtnIBuvMqhtZVamufxee/gQKKd824cykQaQoR/CqWTJ+Fb91RsW7WEw4V61VSnnHRxe3+Q+CmMyA11gHD6krE6mLRgEpyEWcQE2qgULwXXfnioaYohDd1w+p9wzBuFWFyRdcvo21tg+Q4KlNBacMYw4m3InHoQO3d6bk1gYR+5oZ/xbjejmVhqyDszLK24IsRdCCHsN+F8TjMSnILouNK4rob3aJ5JsYkw3tMydCfQytTtDDQqalX0CI3codV82LR7ybnLpZCodeOZmDOyNhRQCRXhETXt/oGgMUTINfXgxKLzisth/dPSGpby53aTPIjQ0EdrCsugfMQmtyhEak3ZuSaNN8PjLJjnQAHXvqKRv7eTadvwuQdFAaXI5EiKuA/0RUR4Uqu1r3xv52h0a+w6cR5KFCV5PerxKX3I2Jvk+rr36GuaDZ4Pv88y+WSnPExSZXLiMLPQrnsuSiO96Kk619kth0WbIiXrH4mCAJDIFgudgWqitAQltW1ebeWK+6MliaG73bSf/i2ObsE/Stir3QzeTbyxq5r9ykUzDXrfnDJdG5/rrYBGJFOFBhT0K8x9fwBf9KIJGMODtiYZkwPeMRBaQKteTcPBqqgYMrIkhhaKuO9PBR8g0SqCbIyjq72LI7x7OKkPSAVwCMn8NzDR+VT4k3+eH8Tz2G6EqxJpDi+THpi5fLHlLJ1j8OZr6cpOhGtq7un7cXXr0nH49LeiLZ9JVceN5n7lZFE/ElOyIETBRaT4lywHHOhFDuhSKgIn61onx17uC73zi+HpicWHHxJ2ojWZ6k0onegAkrHP4cKRmZ3GyRmvsHLpdBbATmNqfDOc225zZlO3NwXC0LNed0/X3No4sp4If/F4ZLyMj61hMCnKLMWBVmYgHC1gN+LJ49AHN0a+pOKexwikwa3iARlOYKBXoFx/TE+NvlNKWcGX5cda1RRP3tD1j7gm8v8YoI5oezaNb9ZX9+yJrjr0C2zdvEQ0+p2k+NSnnLKtoplV+whhAyFvOLb19gIgXvu9HpQ+Qce9DoR6OJvX3AhmKiy8sVKnSuel5Wl7pNYqfR30vT0tyGTC+wyCJQ2n//vN+bpM/LhoQeyqVTbxPoOvqKzKxp+7pXLCslUtNAS2a5mCwWJwGkKLGgiap0Oj4o8Dfo5m0CqqwNraKRyHfMoMi2I3v9NcHbtgRKCizVwGGMQgdGnn56wSGxcUWrySqW5zH0EXf1j0lzyXqSogR6Nw8yF5/7npZGmf9CnDt5ZKpXeP2KgqwcCpH7XgYshmYKMJkM5UvViiQp6dyqBF9wWBRCJ38t98nw8zVtQTE6S5+leNgfq2k7wXXIRqKvaIfuVr3mxuKTnCrIhxvNATbCkvFepSeIcX1LYBnzms2rZvh2zRrAnJLPJLRc+dF5rxydqduy+qTg0/KmcxMHG51cOjAKzMQOgC2fCftu/etUewPGP97pjBUaNg654nJp4lE5dahJBzMl/Vy4UxsGxf7GooFQK5OveAz4kBPQ7P4JFEJtnRpi3AZkPMFSQiHuey1cQnCxNK7kstdCZ2W/7LHoDRQW+pFiFQaL8042z5reDAzsuKM7O/NCViF/Ms4tJYOL4ObRsddmB2YC+vUTpHrWq6gR8XERpwXUJ8lsPHV26RDzLmBHImTJ17x4YHnhn8be/+TQg+T8WSbkX58ql58Ga4UkAUXXNJT1mpDU2ACAJccxSJfWIppwoHpbADebQd0jl8j2+dP7iPCq/pzaQHAwE77o+7f6wZt+hbpPaP3E5q+JITGqQtiddC/okCpuYDDldhilmPa4VclksKE5AemURdYVbLdSax90kkj8dGT2TlK1/s1xncz+3nvbNJJ5QlgAYPjMDWl0UYCxeIeylSgNDpBpRogmrkuVKQUKQYrEbMV7vVG1nXUKTYBsvvVFq67jvA2PZX9X6jE0Flv8ZA2kD4RIY6JBZy4T9jdXQrBpQPTYDfRF9gNfWvo5exDGEYUmm5fV5teWBBq1f6yaT98nJ9Oa0Lpet6vAjxaEhDB++VIYBL4IRSC7B2sRZsOGpEbwOefj/1E3789ym/j6w3RcM6YnGtq67biprfcyyu4vMehDZWrfQlQ8ZVN4sQE/XCrv54i3krOdeV8edEoz6g09gldbr0qU7mxUuvVwnn1Qk4KZ5NTNL79GwiM9pEGe6voMI6y7TwWyiHC4G9YiwJ0drDHD2LrlU+oxetv4q4zqwS4fp14PKjwOMfP0aJWL5y+ZFKdP8PpflTcjtwMBhU9SCV6u14brW1kc3HJq4vjQydMYBjfUnqPU4mYov212tcOnamuWbZrbd4MzO3kpENwTHcKqrh1QOJYIF//HyCP2IPHCRScA11FP3jQGaERM+rJbLn6Zlq+kQofBHH30+79fvXaX6n/8rW4NgvviJVDr1JUbICh3foKKjTPIyvB7zv95+/gX/a8PBkXOc/b0rRkO6le5c+Uhd0L9fPomelfl6ePkcaDtXMeqcjxQeiThAzrZ2uXOzWfn4OBftRhSiy5WBh6KnWvNR0MWvV8zC7SSb2xonLvT7pMN7DennBvH/4CotPLtJ8VcVndLtyeHhO3CSVX58hGKt8QYvwa4a/1Od1ZFPXODI77KnZu6ec0rGVPemwsXXXTsUzQm85icXWPDXZQXmfAsRhTviiVea+TRuIRIqx4UkRYk7ygzWlbBgDy0rqGjOb0Xyf7Ni2ddlsHrq9UOuV5V+XZDY/ZcbtTvbiQaNstY1k0n+Ey/Z70f1ScJikxStqtJ+uaPtXy/VAt9duX/ootJI8uvUKhvja9qhtq096Pvtc9fEZxJPS7KydDPw/3xm3sKi47D0J4KTW7NQmIu40P1+2QjoRGHHarEkE2hPYVFO6DwTJcfGOCFRRN+vSqXSDQgn9Qg+QIN+iJ259leXxxN/79f0XHPJkQlnH8mkk59nheIGWeRvPN7Swdxv6E8EytI9N9SvGqjKFz80R+2vU6Y0DvrQCI110LF3AHoG+1qGFR7A4nFJgd+9YGHRuFu6LoU6e2CwRqSShRYJE+QED36UwBZe25CnEEGmQ0Xlh+ypODEJxdaWCjqTSuBQagd8rlsfFp6CQBnG+6KHRq/SOdyitNQcKKTjH8aa+ibM0YbgBV4Kw3e1xhpfW0PI5/1VWlodHf9qMp3+Ilc1Y1ZikEVbbBiYwpRfhpnm2EEzEsoqLju5S5PjimSPR4u4dtmZeKlZwAuft1htKuf48zI/kpIQoJAc1GAeJLJaaQHiNQmLjhr8vSQzTB9FkQnMg3WhL5fNTKLFcq7vsHin4TKJZtJ1RVX9rjQ6WsICIXB0mSneybBmjiVS3WoweBPV3YsL8ekbiddVkEDlDFowljS3DHFDTmdDwW1E08qcnSKGldUrj5VXVaDcsxfcdJrysiWIsyeIjJqLGYHmoKFrqHmPjgmXM7CCCiOlc4PasR6CrE1PJEGNT0N5ZSs4ujJVIPC/34wGHkyazm3rSuyWWLEcI5RJDi0EZMHRQQb3KNARuEEdO+qkkj9c4CaK4C3oOXn0JluVoKZE4SDhO+bAfUGlTqVbcjKBj89ZmPhB71odtqYSq51cTvE6jMLFcEKK5Vzg6mqUuY4pXJshm9JOtuznWUmCkMuhtexCOhiCfU5xMKcpX9gdNv64Lqt9c0Uy12GLrRRozaBY4xI9LVk+pv72JovfPlSJjUL1gJUprO2Kn58srkuUp5xCNPp4F5OTrOicvMW9uCZzDLNCrc7Mvo9NxT+FMeivNAFQcahRLV9oDfi0dWpz04SEdbCLrk/6D6PA0pFSm2DVQUgYKalYghHccsaVpfyGIgUaxVo6gTGH0Dso818Nb+zKGhOzP4kMDK/OR8KQwTEj8USlxXMU/RTMSgDlJFiwQ6ejoY41/7xVNrrp9PC6vSH96Quq6n5xtquCK518zdUT2J2aPtEquXwLS8y0eG3YhfJNcG7G9VCu+DeBTQ1/kBrqgM7NQbF3AF3bQ2bkp+QyVjL/GvP3Cnt4tJOUSjl8eIgXCgctn2+7wtjLmyWDFRHVTUw1JUPfljh7/W2+ZOaBmGV1FrZ0l4p9A8zYdzAgChFvOvjuBN47rBNz0Cc/2wrBL29Vq1q0g/13vloTGGtf0fLrhvHZK7YZUk+C2eMyLF1bf2aReJgnLtoRTX0TLT+NQjQc4+6ibi8Wb6Rm8Q2Z0p+5rruQhrq4bd0hhIUii1UUOeX1mokinecm5lzQtVlSy35dJPw76AKHznUk6KUMbF17vhCr/pyvf+iXoUOD44Vg4D9cw/dBlbEzuKjSkHBMNNe+1Ufsf77Qlrd1lXiTsr/vm7slu029eMvkRfHsJw8k9kZ31Rq35AlfVuBFC9uDQ0tdG8OKYw4UpWGJRemI1XvobnkmOcRsS7Rgz2Tp7AOYhLcc0/dSlKMW112ZF80Gpzzxccnv76Kx2O2Kovau6R+BaZ8BTFN/xxrqHyO9Ax+QOlpHzJWtDwVHJr8mcaYyHHONasTriP+pFrO4idDSwyPM2pAzNNiwp7/JnJxujjfF3iRVxpiRTFaaEydNS+HwUmijIc1SuegaSPIJNaubmGly51J3yc0Nj6E0N2HNuwUlPLbsO/pn0dKVKlUTKxa3Et13HwsaNyNCZzuH4yDpfpfXq0/SdOZmlkx/gG5Y+4/gsL8hExMXMny/byZ1dqAm+h3Xdq50bHt9EM+tLqHTjE+SOLVpXA/8PNDYMEpiNUuvVR0tsO/ss5ZC1wlr1+5xJ5nqIr4lNCasx+FSNzG7BVOE5P1OTr7pgy+s8Qoik05tBah+rxUJ/wf3+6BKcAWV7Ceh4G55du4S3aZcbaj7FovHH8EHA+htTXQ68Vkxjo6aS2O1NKMSvIAFfyQ0adfVbldopcVzqg0rYk13qWNWCod2S4av0vpZTgpKJb7IppbWKDIpTF1Y6fD53nulWxkmVvnGZGOsur+uCijmfsSBCU7pNvyOQCZzFd64gwRDvQthoiCA+HAug0g09q9fyZuitVDAcnKstvoprmm7KTI3iteXO46sHuYLJx7ZfLUcDNYTw++1Y06rb328sDjPEtYuPVhLbuPF/nGg2QU9IdqL/v1mlOVccR+dioMzPumwgplS0IJmIX+25dKULCs7xDN6ZTsQ7CQW7WmofrC7uf33DTkT+sLaYbe58WFd1aiGKU3z+ZY9Fl3a2t+31HxX4XGht2CtyG+7ty7KRxMn2NNQNT3M7Ts3Fegr/bq8Osj170cyxQ4mXJvS2szQ4KqspkJXtozPoG1DIVVKpcA2fDU0i/SkVO51ZIkNuZa0X2KH9PWdX3tnrKm/fvvOB3qsvJm68KxvocJ3czit7VQLoBVaeoEkhxXBPMs61YYsNt/aIYu7CdCNAga0Nrf+rvvw2KMxpA1zqlGtFIpJVyIdfnw1WhDSIyNaCr9ZXXtlpd9xmSAdLoFOWZHq9WjELqaTfL9KfuGXlc9cWSTMyE8+vK+Y2VS69spd77z2ut+AQ0/bEBUuXRtbylWHMceOuqXS2uWFRYKC/4TbYnmDh4Q0knhcmKKSgo4Lkf7Ry9xy6SFTlsOBDD3ftaywAK4514Zev5xjazfOVRs6FgA6KLbDnf4Bx+trE2JBtMblAZqRUsnS5uZVO1pjdZaz7aVv9bn2lfEVMdjokHUjjz1+Naatn56OsBd+6PqlufT8uQwJBA9CKvPu5RbKZERFS1ehf2XTGM1mJltSua5qkMM6FqoiBzP0jrJltWGp1ybSkSQW3ZG27pWcxH6NvgLR8C/PuuD8Z8INjaC+1gOSWdaUSHXMyU9ArlAciMXoHFdkP75ZrTLLHy+PT95IVXkz6AZszDmQf34721ulFthp7ib+8CLTWqbhRfz6fxGJXI3u2bkcMAknhHDwX/pp4d8P2dIWw3LWb/IHb+go0XV0YZfNkQYKojSzkQn9qKzr90k+n+P6dPAXTdAbGxFMyq18eORSEUKzZbNYH58qc9UfRfdWyMh4p8CFPHqUISkQKlrwVkTfI7ev+J1yqp21x7u02t623PUe2We8Zu3b3ykKf2814ugVVPwdQYU3JnOmXdcU32OVnpjB46z2FS8oQ/HfOsVCgBwV/wJYKCG02YXhzUXXmVZNqN7TC/WmA7bY/M1ZO1a13UVNYWW/vtsIhh2SzlPZccCPITNNS3AwoILYLTeGJVq6pfZRIxhMEw5vT2BpHrKXiOOVru7byI/QhuM2xnGxGqGFOGzt9lU91B5tzT85lwJJ07fTWORJks/dfPS+SBHz6E3SmGsFLCxBfZN5MKYzWEdXgYuVEmQLm9WypSZUMpktm8+H6uqAmPZ6LEnlXrBh7Nz1+bW1TQH/71+UehrDr8o1Nf8ldhq9DXkrAtOJ8eUWbpNseCwuUbebLZWaxGo8ajs4l1mr+QKt9T7jwHvWnwNBrHIKqn6/Npu8VC0W2110a6+BACJVMTLu17TDiOCbLAJRRwNXxLZhXENSmU+WUTe9iruvo67lYIvia5k2zUtfIuV8Sle+u4XKMy3DUz98JaCWaGfH3cFgaO7tLtF6PkrE4tkSBw42Z4eC38ciPy0tsyJY+VuEcic1zfcVDZ1s2Hg2+NFjLJ/2Rjbs/57YGyAhyRC7HMRK4UzYbzactbH/by0DLnA1zESKWDW5ns3MPSBZVuOkT6bqxvXPdbevyTqJmXekC9lVgSu23re1YeW/NL114F2v7H3LGWmquSMYrvqDLLZFKsppH0eIh7w8zJl+48VSNPhv1cnc5zXOCTseIMTiF+OyOzZ+g15T81ui6W/VtLTC9N49YNbFfjpXEzmv5uDhD8mUEYcziBh+uanIzg46YNmcrXEJvRoc53IZqWYRlbxPhT+0UfKzdoeQ2cT0VrlYMjYqgWsDJfvqHgMunOve/ONotPoBmRBGKnz+bX08gX8fCyy/0602aPna637UdWjs8ob+4XOIono18Qn7IEvOep7N3ovM7G9hbm68um8IYrruWFZ5D4bD+zC3Ir/TIDydDMNc5t4SVqWoKbH3cD7GCfRV+1LVPv2nl42l0tmuyI2O67w/hIFAn31h8ytu0Zo6o+O7Gy+//JuBQNBllMKf8vEEXl1Vs+wNLlolHAyP1vkiT7nDE+f4LAccrdKdJEfzaSwynInJd5GXX73DGRq+Q6qurnEpvV3KF29FM/i4XOm9sErBIZ7RFni4QIdR0W3v3ji5OVMupnsHb4UDvf+gZXPVSXzsgF+a3O/K98Zk+Ufezj3Glk2lpyXwZStWn5Q6IhLDRNB8YnRdx9aGXQeu8LkK2DLx6CQ/an1ZTKS0d99H5aqqemRoTZw6FwnrextL+PLFhiueVwhsGE+ujCYzPzGtcrtllWBEB3evyp/NhrRvaGX+IvyJQp4gcJmeqtNHgPqN/qm2plvihw9/aZUDH63D/C+MIpZYvP7xAhurqvJjXnw/Eb0wBCvRfRT5lx2X2MgiDycecnZRCWjfQDCBjHRaV+CwLu2ZDfseMV3nMYPzOP0zCPu2/qrF+5sG4BNZVfpC3pBfjxatmxq5fEmIsqCOMCt7m8MrUlC815rfeKZzF1SEanV+TwifDwbJ22HBwMbrFgJfllAaD6szk5zuTKrsKRbwvaSp6rAijEHgz/Z5W3/GIxiNwrlZlskjvT7y9GFNuSJI4TKfWV4b8ilnIMWLIFsCS/MVMy7dqUdipprOxKoYOUuzbZ+3BCJVdk45KKypKVDU1WSSll/KMvosM4xByxGlHmR9Qil/Jqse/fn/AgwAOY4uqSLnKwwAAAAASUVORK5CYII="},function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return u}),n.d(t,"c",function(){return l});var r=n(0),i=n(1),o=n(5),s=n(12),a=function(){return function(e,t,n){this.tuid=e,this.ui=t,this.res=n}}(),u=function(){function e(e,t){this.tuidUR=e,this.id=t,this.isUndefined=void 0===this.tuidUR.tuid}return Object.defineProperty(e.prototype,"obj",{get:function(){return this.tuidUR.tuid.valueFromId(this.id)},enumerable:!0,configurable:!0}),e.prototype.render=function(e,t){if(void 0!==this.id&&null!==this.id){var n=this.boxName,r=this.obj;if(!0===this.isUndefined)return void 0!==e?e(r,t):Object(s.a)(r,t);switch(typeof r){case"undefined":return i.createElement("del",{className:"text-black-50"},n," undefined");case"number":return i.createElement("del",{className:"text-black-50"},n," ",this.id)}if(void 0===e&&(e=this.tuidUR.ui),void 0!==e&&("function"!==typeof e&&(e=e.content),void 0!==e)){var o=e(r,this.tuidUR.res);return void 0!==o?o:i.createElement("del",{className:"text-danger"},n," ",this.id)}return Object(s.a)(r)}},Object.defineProperty(e.prototype,"boxName",{get:function(){return this.tuidUR.tuid.name},enumerable:!0,configurable:!0}),e.prototype.assure=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.tuidUR.tuid.assureBox(this.id)];case 1:return e.sent(),[2]}})})},e}();var c=Object(o.a)(function(e){var t=e.tuidValue,n=e.ui,r=e.x,o=e.nullUI;if(void 0===t)return void 0===o?i.createElement(i.Fragment,null,"[undefined]"):o();if(null===t)return void 0===o?i.createElement(i.Fragment,null,"[null]"):o();var a=typeof t;switch(a){default:if(void 0===n)return i.createElement(i.Fragment,null,a,"-",t);var u=n(t,r);return void 0!==u?u:i.createElement(i.Fragment,null,t);case"object":var c=function(e,t,n){var r,o=e;switch(typeof e){case"undefined":r=i.createElement(i.Fragment,null,"boxId undefined");break;case"number":r=i.createElement(i.Fragment,null,"id:",e);break;default:if("function"!==typeof o.render){if(void 0!==t)return t(e,n);r=Object(s.a)(e,n)}}return void 0!==r?i.createElement("del",{className:"text-danger"},r):o.render(t,n)}(t,n,r);return void 0!==c?c:void 0===o?i.createElement(i.Fragment,null,"id null"):o();case"number":return i.createElement(i.Fragment,null,"id...",t)}}),l=function(e,t,n,r){return i.createElement(c,{tuidValue:e,ui:t,x:n,nullUI:r})}},function(e,t,n){"use strict";var r=n(0),i=n(10),o=n.n(i),s=n(7),a=n(1),u=n.n(a),c=n(3),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onNew=function(){return t.event("new")},t.onList=function(){return t.event("list")},t.onSearch=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){return[2,this.event("list",e)]})})},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){return this.openPage(this.view),[2]})})},t.prototype.entityRender=function(e,t){return e.render()},t.prototype.entityClick=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,e.onClick()];case 1:return t.sent(),[2]}})})},Object.defineProperty(t.prototype,"view",{get:function(){var e,t=this.controller,n=t.label;!1===t.isImport&&(e=a.createElement("button",{className:"btn btn-outline-success ml-2",onClick:this.onNew},"\u65b0\u589e"));var r=a.createElement(a.Fragment,null,e,a.createElement("button",{className:"btn btn-outline-info ml-2",onClick:this.onList},"\u5168\u90e8")),i=a.createElement(c.LMR,{className:"m-3",right:r},a.createElement(c.SearchBox,{className:"w-100",size:"md",onSearch:this.onSearch,placeholder:"\u641c\u7d22"+n}));return function(){return a.createElement(c.Page,{header:n},i)}},enumerable:!0,configurable:!0}),t}(s.b),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.next=function(){return r.b(t,void 0,void 0,function(){return r.e(this,function(e){return this.vForm.reset(),this.closePage(),[2]})})},t.finish=function(){t.closePage(2),t.event("edit-end")},t.onSubmit=function(){return r.b(t,void 0,void 0,function(){var e,t,n,i,o,s,u;return r.e(this,function(r){switch(r.label){case 0:return e=this.vForm.getValues(),[4,this.controller.entity.save(this.id,e)];case 1:if(t=r.sent(),(n=t.id)<0){if(void 0!==(i=this.controller.entity.unique))for(o=0,s=i;o<s.length;o++)u=s[o],this.vForm.setError(u,"\u4e0d\u80fd\u91cd\u590d");return[2]}return this.controller.isCalling?(this.returnCall(n),this.closePage(),[2]):(this.openPageElement(a.createElement(c.Page,{header:this.label+"\u63d0\u4ea4\u6210\u529f",back:"none"},a.createElement("div",{className:"m-3"},a.createElement("span",{className:"text-success"},a.createElement(c.FA,{name:"check-circle",size:"lg"})," \u6210\u529f\u63d0\u4ea4\uff01"),a.createElement("div",{className:"mt-5"},a.createElement("button",{className:"btn btn-primary mr-3",onClick:this.next},"\u7ee7\u7eed\u5f55\u5165"),a.createElement("button",{className:"btn btn-outline-primary",onClick:this.finish},"\u4e0d\u7ee7\u7eed"))))),this.event("item-changed",{id:this.id,values:e}),[2])}})})},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){return this.vForm=this.createForm(this.onSubmit,e),void 0!==e&&(this.id=e.id),this.openPage(this.editView),[2]})})},Object.defineProperty(t.prototype,"editView",{get:function(){var e=this;return function(){return a.createElement(c.Page,{header:(void 0===e.id?"\u65b0\u589e":"\u7f16\u8f91")+" - "+e.label},e.vForm.render("py-3"))}},enumerable:!0,configurable:!0}),t.prototype.resetForm=function(){this.vForm.reset()},t}(s.b),h=n(15),p=n(5),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainView=Object(p.a)(function(){var e=u.a.createElement(c.SearchBox,{className:"mx-1 w-100",initKey:"",onSearch:t.onSearchMain,placeholder:"\u641c\u7d22"+t.label});return u.a.createElement(c.Page,{header:e,back:"close"},u.a.createElement(c.List,{items:t.controller.PageItems.items,item:{render:t.renderMainRow,onClick:t.clickMainRow},before:"\u641c\u7d22"+t.label+"\u8d44\u6599"}))}),t.onSearchMain=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.controller.searchMain(e)];case 1:return t.sent(),[2]}})})},t.renderMainRow=function(e,n){return u.a.createElement(t.mainRowContent,r.a({},e))},t.clickMainRow=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return this.ceasePage(),void 0===this.controller.entity.hasDiv?(this.returnCall(e),[2]):[4,this.showDiv(this.entity.getIdFromObj(e))];case 1:return t.sent(),[2]}})})},t.divView=function(e){return u.a.createElement(c.Page,{header:"\u9009\u62e9Div"},u.a.createElement(c.List,{items:e.items,item:{render:t.renderDivRow,onClick:t.clickDivRow}}))},t.renderDivRow=function(e,n){return u.a.createElement(t.divRowContent,r.a({},e))},t.clickDivRow=function(e){t.ceasePage(),t.returnCall(e)},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return void 0!==e?[3,2]:[4,this.showMain(e)];case 1:return t.sent(),[3,4];case 2:return[4,this.showDiv(e)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},t.prototype.showMain=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return this.mainRowContent=this.ui.rowContent||h.b,[4,this.controller.searchMain(e)];case 1:return t.sent(),this.openPage(this.mainView),[2]}})})},t.prototype.showDiv=function(e){return r.b(this,void 0,void 0,function(){var t,n;return r.e(this,function(r){switch(r.label){case 0:return void 0!==(t=this.ui.divs)&&(this.divRowContent=t[this.entity.name].rowContent),void 0===this.divRowContent&&(this.divRowContent=h.b),[4,this.controller.getDivItems(e)];case 1:return n=r.sent(),this.openPage(this.divView,{items:n}),[2]}})})},t}(s.b),m=n(12),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.next=function(){return r.b(t,void 0,void 0,function(){return r.e(this,function(e){return this.vForm.reset(),this.closePage(),[2]})})},t.finish=function(){t.closePage(2)},t.onSubmit=function(){return r.b(t,void 0,void 0,function(){var e,t,n=this;return r.e(this,function(r){switch(r.label){case 0:return e=this.vForm.getValues(),[4,this.entity.save(this.id,e)];case 1:return(t=r.sent())&&alert("\u8fd9\u91cc\u8fd8\u8981\u5224\u65ad\u8fd4\u56de\u503c\uff0c\u5148\u4e0d\u5904\u7406\u4e86 \n"+Object(m.b)(t)),this.openPage(function(){return a.createElement(c.Page,{header:n.label+"\u63d0\u4ea4\u6210\u529f",back:"none"},a.createElement("div",{className:"m-3"},a.createElement("span",{className:"text-success"},a.createElement(c.FA,{name:"check-circle",size:"lg"})," \u6210\u529f\u63d0\u4ea4\uff01"),a.createElement("div",{className:"mt-5"},a.createElement("button",{className:"btn btn-primary mr-3",onClick:n.next},"\u7ee7\u7eed\u5f55\u5165"),a.createElement("button",{className:"btn btn-outline-primary",onClick:n.finish},"\u4e0d\u7ee7\u7eed"))))}),[2]}})})},t.view=function(){return a.createElement(c.Page,{header:t.label},t.vForm.render("py-3"))},t}return r.d(t,e),t.prototype.buildForm=function(e){this.vForm=this.createForm(void 0,e)},t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.buildForm(e),this.openPage(this.view),[2]})})},t.prototype.render=function(e){return this.buildForm(e),this.vForm.render()},t.prototype.loadId=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.id=e,[2]})})},t.prototype.resetForm=function(){this.vForm.reset()},t}(s.b)),b=function(e){function t(t){var n=e.call(this,!0)||this;return n.tuid=t,n}return r.d(t,e),t.prototype.load=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.tuid.search(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.setPageStart=function(e){this.pageStart=void 0===e?0:e.id},t}(n(11).b),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.onSelected=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return!1===this.controller.isImport?this.event("edit",e.id):this.event("info",e.id),[2]})})},t}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSearch=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.controller.searchMain(e)];case 1:return t.sent(),[2]}})})},t.renderRow=function(e,n){return a.createElement(t.rowContent,r.a({},e))},t.clickRow=function(e){t.callOnSelected(e)},t.rowKey=function(e){return e.id},t.view=Object(p.a)(function(){var e=a.createElement(c.SearchBox,{className:"mx-1 w-100",initKey:"",onSearch:t.onSearch,placeholder:"\u641c\u7d22"+t.label});return a.createElement(c.Page,{header:e},a.createElement(c.List,{items:t.controller.PageItems.items,item:{render:t.renderRow,onClick:t.clickRow,key:t.rowKey},before:"\u641c\u7d22"+t.label+"\u8d44\u6599"}))}),t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return this.rowContent=this.ui.rowContent||h.b,this.ownerId=Number(e),[4,this.controller.searchMain("")];case 1:return t.sent(),this.openPage(this.view),[2]}})})},t.prototype.callOnSelected=function(e){void 0!==this.onSelected?this.onSelected(e):alert("onSelect is undefined")},t}(s.b)),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.buildPageItems=function(){return new b(this.entity)},t.prototype.searchMain=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return void 0===this.PageItems&&(this.PageItems=this.buildPageItems()),void 0===e?[3,2]:[4,this.PageItems.first(e)];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.getDivItems=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.entity.searchArr(e,void 0,0,1e3)];case 1:return[2,t.sent()]}})})},t}(s.a),w=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return r.d(t,e),t.prototype.from=function(){return this},t.prototype.cUqFrom=function(){return this.cUq},t.prototype.cEditFrom=function(){return this.cUq.cTuidEditFromName(this.entity.name)},t.prototype.cInfoFrom=function(){return this.cUq.cTuidInfoFromName(this.entity.name)},t.prototype.cSelectFrom=function(){return this.cUq.cTuidSelectFromName(this.entity.name)},t.prototype.getLable=function(e){if(e===this.entity)return this.label;var t=e.name,n=this.res.arrs;if(void 0!==n){var r=n[t];if(void 0!==r){var i=r.label;if(void 0!==i)return i}}return t},Object.defineProperty(t.prototype,"VTuidMain",{get:function(){return l},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VTuidEdit",{get:function(){return d},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VTuidList",{get:function(){return y},enumerable:!0,configurable:!0}),t.prototype.internalStart=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return this.isImport=this.entity.isImport,[4,this.openVPage(this.VTuidMain)];case 1:return e.sent(),[2]}})})},t.prototype.onEvent=function(e,t){return r.b(this,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:switch(e){case"new":return[3,2];case"list":return[3,4];case"edit":return[3,6];case"item-changed":return[3,8];case"info":return[3,9]}return[3,1];case 1:return[2];case 2:return[4,this.onNew()];case 3:return n.sent(),[3,11];case 4:return[4,this.onList()];case 5:return n.sent(),[3,11];case 6:return[4,this.onEdit(t)];case 7:return n.sent(),[2];case 8:return this.itemChanged(t),[2];case 9:return[4,new P(this.cUq,this.entity,this.ui,this.res).start(t)];case 10:return n.sent(),[2];case 11:return[2]}})})},t.prototype.edit=function(e){return r.b(this,void 0,void 0,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return void 0!==(t=this.ui&&this.ui.CTuidEdit)?[3,2]:[4,this.openVPage(this.VTuidEdit,e)];case 1:return n.sent(),[3,4];case 2:return[4,new t(this.cUq,this.entity,this.ui,this.res).start(e)];case 3:n.sent(),n.label=4;case 4:return[2]}})})},t.prototype.onNew=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.edit(void 0)];case 1:return e.sent(),[2]}})})},t.prototype.onList=function(){return r.b(this,void 0,void 0,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return void 0!==(e=this.ui&&this.ui.CTuidList)?[3,2]:[4,this.openVPage(this.VTuidList,void 0)];case 1:return t.sent(),[3,4];case 2:return[4,new e(this.cUq,this.entity,this.ui,this.res).start(void 0)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},t.prototype.onEdit=function(e){return r.b(this,void 0,void 0,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return t=void 0,void 0===e?[3,2]:[4,this.entity.load(e)];case 1:t=n.sent(),n.label=2;case 2:return this.edit(t),[2]}})})},t.prototype.itemChanged=function(e){var t=e.id,n=e.values;if(void 0!==this.PageItems){var r=this.PageItems.items.find(function(e){return e.id===t});void 0!==r&&o.a.merge(r,n)}},t}(g),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return this.isImport=this.entity.isImport,[4,this.openVPage(this.VTuidMain)];case 1:return e.sent(),[2]}})})},t}(w),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return this.isImport=this.entity.isImport,"number"!==typeof e?[3,2]:[4,this.onEdit(e)];case 1:return t.sent(),[3,4];case 2:return[4,this.edit(e)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},t.prototype.edit=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.openVPage(this.VTuidEdit,e)];case 1:return t.sent(),[2]}})})},t}(w),N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return this.isImport=this.entity.isImport,[4,this.openVPage(this.VTuidList)];case 1:return e.sent(),[2]}})})},t}(w),k=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){return alert("tuid div: ??"),[2]})})}}(g),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.openVPage(this.VTuidSelect,e)];case 1:return t.sent(),[2]}})})},t.prototype.beforeStart=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.entity.loadSchema()];case 1:return e.sent(),void 0!==this.PageItems&&this.PageItems.reset(),[2,!0]}})})},Object.defineProperty(t.prototype,"VTuidSelect",{get:function(){return f},enumerable:!0,configurable:!0}),t.prototype.idFromItem=function(e){return e.id},t}(g)),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(e){return r.b(this,void 0,Promise,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return[4,this.entity.load(e)];case 1:return t=n.sent(),[4,this.openVPage(this.VTuidInfo,t)];case 2:return n.sent(),[2]}})})},Object.defineProperty(t.prototype,"VTuidInfo",{get:function(){return v},enumerable:!0,configurable:!0}),t}(g);n.d(t,"d",function(){return E}),n.d(t,"a",function(){return C}),n.d(t,"c",function(){return N}),n.d(t,"e",function(){return k}),n.d(t,"b",function(){return P})},,function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s});var r=n(10),i=n.n(r),o={lang:void 0,district:void 0};function s(e){var t=o.lang,n=o.district,r={};if(void 0===e)return r;i.a.merge(r,e._);var s=e[t];if(void 0===s)return r;i.a.merge(r,s._);var a=s[n];if(void 0===a)return r;i.a.merge(r,a);var u=r.entity;if(void 0!==u)for(var c in u)u[c.toLowerCase()]=u[c];return r}!function(){var e,t,n=navigator.languages&&navigator.languages[0]||navigator.language;if(n){var r=n.split("-");e=r[0],r.length>1&&(t=r[1])}else e="zh",t="CN";!function(e,t){o.lang=e,o.district=t}(e,t)}()},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n.n(i),s=n(5),a=function(){function e(e){this.view=function(){return i.createElement("div",null)},this.label=e}return e.prototype.render=function(){return i.createElement("div",{key:this.key,className:"px-3"},i.createElement("div",{className:"form-group row"},i.createElement("label",{className:"col-sm-2 col-form-label"},this.label),i.createElement("div",{className:"col-sm-10"},this.renderContent())))},e.prototype.setAddRow=function(e){},Object.defineProperty(e.prototype,"key",{get:function(){return this.label},enumerable:!0,configurable:!0}),e.prototype.getVFields=function(){},e.prototype.getVArr=function(){},e.prototype.getVSubmit=function(){},e.prototype.renderContent=function(){return i.createElement("div",{className:"form-control form-control-plaintext bg-white border border-info rounded "},"content")},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.vField=n,r}return r.d(t,e),Object.defineProperty(t.prototype,"key",{get:function(){return this.vField.name},enumerable:!0,configurable:!0}),t.prototype.getVFields=function(){return[this.vField]},t.prototype.renderContent=function(){return this.vField.render()},t}(a),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.vArr=n,r}return r.d(t,e),t.prototype.setAddRow=function(e){this.vArr.setAddRow(e)},Object.defineProperty(t.prototype,"key",{get:function(){return this.vArr.name},enumerable:!0,configurable:!0}),t.prototype.getVArr=function(){return this.vArr},t.prototype.render=function(){return i.createElement(i.Fragment,{key:this.key},this.vArr&&this.vArr.render())},t}(a),l=(function(e){function t(t,n){var r=e.call(this,t)||this;return r.vFields=n,r}r.d(t,e),Object.defineProperty(t.prototype,"key",{get:function(){return this.vFields[0].name},enumerable:!0,configurable:!0}),t.prototype.getVFields=function(){return this.vFields},t.prototype.renderContent=function(){return i.createElement("div",{className:"form-control form-control-plaintext bg-white border border-info rounded "},"fields")}}(a),function(e){function t(t){var n=e.call(this,void 0)||this;return n.vSubmit=t,n}return r.d(t,e),Object.defineProperty(t.prototype,"key",{get:function(){return"$submit"},enumerable:!0,configurable:!0}),t.prototype.getVSubmit=function(){return this.vSubmit},t.prototype.render=function(){return i.createElement("div",{key:"$submit",className:"px-3"},i.createElement("div",{className:"form-group row"},i.createElement("div",{className:"offset-sm-2 col-sm-10"},this.vSubmit.render())))},t}(a)),d=n(15),h=n(4),p=function(e){function t(t){var n=e.call(this)||this;return n.onClickSubmit=function(){return r.b(n,void 0,void 0,function(){return r.e(this,function(e){return this.vForm.submit(),[2]})})},n.view=Object(s.a)(function(){var e=n.vForm.isOk;return i.createElement("button",{type:"button",onClick:n.onClickSubmit,className:n.className,disabled:!1===e},n.caption)}),n.vForm=t,n.caption=n.vForm.submitCaption,n.className="btn btn-primary w-25",n}return r.d(t,e),r.c([h.m],t.prototype,"caption",void 0),r.c([h.m],t.prototype,"className",void 0),t}(d.c),f=n(6),m=n.n(f),v=n(3),b=function(){return function(){}}(),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.check=function(e,t){switch(typeof t){default:case"boolean":return;case"object":if(null!==t)return;break;case"string":if(t.trim().length>0)return;break;case"number":if(NaN!==t)return;break;case"undefined":}e.push("\u4e0d\u80fd\u4e3a\u7a7a")},t}(b),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.check=function(e,t){void 0!==t&&null!==t&&(NaN===Number(t)&&e.push("\u5fc5\u987b\u662f\u6570\u5b57"))},t}(b),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.check=function(e,t){if(void 0!==t&&null!==t){var n=Number(t);!0!==Number.isNaN(n)&&!1!==Number.isInteger(n)||e.push("\u5fc5\u987b\u662f\u6574\u6570")}},t}(b),E=function(e){function t(t){var n=e.call(this)||this;return n.min=t,n}return r.d(t,e),t.prototype.check=function(t,n){e.prototype.check.call(this,t,n),Number(n)<this.min&&t.push("\u4e0d\u80fd\u5c0f\u4e8e"+this.min)},t}(g),C=function(e){function t(t){var n=e.call(this)||this;return n.max=t,n}return r.d(t,e),t.prototype.check=function(t,n){e.prototype.check.call(this,t,n),Number(n)>this.max&&t.push("\u4e0d\u80fd\u5c0f\u4e8e"+this.max)},t}(g),N=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.form=t,o.field=n,o.name=n.name,o.fieldUI=r||{},o.fieldRes=i||{},o.init(),o}return r.d(t,e),t.prototype.init=function(){this.buildRules()},t.prototype.buildRules=function(){this.rules=[],(!0===this.fieldUI.required||void 0!==this.field&&!1===this.field.null)&&this.rules.push(new y)},Object.defineProperty(t.prototype,"checkRules",{get:function(){for(var e=[],t=0,n=this.rules;t<n.length;t++){n[t].check(e,this.value)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOk",{get:function(){return 0===this.rules.length||0===this.checkRules.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.form.values[this.name]},enumerable:!0,configurable:!0}),t.prototype.setValue=function(e){this.form.values[this.name]=e},Object.defineProperty(t.prototype,"error",{get:function(){return this.form.errors[this.name]},set:function(e){this.form.errors[this.name]=e},enumerable:!0,configurable:!0}),t.prototype.parse=function(e){return e},Object.defineProperty(t.prototype,"readonly",{get:function(){var e=this.form.mode;return e===V.readonly||e===V.edit&&!1===this.fieldUI.editable},enumerable:!0,configurable:!0}),r.c([h.e],t.prototype,"checkRules",null),r.c([h.e],t.prototype,"isOk",null),r.c([h.e],t.prototype,"value",null),t}(d.c),k=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.view=function(){return i.createElement("input",{type:"text",className:"form-control form-control-plaintext border border-info rounded bg-light",placeholder:"unkown control: -"})},t}r.d(t,e)}(N),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderError=function(e){var n=t.form.errors[t.name];if(void 0!==n)return i.createElement("div",{className:e},i.createElement(v.FA,{name:"exclamation-circle"})," ",n)},t.ref=function(e){t.input=e,t.setInputValue()},t.onFocus=function(){t.error=void 0},t.onBlur=function(){var e=t.checkRules;e.length>0&&(t.error=e[0]),t.form.computeFields()},t.onChange=function(e){var n=t.parse(e.currentTarget.value);null!==n&&t.setValue(n)},t.view=Object(s.a)(function(){var e,n,r,o=t.fieldUI.required,s=t.fieldRes,a=s.placeHolder,u=s.suffix,c=["form-control","form-control-input"];return!0===t.readonly?n=i.createElement("input",{className:m()(c,"bg-light"),ref:t.ref,type:t.inputType,readOnly:!0}):(n=i.createElement("input",{className:m()(c),ref:t.ref,type:t.inputType,onFocus:t.onFocus,onBlur:t.onBlur,onChange:t.onChange,placeholder:a,readOnly:!1,maxLength:t.maxLength,onKeyPress:t.onKeyPress}),!0!==o&&!1!==t.field.null||(e=i.createElement(P,null))),r=void 0===u?n:i.createElement("div",{className:"input-group"},n,i.createElement("div",{className:"input-group-append"},i.createElement("span",{className:"input-group-text"},u))),i.createElement(i.Fragment,null,e,r,t.renderError("text-danger small mt-1 mx-2"))}),t}return r.d(t,e),Object.defineProperty(t.prototype,"maxLength",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.setValue=function(t){e.prototype.setValue.call(this,t),this.setInputValue()},t.prototype.setInputValue=function(){if(this.input){var e=this.value;this.input.value=null===e||void 0===e?"":e}},t}(N)),P=function(){return i.createElement("b",{style:{color:"red",position:"absolute",left:"0.1em",top:"0.5em"}},"*")},S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="text",t}return r.d(t,e),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this.field.size},enumerable:!0,configurable:!0}),t}(k),x=45,F=46,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="number",t.onKeyPress=function(e){var n=e.charCode;if(!(8===n||0===n||13===n||n>=48&&n<=57))if(void 0!==t.extraChars&&t.extraChars.indexOf(n)>=0)switch(n){case F:t.onKeyDot();break;case x:t.onKeyNeg(),e.preventDefault()}else e.preventDefault()},t}return r.d(t,e),t.prototype.init=function(){if(e.prototype.init.call(this),this.extraChars=[],void 0!==this.fieldUI){var t=this.fieldUI,n=t.min;t.max;void 0!==n?n<0&&this.extraChars.push(x):this.extraChars.push(x)}switch(this.field.type){case"dec":case"bigint":case"int":case"smallint":case"tinyint":this.extraChars.push(F)}},t.prototype.buildRules=function(){e.prototype.buildRules.call(this),this.rules.push(new g);var t=this.fieldUI,n=t.min,r=t.max;void 0!==n&&this.rules.push(new E(n)),void 0!==r&&this.rules.push(new C(r))},t.prototype.parse=function(e){try{if(0===e.trim().length)return;var t=Number(e);return NaN===t?null:t}catch(n){return null}},t.prototype.setInputValue=function(){if(this.input){var e=this.value;this.parse(this.input.value)!=e&&(this.input.value=null===e||void 0===e?"":e)}},t.prototype.onKeyDot=function(){var e=this.input.value;e.indexOf(".")>=0&&(this.input.value=e.replace(".",""))},t.prototype.onKeyNeg=function(){var e=this.input.value,t=e.indexOf("-");e=t>=0?e.replace("-",""):"-"+e,this.input.value=e},t}(k),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.buildRules=function(){e.prototype.buildRules.call(this),this.rules.push(new w)},t}(I),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t}(I),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t}(S),q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t}(S),j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t}(S);var V,D=function(e){function t(t,n,r){var i=e.call(this,t,n,void 0,r)||this;return i.view=Object(s.a)(function(){var e=i.form.values[i.field.name],t=i.fieldRes,n=t.placeHolder,r=t.suffix;null===e&&(e="");var s=o.a.createElement("input",{className:"form-control form-control-input bg-light",type:"text",placeholder:n,readOnly:!0,value:e});return void 0===r?s:o.a.createElement("div",{className:"input-group"},s,o.a.createElement("div",{className:"input-group-append"},o.a.createElement("span",{className:"input-group-text"},r)))}),i}return r.d(t,e),t}(N),R=n(10),L=n.n(R),U=function(e){function t(t,n,o){var s=e.call(this)||this;s.rowPage=function(){return i.createElement(v.Page,{header:s.label,back:"close"},s.vForm.render("py-3"))},s.onSubmit=function(){return r.b(s,void 0,void 0,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return e=this.vForm.valueBoxs,[4,this.onRowChanged(e)];case 1:return t.sent(),[2]}})})},s.onRowChanged=function(e){return r.b(s,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return void 0!==this.rowValues?[3,4]:(e.$owner=this.ownerForm.values,this.list.push(e),void 0!==this.onEditRow?[3,1]:(this.vForm.reset(),[3,3]));case 1:return[4,this.onEditRow(void 0,this.onRowChanged)];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:L.a.merge(this.rowValues,e),void 0===this.onEditRow&&v.nav.pop(),t.label=5;case 5:return[2]}})})},s.renderItem=function(e,t){return void 0===s.rowContent?i.createElement("div",{className:"px-3 py-2"},i.createElement(d.a,r.a({},e))):i.createElement(s.rowContent,r.a({},e))},s.showRow=function(e){return r.b(s,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return void 0===this.onEditRow?[3,2]:[4,this.onEditRow(e,this.onRowChanged)];case 1:return t.sent(),[2];case 2:return this.vForm.reset(),void 0!==e&&this.vForm.setValues(e),v.nav.push(i.createElement(this.rowPage,null)),[2]}})})},s.editRow=function(e){return r.b(s,void 0,Promise,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return this.rowValues=e,void 0!==(t=this.vForm.vSubmit)&&(t.caption=this.editSubmitCaption,t.className="btn btn-outline-success"),this.vForm.mode=this.ownerForm.mode,[4,this.showRow(e)];case 1:return n.sent(),[2]}})})},s.internalAddRow=function(){return r.b(s,void 0,void 0,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return this.rowValues=void 0,(e=this.vForm.vSubmit).caption=this.newSubmitCaption,e.className="btn btn-outline-success",this.vForm.reset(),this.vForm.mode=V.new,[4,this.showRow(void 0)];case 1:return t.sent(),[2]}})})},s.view=function(){var e;void 0===s.addRow&&s.mode===V.readonly||(e=i.createElement("button",{onClick:s.addRow||s.internalAddRow,type:"button",className:"btn btn-link p-0"},s.ownerForm.arrTitleNewButton));var t=s.header||i.createElement("div",{className:"px-3 bg-light small",style:{paddingTop:"1px",paddingBottom:"1px"}},i.createElement("div",{className:"flex-fill align-self-center"},s.label),e);return i.createElement(v.List,{className:"pb-3",header:t,none:i.createElement(v.Muted,{className:"px-3 py-2"},s.none),items:s.list,item:{render:s.renderItem,onClick:s.editRow}})},s.ownerForm=t;var a=n.name,u=n.fields;s.name=a;var c=t.ui,l=t.res,h=t.mode,p=t.inputs,f=t.values,m=l.arrs,b=void 0!==m?m[a]:{},y=b.label,g=b.none,w=b.newSubmit,E=b.editSubmit;s.none=g||t.none,s.newSubmitCaption=w||t.arrNewCaption,s.editSubmitCaption=E||t.arrEditCaption,s.label=y||a;var C=c&&c.items[a]||{};return s.rowContent=C.rowContent,s.mode=h,void 0===s.onEditRow?s.vForm=new z({fields:u,arrs:void 0,ui:C,res:b,inputs:p[a],none:t.none,submitCaption:"submit",arrNewCaption:void 0,arrEditCaption:void 0,arrTitleNewButton:void 0,mode:h},h===V.readonly?void 0:s.onSubmit):s.onEditRow=o,s.list=f[a],s}return r.d(t,e),t.prototype.reset=function(){this.vForm.reset(),this.list.clear()},t.prototype.setAddRow=function(e){this.addRow=e},t}(d.c),M=n(29),B={textAlign:"left",paddingLeft:"0.75rem",paddingRight:"0.75rem",overflow:"hidden"},W=function(e){function t(t,n,o,a){var u=e.call(this,t,n,o,a)||this;return u.onClick=function(){return r.b(u,void 0,void 0,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return!0!==this.readonly?[3,2]:this.value?[4,this.tuid.showInfo()]:[2];case 1:return t.sent(),[2];case 2:return void 0===this.input?[3,4]:[4,this.input.select(this.vForm,this.field,this.vForm.getValues())];case 3:return e=t.sent(),[3,5];case 4:alert("call undefined"),e=0,t.label=5;case 5:return this.setValue(this.tuid.boxId(e)),[2]}})})},u.view=Object(s.a)(function(){var e,t=u.fieldRes.placeHolder,n=!1,r=u.field._tuid.ownerField;if(void 0!==r){var o=r.name;r.arr;n=null===u.vForm.getValue(o)}if(null===u.value)e=i.createElement(i.Fragment,null,t||u.input.placeHolder);else if("object"===typeof u.value)e=Object(M.c)(u.value);else{var s=u.tuid.boxId(u.value);e=Object(M.c)(s)}if(!0===u.readonly)return i.createElement("div",{className:"form-control form-control-plaintext border border-info rounded bg-light cursor-pointer",onClick:u.onClick},e);var a=(!0===u.fieldUI.required||!1===u.field.null)&&i.createElement(P,null);return i.createElement(i.Fragment,null,a,i.createElement("button",{className:"form-control btn btn-outline-info",type:"button",disabled:n,style:B,onClick:u.onClick},e))}),u.tuid=n._tuid,u.vForm=t,u.input=t.inputs[n.name],u}return r.d(t,e),t}(N),H=function(){function e(e,t,n){this.vForm=e,this.onSubmit=n;var r=t.fields,i=t.arrs,o=t.ui,s=t.res;if(this.fields=r,this.arrs=i,void 0!==o){var a=o.items,u=o.layout;this.formItems=a,this.layout=u}this.res=s}return e.prototype.build=function(){return void 0===this.layout?this.bandsOnFly():this.bandsFromLayout()},e.prototype.resFromName=function(e,t){if(void 0!==t){var n=t.fields;if(void 0!==n)return n[e]||e}},e.prototype.bandsOnFly=function(){var e=[];if(this.bandsFromFields(e,this.fields,this.res),void 0!==this.arrs)for(var t=0,n=this.arrs;t<n.length;t++){var r=n[t];e.push(this.bandFromArr(r))}return void 0!==this.onSubmit&&e.push(new l(new p(this.vForm))),e},e.prototype.bandsFromFields=function(e,t,n){if(void 0!==t)for(var r=0,i=t;r<i.length;r++){var o=i[r];e.push(this.bandFromField(o,n))}},e.prototype.bandsFromLayout=function(){return[]},e.prototype.bandFromField=function(e,t){var n,r,i,o,s=e.name,a=this.resFromName(s,t);return"object"===typeof a?(r=a.label,n=a):(r=a,n=void 0),void 0!==this.formItems&&(o=this.formItems[s]),void 0===(i="function"===typeof o?new D(this.vForm,e,n):function(e,t,n,r){var i;switch(t.type){default:return;case"tinyint":case"smallint":case"int":case"bigint":i=O;break;case"id":if(void 0!==t._tuid)return;i=O;break;case"dec":i=T;break;case"char":i=S;break;case"text":i=A;break;case"datetime":i=q;break;case"date":i=j}return new i(e,t,n,r)}(this.vForm,e,o,n))&&(i=new W(this.vForm,e,o,n)),new u(r||s,i)},e.prototype.bandFromArr=function(e){var t=e.name,n=(e.fields,new U(this.vForm,e));return new c(t,n)},e}();!function(e){e[e.new=0]="new",e[e.edit=1]="edit",e[e.readonly=2]="readonly"}(V||(V={}));var z=function(){function e(e,t){var n=this;this.vFields={},this.vArrs={},this.onFormSubmit=function(e){return e.preventDefault(),!1},this.view=Object(s.a)(function(e){var t=e.className;return i.createElement("form",{className:t,onSubmit:n.onFormSubmit},n.bands.map(function(e){return e.render()}))});var r=e.fields,o=e.arrs,a=e.ui,u=e.res,c=e.inputs,l=e.none,d=e.submitCaption,h=e.arrNewCaption,p=e.arrEditCaption,f=e.arrTitleNewButton,m=e.mode;this.fields=r,this.arrs=o,this.ui=a,void 0!==this.ui&&(this.formItems=this.ui.items),this.res=u,this.inputs=c,this.none=l,this.submitCaption=d,this.arrNewCaption=h,this.arrEditCaption=p,this.arrTitleNewButton=f||i.createElement("small",null,i.createElement(v.FA,{name:"plus"})," \u65b0\u589e"),this.mode=void 0===t?V.readonly:m,this.buildFormValues(),this.buildBands(e,t),this.onSubmit=t}return e.prototype.buildBands=function(e,t){this.bandColl={};var n=new H(this,e,t);this.bands=n.build();for(var r=0,i=this.bands;r<i.length;r++){var o=i[r];this.bandColl[o.key]=o;var s=o.getVFields();if(void 0!==s)for(var a=0,u=s;a<u.length;a++){var c=u[a];this.vFields[c.name]=c}var l=o.getVArr();void 0!==l&&(this.vArrs[l.name]=l);var d=o.getVSubmit();void 0!==d&&(this.vSubmit=d)}},e.prototype.getBand=function(e){return this.bandColl[e]},e.prototype.computeFields=function(){if(void 0!==this.formItems){var e=this.values;for(var t in this.formItems){var n=this.formItems[t];"function"===typeof n&&(e[t]=n.call(this,e))}}},e.prototype.submit=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return void 0===this.onSubmit?[2]:[4,this.onSubmit()];case 1:return e.sent(),[2]}})})},e.prototype.getValues=function(){for(var e={},t=this.values,n=0,r=this.fields;n<r.length;n++){var i=t[u=r[n].name];e[u]=null!==i&&"object"===typeof i?i.id:i}if(void 0!==this.arrs)for(var o=0,s=this.arrs;o<s.length;o++)for(var a=s[o],u=a.name,c=a.fields,l=a.id,d=a.order,h=e[u]=[],p=0,f=this.vArrs[u].list;p<f.length;p++){var m=f[p],v={};void 0!==l&&(v[l]=m[l]),void 0!==d&&(v[d]=m[d]);for(var b=0,y=c;b<y.length;b++){var g=y[b].name;i=m[g];v[g]=null!==i&&"object"===typeof i?i.id:i}h.push(v)}return e},Object.defineProperty(e.prototype,"valueBoxs",{get:function(){for(var e={},t=this.values,n=0,r=this.fields;n<r.length;n++){var i=(v=r[n]).name,o=v._tuid,s=t[i];e[i]=void 0===o||"object"===typeof s?s:o.boxId(s)}if(void 0===this.arrs)return e;for(var a=0,u=this.arrs;a<u.length;a++)for(var c=u[a],l=(i=c.name,c.fields),d=(c.id,c.order,0),h=e[i]=this.vArrs[i].list.slice();d<h.length;d++)for(var p=h[d],f=0,m=l;f<m.length;f++){var v,b=(v=m[f]).name;o=v._tuid,s=p[b];p[b]=void 0===o||"object"===typeof s?s:o.boxId(s)}return e},enumerable:!0,configurable:!0}),e.prototype.setValues=function(e){if(void 0!==e){for(var t=this.values,n=this.errors,r=0,i=this.fields;r<i.length;r++){var o=i[r].name;n[o]=void 0;var s=e[o];t[o]=s}for(var a in this.vArrs){var u=e[a];if(void 0!==u){var c=t[a];c.clear(),c.push.apply(c,u)}}}else this.reset()},Object.defineProperty(e.prototype,"isOk",{get:function(){for(var e in this.vFields)if(!1===this.vFields[e].isOk)return!1;return!0},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e=this.values,t=this.errors,n=0,r=this.fields;n<r.length;n++){var i=r[n].name;e[i]=null,t[i]=void 0}for(var o in this.vFields){var s=this.vFields[o];void 0!==s.name&&s.setValue(null)}for(var o in this.vArrs){this.vArrs[o].reset()}},e.prototype.getValue=function(e){return this.values[e]},e.prototype.setValue=function(e,t){this.values[e]=t},e.prototype.setError=function(e,t){this.errors[e]=t},e.prototype.buildFieldValues=function(e){for(var t={valueFromFieldName:function(e){return this[e]}},n=0,r=e;n<r.length;n++){t[r[n].name]=null}return t},e.prototype.buildObservableValues=function(){var e=this.buildFieldValues(this.fields);if(void 0!==this.arrs)for(var t=0,n=this.arrs;t<n.length;t++){e[n[t].name]=h.m.array([],{deep:!0})}return Object(h.m)(e)},e.prototype.buildFormValues=function(){this.values=this.buildObservableValues(),this.errors=Object(h.m)(this.buildFieldValues(this.fields))},e.prototype.render=function(e){return void 0===e&&(e="py-3"),i.createElement(this.view,{className:e})},r.c([h.e],e.prototype,"isOk",null),e}();n.d(t,"a",function(){return V}),n.d(t,"b",function(){return z})},,,,,function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var r=n(0);function i(e,t,n,i,o){return r.b(this,void 0,void 0,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,e.fetch(t,n,i,o)];case 1:return r.sent(),[2]}})})}var o=function(){function e(e,t){this.path=e||"",this.showWaiting=t}return e.prototype.xcall=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.getHttpChannel()];case 1:return[4,t.sent().xcall(this.path,e)];case 2:return[2,t.sent()]}})})},e.prototype.call=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.getHttpChannel()];case 1:return[4,r.sent().callFetch(e,t,n)];case 2:return[2,r.sent()]}})})},e.prototype.get=function(e,t){return void 0===t&&(t=void 0),r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.getHttpChannel()];case 1:return[4,n.sent().get(this.path+e,t)];case 2:return[2,n.sent()]}})})},e.prototype.post=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.getHttpChannel()];case 1:return[4,n.sent().post(this.path+e,t)];case 2:return[2,n.sent()]}})})},e.prototype.put=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.getHttpChannel()];case 1:return[4,n.sent().put(this.path+e,t)];case 2:return[2,n.sent()]}})})},e.prototype.delete=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.getHttpChannel()];case 1:return[4,n.sent().delete(this.path+e,t)];case 2:return[2,n.sent()]}})})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n(1),o=n(9),s=function(e){function t(t){var n=e.call(this,t)||this;return n.logoutClick=function(){o.b.showLogout(n.logout)},n.logout=function(){return r.b(n,void 0,void 0,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return"function"!==typeof(e=this.props.logout)?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[4,o.b.logout(void 0)];case 3:return t.sent(),[2]}})})},n.navChange=n.navChange.bind(n),n.state={hasBack:!1},n}return r.d(t,e),t.prototype.navChange=function(){this.setState({hasBack:o.b.level>1})},t.prototype.componentWillMount=function(){this.navChange()},t.prototype.componentWillUnmount=function(){},t.prototype.back=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,o.b.back()];case 1:return e.sent(),[2]}})})},t.prototype.openWindow=function(){window.open(document.location.href)},t.prototype.render=function(){var e,t,n,r=this.state.hasBack||self!=top,s=this.props,a=s.right,u=s.center,c=s.logout,l=s.className;if(void 0!==c&&self===top&&("boolean"===typeof c&&!0===c||"function"===typeof c)){var d=o.b.user;if(void 0!==d){var h=d.nick,p=d.name;n=i.createElement("div",{className:"d-flex align-items-center"},i.createElement("small",{className:"text-light"},h||p),i.createElement("a",{className:"btn ml-2 cursor-pointer",role:"button",onClick:this.logoutClick},i.createElement("i",{className:"fa fa-sign-out fa-lg"})))}}if(r)switch(this.props.back){case"none":e=void 0;break;default:case"back":e=i.createElement("nav",{onClick:this.back},i.createElement("i",{className:"fa fa-angle-left"}));break;case"close":e=i.createElement("nav",{onClick:this.back},i.createElement("i",{className:"fa fa-close"}))}self!=top&&(console.log(document.location.href),t=i.createElement("header",{onClick:this.openWindow}));var f=(a||n)&&i.createElement("aside",null,a," ",n);return i.createElement("header",{className:l},t,e,i.createElement("div",null,u),f)},t}(i.Component)},function(e,t,n){"use strict";var r=n(0),i=n(7),o=n(1),s=n.n(o),a=n(5),u=n(3),c=n(12),l=function(e){return s.a.createElement("div",{className:"px-3 py-2"},Object(c.b)(e))},d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSubmit=function(){return r.b(t,void 0,void 0,function(){var e,t;return r.e(this,function(n){switch(n.label){case 0:return e=this.vForm.getValues(),!0!==this.entity.isPaged?[3,3]:[4,this.entity.resetPage(30,e)];case 1:return n.sent(),[4,this.entity.loadPage()];case 2:return n.sent(),this.replacePage(this.pageResult),[3,5];case 3:return[4,this.entity.query(e)];case 4:t=n.sent(),this.replacePage(this.queryResult,t),n.label=5;case 5:return[2]}})})},t.again=function(){t.vForm.reset(),t.replacePage(t.view)},t.renderRow=function(e,n){return o.createElement(t.row,r.a({},e))},t.view=function(){return o.createElement(u.Page,{header:t.label},t.vForm.render("mx-3 my-2"),t.renderExtra())},t.pageResult=function(){var e=t.entity,n=(e.name,e.list),r=o.createElement("button",{className:"btn btn-outline-success",onClick:t.again},o.createElement(u.FA,{name:"search"})," \u518d\u67e5\u8be2");return o.createElement(u.Page,{header:t.label,right:r},o.createElement(u.List,{items:n,item:{render:t.renderRow}}))},t.queryResult=Object(a.a)(function(e){var n=o.createElement("button",{className:"btn btn-outline-success",onClick:t.again},o.createElement(u.FA,{name:"search"})," \u518d\u67e5\u8be2");return o.createElement(u.Page,{header:t.label,right:n},o.createElement("pre",null,JSON.stringify(e,void 0,"\t")))}),t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,Promise,function(){var t,n,i;return r.e(this,function(r){return this.vForm=this.createForm(this.onSubmit,e),t=this.ui,n=t.row,i=t.queryRow,this.row=i||n||l,this.openPage(this.view),[2]})})},t.prototype.renderExtra=function(){},t}(i.b),h=n(11),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSearch=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.PageItems.first(e)];case 1:return t.sent(),[2]}})})},t.renderRow=function(e,n){return o.createElement(t.row,r.a({},e))},t.clickRow=function(e){t.callOnSelected(e)},t.view=function(){var e=o.createElement(u.SearchBox,{className:"mx-1 w-100",initKey:"",onSearch:t.onSearch,placeholder:"\u641c\u7d22"+t.label});return o.createElement(u.Page,{header:e},o.createElement(u.List,{items:t.PageItems.items,item:{render:t.renderRow,onClick:t.clickRow},before:"\u641c\u7d22"+t.label+"\u8d44\u6599"}))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){var t,n,i;return r.e(this,function(r){switch(r.label){case 0:return t=this.ui,n=t.row,i=t.selectRow,this.row=i||n||l,this.PageItems=new f(this.entity),[4,this.onSearch(e)];case 1:return r.sent(),this.openPage(this.view),[2]}})})},t.prototype.callOnSelected=function(e){this.closePage(),this.returnCall(e)},t}(i.b),f=function(e){function t(t){var n=e.call(this)||this;return n.query=t,n}return r.d(t,e),t.prototype.load=function(){return r.b(this,void 0,Promise,function(){var e,t;return r.e(this,function(n){switch(n.label){case 0:return[4,this.query.loadSchema()];case 1:return n.sent(),!0!==this.query.isPaged?[3,3]:[4,this.query.page(this.param,this.pageStart,this.pageSize)];case 2:return e=n.sent(),[3,5];case 3:return[4,this.query.query(this.param)];case 4:t=n.sent(),e=t[this.query.returns[0].name],n.label=5;case 5:return[2,e]}})})},t.prototype.setPageStart=function(e){void 0===e&&(this.pageStart=0)},t}(h.b),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t}(i.a),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.openVPage(this.VQueryMain)];case 1:return e.sent(),[2]}})})},Object.defineProperty(t.prototype,"VQueryMain",{get:function(){return this.ui&&this.ui.main||d},enumerable:!0,configurable:!0}),t}(m),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.openVPage(this.VQuerySelect,e)];case 1:return t.sent(),[2]}})})},Object.defineProperty(t.prototype,"VQuerySelect",{get:function(){return p},enumerable:!0,configurable:!0}),t}(m);n.d(t,"a",function(){return v}),n.d(t,"b",function(){return b})},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(0),i=n(1),o=n(5),s=n(4),a=n(48),u=n(25),c=n(9),l=n(14),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.overSize=!1,t.upload=function(){return r.b(t,void 0,void 0,function(){var e,t=this;return r.e(this,function(n){switch(n.label){case 0:return this.resUploader?[4,this.resUploader.upload()]:[2];case 1:return null===(e=n.sent())?(this.overSize=!0,setTimeout(function(){return t.overSize=!1},3e3),[2]):(this.resId=e,this.isChanged=this.resId!=this.value,[2])}})})},t.page=Object(o.a)(function(e){var n,r=e.resolve,o=i.createElement("button",{className:"btn btn-sm btn-success",disabled:!t.isChanged,onClick:function(){return r(t.resId)}},"\u4fdd\u5b58");return!0===t.overSize&&(n=i.createElement("div",{className:"text-danger"},i.createElement("i",{className:"fa fa-times-circle"})," \u56fe\u7247\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc72M\uff0c\u65e0\u6cd5\u4e0a\u4f20")),i.createElement(l.a,{header:"\u66f4\u6539"+t.label,right:o},i.createElement("div",{className:"my-3 px-3 py-3 bg-white"},i.createElement("div",null,i.createElement("div",null,"\u4e0a\u4f20\u56fe\u7247\uff1a"),i.createElement("div",{className:"my-3"},i.createElement(a.a,{ref:function(e){return t.resUploader=e},multiple:!1,maxSize:2048})),i.createElement("div",null,i.createElement("button",{className:"btn btn-primary",onClick:t.upload},"\u4e0a\u4f20"))),n,i.createElement("div",{className:"small muted my-4"},"\u652f\u6301JPG\u3001GIF\u3001PNG\u683c\u5f0f\u56fe\u7247\uff0c\u4e0d\u8d85\u8fc72M\u3002"),i.createElement("div",{className:"d-flex"},i.createElement("div",{className:"w-12c h-12c mr-4",style:{border:"1px dotted gray",padding:"8px"}},i.createElement(u.a,{className:"w-100 h-100",src:t.resId})),i.createElement("div",null,i.createElement("div",{className:"small"},"\u56fe\u7247\u9884\u89c8"),i.createElement(u.a,{className:"w-4c h-4c mt-3",src:t.resId})))))}),t}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,Promise,function(){var e=this;return r.e(this,function(t){return this.resId=this.value,[2,new Promise(function(t,n){c.b.push(i.createElement(e.page,{resolve:t,reject:n}),function(){return n()})})]})})},r.c([s.m],t.prototype,"resId",void 0),r.c([s.m],t.prototype,"overSize",void 0),t}(n(24).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n(8),o=n(26),s=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.login=function(e){return r.b(this,void 0,Promise,function(){var t,n,i,s,a;return r.e(this,function(r){switch(r.label){case 0:return[4,this.get("login",e)];case 1:switch(typeof(t=r.sent())){default:return[2];case"string":return[2,Object(o.b)(t)];case"object":return n=t.token,i=Object(o.b)(n),s=t.nick,a=t.icon,s&&(i.nick=s),a&&(i.icon=a),[2,i]}return[2]}})})},t.prototype.register=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.post("register",e)];case 1:return[2,t.sent()]}})})},t.prototype.setVerify=function(e,t){return r.b(this,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.post("set-verify",{account:e,type:t})];case 1:return[2,n.sent()]}})})},t.prototype.checkVerify=function(e,t){return r.b(this,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.post("check-verify",{account:e,verify:t})];case 1:return[2,n.sent()]}})})},t.prototype.isExists=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.get("is-exists",{account:e})];case 1:return[2,t.sent()]}})})},t.prototype.resetPassword=function(e,t,n,i){return r.b(this,void 0,void 0,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.post("reset-password",{account:e,password:t,verify:n,type:i})];case 1:return[2,r.sent()]}})})},t.prototype.userSetProp=function(e,t){return r.b(this,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.post("tie/user-set-prop",{prop:e,value:t})];case 1:return n.sent(),[2]}})})},t}(i.b))("tv/user/",void 0)},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n(4),o=n(19),s=function(){function e(e){void 0===e&&(e=!1),this.isFirst=!0,this.loading=!1,this.beforeLoad=!0,this.loaded=!1,this.allLoaded=!1,this.firstSize=100,this.pageStart=void 0,this.pageSize=30,this.appendPosition="tail",this._items=i.m.array([],{deep:e})}return Object.defineProperty(e.prototype,"items",{get:function(){return!0===this.beforeLoad?null:!1!==this.loaded?this._items:void 0},enumerable:!0,configurable:!0}),e.prototype.scrollToTop=function(){this.topDiv="$$"+Object(o.a)()},e.prototype.scrollToBottom=function(){this.bottomDiv="$$"+Object(o.a)()},e.prototype.reset=function(){this.isFirst=!0,this.beforeLoad=!0,this.loaded=!1,this.param=void 0,this.allLoaded=!1,this._items.clear()},e.prototype.append=function(e){"tail"===this.appendPosition?this._items.unshift(e):this._items.push(e)},e.prototype.first=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return this.reset(),this.beforeLoad=!1,this.param=e,[4,this.more()];case 1:return t.sent(),[2]}})})},e.prototype.onLoad=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){return[2]})})},e.prototype.more=function(){return r.b(this,void 0,Promise,function(){var e,t,n,i,o;return r.e(this,function(r){switch(r.label){case 0:return!0===this.allLoaded?[2]:!0===this.loading?[2]:(this.loading=!0,[4,this.onLoad()]);case 1:return r.sent(),void 0===this.pageStart&&this.setPageStart(void 0),n=this.pageSize+1,!0===this.isFirst&&this.firstSize>this.pageSize&&(n=this.firstSize+1),[4,this.load(this.param,this.pageStart,n)];case 2:return i=r.sent(),this.loading=!1,this.loaded=!0,o=i.length,!0===this.isFirst&&o>this.firstSize||!1===this.isFirst&&o>this.pageSize?(this.allLoaded=!1,--o,i.splice(o,1)):this.allLoaded=!0,0===o?(this._items.clear(),[2]):(this.setPageStart(i[o-1]),"tail"===this.appendPosition?(e=this._items).push.apply(e,i):(t=this._items).unshift.apply(t,i.reverse()),this.isFirst=!1,[2])}})})},r.c([i.m],e.prototype,"loading",void 0),r.c([i.m],e.prototype,"beforeLoad",void 0),r.c([i.m],e.prototype,"loaded",void 0),r.c([i.m],e.prototype,"allLoaded",void 0),r.c([i.e],e.prototype,"items",null),r.c([i.m],e.prototype,"topDiv",void 0),r.c([i.m],e.prototype,"bottomDiv",void 0),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1);function i(){return r.createElement("div",{className:"d-flex h-100 align-items-center justify-content-center"},r.createElement("i",{className:"fa fa-spinner fa-spin fa-2x fa-fw text-info"}))}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n(1),o=n(9),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.upload=function(){return r.b(t,void 0,Promise,function(){var e,t,n,i,s,a,u,c,l;return r.e(this,function(r){switch(r.label){case 0:for(void 0===(e=this.props.maxSize)||e<=0?e=1e11:e*=1024,t=o.b.resUrl+"upload",n=this.fileInput.files,i=new FormData,s=n.length,a=0;a<s;a++){if((u=n[a]).size>e)return[2,null];i.append("files[]",u,u.name)}r.label=1;case 1:return r.trys.push([1,4,,5]),c=new AbortController,[4,fetch(t,{method:"POST",body:i,signal:c.signal})];case 2:return[4,r.sent().json()];case 3:return[2,":"+r.sent().res.id];case 4:return l=r.sent(),console.error("%s %s",t,l),[3,5];case 5:return[2]}})})},t}return r.d(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.className,r=t.multiple,o=t.onFilesChange;return i.createElement("input",{className:n,ref:function(t){return e.fileInput=t},onChange:o,type:"file",name:"file",multiple:r})},t}(i.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n.n(r),o=n(3);function s(e,t){return i.a.createElement(o.FA,{className:e,name:t,fixWidth:!0})}var a={tuid:s("text-info","list-alt"),action:s("text-info","hand-o-right"),map:s("text-muted","list-ul"),book:s("text-muted","book"),query:s("text-warning","search"),history:s("text-info","hand-o-right"),pending:s("text-info","forward"),sheet:s("text-primary","wpforms")}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),i=function(e){function t(t,n){var r=e.call(this,n)||this;return r.cUq=t,r}return r.d(t,e),t}(n(3).Controller)},function(e,t,n){"use strict";var r=n(0),i=n(4),o=n(8),s=n(7),a=n(1),u=n.n(a),c=n(5),l=n(3),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.newClick=function(){return t.event("new")},t.schemaClick=function(){return t.event("schema")},t.archivesClick=function(){return t.event("archives")},t.sheetStateClick=function(e){return t.event("state",e)},t.renderState=function(e,n){var r=e.state,i=e.count;if(0===i)return null;var o=a.createElement("span",{className:"badge badge-success ml-5 align-self-end"},i);return a.createElement(l.LMR,{className:"px-3 py-2",left:t.controller.getStateLabel(r),right:o})},t.view=Object(c.a)(function(){var e,n=t.controller.statesCount.filter(function(e){return e.count}),r=a.createElement("button",{className:"btn btn-outline-primary",onClick:t.archivesClick},"\u5df2\u5f52\u6863");return!0===t.isDev&&(e=a.createElement("button",{className:"btn btn-primary mr-2",color:"primary",onClick:t.schemaClick},"\u6a21\u677f")),a.createElement(l.Page,{header:t.label},a.createElement(l.LMR,{className:"mx-3 my-2",right:r},a.createElement("button",{className:"btn btn-primary mr-2",color:"primary",onClick:t.newClick},"\u65b0\u5efa"),e),a.createElement(l.List,{className:"my-2",header:a.createElement(l.Muted,{className:"mx-3 my-1"},"\u5f85\u5904\u7406",t.label),none:"[ \u65e0 ]",items:n,item:{render:t.renderState,onClick:t.sheetStateClick}}))}),t}return r.d(t,e),t.prototype.open=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return this.openPage(this.view),[2]})})},t}(s.b),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSubmit=function(){return r.b(t,void 0,Promise,function(){var e,t;return r.e(this,function(n){switch(n.label){case 0:return e=this.vForm.getValues(),t=this.vForm.values,[4,this.controller.onSave(e,t)];case 1:return n.sent(),[2]}})})},t.view=function(){return a.createElement(l.Page,{header:t.label},t.vForm.render())},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.vForm=this.createForm(this.onSubmit,e),this.openPage(this.view),[2]})})},t}(s.b),p=n(33),f={width:"8rem"},m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.flowRow=function(e,t){var n,r=e.date,i=(e.user,e.preState,e.state),o=e.action;switch(void 0===o&&(o=a.createElement(a.Fragment,null,a.createElement(l.FA,{className:"text-primary",name:"pencil-square-o"})," \u5236\u5355")),i){case"$":break;case"#":n=a.createElement(a.Fragment,null,a.createElement(l.FA,{className:"text-success",name:"file-archive-o"}));break;default:n=a.createElement(a.Fragment,null,a.createElement(l.FA,{className:"text-muted",name:"arrow-right"})," \xa0 ",i)}return a.createElement(l.LMR,{left:a.createElement("div",{className:"pl-3 py-2",style:f},o),right:a.createElement("div",{className:"p-2"},a.createElement(l.Muted,null,a.createElement(l.EasyDate,{date:r})))},a.createElement("div",{className:"p-2"},n))},t.sheetView=function(){var e,n=t.sheetData,r=n.brief,i=n.flows;return"-"===r.state&&(e=a.createElement("div",{className:"mx-3 my-2",style:{color:"red"}},"\u672c\u5355\u636e\u4f5c\u5e9f")),a.createElement("div",null,e,t.vForm.render(),a.createElement(l.List,{header:a.createElement(l.Muted,{className:"mx-3 my-1"},"\u6d41\u7a0b"),items:i,item:{render:t.flowRow}}))},t}return r.d(t,e),t}(s.b),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSubmit=function(){return r.b(t,void 0,Promise,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return e=this.vForm.getValues(),[4,this.controller.saveSheet(e,this.vForm.values)];case 1:return t.sent(),this.closePage(),this.returnCall(this.vForm.values),[2]}})})},t.view=function(){return a.createElement(l.Page,{header:t.label},t.vForm.render())},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.sheetData=e,this.vForm=this.createForm(this.onSubmit,e.data,p.a.edit),this.openPage(this.view),[2]})})},t}(m),b=n(6),y=n.n(b),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionClick=function(e){return r.b(t,void 0,void 0,function(){var t,n,i,o;return r.e(this,function(r){switch(r.label){case 0:return t=this.sheetData.brief,n=t.id,i=t.flow,o=t.state,[4,this.controller.action(n,i,o,e.name)];case 1:return r.sent(),this.ceasePage(),this.openPage(this.acted),[2]}})})},t.deleteClick=function(){return r.b(t,void 0,void 0,function(){return r.e(this,function(e){return alert("\u5355\u636e\u4f5c\u5e9f\uff1a\u7a0b\u5e8f\u6b63\u5728\u8bbe\u8ba1\u4e2d"),[2]})})},t.editClick=function(){return r.b(t,void 0,void 0,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return[4,this.controller.editSheet(this.sheetData)];case 1:return e=t.sent(),this.vForm.setValues(e),[2]}})})},t.page=function(){var e,n,r=t.sheetData.brief,i=r.state,o=r.no,s=t.controller.getStateLabel(i),a=t.entity.states.find(function(e){return e.name===i});if(void 0===a){var c=void 0,d=void 0;switch(i){default:c="\u4e0d\u8ba4\u8bc6\u7684\u5355\u636e\u72b6\u6001'"+i+"'",d="text-info";break;case"-":c="\u5df2\u4f5c\u5e9f",d="text-danger";break;case"#":c="\u5df2\u5f52\u6863",d="text-success"}e=u.a.createElement("div",{className:y()(d)},"[",c,"]")}else e=u.a.createElement("div",{className:"flex-grow-1"},a.actions.map(function(e,n){return u.a.createElement("button",{key:n,className:"btn btn-primary mr-2",onClick:function(){return t.actionClick(e)}},t.controller.getActionLabel(i,e.name))})),"$"===i&&(n=u.a.createElement("div",null,u.a.createElement("button",{className:"btn btn-outline-info ml-2",onClick:t.editClick},"\u4fee\u6539"),u.a.createElement("button",{className:"btn btn-outline-danger ml-2",onClick:t.deleteClick},"\u4f5c\u5e9f")));return u.a.createElement(l.Page,{header:t.label+":"+s+"-"+o},u.a.createElement("div",{className:"mb-2"},u.a.createElement("div",{className:"d-flex px-3 py-2 border-bottom bg-light"},e,n),u.a.createElement(t.sheetView,null)))},t.acted=function(){var e=t.sheetData.brief.discription;return u.a.createElement(l.Page,{header:"\u5df2\u5904\u7406",back:"close"},u.a.createElement("div",{className:"p-3 d-flex flex-column align-items-center"},u.a.createElement("div",{className:"p-3"},e),u.a.createElement("div",{className:"text-success"},u.a.createElement(l.FA,{name:"check-circle-o"})," \u5355\u636e\u5df2\u5904\u7406\uff01"),u.a.createElement("div",{className:"p-3"},u.a.createElement("button",{className:"btn btn-outline-info",onClick:function(){return t.backPage()}},"\u8fd4\u56de"))))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.sheetData=e,this.vForm=this.createForm(void 0,e.data),this.openPage(this.page),[2]})})},t}(m),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.view=function(){return a.createElement(l.Page,{header:t.label+"\u6a21\u677f"},a.createElement("pre",{className:"mx-3 my-2"},t.entity.schemaStringify()))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return this.openPage(this.view),[2]})})},t}(s.b),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.archiveClick=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){return 1===e.processing?[2]:(this.event("archived",e),[2])})})},t.archiveRow=function(e,t){e.id,e.no,e.discription;var n=e.date,r=a.createElement(a.Fragment,null,1===e.processing?"... ":"",e.no," \xa0 ",e.discription),i=a.createElement(l.Muted,null,a.createElement(l.EasyDate,{date:n}));return a.createElement(l.LMR,{className:"px-3 py-2",left:r,right:i})},t.view=function(){return a.createElement(l.Page,{header:"\u5df2\u5f52\u6863"+t.label},a.createElement(l.List,{items:t.list,item:{render:t.archiveRow,onClick:t.archiveClick}}))},t}return r.d(t,e),t.prototype.open=function(){return r.b(this,void 0,void 0,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return e=this,[4,this.entity.getArchives(void 0,10)];case 1:return e.list=t.sent(),this.openPage(this.view),[2]}})})},t}(s.b),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rowClick=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){return 1===e.processing?(this.event("processing",e.id),[2]):(this.event("action",e.id),[2])})})},t.onScrollBottom=function(){console.log("onScrollBottom"),t.controller.pageStateItems.more()},t.rowContent=function(e){e.id;var t=e.no,n=e.discription,r=e.date,i=e.processing,o=a.createElement(a.Fragment,null,t," \xa0 ",a.createElement(l.Muted,null,n)," ",1===i?"...":""),s=a.createElement(l.Muted,null,a.createElement(l.EasyDate,{date:r}));return a.createElement(l.LMR,{className:"px-3 py-2",left:o,right:s})},t.renderRow=function(e,n){return a.createElement(t.row,r.a({},e))},t.view=function(){var e=t.controller.pageStateItems;return a.createElement(l.Page,{header:t.label+" - "+t.stateLabel,onScrollBottom:t.onScrollBottom},a.createElement(l.List,{items:e,item:{render:t.renderRow,onClick:t.rowClick}}))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return this.row=this.ui.listRow||this.rowContent,this.stateName=e.state,this.stateLabel=this.controller.getStateLabel(this.stateName),[4,this.controller.pageStateItems.first(this.stateName)];case 1:return t.sent(),this.openPage(this.view),[2]}})})},t}(s.b),N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.view=function(){var e=t.sheetData.brief;return a.createElement(l.Page,{header:t.label+":-"+e.no},a.createElement(t.sheetView,null))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.sheetData=e,this.vForm=this.createForm(void 0,this.sheetData.data),this.openPage(this.view),[2]})})},t}(m),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.restart=function(){return r.b(t,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return this.ceasePage(),[4,this.event("new")];case 1:return e.sent(),[2]}})})},t.actionClick=function(e){return r.b(t,void 0,void 0,function(){var t,n,i,o;return r.e(this,function(r){switch(r.label){case 0:return this.ceasePage(),t=this.brief,n=t.id,i=t.flow,o=t.state,[4,this.controller.action(n,i,o,e.name)];case 1:return r.sent(),this.openPage(this.acted),[2]}})})},t.buttons=a.createElement(a.Fragment,null,a.createElement("button",{className:"btn btn-outline-primary mr-3",onClick:t.restart},"\u7ee7\u7eed\u5f00\u5355"),a.createElement("button",{className:"btn btn-outline-info",onClick:function(){return t.backPage()}},"\u8fd4\u56de")),t.view=function(){var e=t.entity.states,n=e.find(function(e){return"$"===e.name}),r=a.createElement(a.Fragment,null,n.actions.map(function(e,n){return a.createElement("button",{key:n,className:"btn btn-primary mr-3",onClick:function(){return t.actionClick(e)}},t.controller.getActionLabel("$",e.name))}));return a.createElement(l.Page,{header:"\u5df2\u4fdd\u5b58",back:"close"},a.createElement("div",{className:"p-3 d-flex flex-column align-items-center"},a.createElement("div",{className:"text-success"},a.createElement(l.FA,{name:"check-circle-o"})," \u5355\u636e\u5df2\u4fdd\u5b58\uff01\u7cfb\u7edf\u5c1a\u672a\u5904\u7406"),a.createElement("div",{className:"p-3"},r,t.buttons)))},t.acted=function(){return a.createElement(l.Page,null,a.createElement("div",{className:"p-3 d-flex flex-column align-items-center"},a.createElement("div",{className:"text-success"},a.createElement(l.FA,{name:"check-circle-o"})," \u5355\u636e\u5df2\u5904\u7406\uff01"),a.createElement("div",{className:"p-3"},t.buttons)))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.brief=e,this.openPage(this.view),[2]})})},t}(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t}(s.b)),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=function(){var e=t.sheetData.brief,n=e.state,r=e.no,i=t.controller.getStateLabel(n);return u.a.createElement(l.Page,{header:t.label+":"+i+"-"+r},u.a.createElement("div",{className:"mb-2"},u.a.createElement("div",{className:"d-flex px-3 py-2 border-bottom bg-light"},"\u6b63\u5728\u5904\u7406\u4e2d..."),u.a.createElement(t.sheetView,null)))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.sheetData=e,this.vForm=this.createForm(void 0,e.data),this.openPage(this.page),[2]})})},t}(m),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.statesCount=i.m.array([],{deep:!0}),t.onSave=function(e,n){return r.b(t,void 0,Promise,function(){var t;return r.e(this,function(r){switch(r.label){case 0:return[4,this.saveSheet(e,n)];case 1:return t=r.sent(),this.ceasePage(),[4,this.showSaved(t)];case 2:return r.sent(),[2]}})})},t}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.loadStateSheetCount()];case 1:return e.sent(),this.pageStateItems=this.entity.createPageStateItems(),[4,this.openVPage(this.VSheetMain)];case 2:return e.sent(),[2]}})})},t.prototype.onMessage=function(e){return r.b(this,void 0,Promise,function(){var t,n,i,o;return r.e(this,function(r){return t=e.type,n=e.body,i=e.from,o=e.to,e.push,"sheet"===t&&this.onSheet(i,o,n),[2]})})},t.prototype.onSheet=function(e,t,n){var r=this.user.id,i=n.id,o=n.preState,s=n.state;console.log({$:"onMessage sheet",from:e,to:t.join(","),id:i,preState:o,state:s,me:r,sheetData:n}),e===r&&this.sheetActPreState(i,o),void 0!==t.find(function(e){return e===r})&&this.sheetActState(i,s,n)},t.prototype.sheetActPreState=function(e,t){if(this.changeStateCount(t,-1),void 0!==this.curState&&this.curState===t){var n=this.pageStateItems.items.findIndex(function(t){return t.id===e});n>=0&&this.pageStateItems.items.splice(n,1)}},t.prototype.sheetActState=function(e,t,n){this.changeStateCount(t,1),void 0!==this.curState&&this.curState===t&&this.pageStateItems.items.findIndex(function(t){return t.id===e})<0&&this.pageStateItems.items.push(n)},t.prototype.changeStateCount=function(e,t){if(void 0!==e){var n=this.statesCount.findIndex(function(t){return t.state===e});if(console.log({$:"changeState",state:e,delta:t,index:n}),!(n<0)){var r=this.statesCount[n];r.count+=t,r.count<0&&(r.count=0)}}},Object.defineProperty(t.prototype,"VSheetMain",{get:function(){return this.ui&&this.ui.main||d},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VSheetNew",{get:function(){return this.ui.sheetNew||h},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VSheetSaved",{get:function(){return this.ui.sheetSaved||k},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VSheetEdit",{get:function(){return this.ui.sheetEdit||v},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VSheetSchema",{get:function(){return w},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VArchives",{get:function(){return E},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VArchived",{get:function(){return N},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VSheetList",{get:function(){return C},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VSheetAction",{get:function(){return this.ui.sheetAction||g},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VSheetProcessing",{get:function(){return P},enumerable:!0,configurable:!0}),t.prototype.onEvent=function(e,t){return r.b(this,void 0,void 0,function(){var n;return r.e(this,function(r){switch(r.label){case 0:switch(e){case"new":return[3,2];case"schema":return[3,3];case"archives":return[3,4];case"state":return[3,5];case"archived":return[3,6];case"action":return[3,8];case"processing":return[3,10]}return[3,1];case 1:return[2];case 2:return n=this.VSheetNew,[3,12];case 3:return n=this.VSheetSchema,[3,12];case 4:return n=this.VArchives,[3,12];case 5:return this.curState=t.state,n=this.VSheetList,[3,12];case 6:return[4,this.showArchived(t)];case 7:return r.sent(),[2];case 8:return[4,this.showAction(t)];case 9:return r.sent(),[2];case 10:return[4,this.showProcessing(t)];case 11:return r.sent(),[2];case 12:return[4,this.openVPage(n,t)];case 13:return r.sent(),[2]}})})},t.prototype.startSheet=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.beforeStart()];case 1:return!1===t.sent()?[2]:[4,this.onEvent("action",e)];case 2:return t.sent(),[2]}})})},t.prototype.showAction=function(e){return r.b(this,void 0,void 0,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return[4,this.getSheetData(e)];case 1:return t=n.sent(),Object(o.m)({body:{$type:"msg",action:"$sheet",msg:{id:e,uq:this.cUq.uq.id,state:t.brief.state}}}),[4,this.openVPage(this.VSheetAction,t)];case 2:return n.sent(),[2]}})})},t.prototype.showProcessing=function(e){return r.b(this,void 0,void 0,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return[4,this.getSheetData(e)];case 1:return t=n.sent(),[4,this.openVPage(this.VSheetProcessing,t)];case 2:return n.sent(),[2]}})})},t.prototype.editSheet=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.vCall(this.VSheetEdit,e)];case 1:return[2,t.sent()]}})})},t.prototype.showArchived=function(e){return r.b(this,void 0,void 0,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return[4,this.getArchived(e.id)];case 1:return t=n.sent(),[4,this.openVPage(this.VArchived,t)];case 2:return n.sent(),[2]}})})},t.prototype.showSaved=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.openVPage(this.VSheetSaved,e)];case 1:return t.sent(),[2]}})})},t.prototype.getStateUI=function(e){var t=this.res.states;if(void 0!==t)return t[e]},t.prototype.getStateLabel=function(e){var t=this.getStateUI(e),n=t&&t.label||e;switch(n){default:return n;case"$":return"\u65b0\u5355"}},t.prototype.getActionLabel=function(e,t){var n=this.getStateUI(e);if(void 0===n)return t;var r=n.actions;if(void 0===r)return t;var i=r[t];return i&&i.label||t},t.prototype.loadStateSheetCount=function(){return r.b(this,void 0,Promise,function(){var e,t;return r.e(this,function(n){switch(n.label){case 0:return this.statesCount.clear(),[4,this.entity.stateSheetCount()];case 1:return t=n.sent(),(e=this.statesCount).splice.apply(e,[0,0].concat(t)),[2]}})})},t.prototype.getSheetData=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.entity.getSheet(e)];case 1:return[2,t.sent()]}})})},t.prototype.getArchived=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.entity.getArchive(e)];case 1:return[2,t.sent()]}})})},t.prototype.saveSheet=function(e,t){return r.b(this,void 0,Promise,function(){var n,i;return r.e(this,function(r){switch(r.label){case 0:return n=this.ui.sheetTitle,i=void 0===n?this.label:n(t,this.x),[4,this.entity.save(i,e)];case 1:return[2,r.sent()]}})})},t.prototype.action=function(e,t,n,i){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.entity.action(e,t,n,i)];case 1:return[2,r.sent()]}})})},t}(s.a);n.d(t,"a",function(){return S})},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(5),s=n(6),a=n.n(s),u=(n(142),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.d(t,e),t.prototype.render=function(){var e,t=this.props,n=t.className,r=t.badge,o=t.size,s=t.color,u=t.badgeAlign,c=t.badgeVertical,l=t.children,d=a()(n,"va-badge",o&&"va-badge-"+o,"va-badge-"+(s||"secondary"),u&&"va-badg-"+u,c&&"va-badg-"+c);return r&&(e=i.createElement("b",null,r)),i.createElement("div",{className:d},l,e)},t=r.c([o.a],t)}(i.Component),n(144),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e,t,n,r=this.props,o=r.className,s=r.left,u=r.children,c=r.right,l=r.onClick;return void 0!==s&&(e=i.createElement("header",null,s)),void 0!==c&&(t=i.createElement("footer",null,c)),void 0!==l&&(n="cursor-pointer"),i.createElement("div",{className:a()("va-lmr",o,n),onClick:l},e,i.createElement("div",null,u),t)},t=r.c([o.a],t)}(i.Component)),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.name,n=e.className,r=e.size,o=e.spin,a=e.fixWidth,u=e.border,c=e.pull,l=e.pulse,d=e.rotate,h=e.flip,p=e.inverse,f=s(n,"fa",t&&"fa-"+t,r&&"fa-"+r,a&&"fa-fw",u&&"fa-border",c&&"fa-pull-"+c,o&&"fa-spin",l&&"fa-pulse",d&&"fa-rotate-"+d,h&&"fa-flip-"+h,p&&"fa-inverse");return i.createElement("i",{className:f})},t}(i.Component),l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.size,r=e.children,o=s("fa-stack",t,n&&"fa-"+n);return i.createElement("span",{className:o},r)}}(i.Component),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.icon,n=e.iconClass,r=e.text,o=e.textClass;return i.createElement("div",{className:"py-2"},i.createElement(c,{className:n,name:t,fixWidth:!0}),i.createElement("span",{className:o},r))},t}(i.Component)),d=function(e){return i.createElement("small",{className:s("text-muted",e.className),style:e.style},e.children)};n.d(t,"c",function(){return u}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l}),n.d(t,"d",function(){return d})},function(e,t,n){"use strict";var r=n(0),i=n(3),o=n(12),s=n(23),a=n(17),u=n(7),c=n(1),l=n.n(c),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.view=function(){return c.createElement(i.Page,{header:t.label},"Book")},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){return this.openPage(this.view),[2]})})},t}(u.b),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.openVPage(this.VBookMain)];case 1:return e.sent(),[2]}})})},Object.defineProperty(t.prototype,"VBookMain",{get:function(){return d},enumerable:!0,configurable:!0}),t}(u.a),p=n(51),f=n(56),m=n(40),v=n(30),b=n(54),y=function(e){function t(t){var n=e.call(this,t)||this;n.isSysVisible=!1,n.view=function(){var e,t=n.controller,r=t.res,o=t.uq,s=t.error,a={render:function(e,t){return e.render()},onClick:void 0},u=[{header:r.tuid||"TUID",items:n.tuidLinks},{cn:"my-2",header:r.map||"MAP",items:n.mapLinks},{cn:"my-2",header:r.sheet||"SHEET",items:n.sheetLinks},{cn:"my-2",header:r.action||"ACTION",items:n.actionLinks},{cn:"my-2",header:r.query||"QUERY",items:n.queryLinks},{cn:"mt-2 mb-4",header:r.book||"BOOK",items:n.bookLinks},{cn:"mt-2 mb-4",header:r.history||"HISTORY",items:n.historyLinks},{cn:"mt-2 mb-4",header:r.pending||"PENDING",items:n.pendingLinks}];return e=void 0!==s?l.a.createElement("div",{className:"p-3 text-danger"},"\u8fde\u63a5\u9519\u8bef: ",s):u.map(function(e,t){var n=e.cn,r=e.header,o=e.items;return o.length>0&&l.a.createElement(i.List,{key:t,className:n,header:l.a.createElement("div",{className:"px-3 py-1 bg-light"},l.a.createElement(i.Muted,null,r)),items:o,item:a})}),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"px-3 py-1 small"},r.uq||o),e)};var r=t.uq,o=r.tuidArr,s=r.mapArr,u=r.sheetArr,c=r.actionArr,d=r.queryArr,h=r.bookArr,p=r.historyArr,f=r.pendingArr;return n.tuidLinks=o.filter(function(e){return n.isVisible(e)}).map(function(e){return new a.a(n.controller.cTuidMain(e))}),n.mapLinks=s.filter(function(e){return n.isVisible(e)}).map(function(e){return new a.a(n.controller.cMap(e))}),n.sheetLinks=u.filter(function(e){return n.isVisible(e)}).map(function(e){return new a.a(n.controller.cSheet(e))}),n.actionLinks=c.filter(function(e){return n.isVisible(e)}).map(function(e){return new a.a(n.controller.cAction(e))}),n.queryLinks=d.filter(function(e){return n.isVisible(e)}).map(function(e){return new a.a(n.controller.cQuery(e))}),n.bookLinks=h.filter(function(e){return n.isVisible(e)}).map(function(e){return new a.a(n.controller.cBook(e))}),n.historyLinks=p.filter(function(e){return n.isVisible(e)}).map(function(e){return new a.a(n.controller.cHistory(e))}),n.pendingLinks=f.filter(function(e){return n.isVisible(e)}).map(function(e){return new a.a(n.controller.cPending(e))}),n}return r.d(t,e),t.prototype.isVisible=function(e){return!0!==e.sys||this.isSysVisible},t.prototype.render=function(e){return void 0===this.view?l.a.createElement("div",null,"??? viewModel \u5fc5\u987b\u5b9a\u4e49 view ???"):l.a.createElement(this.view)},t}(i.View),g=n(57),w=n(58),E=n(29);function C(e){if(void 0!==e)for(var t in e)e[t.toLowerCase()]=e[t]}var N=function(e){function t(t,n,r){var o=e.call(this,Object(i.resLang)(r.res))||this;return o.tuidURs={},o.createBoxId=function(e,t){var n=e.name,r=o.tuidURs[n];if(void 0===r){var i=o.getUI(e),s=i.ui,a=i.res;o.tuidURs[n]=r=new E.b(e,s,a)}return new E.a(r,t)},o.isSysVisible=!1,o.cApp=t,C(r.tuid),C(r.sheet),C(r.map),C(r.query),C(r.action),C(r.book),C(r.history),C(r.pending),o.ui=r,o.CTuidMain=r.CTuidMain||v.d,o.CTuidEdit=r.CTuidEdit||v.a,o.CTuidList=r.CTuidList||v.c,o.CTuidSelect=r.CTuidSelect||v.e,o.CTuidInfo=r.CTuidInfo||v.b,o.CQuery=r.CQuery||m.a,o.CQuerySelect=r.CQuerySelect||m.b,o.CMap=r.CMap||b.a,o.CAction=r.CAction||f.a,o.CSheet=r.CSheet||p.a,o.CBook=r.CBook||h,o.CHistory=r.CHistory||g.a,o.CPending=r.CPending||w.a,o.uq=new s.b(t.uqs,n,o.createBoxId,void 0),o}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return[2]})})},t.prototype.init=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.uq.init()];case 1:return[2,e.sent()]}})})},t.prototype.loadEntities=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.uq.loadEntities()];case 1:return e.sent(),[3,3];case 2:return[2,e.sent()];case 3:return[2]}})})},t.prototype.getQuerySearch=function(e){return r.b(this,void 0,Promise,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return void 0!==(t=this.uq.query(e))?[3,1]:(alert("QUERY "+e+" \u6ca1\u6709\u5b9a\u4e49!"),[3,3]);case 1:return[4,t.loadSchema()];case 2:n.sent(),t.returns.length>1&&alert("QUERY "+e+" \u8fd4\u56de\u591a\u5f20\u8868, \u65e0\u6cd5\u505aQuerySearch"),n.label=3;case 3:return[2,t]}})})},t.prototype.getTuidPlaceHolder=function(e){var t=this.res,n=t.tuidPlaceHolder,r=t.entity,i=e.name;if(void 0!==r){var o=r[i];void 0!==o&&o.label}return n||"Select"},t.prototype.getNone=function(){return this.res.none||"none"},t.prototype.isVisible=function(e){return!0!==e.sys||this.isSysVisible},t.prototype.navSheet=function(e,t){return r.b(this,void 0,void 0,function(){var n;return r.e(this,function(r){switch(r.label){case 0:return void 0===(n=this.uq.sheetFromTypeId(e))?(alert("sheetTypeId "+e+" is not exists!"),[2]):[4,this.cSheet(n).startSheet(t)];case 1:return r.sent(),[2]}})})},t.prototype.sheet=function(e){return this.uq.sheet(e)},t.prototype.action=function(e){return this.uq.action(e)},t.prototype.query=function(e){return this.uq.query(e)},t.prototype.book=function(e){return this.uq.book(e)},t.prototype.map=function(e){return this.uq.map(e)},t.prototype.history=function(e){return this.uq.history(e)},t.prototype.pending=function(e){return this.uq.pending(e)},t.prototype.tuid=function(e){return this.uq.tuid(e)},t.prototype.tuidDiv=function(e,t){return this.uq.tuidDiv(e,t)},t.prototype.cSheetFromName=function(e){var t=this.uq.sheet(e);if(void 0!==t)return this.cSheet(t)},t.prototype.cActionFromName=function(e){var t=this.uq.action(e);if(void 0!==t)return this.cAction(t)},t.prototype.cQueryFromName=function(e){var t=this.uq.query(e);if(void 0!==t)return this.cQuery(t)},t.prototype.cBookFromName=function(e){var t=this.uq.book(e);if(void 0!==t)return this.cBook(t)},t.prototype.cMapFromName=function(e){var t=this.uq.map(e);if(void 0!==t)return this.cMap(t)},t.prototype.cHistoryFromName=function(e){var t=this.uq.history(e);if(void 0!==t)return this.cHistory(t)},t.prototype.cPendingFromName=function(e){var t=this.uq.pending(e);if(void 0!==t)return this.cPending(t)},t.prototype.cTuidMainFromName=function(e){var t=this.uq.tuid(e);if(void 0!==t)return this.cTuidMain(t)},t.prototype.cTuidEditFromName=function(e){var t=this.uq.tuid(e);if(void 0!==t)return this.cTuidEdit(t)},t.prototype.cTuidInfoFromName=function(e){var t=this.uq.tuid(e);if(void 0!==t)return this.cTuidInfo(t)},t.prototype.cTuidSelectFromName=function(e){var t=this.uq.tuid(e);if(void 0!==t)return this.cTuidSelect(t)},t.prototype.cFromName=function(e,t){switch(e){case"sheet":var n=this.uq.sheet(t);if(void 0===n)return;return this.cSheet(n);case"action":var r=this.uq.action(t);if(void 0===r)return;return this.cAction(r);case"tuid":var i=this.uq.tuid(t);if(void 0===i)return;return this.cTuidMain(i);case"query":var o=this.uq.query(t);if(void 0===o)return;return this.cQuery(o);case"book":var s=this.uq.book(t);if(void 0===s)return;return this.cBook(s);case"map":var a=this.uq.map(t);if(void 0===a)return;return this.cMap(a);case"history":var u=this.uq.history(t);if(void 0===u)return;return this.cHistory(u);case"pending":var c=this.uq.pending(t);if(void 0===c)return;return this.cPending(c)}},t.prototype.linkFromName=function(e,t){return this.link(this.cFromName(e,t))},t.prototype.getUI=function(e){var t,n,r=e.name,i=e.typeName;if(void 0!==this.ui)if("div"===i){var o=e.owner,s=this.ui[o.typeName];if(s)if(u=s[o.name]){var a=u.divs;a&&(t=a[r])}}else{var u;void 0!==(u=this.ui[i])&&(t=u[r])}var c=this.res.entity;return void 0!==c&&(n=c[r]),{ui:t||{},res:n||{}}},t.prototype.link=function(e){return new a.a(e)},Object.defineProperty(t.prototype,"tuidLinks",{get:function(){var e=this;return this.uq.tuidArr.filter(function(t){return e.isVisible(t)}).map(function(t){return e.link(e.cTuidMain(t))})},enumerable:!0,configurable:!0}),t.prototype.cTuidMain=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CTuidMain||this.CTuidMain)(this,e,n,r)},t.prototype.cTuidEdit=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CTuidEdit||this.CTuidEdit)(this,e,n,r)},t.prototype.cTuidList=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CTuidList||this.CTuidList)(this,e,n,r)},t.prototype.cTuidSelect=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CTuidSelect||this.CTuidSelect)(this,e,n,r)},t.prototype.cTuidInfo=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CTuidInfo||this.CTuidInfo)(this,e,n,r)},t.prototype.cSheet=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CSheet||this.CSheet)(this,e,n,r)},Object.defineProperty(t.prototype,"sheetLinks",{get:function(){var e=this;return this.uq.sheetArr.filter(function(t){return e.isVisible(t)}).map(function(t){return e.link(e.cSheet(t))})},enumerable:!0,configurable:!0}),t.prototype.cAction=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CAction||this.CAction)(this,e,n,r)},Object.defineProperty(t.prototype,"actionLinks",{get:function(){var e=this;return this.uq.actionArr.filter(function(t){return e.isVisible(t)}).map(function(t){return e.link(e.cAction(t))})},enumerable:!0,configurable:!0}),t.prototype.cQuery=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CQuery||this.CQuery)(this,e,n,r)},t.prototype.cQuerySelect=function(e){var t=this.uq.query(e);if(void 0!==t){var n=this.getUI(t),r=n.ui,i=n.res;return new(r&&r.CQuerySelect||this.CQuerySelect)(this,t,r,i)}},Object.defineProperty(t.prototype,"queryLinks",{get:function(){var e=this;return this.uq.queryArr.filter(function(t){return e.isVisible(t)}).map(function(t){return e.link(e.cQuery(t))})},enumerable:!0,configurable:!0}),t.prototype.cBook=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CBook||this.CBook)(this,e,n,r)},Object.defineProperty(t.prototype,"bookLinks",{get:function(){var e=this;return this.uq.bookArr.filter(function(t){return e.isVisible(t)}).map(function(t){return e.link(e.cBook(t))})},enumerable:!0,configurable:!0}),t.prototype.cHistory=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CHistory||this.CHistory)(this,e,n,r)},Object.defineProperty(t.prototype,"historyLinks",{get:function(){var e=this;return this.uq.historyArr.filter(function(t){return e.isVisible(t)}).map(function(t){return e.link(e.cHistory(t))})},enumerable:!0,configurable:!0}),t.prototype.cPending=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CPending||this.CPending)(this,e,n,r)},Object.defineProperty(t.prototype,"pendingLinks",{get:function(){var e=this;return this.uq.pendingArr.filter(function(t){return e.isVisible(t)}).map(function(t){return e.link(e.cPending(t))})},enumerable:!0,configurable:!0}),t.prototype.cMap=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CMap||this.CMap)(this,e,n,r)},Object.defineProperty(t.prototype,"mapLinks",{get:function(){var e=this;return this.uq.mapArr.filter(function(t){return e.isVisible(t)}).map(function(t){return e.link(e.cMap(t))})},enumerable:!0,configurable:!0}),t.prototype.getTuidContent=function(e){var t=this.getUI(e).ui;return t&&t.content||o.a},t.prototype.getTuidDivContent=function(e){var t=e.owner,n=this.getUI(t).ui;return n&&n.divs&&n.divs[e.name].content||o.a},t.prototype.showTuid=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.cTuidInfo(e).start(t)];case 1:return n.sent(),[2]}})})},t.prototype.showTuidDiv=function(e,t){return r.b(this,void 0,Promise,function(){var n;return r.e(this,function(r){switch(r.label){case 0:return n=e.owner,[4,this.cTuidInfo(n).start(t)];case 1:return r.sent(),[2]}})})},Object.defineProperty(t.prototype,"VUq",{get:function(){return y},enumerable:!0,configurable:!0}),t.prototype.render=function(){return new this.VUq(this).render()},t}(i.Controller);n.d(t,"a",function(){return N})},function(e,t,n){"use strict";var r=n(0),i=n(10),o=n.n(i),s=n(4),a=n(23),u=n(12),c=n(7),l=n(1),d=n(5),h=n(6),p=n.n(h),f=n(3),m=n(29),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemRender=function(e,n){return l.createElement(t.ItemRow,{item:e})},t.ItemRow=Object(d.a)(function(e){var n,r,i,o,s,a,c=e.item,d=(c.tuid,c.box),h=c.children,v=c.isLeaf,b=c.keyIndex,y=c.values,g=t.controller.keyUIs[b],w=g.content,E=g.valuesContent,C=g.none;if(!1===t.isFrom&&(n=l.createElement("button",{className:"btn btn-link btn-sm",onClick:function(){return t.controller.addClick(c)}},l.createElement(f.FA,{name:"plus"})),r=l.createElement("button",{className:"btn btn-link btn-sm",onClick:function(){return t.controller.removeClick(c)}},l.createElement(f.FA,{className:"text-info",name:"trash"}))),!1===v?i=0===b?n:l.createElement(l.Fragment,null,r," \xa0 ",n):b>0&&(i=r),!0===v)o=void 0,y&&(a=(E||u.a)(y,t.x));else{s="border-bottom";var N=C&&C(t.x);o=l.createElement(f.List,{className:"ml-4",items:h,item:{onClick:void 0,render:t.itemRender},none:N})}var k=l.createElement("div",{className:"py-1 pr-3"},Object(m.c)(d,w,t.x));return l.createElement("div",{className:"d-flex flex-column"},l.createElement(f.LMR,{className:p()("px-3","py-2",s),left:k,right:i},l.createElement("div",{className:"py-1"},a)),o)}),t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return this.isFrom=this.controller.isFrom,this.openPage(this.view),[2]})})},Object.defineProperty(t.prototype,"view",{get:function(){var e=this;return function(){return l.createElement(f.Page,{header:e.label},l.createElement(f.List,{items:e.controller.items,item:{className:"my-2",onClick:void 0,render:e.itemRender}}))}},enumerable:!0,configurable:!0}),t}(c.b),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onValuesSubmit=function(){return r.b(t,void 0,void 0,function(){var e;return r.e(this,function(t){return this.ceasePage(),e=this.vForm.getValues(),this.returnCall(e),[2]})})},t.view=function(){return l.createElement(f.Page,null,t.vForm.render())},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return this.vForm=this.createForm(this.onValuesSubmit),this.openPageElement(l.createElement(this.view,null)),[2]})})},t}(c.b),y=function(){return function(e,t,n,r){this.children=s.m.array([],{deep:!0}),this.parent=e,this.tuid=t,this.box=n,this.keyIndex=r,this.isLeaf=!1}}(),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.addClick=function(e){return r.b(t,void 0,void 0,function(){var t,n,i,o,s,u,c,l,d,h,p,f,m,v,y,g,w,E,C,N,k,P,S,x,F,I,O;return r.e(this,function(r){switch(r.label){case 0:if(t=e.keyIndex,n=e.children,i=this.keyFields.length,o=i-1,(s=t+1)>=i)return[2];for(u=this.keyFields[s],c=u.name,l=u._tuid,d={},h={},p=e;void 0!==p;p=p.parent)f=p.keyIndex,m=p.box,v=this.keyFields[f].name,d[v]=h[v]=m.id;return[4,this.searchOnKey(u,d)];case 1:return void 0===(y=r.sent())||y<=0?[2]:(l.useId(y),g=l.boxId(y),w={},E={},t+1!==o?[3,4]:(l.useId(y),E[c]=w[c]=g,this.entity.fields.length>0?[4,this.vCall(b,h)]:[3,3]));case 2:for(N in C=r.sent())E[N]=w[N]=C[N];r.label=3;case 3:return[3,5];case 4:for(E[c]=h[c]=g,N=s+1;N<o;N++)h[this.keyFields[N].name]=0;for(w[this.keyFields[o].name]=0,I=this.entity.fields,k=0,P=I;k<P.length;k++)S=P[k],S.name,x=S.type,!0!==S.null&&(w[S.name]=Object(a.c)(x));r.label=5;case 5:return h.arr1=[w],[4,this.entity.actions.add.submit(h)];case 6:return r.sent(),(F=n.findIndex(function(e){return e.box.id===y}))<0?n.push(this.createItem(e,l.tuid,g,s,E)):void 0!==(I=this.entity.fields)&&I.length>0&&(O=n[F],n.splice(F,1),O.values=E,n.splice(F,0,O)),this.removeCeased(),[2]}})})},t.removeClick=function(e){return r.b(t,void 0,void 0,function(){var t,n,i,s,a,u,c,l,d,h,p,f,m,v,b,y;return r.e(this,function(r){switch(r.label){case 0:if(t=this.keyFields[e.keyIndex],n=t._tuid,i=this.cUq.cTuidMain(n.tuid),s=i.getLable(n.tuid),a=this.res.confirmDelete||o.a.template("do you really want to remove ${label}?"),!1===confirm(a({label:s})))return[2];for(u=this.entity,l=(c={}).arr1=[],d={},l.push(d),h=e;void 0!==h;h=h.parent)p=h.keyIndex,d[this.keyFields[p].name]=h.box.id;for(f=this.keyFields.length,m=e.keyIndex+1;m<f;m++)v=this.keyFields[m],d[v.name]=-1;return[4,u.actions.del.submit(c)];case 1:return r.sent(),b=e.parent.children,(y=b.findIndex(function(t){return t===e}))>=0&&b.splice(y,1),[2]}})})},t}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,void 0,function(){var e,t,n,i,a,c,l,d,h,p,f,m,v,b;return r.e(this,function(r){switch(r.label){case 0:return e=this.entity,t=e.keys,n=e.schemaFrom,this.isFrom=void 0!==n,[4,(i=this.entity.queries.all).query({})];case 1:for(a=r.sent(),c=a.ret,l=t.length,this.keyUIs=o.a.clone(this.ui.keys||[]),this.keyFields=[],d=i.returns[0].fields,h=0;h<l;h++)this.keyFields.push(d[h]),h>=this.keyUIs.length&&this.keyUIs.push({content:u.a});for(this.items=Object(s.m)([]),p=void 0,f=0,m=c;f<m.length;f++)v=m[f],void 0!==(b=this.addItem(p,v))&&(this.items.push(b),p=b);return[4,this.openVPage(this.VMapMain)];case 2:return r.sent(),[2]}})})},t.prototype.createItem=function(e,t,n,r,i){var o=new y(e,t,n,r);return r===this.keyFields.length-1&&(o.isLeaf=!0,o.values=i),o},t.prototype.addItem=function(e,t){for(var n=void 0,r=this.keyFields.length,i=e,o=0;o<r;o++){var s=this.keyFields[o],a=s.name,u=s._tuid,c=t[a];if(void 0===c)break;var l=c.id;if(0!==o){var d=i.children,h=(i.box,d.length);if(h>0){var p=d[h-1];if(p.box.id===l){i=p;continue}}l>0&&d.push(i=this.createItem(i,u.tuid,c,o,t))}else{if(0===l)continue;void 0!==i&&i.box.id===l||(n=i=this.createItem(void 0,u.tuid,c,o,t))}}return n},t.prototype.searchOnKey=function(e,t){return r.b(this,void 0,Promise,function(){var n,i,o,s,a,u;return r.e(this,function(r){switch(r.label){case 0:return n=e._tuid,i=n.tuid,o=n.ownerField,s=this.cUq.cTuidSelect(i),a=t,void 0!==o&&"object"===typeof(a=t[o.name])&&(a=a.id),[4,s.call(a)];case 1:return u=r.sent(),[2,n.getIdFromObj(u)]}})})},Object.defineProperty(t.prototype,"VMapMain",{get:function(){return v},enumerable:!0,configurable:!0}),t}(c.a);n.d(t,"a",function(){return g})},function(e,t,n){"use strict";var r=n(0),i=n(3),o=n(8),s=n(53),a=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.userAppUnits=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.get("tie/user-app-units",{app:e})];case 1:return[2,t.sent()]}})})},t}(o.b))("tv/",void 0),u=n(23),c=n(1),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.appPage=function(){var e=t.controller.caption;return c.createElement(i.Page,{header:e,logout:function(){return r.b(t,void 0,void 0,function(){return r.e(this,function(e){return o.g.unit=void 0,[2]})})}},t.appContent())},t.appContent=function(){var e,n=t.controller.cUqArr;return e=0===n.length?c.createElement("div",{className:"text-danger"},c.createElement(i.FA,{name:""})," \u6b64APP\u6ca1\u6709\u7ed1\u5b9a\u4efb\u4f55\u7684UQ"):n.map(function(e,t){return c.createElement("div",{key:t},e.render())}),c.createElement(c.Fragment,null,e)},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return this.openPage(this.appPage),[2]})})},t.prototype.render=function(e){return this.appContent()},t}(i.VPage),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=function(e){var n=i.nav.user,r=n?n.name:"[\u672a\u767b\u5f55]",o=t.controller.uqs,s=o.appOwner,a=o.appName;return c.createElement(i.Page,{header:"APP\u65e0\u6cd5\u8fd0\u884c",logout:!0},c.createElement("div",{className:"m-3 text-danger container"},c.createElement("div",{className:"form-group row"},c.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u767b\u5f55\u7528\u6237"),c.createElement("div",{className:"col-sm text-body"},r)),c.createElement("div",{className:"form-group row"},c.createElement("div",{className:"col-sm-3 font-weight-bold"},"App"),c.createElement("div",{className:"col-sm text-body"},s+"/"+a)),c.createElement("div",{className:"form-group row"},c.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u9884\u8bbe\u5c0f\u53f7"),c.createElement("div",{className:"col-sm text-body"},e||c.createElement("small",{className:""},"[\u65e0\u9884\u8bbe\u5c0f\u53f7]"))),c.createElement("div",{className:"form-group row"},c.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u53ef\u80fd\u539f\u56e0",c.createElement(i.FA,{name:"exclamation-triangle"})),c.createElement("div",{className:"col-sm text-body"},c.createElement("ul",{className:"p-0"},c.createElement("li",null,"\u6ca1\u6709\u5c0f\u53f7\u8fd0\u884c ",a),c.createElement("li",null,"\u7528\u6237 ",c.createElement("b",null,r)," \u6ca1\u6709\u52a0\u5165\u4efb\u4f55\u4e00\u4e2a\u8fd0\u884c",a,"\u7684\u5c0f\u53f7"),e&&c.createElement("li",null,"\u9884\u8bbe\u5c0f\u53f7 ",c.createElement("b",null,e)," \u6ca1\u6709\u8fd0\u884cApp ",a)))),c.createElement("div",{className:"form-group row"},c.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u5c0f\u53f7",e),c.createElement("div",{className:"col-sm text-body"},"\u9884\u8bbe\u5c0f\u53f7\u5b9a\u4e49\u5728 public/unit.json \u6587\u4ef6\u4e2d\u3002 \u5b9a\u4e49\u4e86\u8fd9\u4e2a\u6587\u4ef6\u7684\u7a0b\u5e8f\uff0c\u53ea\u80fd\u7531url\u76f4\u63a5\u542f\u52a8\u3002 \u7528\u6237\u7b2c\u4e00\u6b21\u8bbf\u95eeapp\u4e4b\u540e\uff0c\u4f1a\u7f13\u5b58\u5728localStorage\u91cc\u3002",c.createElement("br",null),"\u5982\u679c\u8981\u5220\u53bb\u7f13\u5b58\u7684\u9884\u5b9a\u4e49Unit\uff0clogout\u7136\u540e\u518dlogin\u3002"))))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.openPage(this.page,e),[2]})})},t}(i.VPage),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderRow=function(e,t){var n=e.id,r=e.nick,o=e.name;return c.createElement(i.LMR,{className:"px-3 py-2",right:"id: "+n},c.createElement("div",null,r||o))},t.onRowClick=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return o.g.unit=e.id,[4,this.controller.start()];case 1:return t.sent(),[2]}})})},t.page=function(){return c.createElement(i.Page,{header:"\u9009\u62e9\u5c0f\u53f7",logout:!0},c.createElement(i.List,{items:t.controller.appUnits,item:{render:t.renderRow,onClick:t.onRowClick}}))},t}return r.d(t,e),t.prototype.open=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return this.openPage(this.page),[2]})})},t}(i.VPage),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=function(e){return c.createElement(i.Page,{header:"ERROR"},c.createElement("div",{className:"m-3"},c.createElement("div",null,"Load Uqs \u53d1\u751f\u9519\u8bef\uff1a"),e.map(function(e,t){return c.createElement("div",{key:t},e)})))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.openPage(this.page,e),[2]})})},t}(i.VPage),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=function(e){return c.createElement(i.Page,{header:"App start error!"},c.createElement("pre",null,"string"===typeof e?e:e.message))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.openPage(this.page,e),[2]})})},t}(i.VPage),m=function(e){function t(t){var n=e.call(this,Object(i.resLang)(t&&t.res))||this;if(n.cUqCollection={},n.cImportUqs={},i.nav.setSettings(t),n.name=t.appName,n.version=t.version,void 0===n.name)throw'appName like "owner/app" must be defined in UI';return n.uqs=new u.a(n.name,void 0),void 0===t.uqs&&(t.uqs={}),n.ui=t,n.caption=n.res.caption||"Tonva",n}return r.d(t,e),t.prototype.getImportUq=function(e,t){var n=e+"/"+t,r=this.cImportUqs[n];if(void 0!==r)return r;this.ui&&this.ui.uqs&&this.ui.uqs[n];return this.cImportUqs[n]=r=this.getCUq(n),r},t.prototype.newCUq=function(e,t){var n=new(this.ui.CUq||s.a)(this,e,t);return Object.setPrototypeOf(n.x,this.x),n},Object.defineProperty(t.prototype,"cUqArr",{get:function(){var e=[];for(var t in this.cUqCollection)e.push(this.cUqCollection[t]);return e},enumerable:!0,configurable:!0}),t.prototype.getCUq=function(e){return this.cUqCollection[e]},Object.defineProperty(t.prototype,"VAppMain",{get:function(){return this.ui&&this.ui.main||l},enumerable:!0,configurable:!0}),t.prototype.beforeStart=function(){return r.b(this,void 0,Promise,function(){var e,t,n,s,u;return r.e(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),[4,this.load()];case 1:return e=r.sent(),t=o.g.predefinedUnit,void 0!==(n=i.nav.user)&&n.id>0?(s=this,[4,a.userAppUnits(this.uqs.id)]):[3,3];case 2:switch(s.appUnits=r.sent(),this.appUnits.length){case 0:return this.showUnsupport(t),[2,!1];case 1:if(void 0===(u=this.appUnits[0].id)||u<0||void 0!==t&&u!=t)return this.showUnsupport(t),[2,!1];o.g.unit=u;break;default:if(t>0&&void 0!==this.appUnits.find(function(e){return e.id===t})){o.g.unit=t;break}return this.openVPage(h),[2,!1]}r.label=3;case 3:return void 0!==e?(this.openVPage(p),[2,!1]):[2,!0];case 4:return r.sent(),this.openVPage(f),[2,!1];case 5:return[2]}})})},t.prototype.load=function(){return r.b(this,void 0,Promise,function(){var e,t,n,i,s,a,u,c,l,d,h,p,f,m,v,b,y,g,w,E,C,N,k,P,S,x;return r.e(this,function(r){switch(r.label){case 0:return e=this.uqs,t=e.appOwner,n=e.appName,i=this.uqs.localData,(s=i.get())&&s.version===this.version?[3,2]:[4,Object(o.k)(t,n)];case 1:for((s=r.sent()).version=this.version,i.set(s),a=0,u=s.uqs;a<u.length;a++)u[a].newVersion=!0;r.label=2;case 2:for(c=s.id,l=s.uqs,this.uqs.id=c,d=[],h=[],p=[],f=0,m=l;f<m.length;f++)v=m[f],v.id,b=v.uqOwner,y=v.uqName,v.access,g=b+"/"+y,w=this.ui.uqs[g]||{},C=this.newCUq(v,w),this.cUqCollection[g]=C,this.uqs.addUq(C.uq),h.push(C.init());return[4,Promise.all(h)];case 3:for(E in r.sent(),this.cUqCollection)C=this.cUqCollection[E],p.push(C.loadEntities());return[4,Promise.all(p)];case 4:for(N=r.sent(),k=0,P=N;k<P.length;k++)S=P[k],void 0===(x=S)||d.push(x);return 0===d.length&&(d.push.apply(d,this.uqs.setTuidImportsLocal()),0===d.length)?[2]:[2,d]}})})},t.prototype.internalStart=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return!0!==e&&this.clearPrevPages(),[4,this.showMainPage()];case 1:return t.sent(),[2]}})})},t.prototype.clearPrevPages=function(){i.nav.clear()},t.prototype.showUnsupport=function(e){this.clearPrevPages(),this.openVPage(d,e)},t.prototype.showMainPage=function(){return r.b(this,void 0,void 0,function(){var e,t,n,i,s,a,u;return r.e(this,function(r){switch(r.label){case 0:return void 0===(e=Object(o.h)())?[3,2]:(t=e.split("-")).length>3?"sheet"!==(n=t[3])&&"sheet_debug"!==n?[3,2]:(i=Number(t[4]),s=Number(t[5]),a=Number(t[6]),void 0===(u=this.getCUqFromId(i))?(alert("unknown uqId: "+i),[2]):(this.clearPrevPages(),[4,u.navSheet(s,a)])):[3,2];case 1:return r.sent(),[2];case 2:return this.openVPage(this.VAppMain),[2]}})})},t.prototype.getCUqFromId=function(e){for(var t in this.cUqCollection){var n=this.cUqCollection[t];if(n.uq.id===e)return n}},t}(i.Controller);n.d(t,"a",function(){return m})},function(e,t,n){"use strict";var r=n(0),i=n(7),o=n(1),s=n(3),a=n(12),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSubmit=function(){return r.b(t,void 0,void 0,function(){var e,t;return r.e(this,function(n){switch(n.label){case 0:return e=this.vForm.getValues(),t=this,[4,this.controller.submit(e)];case 1:return t.returns=n.sent(),this.closePage(),this.openPage(this.resultPage),[2]}})})},t.mainPage=function(){var e=t.controller.label;return o.createElement(s.Page,{header:e},t.vForm.render("mx-3 my-2"))},t.resultPage=function(){var e=t.controller.label;return o.createElement(s.Page,{header:e,back:"close"},"\u5b8c\u6210\uff01",o.createElement("pre",null,Object(a.b)(t.returns)))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){return this.vForm=this.createForm(this.onSubmit,e),this.openPage(this.mainPage),[2]})})},t}(i.b),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.openVPage(this.VActionMain)];case 1:return e.sent(),[2]}})})},Object.defineProperty(t.prototype,"VActionMain",{get:function(){return u},enumerable:!0,configurable:!0}),t.prototype.submit=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return[2,this.entity.submit(e)]})})},t.prototype.submitReturns=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return[2,this.entity.submitReturns(e)]})})},t}(i.a);n.d(t,"a",function(){return c})},function(e,t,n){"use strict";var r=n(0),i=n(7),o=n(1),s=n(3),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.view=function(){return o.createElement(s.Page,{header:t.label},"History")},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){return this.openPage(this.view),[2]})})},t}(i.b),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.openVPage(this.VHistoryMain)];case 1:return e.sent(),[2]}})})},Object.defineProperty(t.prototype,"VHistoryMain",{get:function(){return a},enumerable:!0,configurable:!0}),t}(i.a);n.d(t,"a",function(){return u})},function(e,t,n){"use strict";var r=n(0),i=n(7),o=n(1),s=n(3),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.view=function(){return o.createElement(s.Page,{header:t.label},"pending")},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){return this.openPage(this.view),[2]})})},t}(i.b),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.openVPage(this.VPendingMain)];case 1:return e.sent(),[2]}})})},Object.defineProperty(t.prototype,"VPendingMain",{get:function(){return a},enumerable:!0,configurable:!0}),t}(i.a);n.d(t,"a",function(){return u})},function(e,t){},,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(16),i=n(21),o={set:function(e,t){Object(r.i)(e,t),i.a.setCenterToken(t)},clear:function(){Object(r.i)(0,void 0),i.a.setCenterToken(void 0)}}},,,function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return l});var r=n(0),i=n(1),o=n(9),s=n(14),a=n(11),u=function(){function e(e){var t=this;this.isDev=a.c.isDevelopment,this.onMessageReceive=function(e){return r.b(t,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.onMessage(e)];case 1:return t.sent(),[2]}})})},this.res=e||{},this.x=this.res.x||{}}return Object.defineProperty(e.prototype,"user",{get:function(){return o.b.user},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLogined",{get:function(){var e=o.b.user;return void 0!==e&&e.id>0},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){o.b.unregisterReceiveHandler(this.receiveHandlerId),this.onDispose()},e.prototype.onDispose=function(){},e.prototype.openVPage=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,new e(this).open(t)];case 1:return n.sent(),[2]}})})},e.prototype.renderView=function(e,t){return new e(this).render(t)},e.prototype.event=function(e,t){return r.b(this,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.onEvent(e,t)];case 1:return n.sent(),[2]}})})},e.prototype.onEvent=function(e,t){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return[2]})})},e.prototype.msg=function(e){alert(e)},e.prototype.errorPage=function(e,t){this.openPage(i.createElement(s.a,{header:"App error!"},i.createElement("pre",null,"string"===typeof t?t:t.message)))},e.prototype.onMessage=function(e){},e.prototype.beforeStart=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){return[2,!0]})})},e.prototype.registerReceiveHandler=function(){this.receiveHandlerId=o.b.registerReceiveHandler(this.onMessageReceive)},e.prototype.start=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return this.disposer=this.dispose.bind(this),this.registerReceiveHandler(),[4,this.beforeStart()];case 1:return!1===n.sent()?[2]:[4,this.internalStart.apply(this,[e].concat(t))];case 2:return n.sent(),[2]}})})},Object.defineProperty(e.prototype,"isCalling",{get:function(){return void 0!==this._resolve_$},enumerable:!0,configurable:!0}),e.prototype.call=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r.b(this,void 0,Promise,function(){var n=this;return r.e(this,function(i){return void 0===this._resolve_$&&(this._resolve_$=[]),[2,new Promise(function(i,o){return r.b(n,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return this._resolve_$.push(i),[4,this.start.apply(this,[e].concat(t))];case 1:return n.sent(),[2]}})})})]})})},e.prototype.vCall=function(e,t){return r.b(this,void 0,Promise,function(){var n=this;return r.e(this,function(i){return void 0===this._resolve_$&&(this._resolve_$=[]),[2,new Promise(function(i,o){return r.b(n,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return this._resolve_$.push(i),[4,new e(this).open(t)];case 1:return n.sent(),[2]}})})})]})})},e.prototype.returnCall=function(e){if(void 0!==this._resolve_$){var t=this._resolve_$.pop();void 0!==t?t(e):alert("the Controller call already returned, or not called")}},e.prototype.openPage=function(e){o.b.push(e,this.disposer),this.disposer=void 0},e.prototype.replacePage=function(e){o.b.replace(e,this.disposer),this.disposer=void 0},e.prototype.backPage=function(){o.b.back()},e.prototype.closePage=function(e){o.b.pop(e)},e.prototype.ceasePage=function(e){o.b.ceaseTop(e)},e.prototype.removeCeased=function(){o.b.removeCeased()},e.prototype.regConfirmClose=function(e){o.b.regConfirmClose(e)},e}(),c=function(){function e(e){this.controller=e,this.res=e.res,this.x=e.x}return Object.defineProperty(e.prototype,"isDev",{get:function(){return a.c.isDevelopment},enumerable:!0,configurable:!0}),e.prototype.renderVm=function(e,t){return new e(this.controller).render(t)},e.prototype.openVPage=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,new e(this.controller).open(t)];case 1:return n.sent(),[2]}})})},e.prototype.event=function(e,t){return r.b(this,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.controller.event(e,t)];case 1:return n.sent(),[2]}})})},e.prototype.vCall=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.controller.vCall(e,t)];case 1:return[2,n.sent()]}})})},e.prototype.returnCall=function(e){this.controller.returnCall(e)},e.prototype.openPage=function(e,t){this.controller.openPage(i.createElement(e,t))},e.prototype.replacePage=function(e,t){this.controller.replacePage(i.createElement(e,t))},e.prototype.openPageElement=function(e){this.controller.openPage(e)},e.prototype.replacePageElement=function(e){this.controller.replacePage(e)},e.prototype.backPage=function(){this.controller.backPage()},e.prototype.closePage=function(e){this.controller.closePage(e)},e.prototype.ceasePage=function(e){this.controller.ceasePage(e)},e.prototype.removeCeased=function(){this.controller.removeCeased()},e.prototype.regConfirmClose=function(e){this.controller.regConfirmClose(e)},e}(),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(e){return null},t}(c)},function(e,t,n){"use strict";var r=n(77);n.o(r,"CAppBase")&&n.d(t,"CAppBase",function(){return r.CAppBase}),n.o(r,"CBase")&&n.d(t,"CBase",function(){return r.CBase}),n.o(r,"CSub")&&n.d(t,"CSub",function(){return r.CSub}),n.o(r,"EasyDate")&&n.d(t,"EasyDate",function(){return r.EasyDate}),n.o(r,"Edit")&&n.d(t,"Edit",function(){return r.Edit}),n.o(r,"FA")&&n.d(t,"FA",function(){return r.FA}),n.o(r,"Form")&&n.d(t,"Form",function(){return r.Form}),n.o(r,"FormField")&&n.d(t,"FormField",function(){return r.FormField}),n.o(r,"IconText")&&n.d(t,"IconText",function(){return r.IconText}),n.o(r,"Image")&&n.d(t,"Image",function(){return r.Image}),n.o(r,"LMR")&&n.d(t,"LMR",function(){return r.LMR}),n.o(r,"List")&&n.d(t,"List",function(){return r.List}),n.o(r,"Loading")&&n.d(t,"Loading",function(){return r.Loading}),n.o(r,"Muted")&&n.d(t,"Muted",function(){return r.Muted}),n.o(r,"PropGrid")&&n.d(t,"PropGrid",function(){return r.PropGrid}),n.o(r,"SearchBox")&&n.d(t,"SearchBox",function(){return r.SearchBox}),n.o(r,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",function(){return r.TabCaptionComponent}),n.o(r,"Tabs")&&n.d(t,"Tabs",function(){return r.Tabs}),n.o(r,"UpdownWidget")&&n.d(t,"UpdownWidget",function(){return r.UpdownWidget}),n.o(r,"emailRegex")&&n.d(t,"emailRegex",function(){return r.emailRegex}),n.o(r,"mobileRegex")&&n.d(t,"mobileRegex",function(){return r.mobileRegex}),n.o(r,"resLang")&&n.d(t,"resLang",function(){return r.resLang}),n.o(r,"start")&&n.d(t,"start",function(){return r.start}),n.o(r,"tv")&&n.d(t,"tv",function(){return r.tv}),n.o(r,"userApi")&&n.d(t,"userApi",function(){return r.userApi});var i=n(78);n.o(i,"CAppBase")&&n.d(t,"CAppBase",function(){return i.CAppBase}),n.o(i,"CBase")&&n.d(t,"CBase",function(){return i.CBase}),n.o(i,"CSub")&&n.d(t,"CSub",function(){return i.CSub}),n.o(i,"EasyDate")&&n.d(t,"EasyDate",function(){return i.EasyDate}),n.o(i,"Edit")&&n.d(t,"Edit",function(){return i.Edit}),n.o(i,"FA")&&n.d(t,"FA",function(){return i.FA}),n.o(i,"Form")&&n.d(t,"Form",function(){return i.Form}),n.o(i,"FormField")&&n.d(t,"FormField",function(){return i.FormField}),n.o(i,"IconText")&&n.d(t,"IconText",function(){return i.IconText}),n.o(i,"Image")&&n.d(t,"Image",function(){return i.Image}),n.o(i,"LMR")&&n.d(t,"LMR",function(){return i.LMR}),n.o(i,"List")&&n.d(t,"List",function(){return i.List}),n.o(i,"Loading")&&n.d(t,"Loading",function(){return i.Loading}),n.o(i,"Muted")&&n.d(t,"Muted",function(){return i.Muted}),n.o(i,"PropGrid")&&n.d(t,"PropGrid",function(){return i.PropGrid}),n.o(i,"SearchBox")&&n.d(t,"SearchBox",function(){return i.SearchBox}),n.o(i,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",function(){return i.TabCaptionComponent}),n.o(i,"Tabs")&&n.d(t,"Tabs",function(){return i.Tabs}),n.o(i,"UpdownWidget")&&n.d(t,"UpdownWidget",function(){return i.UpdownWidget}),n.o(i,"emailRegex")&&n.d(t,"emailRegex",function(){return i.emailRegex}),n.o(i,"mobileRegex")&&n.d(t,"mobileRegex",function(){return i.mobileRegex}),n.o(i,"resLang")&&n.d(t,"resLang",function(){return i.resLang}),n.o(i,"start")&&n.d(t,"start",function(){return i.start}),n.o(i,"tv")&&n.d(t,"tv",function(){return i.tv}),n.o(i,"userApi")&&n.d(t,"userApi",function(){return i.userApi});n(79)},function(e,t){},function(e,t){},function(e,t,n){"use strict"},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var r=/^[0-9]*$/,i=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(6),s=n.n(o);!function(e){function t(t){var n=e.call(this,t)||this;return n.handleDocumentClick=function(e){!1!==n.state.dropdownOpen&&(n.button&&n.button.contains(e.target)||n.menu&&n.toggle())},n.toggle=function(){n.setState({dropdownOpen:!n.state.dropdownOpen})},n.state={dropdownOpen:!1},n}r.d(t,e),t.prototype.componentWillMount=function(){document.addEventListener("click",this.handleDocumentClick),document.addEventListener("touchstart",this.handleDocumentClick)},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this.handleDocumentClick),document.removeEventListener("touchstart",this.handleDocumentClick)},t.prototype.render=function(){var e=this,t=this.props,n=t.icon,r=t.actions,o=t.isRight;void 0===o&&(o=!0);var a=r.some(function(e){return void 0!==e.icon}),u=this.state.dropdownOpen;return i.createElement("div",{className:"dropdown"},i.createElement("button",{ref:function(t){return e.button=t},className:"cursor-pointer dropdown-toggle btn btn-sm","data-toggle":"dropdown","aria-expanded":u,onClick:this.toggle},i.createElement("i",{className:s()("fa","fa-"+(n||"ellipsis-v"))})),i.createElement("div",{ref:function(t){return e.menu=t},className:s()({"dropdown-menu":!0,"dropdown-menu-right":o,show:u})},r.map(function(e,t){var n,r=e.icon,o=e.caption,u=e.action;return void 0===r&&void 0===o?i.createElement("div",{className:"dropdown-divider"}):(!0===a&&(void 0!==r&&(r="fa-"+r),n=i.createElement(i.Fragment,null,i.createElement("i",{className:s()("fa",r,"fa-fw"),"aria-hidden":!0}),"\xa0 ")),void 0===u?i.createElement("h6",{className:"dropdown-header"},n," ",o):i.createElement("a",{className:"dropdown-item",key:t,href:"#",onClick:function(e){e.preventDefault(),u()}},n," ",o))})))}}(i.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n(1);function o(e,t){if(!e)return null;var n;switch(typeof e){default:n=e;break;case"string":n=new Date(e);break;case"number":n=new Date(1e3*e)}var r,i,o,s,a,u,c,l=new Date,d=n;r=l.getTime()-d.getTime();var h=d.getHours(),p=d.getMinutes();return i=l.getDate(),o=d.getDate(),s=d.getMonth()+1,a=d.getFullYear(),c=l.getFullYear(),u=!0===t?" "+h+(p<10?":0":":")+p:"",r<-864e5?a===c?s+"\u6708"+o+"\u65e5"+u:a+"\u5e74"+s+"\u6708"+o+"\u65e5"+u:r<864e5?o!==i?(r<0?"\u660e\u5929 ":"\u6628\u5929 ")+u:!0===t?u:"\u4eca\u5929":a===c?s+"\u6708"+o+"\u65e5":a+"\u5e74"+s+"\u6708"+o+"\u65e5"}var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){return o(this.props.date,!1)},t}(i.Component);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.d(t,e),t.prototype.render=function(){return o(this.props.date,!0)}}(i.Component)},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(6),s=n.n(o),a=n(3);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.d(t,e),t.prototype.render=function(){var e,t=this.props,n=t.icon,r=t.main,o=t.discription,u=t.px,c=t.py;e="string"===typeof o?i.createElement("div",null,o):o;var l=s()("media",void 0===u?"px-0":"px-"+u,void 0===c?"py-2":"py-"+c);return i.createElement("div",{className:l},i.createElement(a.Image,{className:"mr-3 w-4c h-4c",src:n}),i.createElement("div",{className:"media-body"},i.createElement("h5",{className:"mt-0"},r),e))}}(i.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),i=n(1),o=n(6),s=n.n(o),a=n(4),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.key=null,t.onChange=function(e){t.key=e.target.value,void 0!==t.key&&(t.key=t.key.trim(),""===t.key&&(t.key=void 0)),!0!==t.props.allowEmptySearch&&(t.disabled=!t.key)},t.onSubmit=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:if(e.preventDefault(),null===this.key&&(this.key=this.props.initKey||""),!0!==this.props.allowEmptySearch){if(!this.key)return[2];this.input&&(this.input.disabled=!0)}return[4,this.props.onSearch(this.key)];case 1:return t.sent(),this.input&&(this.input.disabled=!1),[2]}})})},t}return r.d(t,e),t.prototype.clear=function(){this.input&&(this.input.value="")},t.prototype.render=function(){var e,t,n=this,r=this.props,o=r.className,a=r.inputClassName,u=r.onFocus,c=r.label,l=r.placeholder,d=r.buttonText,h=r.maxLength;switch(r.size){default:case"sm":e="input-group-sm";break;case"md":e="input-group-md";break;case"lg":e="input-group-lg"}return void 0!==c&&(t=i.createElement("label",{className:"input-group-addon"},c)),i.createElement("form",{className:o,onSubmit:this.onSubmit},i.createElement("div",{className:s()("input-group",e)},t,i.createElement("input",{ref:function(e){return n.input=e},onChange:this.onChange,type:"text",name:"key",onFocus:u,className:s()("form-control",a||"border-primary"),placeholder:l,defaultValue:this.props.initKey,maxLength:h}),i.createElement("div",{className:"input-group-append"},i.createElement("button",{className:"btn btn-primary",type:"submit",disabled:this.disabled},i.createElement("i",{className:"fa fa-search"}),i.createElement("i",{className:"fa"}),d))))},r.c([a.m],t.prototype,"disabled",void 0),t}(i.Component)},function(e,t,n){"use strict";n(55),n(86),n(53),n(56),n(30),n(51),n(40),n(54),n(57),n(58),n(15),n(33);var r=n(87);n.o(r,"CAppBase")&&n.d(t,"CAppBase",function(){return r.CAppBase}),n.o(r,"CBase")&&n.d(t,"CBase",function(){return r.CBase}),n.o(r,"CSub")&&n.d(t,"CSub",function(){return r.CSub}),n.o(r,"EasyDate")&&n.d(t,"EasyDate",function(){return r.EasyDate}),n.o(r,"Edit")&&n.d(t,"Edit",function(){return r.Edit}),n.o(r,"FA")&&n.d(t,"FA",function(){return r.FA}),n.o(r,"Form")&&n.d(t,"Form",function(){return r.Form}),n.o(r,"FormField")&&n.d(t,"FormField",function(){return r.FormField}),n.o(r,"IconText")&&n.d(t,"IconText",function(){return r.IconText}),n.o(r,"Image")&&n.d(t,"Image",function(){return r.Image}),n.o(r,"LMR")&&n.d(t,"LMR",function(){return r.LMR}),n.o(r,"List")&&n.d(t,"List",function(){return r.List}),n.o(r,"Loading")&&n.d(t,"Loading",function(){return r.Loading}),n.o(r,"Muted")&&n.d(t,"Muted",function(){return r.Muted}),n.o(r,"NavView")&&n.d(t,"NavView",function(){return r.NavView}),n.o(r,"Page")&&n.d(t,"Page",function(){return r.Page}),n.o(r,"PropGrid")&&n.d(t,"PropGrid",function(){return r.PropGrid}),n.o(r,"SearchBox")&&n.d(t,"SearchBox",function(){return r.SearchBox}),n.o(r,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",function(){return r.TabCaptionComponent}),n.o(r,"Tabs")&&n.d(t,"Tabs",function(){return r.Tabs}),n.o(r,"UpdownWidget")&&n.d(t,"UpdownWidget",function(){return r.UpdownWidget}),n.o(r,"VPage")&&n.d(t,"VPage",function(){return r.VPage}),n.o(r,"View")&&n.d(t,"View",function(){return r.View}),n.o(r,"nav")&&n.d(t,"nav",function(){return r.nav}),n.o(r,"start")&&n.d(t,"start",function(){return r.start});n(50),n(7),n(17),n(49)},function(e,t,n){"use strict";n(0),n(1),n(55)},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n(1),o=function(){return function(){}}(),s=function(e){function t(t,n){var r=e.call(this)||this;return r.renderSubs=function(){return r.subsContainer(r.renderSubItems())},r.main=t,r.sub=n,r}return r.d(t,e),t.prototype.subsContainer=function(e){return i.createElement("div",null,e)},t.prototype.renderSubItems=function(){var e=this,t=this.model.subs;return t?t.map(function(t,n){return i.createElement(e.sub,r.a({key:n},t))}):null},t.prototype.render=function(){var e=this.model.main;return i.createElement(i.Fragment,null,i.createElement(this.main,r.a({},e)),i.createElement(this.renderSubs,null))},t}(o);!function(e){function t(t,n,r){var i=e.call(this)||this;return i.row=t,i.main=n,i.sub=r,i}r.d(t,e),t.prototype.render=function(){var e=this;return i.createElement(i.Fragment,null,this.model.map(function(t,n){var r=new e.row(e.main,e.sub);return r.model=t,i.createElement(i.Fragment,{key:n},r.render())}))}}(o)},function(e,t){},function(e,t,n){"use strict";n(1)},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(4),s=n(6),a=n.n(s),u=n(10),c=n.n(u),l=function(){return function(){}}(),d=function(e){function t(t){var n=e.call(this)||this;return n.func=t,n}return r.d(t,e),t.prototype.check=function(e,t){var n=this.func(t);if(void 0!==n)switch(typeof n){case"undefined":return;case"string":return void e.push(n);default:return void e.push.apply(e,n)}},t}(l),h=function(e){function t(t){var n=e.call(this)||this;return n.res=t,n}return r.d(t,e),t}(l),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.check=function(e,t){switch(typeof t){default:case"boolean":return;case"object":if(null!==t)return;break;case"string":if(t.trim().length>0)return;break;case"number":if(NaN!==t)return;break;case"undefined":}e.push(this.res.required)},t}(h),f=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.minMsg=c.a.template(t.min),i.maxMsg=c.a.template(t.max),i.min=n,i.max=r,i}return r.d(t,e),t.prototype.check=function(e,t){if(void 0!==t&&null!==t){var n=Number(t);NaN===n?e.push(this.res.number):this.checkMore(e,n)}},t.prototype.checkMore=function(e,t){void 0!==this.min&&Number(t)<this.min&&e.push(this.minMsg({min:this.min})),void 0!==this.max&&Number(t)>this.max&&e.push(this.maxMsg({max:this.max}))},t}(h),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.checkMore=function(t,n){e.prototype.checkMore.call(this,t,n),!1===Number.isInteger(n)&&t.push(this.res.integer)},t}(f),v=n(5),b=function(){function e(e,t,n,r){var o=this;this.errors=[],this.contextErrors=[],this.onInputChange=function(e){o.changeValue(e.target.value,!0)},this.container=Object(v.a)(function(){if(!1===o.visible)return null;var e=o.context,t=e.form;if(!0===e.inNode)return o.render();var n=o.label;return!0===o.itemSchema.required&&!1!==t.props.requiredFlag&&null!==n&&(n=i.createElement(i.Fragment,null,n,"\xa0",i.createElement("span",{className:"text-danger"},"*"))),t.FieldContainer(n,o.renderBody())}),this.context=e;var s=t.name;if(this.name=s,this.itemSchema=t,this.fieldProps=n,this.children=r,this.ui=e.getUiItem(s),void 0===this.ui)this.readOnly=!1,this.disabled=!1,this.visible=!0;else{var a=this.ui,u=a.readOnly,c=a.disabled,l=a.visible;this.readOnly=!0===u,this.disabled=!0===c,this.visible=!(!1===l)}this.value=this.defaultValue=e.getValue(s),this.init()}return Object.defineProperty(e.prototype,"hasError",{get:function(){return this.errors.length+this.contextErrors.length>0},enumerable:!0,configurable:!0}),e.prototype.init=function(){if(this.rules=[],!0===this.itemSchema.required&&this.rules.push(new p(this.context.form.res)),this.buildRules(),void 0!==this.ui){var e=this.ui.rules;if(void 0!==e)if(!1!==Array.isArray(e))for(var t=0,n=e;t<n.length;t++){var r=n[t];this.rules.push(new d(r))}else this.rules.push(new d(e))}},e.prototype.buildRules=function(){},e.prototype.checkRules=function(){for(var e,t=[],n=0,r=this.rules;n<r.length;n++){r[n].check(t,this.value)}0===t.length?this.context.removeErrorWidget(this):(this.context.addErrorWidget(this),(e=this.errors).push.apply(e,t))},Object.defineProperty(e.prototype,"isOk",{get:function(){return 0===this.errors.length},enumerable:!0,configurable:!0}),e.prototype.setError=function(e){var t;void 0!==e&&("string"===typeof e?this.errors.push(e):(t=this.errors).push.apply(t,e))},e.prototype.setContextError=function(e){var t;void 0!==e&&("string"===typeof e?this.contextErrors.push(e):(t=this.contextErrors).push.apply(t,e))},e.prototype.clearError=function(){this.errors.splice(0)},e.prototype.clearContextError=function(){this.contextErrors.splice(0)},e.prototype.parse=function(e){return e},e.prototype.setElementValue=function(e){},e.prototype.setDataValue=function(e){!0!==this.isChanging&&(this.context.initData[this.name]=this.value=this.parse(e))},e.prototype.setValue=function(e){!0!==this.isChanging&&this.changeValue(e,!1)},e.prototype.getValue=function(){return this.context.getValue(this.name)},e.prototype.getReadOnly=function(){return this.readOnly},e.prototype.getDisabled=function(){return this.disabled},e.prototype.getVisible=function(){return this.visible},e.prototype.setReadOnly=function(e){this.readOnly=e},e.prototype.setDisabled=function(e){this.disabled=e},e.prototype.setVisible=function(e){this.visible=e},e.prototype.changeValue=function(e,t){var n,r,i=this.value;void 0!==this.ui&&(n=this.ui.onChanging,r=this.ui.onChanged);var o=!0;void 0!==n&&(this.isChanging=!0,o=n(this.context,this.value,i),this.isChanging=!1),!0===o&&(this.setDataValue(e),!0!==t&&this.setElementValue(e),void 0!==r&&(this.isChanging=!0,r(this.context,this.value,i),this.isChanging=!1))},Object.defineProperty(e.prototype,"className",{get:function(){var e;return!1===this.context.inNode&&(e="form-control"),a()(e,this.context.form.FieldClass,this.ui&&this.ui.className)},enumerable:!0,configurable:!0}),e.prototype.renderBody=function(){var e;if(!1===this.hasError&&this.ui){var t=this.ui,n=t.discription,r=t.discriptionClassName;void 0===r&&(r="small text-muted"),e=i.createElement("span",{className:r},n)}return i.createElement(i.Fragment,null,this.render(),e)},Object.defineProperty(e.prototype,"label",{get:function(){var e;if(void 0===this.ui)e=this.name;else{var t=this.ui.label;e=null===t?null:t||this.name}return e},enumerable:!0,configurable:!0}),e.prototype.renderTemplet=function(){if(void 0!==this.children)return i.createElement(i.Fragment,null,this.children);if(void 0!==this.ui){var e=this.ui.Templet;return"function"===typeof e?e(this.value):e}},e.prototype.renderErrors=function(){var e=this.errors.concat(this.contextErrors);if(0===e.length)return null;var t=!0===this.context.inNode?"span":"div";return e.map(function(e){return i.createElement(t,{key:e,className:"text-danger d-inline-block my-2 ml-3"},i.createElement(i.Fragment,null,i.createElement("i",{className:"fa fa-exclamation-circle"})," \xa0",e))})},r.c([o.m],e.prototype,"errors",void 0),r.c([o.m],e.prototype,"contextErrors",void 0),r.c([o.e],e.prototype,"hasError",null),r.c([o.m],e.prototype,"visible",void 0),r.c([o.e],e.prototype,"isOk",null),e}(),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="text",t.onKeyDown=function(e){return r.b(t,void 0,void 0,function(){var t,n;return r.e(this,function(r){switch(r.label){case 0:return this.internalOnKeyDown(e),13!==e.keyCode?[2]:void 0===(t=this.context.form.props.onEnter)?[2]:(this.changeValue(e.currentTarget.value,!0),this.input.blur(),[4,t(this.name,this.context)]);case 1:return void 0!==(n=r.sent())&&this.context.setError(this.name,n),[2]}})})},t}return r.d(t,e),t.prototype.setElementValue=function(e){null!==this.input&&(this.input.value=e)},Object.defineProperty(t.prototype,"placeholder",{get:function(){return this.ui&&this.ui.placeholder||this.name},enumerable:!0,configurable:!0}),t.prototype.internalOnKeyDown=function(e){},t.prototype.onBlur=function(e){this.onInputChange(e),this.checkRules(),this.context.checkContextRules()},t.prototype.onFocus=function(e){this.clearError(),this.context.removeErrorWidget(this),this.context.clearErrors()},t.prototype.onChange=function(e){},t.prototype.setReadOnly=function(e){null!==this.input&&(this.input.readOnly=this.readOnly=e)},t.prototype.setDisabled=function(e){null!==this.input&&(this.input.disabled=this.disabled=e)},t.prototype.render=function(){var e=this,t=this.renderTemplet();if(void 0!==t)return t;var n={};return!0===this.hasError?n["is-invalid"]=!0:n["required-item"]=!0===this.itemSchema.required,i.createElement(i.Fragment,null,i.createElement("input",{ref:function(t){return e.input=t},className:a()(this.className,n),type:this.inputType,defaultValue:this.value,onChange:function(t){return e.onChange(t)},placeholder:this.placeholder,readOnly:this.readOnly,disabled:this.disabled,onKeyDown:this.onKeyDown,onFocus:function(t){return e.onFocus(t)},onBlur:function(t){return e.onBlur(t)},maxLength:this.itemSchema.maxLength}),this.renderErrors())},t}(b),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onInputChange=function(e){t.setValue(e.currentTarget.value)},t}return r.d(t,e),t.prototype.setElementValue=function(e){this.input.value=e},t.prototype.setReadOnly=function(e){this.input.readOnly=this.readOnly=e},t.prototype.setDisabled=function(e){this.input.disabled=this.disabled=e},t.prototype.render=function(){var e=this,t=this.renderTemplet();if(void 0!==t)return t;var n={};return!0===this.hasError?n["is-invalid"]=!0:n["required-item"]=!0===this.itemSchema.required,i.createElement("textarea",{ref:function(t){return e.input=t},className:a()(this.className,n),rows:this.ui&&this.ui.rows,maxLength:this.itemSchema.maxLength,defaultValue:this.defaultValue,onChange:this.onInputChange})},t}(b),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="password",t}return r.d(t,e),t}(y),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="url",t}return r.d(t,e),t}(y),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="email",t}return r.d(t,e),t}(y),N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="number",t}return r.d(t,e),t.prototype.buildRules=function(){e.prototype.buildRules.call(this);var t=this.context.form.res,n=this.itemSchema,r=n.min,i=n.max;this.rules.push("integer"===this.itemSchema.type?new f(t,r,i):new m(t,r,i))},t.prototype.parse=function(e){if(void 0!==e&&null!==e)return Number(e)},t}(y),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="number",t}return r.d(t,e),t.prototype.isValidKey=function(e){return 46===e||8===e||37===e||39===e||e>=48&&e<=57||e>=96&&e<=105||109===e||189===e},t.prototype.internalOnKeyDown=function(e){var t=e.keyCode;event.returnValue=this.isValidKey(t)},t}(N),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="date",t}return r.d(t,e),t}(y),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="datetime",t}return r.d(t,e),t}(y),x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="time",t}return r.d(t,e),t}(y),F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="month",t}return r.d(t,e),t}(y),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onInputChange=function(e){t.setDataValue(!0===e.target.checked?t.trueValue:t.falseValue)},t.onClick=function(){t.context.clearErrors()},t}return r.d(t,e),t.prototype.init=function(){if(e.prototype.init.call(this),void 0!==this.ui){var t=this.ui,n=t.trueValue,r=t.falseValue;this.trueValue=void 0===n||n,this.falseValue=void 0!==r&&r}else this.trueValue=!0,this.falseValue=!1},t.prototype.setElementValue=function(e){this.input.checked=e===this.trueValue},t.prototype.setReadOnly=function(e){this.input.readOnly=this.readOnly=e},t.prototype.setDisabled=function(e){this.input.disabled=this.disabled=e},t.prototype.render=function(){var e=this,t=a()(this.className,"form-check-inline p-0"),n=i.createElement("input",{ref:function(t){return e.input=t},className:"align-self-center",type:"checkbox",defaultChecked:this.defaultValue,onChange:this.onInputChange,onClick:this.onClick});return!0===this.context.inNode?i.createElement("label",{className:t},n," ",this.ui&&this.ui.label||this.name):i.createElement("div",{className:t},i.createElement("label",{className:"w-100 h-100 mb-0 d-flex justify-content-center"},n))},t}(b),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onInputChange=function(e){t.setDataValue(e.target.value)},t}return r.d(t,e),t.prototype.setElementValue=function(e){this.select.value=e},t.prototype.setReadOnly=function(e){this.select.disabled=this.readOnly=!e},t.prototype.setDisabled=function(e){this.select.disabled=this.disabled=e},t.prototype.render=function(){var e=this;if(!0===this.readOnly){var t=this.ui.list.find(function(t){return t.value===e.value}),n=void 0===t?"(???)":t.title;return i.createElement("span",{className:"form-control w-min-6c"},n)}return i.createElement("select",{ref:function(t){return e.select=t},className:a()(this.className,"form-control"),defaultValue:this.defaultValue,onChange:this.onInputChange},this.ui.list.map(function(e,t){var n=e.title,r=e.value;return i.createElement("option",{className:void 0,key:t,value:r},n||r)}))},r.c([o.m],t.prototype,"readOnly",void 0),t}(b),T={height:"auto"},A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputs={},t}return r.d(t,e),t.prototype.setElementValue=function(e){for(var t in this.inputs){var n=this.inputs[t];n.checked=e===n.value}},t.prototype.setReadOnly=function(e){for(var t in this.readOnly=e,this.inputs)this.inputs[t].readOnly=e},t.prototype.setDisabled=function(e){for(var t in this.disabled=e,this.inputs)this.inputs[t].disabled=e},t.prototype.render=function(){var e,t=this,n=this.ui,r=n.defaultValue,o=n.list,s=this.context,u=s.isRow;s.inNode;!0===u&&(e=this.context.rowKey);var c=a()(this.className,"py-0");return i.createElement("span",{className:c,style:T},o.map(function(n,o){var s=n.value,a=n.title,u=t.name;return void 0!==e&&(u+="-"+e),i.createElement("label",{key:o,className:"form-radio-inline"},i.createElement("input",{ref:function(e){return t.inputs[o]=e},type:"radio",name:u,value:s,defaultChecked:(t.defaultValue||r)===s,onChange:t.onInputChange}),a||s)}))},t}(b),q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="range",t}return r.d(t,e),t.prototype.setReadOnly=function(e){this.input.readOnly=this.readOnly=e},t.prototype.setDisabled=function(e){this.input.disabled=this.disabled=e},t.prototype.render=function(){var e=this,t=this.ui,n=t.min,r=t.max,o=t.step;return i.createElement(i.Fragment,null,i.createElement("input",{ref:function(t){return e.input=t},className:a()(this.className,"form-control","w-min-6c"),type:this.inputType,defaultValue:this.defaultValue,onChange:this.onInputChange,max:r,min:n,step:o}))},t}(b),j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){return r.b(t,void 0,void 0,function(){var e,t;return r.e(this,function(n){switch(n.label){case 0:return void 0===(e=this.ui&&this.ui.pickId)?(alert("no pickId defined!"),[2]):[4,e(this.context,this.name,this.value)];case 1:return t=n.sent(),this.setDataValue(t),this.clearError(),this.clearContextError(),this.checkRules(),[2]}})})},t}return r.d(t,e),t.prototype.setReadOnly=function(e){this.readOnly=e},t.prototype.setDisabled=function(e){this.disabled=e},t.prototype.render=function(){var e,t;void 0!==this.ui&&(e=this.ui.placeholder,t=this.ui.Templet);var n,r={"form-control":!0,"required-item":!0===this.itemSchema.required,"cursor-pointer":!0,"is-invalid":this.hasError};return void 0===this.value||null===this.value?(n=e||"placeholder",r["text-muted"]=!0):n=void 0===t?i.createElement(i.Fragment,null,this.value):"function"===typeof t?t(this.value):t,i.createElement(i.Fragment,null,i.createElement("div",{className:a()(r),onClick:this.onClick},n),this.renderErrors())},r.c([o.m],t.prototype,"value",void 0),t}(b),V=function(e,t,n){return i.createElement("span",{className:"text-danger"},"!!data type ",e," only support ",(n||[]).join(", "),", can't use ui ",t,"!!")},D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){return r.b(t,void 0,void 0,function(){var e,t;return r.e(this,function(n){switch(n.label){case 0:return this.clearError(),this.clearContextError(),e=this.itemSchema,t=e.name,"submit"!==e.type?[3,2]:[4,this.context.submit(t)];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.observerRender=Object(v.a)(function(){var e,n,r,o=t.itemSchema,s=o.name,a=o.type;if(void 0!==t.ui){var u=t.ui.widget;if("button"!==u)return V(a,u,["button"]);e=t.ui.Templet,n=t.ui.className,r=t.ui.label}var c,l=t.context,d=l.form,h=l.hasError,p=t.context,f="submit"===a&&h;c=void 0!==t.children?t.children:"function"===typeof e?e():void 0!==e?e:r;var m=i.createElement("button",{className:n,type:"button",disabled:f,onClick:t.onClick},c||s);return!0===p.inNode?i.createElement(i.Fragment,null,m,t.renderErrors()):i.createElement("div",{className:d.ButtonClass},i.createElement("div",null,t.renderErrors()),m)}),t}return r.d(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.render=function(){return i.createElement(this.observerRender,null)},t}(b),R=function(){function e(e,t,n,r,o){var s,a=this;if(this.widgets={},this.errors=[],this.errorWidgets=[],this.renderErrors=Object(v.a)(function(){var e=a.errors;return 0===e.length?null:i.createElement(i.Fragment,null,e.map(function(e){return i.createElement("span",{key:e,className:"text-danger inline-block my-1 ml-3"},i.createElement("i",{className:"fa fa-exclamation-circle"})," \xa0",e)}))}),this.form=e,this.uiSchema=t,this.initData=n,this.inNode=r,this.isRow=o,void 0!==t){var u=t.rules;void 0!==u&&(this.rules=[],!1===Array.isArray(u)?this.rules.push(u):(s=this.rules).push.apply(s,u))}}return e.prototype.getArrRowContexts=function(e){void 0===this.subContexts&&(this.subContexts={});var t=this.subContexts[name];return void 0===t&&(this.subContexts[name]=t={}),t},Object.defineProperty(e.prototype,"arrName",{get:function(){},enumerable:!0,configurable:!0}),e.prototype.getValue=function(e){return this.initData[e]},e.prototype.setValue=function(e,t){this.initData[e]=t;var n=this.widgets[e];void 0!==n&&n.setValue(t)},e.prototype.getDisabled=function(e){var t=this.widgets[e];if(void 0!==t)return t.getDisabled()},e.prototype.setDisabled=function(e,t){var n=this.widgets[e];void 0!==n&&n.setDisabled(t)},e.prototype.getReadOnly=function(e){var t=this.widgets[e];void 0!==t&&t.getReadOnly()},e.prototype.setReadOnly=function(e,t){var n=this.widgets[e];void 0!==n&&n.setReadOnly(t)},e.prototype.getVisible=function(e){var t=this.widgets[e];void 0!==t&&t.getVisible()},e.prototype.setVisible=function(e,t){var n=this.widgets[e];void 0!==n&&n.setVisible(t)},e.prototype.submit=function(e){return r.b(this,void 0,void 0,function(){var t,n,i,o,s,a;return r.e(this,function(r){switch(r.label){case 0:if(this.checkRules(),!0===this.hasError){for(t="",n=0,i=this.errorWidgets;n<i.length;n++)o=i[n],t+=o.name+":\n"+o.errors.join("\n");return console.error(t),[2]}return void 0===(s=this.form.props.onButtonClick)?(alert("button "+e+" clicked. you should define form onButtonClick"),[2]):[4,s(e,this)];case 1:return void 0===(a=r.sent())?[2]:(this.setError(e,a),[2])}})})},e.prototype.checkFieldRules=function(){for(var e in this.widgets)this.widgets[e].checkRules();if(void 0!==this.subContexts)for(var e in this.subContexts){var t=this.subContexts[e];for(var n in t)t[n].checkFieldRules()}},e.prototype.checkContextRules=function(){var e;if(this.clearErrors(),void 0!==this.rules){for(var t=0,n=this.rules;t<n.length;t++){var r=(0,n[t])(this);if(void 0!==r)if(!0===Array.isArray(r))(e=this.errors).push.apply(e,r);else if("string"===typeof r)this.errors.push(r);else for(var i in r)this.setError(i,r[i])}if(void 0!==this.subContexts)for(var i in this.subContexts){var o=this.subContexts[i];for(var s in o){var a=o[s];a.clearErrors(),a.checkContextRules()}}}},e.prototype.setError=function(e,t){var n=this.widgets[e];void 0!==n&&(n.setContextError(t),this.addErrorWidget(n))},e.prototype.clearContextErrors=function(){for(var e in this.widgets){var t=this.widgets[e];void 0!==t&&t.clearContextError()}},e.prototype.clearWidgetsErrors=function(){for(var e in this.widgets){var t=this.widgets[e];void 0!==t&&t.clearError()}},e.prototype.checkRules=function(){this.clearErrors(),this.clearWidgetsErrors(),this.checkFieldRules(),!0!==this.hasError&&this.checkContextRules()},e.prototype.addErrorWidget=function(e){this.errorWidgets.findIndex(function(t){return t===e})<0&&this.errorWidgets.push(e)},e.prototype.removeErrorWidget=function(e){var t=this.errorWidgets.findIndex(function(t){return t===e});t>=0&&this.errorWidgets.splice(t,1)},e.prototype.checkHasError=function(){if(!0===this.errorWidgets.length+this.errors.length>0)return!0;if(void 0===this.subContexts)return!1;for(var e in this.subContexts){var t=this.subContexts[e];for(var n in t)if(!0===t[n].hasError)return!0}return!1},Object.defineProperty(e.prototype,"hasError",{get:function(){return this.checkHasError()},enumerable:!0,configurable:!0}),e.prototype.clearErrors=function(){this.errors.splice(0),this.errorWidgets.splice(0),this.clearContextErrors()},r.c([o.m],e.prototype,"errors",void 0),r.c([o.m],e.prototype,"errorWidgets",void 0),r.c([o.e],e.prototype,"hasError",null),e}(),L=1,U=function(e){function t(t,n,r,i){var o,s=this,a=t.uiSchema;if(void 0!==a){var u=a.items;void 0!==u&&(o=u[n.name])}return(s=e.call(this,t.form,o,r,i,!0)||this).parentContext=t,s.arrSchema=n,s.rowKey=L++,s.data=r,s}return r.d(t,e),t.prototype.getItemSchema=function(e){return this.arrSchema.itemSchemas[e]},t.prototype.getUiItem=function(e){if(void 0!==this.uiSchema){var t=this.uiSchema.items;if(void 0!==t)return t[e]}},Object.defineProperty(t.prototype,"arrName",{get:function(){return this.arrSchema.name},enumerable:!0,configurable:!0}),t.prototype.clearErrors=function(){e.prototype.clearErrors.call(this),this.parentContext.clearErrors()},Object.defineProperty(t.prototype,"parentData",{get:function(){return this.parentContext.data},enumerable:!0,configurable:!0}),t}(R),M=function(e){function t(t,n){return e.call(this,t,t.uiSchema,t.data,n,!1)||this}return r.d(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.form.data},enumerable:!0,configurable:!0}),t.prototype.getItemSchema=function(e){return this.form.itemSchemas[e]},t.prototype.getUiItem=function(e){var t=this.form.uiSchema;if(void 0!==t){var n=t.items;if(void 0!==n)return n[e]}},t}(R),B=i.createContext({}),W=Object(v.a)(function(e){var t,n,r,o,s=e.parentContext,u=e.arrSchema,c=e.children,l=u.name,d=u.arr,h=s.initData[l],p=s.form,f=s.getArrRowContexts(l),m=s.getUiItem(l),b=l,y=p.ArrContainer,g=p.RowContainer,w=p.RowSeperator,E=p.uiSchema;if(void 0!==E){var C=E.selectable,N=E.deletable,k=E.restorable;!0!==n&&(n=C),!0!==r&&(r=N),!0!==o&&(o=k)}if(void 0!==m){var P=m.widget,S=m.label,x=m.selectable,F=m.deletable,I=m.restorable,O=m.ArrContainer,T=m.RowContainer,A=m.RowSeperator;if(void 0!==x&&(n=x),void 0!==F&&(r=F),void 0!==I&&(o=I),void 0!==O&&(y=O),void 0!==T&&(g=T),void 0!==A&&(w=A),t=m.Templet,"arr"!==P)return V(u.type,P,["arr"]);b=S||b}var q=!0;return y(b,i.createElement(i.Fragment,null,h.map(function(e,l){var p,m,b=void 0;if(!1===q?b=w:q=!1,void 0!==c)p=new U(s,u,e,!0),m=i.createElement(i.Fragment,null,c);else{var y=typeof t;"function"===y?(p=new U(s,u,e,!0),m=i.createElement(Object(v.a)(t),e)):"object"===y?(p=new U(s,u,e,!0),m=t):(p=new U(s,u,e,!1),m=i.createElement(i.Fragment,null,d.map(function(e,t){return i.createElement(i.Fragment,{key:e.name},J(p,e,void 0))})))}var E,C,N=p.rowKey;if(f[N]=p,!0===n){E=i.createElement("div",{className:"form-row-checkbox"},i.createElement("input",{type:"checkbox",onClick:function(t){var n=t.target.checked;e.$isSelected=n;var r=e.$source;void 0!==r&&(r.$isSelected=n),p.clearErrors()},defaultChecked:e.$isSelected}))}var k=!(void 0===e.$isDeleted||!1===e.$isDeleted);if(!0===r){var P=k?"fa-undo":"fa-trash";C=i.createElement("div",{className:"form-row-edit text-info",onClick:function(){if(!0===o){e.$isDeleted=!k;var t=e.$source;void 0!==t&&(t.$isDeleted=!k)}else{var n=h.indexOf(e);n>=0&&h.splice(n,1)}p.clearErrors()}},i.createElement("i",{className:a()("fa",P,"fa-fw")}))}var S=!0===n||!0===r?function(t){return i.createElement("fieldset",{disabled:k},i.createElement("div",{className:a()("d-flex",{deleted:k,"row-selected":e.$isSelected})},E,i.createElement("div",{className:!0===n&&!0===r?"form-row-content":"form-row-content-1"},t),C))}:function(e){return e};return i.createElement(B.Provider,{key:N,value:p},b,g(S(i.createElement(i.Fragment,null,i.createElement(p.renderErrors,null),m))))})))}),H=n(25),z=n(41),K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){return r.b(t,void 0,void 0,function(){var e,t;return r.e(this,function(n){switch(n.label){case 0:return[4,(e=new z.a(this.itemSchema,this.ui,this.ui.label,this.value)).start()];case 1:return null!==(t=n.sent())&&(this.setValue(t),this.imageSrc=t),[4,e.end()];case 2:return n.sent(),[2]}})})},t.observerRender=Object(v.a)(function(){var e,n=["bg-white p-1 d-flex justify-content-center"];return t.readOnly||t.disabled||(n.push("cursor-pointer"),e=t.onClick),i.createElement("div",{className:a()(n),onClick:e},i.createElement(H.a,{src:t.imageSrc,className:"w-4c h-4c"}))}),t}return r.d(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.imageSrc=this.value},t.prototype.render=function(){return i.createElement(this.observerRender,null)},r.c([o.m],t.prototype,"imageSrc",void 0),t}(b),Q={id:{dataTypes:["id"],widget:j},text:{dataTypes:["integer","number","string"],widget:y},textarea:{dataTypes:["string"],widget:g},password:{dataTypes:["string"],widget:w},date:{dataTypes:["date"],widget:P},datetime:{dataTypes:["date"],widget:S},time:{dataTypes:["date"],widget:x},month:{dataTypes:["date"],widget:F},select:{dataTypes:["integer","number","string","date","boolean"],widget:O},url:{dataTypes:["string"],widget:E},email:{dataTypes:["string"],widget:C},number:{dataTypes:["integer","number"],widget:N},updown:{dataTypes:["integer","number"],widget:k},color:{},checkbox:{dataTypes:["boolean","integer","number"],widget:I},image:{dataTypes:["string"],widget:K},checkboxes:{},radio:{dataTypes:["integer","number","string","date","boolean"],widget:A},range:{dataTypes:["integer"],widget:q},button:{dataTypes:["button","submit"],widget:D}};function J(e,t,n,r){if(void 0===e)return null;if(void 0!==t){var o,s=t.name,a=t.type;switch(a){case"arr":var u=e.getItemSchema(s);return i.createElement(W,{parentContext:e,arrSchema:u,children:n})}var c=e.getUiItem(s);if(void 0===c)o=p(a);else{var l=c.widget;switch(l){default:if(void 0!==l)o=Q[l].widget;void 0===o&&(o=p(a));break;case"custom":o=c.WidgetClass;break;case"group":return i.createElement("span",null,"impletment group")}}e.isRow;var d=e.widgets,h=new o(e,t,r,n);return d[s]=h,i.createElement(h.container,null)}function p(e){switch(e){default:return y;case"id":return j;case"integer":return k;case"number":return N;case"string":return y;case"date":return P;case"boolean":return I;case"button":case"submit":return D}}}n(74);var G={_:{required:"required",number:"not valid number",integer:"not valid integer",min:"min value is ${min}",max:"max value is ${max}"},zh:{_:{required:"\u5fc5\u987b\u586b",number:"\u9700\u8981\u6570\u5b57",integer:"\u9700\u8981\u6574\u6570",min:"\u4e0d\u80fd\u5c0f\u4e8e${min}",max:"\u4e0d\u80fd\u5927\u4e8e${max}"}}},X=n(32),Z=function(e){function t(t){var n=e.call(this,t)||this;n.watch=function(){void 0!==n.props.formData&&n.calcSelectOrDelete()},n.DefaultContainer=function(e){return i.createElement("form",{className:a()(n.props.className),onSubmit:function(e){return e.preventDefault()}},e)},n.DefaultFieldContainer=function(e,t){var r=n.props.fieldLabelSize;if(r>0){var o=void 0;null===e?r=0:o=i.createElement("label",{className:a()("col-sm-"+r,"col-form-label")},e);var s="col-sm-"+(12-r);return i.createElement("div",{className:"form-group row"},o,i.createElement("div",{className:s},t))}return i.createElement("div",{className:"form-group"},null===e?null:i.createElement("label",{className:"col-form-label"},e),t)},n.DefaultFieldClass=void 0,n.DefaultButtonClass="text-center py-2",n.DefaultRes=Object(X.a)(G),n.ArrContainer=function(e,t){return i.createElement("div",null,i.createElement("div",{className:a()("small text-muted text-center bg-light py-1 px-3 mt-4 mb-1")},e),t)},n.RowContainer=function(e){var t=a()({"py-3":!0});return i.createElement("div",{className:t},e)},n.RowSeperator=i.createElement("div",{className:"border border-gray border-top"});var r=t.schema,s=t.uiSchema,u=(t.formData,t.Container),c=t.FieldContainer,l=t.FieldClass,d=t.ButtonClass,h=t.res;n.Container=u||n.DefaultContainer,n.FieldContainer=c||n.DefaultFieldContainer,n.FieldClass=void 0!==l&&""!==l&&null!==l?l:n.DefaultFieldClass,n.res=h||n.DefaultRes,n.ButtonClass=d||n.DefaultButtonClass,n.schema=r,n.itemSchemas={};for(var p=0,f=n.schema;p<f.length;p++){var m=f[p];n.itemSchemas[m.name]=m}return n.uiSchema=s,n.disposer=Object(o.d)(n.watch),n.data={},n}return r.d(t,e),t.prototype.renderContent=function(){var e=this;this.initData(this.props.formData);var t,n=this.props.children;return void 0!==n?(this.formContext=new M(this,!0),i.createElement(i.Fragment,null,n)):(void 0!==this.uiSchema&&(t=this.uiSchema.Templet),void 0!==t?(this.formContext=new M(this,!0),"function"===typeof t?t(this.data):t):(this.formContext=new M(this,!1),i.createElement(i.Fragment,null,this.schema.map(function(t,r){return i.createElement(i.Fragment,{key:r},J(e.formContext,t,n))}))))},t.prototype.initData=function(e){void 0===e&&(e={});for(var t=0,n=this.schema;t<n.length;t++){var r=n[t];this.initDataItem(r,this.data,e)}},t.prototype.initDataItem=function(e,t,n){var r=e.name,i=e.type;if("button"!==i)if("arr"===i){var s=e,a=s.arr;if(void 0!==a){for(var u=s.itemSchemas={},c=0,l=a;c<l.length;c++){u[(g=l[c]).name]=g}var d=n[r];void 0===d?d=[]:!1===Array.isArray(d)&&(d=[d]);for(var h=[],p=0,f=d;p<f.length;p++){for(var m=f[p],v={$source:m,$isSelected:m.$isSelected,$isDeleted:m.$isDeleted},b=0,y=a;b<y.length;b++){var g=y[b];this.initDataItem(g,v,m)}h.push(v)}t[r]=Object(o.m)(h)}}else t[r]=n[r]},t.prototype.calcSelectOrDelete=function(){for(var e=0,t=this.schema;e<t.length;e++){var n=t[e];this.arrItemOperated(n)}},t.prototype.arrItemOperated=function(e){var t=e.name;if("arr"===e.type&&void 0!==this.data){var n=this.data[t];if(void 0!==n)for(var r=e.arr,i=0,o=n;i<o.length;i++){var s=o[i],a=s.$source;if(void 0!==a){var u=a.$isSelected,c=a.$isDeleted;s.$isSelected=u,s.$isDeleted=c;for(var l=0,d=r;l<d.length;l++){var h=d[l];this.arrItemOperated(h)}}}}},t.prototype.componentDidMount=function(){var e=this.props.beforeShow;void 0!==e&&e(this.formContext)},t.prototype.componentWillUnmount=function(){void 0!==this.disposer&&this.disposer()},t.prototype.render=function(){var e=this.renderContent();return i.createElement(B.Provider,{value:this.formContext},i.createElement(this.formContext.renderErrors,null),this.Container(e))},t.prototype.buttonClick=function(e){return r.b(this,void 0,void 0,function(){var t,n;return r.e(this,function(r){switch(r.label){case 0:return this.formContext.checkRules(),!0===this.formContext.hasError?[2]:void 0===(t=this.formContext.form.props.onButtonClick)?(alert("you should define form onButtonClick"),[2]):[4,t(e,this.formContext)];case 1:return void 0===(n=r.sent())?[2]:(this.formContext.setError(e,n),[2])}})})},t}(i.Component),Y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.name,n=e.children,r=this.context;if(void 0===r)return i.createElement("span",{className:"text-danger"},"!only in Form!");var o=r.getItemSchema(t),s=J(r,o,n,this.props);return void 0===s?i.createElement("span",{className:"text-danger"},"!!",t," is not defined!!"):s},t.contextType=B,t}(i.Component);n.d(t,"a",function(){return Z}),n.d(t,"b",function(){return Y}),n.d(t,"c",function(){return k})},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(5),s=n(9),a=n(14),u=n(24),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){t.newValue=e.target.value;var n=t.value;t.isChanged=t.newValue!=n},t.onBlur=function(e){t.verifyValue()},t.onFocus=function(){t.error=void 0},t.page=Object(o.a)(function(e){var n=e.resolve,r=(e.reject,i.createElement("button",{className:"btn btn-sm btn-success",disabled:!t.isChanged,onClick:function(){t.verifyValue(),void 0===t.error&&n(t.newValue)}},"\u4fdd\u5b58"));return i.createElement(a.a,{header:"\u66f4\u6539"+t.label,right:r},i.createElement("div",{className:"m-3"},i.createElement("input",{type:"text",onChange:t.onChange,onBlur:t.onBlur,onFocus:t.onFocus,className:"form-control",defaultValue:t.value}),t.uiItem&&i.createElement("div",{className:"small muted m-2"},t.uiItem.placeholder),t.error&&i.createElement("div",{className:"text-danger"},t.error)))}),t}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,Promise,function(){var e=this;return r.e(this,function(t){return[2,new Promise(function(t,n){var r=i.createElement(e.page,{resolve:t,reject:n});s.b.push(r,n)})]})})},t}(u.a),l=n(41),d=n(25),h=function(e){function t(t,n,r,s){var u=e.call(this,t,n,r,s)||this;return u.onChange=function(e){u.newValue=e;var t=u.value;u.isChanged=u.newValue!=t},u.page=Object(o.a)(function(e){var t=e.resolve,n=(e.reject,u.itemSchema.name),r=u.uiItem.list,o=i.createElement("button",{className:"btn btn-sm btn-success",disabled:!u.isChanged,onClick:function(){u.verifyValue(),void 0===u.error&&t(u.newValue)}},"\u4fdd\u5b58"),s=r?r.map(function(e,t){var r=e.title,o=e.value;return i.createElement("label",{key:t,className:"px-3 py-2 cursor-pointer"},i.createElement("input",{name:n,type:"radio",value:o,onClick:function(){return u.onChange(o)},defaultChecked:o===u.value})," ",r||o," \xa0")}):i.createElement(i.Fragment,null,"no list defined");return i.createElement(a.a,{header:"\u66f4\u6539"+u.label,right:o},i.createElement("div",{className:"m-3"},s))}),void 0===u.value&&(u.value=n.defaultValue),u}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,Promise,function(){var e=this;return r.e(this,function(t){return[2,new Promise(function(t,n){var r=i.createElement(e.page,{resolve:t,reject:n});s.b.push(r,n)})]})})},t}(u.a),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){t.newValue=e;var n=t.value;t.isChanged=t.newValue!=n},t.page=Object(o.a)(function(e){var n=e.resolve,r=(e.reject,t.uiItem.list),o=r?r.map(function(e,r){var o=e.title,s=e.value;return i.createElement("div",{key:r,className:"px-3 py-2 cursor-pointer bg-white mb-1",onClick:function(){t.onChange(s),n(t.newValue)}},o||s)}):i.createElement(i.Fragment,null,"no list defined");return i.createElement(a.a,{header:"\u66f4\u6539"+t.label},i.createElement("div",{className:"my-3"},o))}),t}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,Promise,function(){var e=this;return r.e(this,function(t){return[2,new Promise(function(t,n){var r=i.createElement(e.page,{resolve:t,reject:n});s.b.push(r,n)})]})})},t}(u.a),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){t.newValue=e;var n=t.value;t.isChanged=t.newValue!=n},t.page=Object(o.a)(function(e){return i.createElement(a.a,{header:"\u66f4\u6539"+t.label},"ddd")}),t}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,Promise,function(){var e=this;return r.e(this,function(t){return[2,new Promise(function(t,n){return r.b(e,void 0,void 0,function(){var e,n;return r.e(this,function(r){switch(r.label){case 0:return void 0===(e=this.uiItem.pickId)?(alert("IdItemEdit.pickId = undefined"),[2]):[4,e(void 0,void 0,this.value)];case 1:return n=r.sent(),this.onChange(n.id),t(n),[2]}})})})]})})},t.prototype.internalEnd=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){return[2]})})},t}(u.a),m=function(e){function t(t){var n=e.call(this,t)||this;n.defaultSepClassName="border-top edit-sep-light-gray",n.defaultRowContainerClassName="d-flex px-3 py-2 bg-white align-items-center",n.renderRow=function(e,t){var o,s,a=e.name,u=e.type,c=e.required,l=n.uiSchema[a];if(void 0===l)s=a;else{s=l.label;var h=l.Templet;if(void 0!==h)o="function"===typeof h?i.createElement("b",null,h(t)):i.createElement("b",null,h);else if(void 0!==t)switch(l.widget){case"radio":case"select":var p=l.list;o=i.createElement("b",null,p.find(function(e){return e.value===t}).title);break;case"id":o=i.createElement("b",null,"no templet for ",a,"=",t)}}if(void 0===o)switch(u){default:o=t?i.createElement("b",null,t):i.createElement("small",{className:"text-muted"},"(\u65e0)");break;case"image":o=i.createElement(d.a,{className:"w-4c h-4c",src:t})}var f=!0===c&&i.createElement("span",{className:"text-danger"},"*");return i.createElement("div",{className:n.rowContainerClassName,onClick:function(){return r.b(n,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.rowClick(e,l,s,t)];case 1:return[2,n.sent()]}})})}},i.createElement("div",{className:"w-6c"},s," ",f),i.createElement("div",{className:"flex-fill d-flex justify-content-end"},o),!0!==n.props.stopEdit&&i.createElement("div",{className:"w-2c text-right"},i.createElement("i",{className:"fa fa-angle-right"})))},n.rowClick=function(e,t,i,o){return r.b(n,void 0,void 0,function(){var n,s,a,u,d;return r.e(this,function(r){switch(r.label){case 0:return n=this.props,s=n.onItemChanged,a=n.onItemClick,!0===n.stopEdit?[2]:void 0===a?[3,2]:[4,a(e,t,o)];case 1:return r.sent(),[2];case 2:if(void 0===(d=function(e,t,n,r){var i;if(void 0!==t)switch(t.widget){default:break;case"id":i=f;break;case"text":i=c;break;case"image":i=l.a;break;case"radio":i=h;break;case"select":i=p}if(void 0===i)switch(e.type){case"string":i=c;break;case"image":i=l.a}if(void 0===i)return;return new i(e,t,n,r)}(e,t,i,o)))return alert("undefined: let itemEdit:ItemEdit = createItemEdit(itemSchema, uiItem, label, value);"),[2];r.label=3;case 3:return r.trys.push([3,9,,10]),[4,d.start()];case 4:return(u=r.sent())==o?[3,7]:void 0!==s?[3,5]:(alert(e.name+" value changed, new: "+u+", pre: "+o),this.props.data[e.name]=u,[3,7]);case 5:return[4,s(e,u,o)];case 6:r.sent(),r.label=7;case 7:return[4,d.end()];case 8:return r.sent(),[3,10];case 9:return r.sent(),console.log("no value changed"),[3,10];case 10:return[2]}})})};var o=t.topBorderClassName,s=t.bottomBorderClassName,a=t.sepClassName,u=t.rowContainerClassName,m=t.uiSchema,v=t.stopEdit;return n.topBorder=i.createElement("div",{className:o||n.defaultSepClassName}),n.bottomBorder=i.createElement("div",{className:s||n.defaultSepClassName}),n.rowContainerClassName=u||n.defaultRowContainerClassName,!0!==v&&(n.rowContainerClassName+=" cursor-pointer"),n.sep=i.createElement("div",{className:a||n.defaultSepClassName}),n.uiSchema=m&&m.items||{},n}return r.d(t,e),t.prototype.render=function(){var e=[],t=this.props.schema,n=t.length;e.push(this.topBorder);for(var r=0;r<n;r++){var o=t[r];r>0&&e.push(this.sep);var s=this.props.data[o.name];e.push(this.renderRow(o,s))}return e.push(this.bottomBorder),i.createElement("div",null,e.map(function(e,t){return i.createElement(i.Fragment,{key:t},e)}))},t=r.c([o.a],t)}(i.Component);n.d(t,"a",function(){return m})},function(e,t,n){"use strict";var r=n(0),i=n(3),o=n(23),s=n(8),a=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.userAppUnits=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.get("tie/user-app-units",{app:e})];case 1:return[2,t.sent()]}})})},t}(s.b))("tv/",void 0),u=n(1),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=function(e){var n=i.nav.user,r=n?n.name:"[\u672a\u767b\u5f55]",o=t.controller.uqsMan,s=o.appOwner,a=o.appName;return u.createElement(i.Page,{header:"APP\u65e0\u6cd5\u8fd0\u884c",logout:!0},u.createElement("div",{className:"m-3 text-danger container"},u.createElement("div",{className:"form-group row"},u.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u767b\u5f55\u7528\u6237"),u.createElement("div",{className:"col-sm text-body"},r)),u.createElement("div",{className:"form-group row"},u.createElement("div",{className:"col-sm-3 font-weight-bold"},"App"),u.createElement("div",{className:"col-sm text-body"},s+"/"+a)),u.createElement("div",{className:"form-group row"},u.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u9884\u8bbe\u5c0f\u53f7"),u.createElement("div",{className:"col-sm text-body"},e||u.createElement("small",{className:""},"[\u65e0\u9884\u8bbe\u5c0f\u53f7]"))),u.createElement("div",{className:"form-group row"},u.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u53ef\u80fd\u539f\u56e0",u.createElement(i.FA,{name:"exclamation-triangle"})),u.createElement("div",{className:"col-sm text-body"},u.createElement("ul",{className:"p-0"},u.createElement("li",null,"\u6ca1\u6709\u5c0f\u53f7\u8fd0\u884c ",a),u.createElement("li",null,"\u7528\u6237 ",u.createElement("b",null,r)," \u6ca1\u6709\u52a0\u5165\u4efb\u4f55\u4e00\u4e2a\u8fd0\u884c",a,"\u7684\u5c0f\u53f7"),e&&u.createElement("li",null,"\u9884\u8bbe\u5c0f\u53f7 ",u.createElement("b",null,e)," \u6ca1\u6709\u8fd0\u884cApp ",a)))),u.createElement("div",{className:"form-group row"},u.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u5c0f\u53f7",e),u.createElement("div",{className:"col-sm text-body"},"\u9884\u8bbe\u5c0f\u53f7\u5b9a\u4e49\u5728 public/unit.json \u6587\u4ef6\u4e2d\u3002 \u5b9a\u4e49\u4e86\u8fd9\u4e2a\u6587\u4ef6\u7684\u7a0b\u5e8f\uff0c\u53ea\u80fd\u7531url\u76f4\u63a5\u542f\u52a8\u3002 \u7528\u6237\u7b2c\u4e00\u6b21\u8bbf\u95eeapp\u4e4b\u540e\uff0c\u4f1a\u7f13\u5b58\u5728localStorage\u91cc\u3002",u.createElement("br",null),"\u5982\u679c\u8981\u5220\u53bb\u7f13\u5b58\u7684\u9884\u5b9a\u4e49Unit\uff0clogout\u7136\u540e\u518dlogin\u3002"))))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.openPage(this.page,e),[2]})})},t}(i.VPage),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderRow=function(e,t){var n=e.id,r=e.nick,o=e.name;return u.createElement(i.LMR,{className:"px-3 py-2",right:"id: "+n},u.createElement("div",null,r||o))},t.onRowClick=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return s.g.unit=e.id,[4,this.controller.start()];case 1:return t.sent(),[2]}})})},t.page=function(){return u.createElement(i.Page,{header:"\u9009\u62e9\u5c0f\u53f7",logout:!0},u.createElement(i.List,{items:t.controller.appUnits,item:{render:t.renderRow,onClick:t.onRowClick}}))},t}return r.d(t,e),t.prototype.open=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return this.openPage(this.page),[2]})})},t}(i.VPage),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=function(e){return u.createElement(i.Page,{header:"ERROR"},u.createElement("div",{className:"m-3"},u.createElement("div",null,"Load Uqs \u53d1\u751f\u9519\u8bef\uff1a"),e.map(function(e,t){return u.createElement("div",{key:t},e)})))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.openPage(this.page,e),[2]})})},t}(i.VPage),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=function(e){return u.createElement(i.Page,{header:"App start error!"},u.createElement("pre",null,"string"===typeof e?e:e.message))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.openPage(this.page,e),[2]})})},t}(i.VPage),p=function(e){function t(t){var n=e.call(this,void 0)||this,r=t.appName,i=t.version,s=t.tvs;if(n.name=r,void 0===r)throw'appName like "owner/app" must be defined in MainConfig';return n.version=i,n.uqs={},n.uqsMan=new o.a(n.name,s),n}return r.d(t,e),t.prototype.beforeStart=function(){return r.b(this,void 0,Promise,function(){var e,t,n,o,u;return r.e(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),[4,this.load()];case 1:return e=r.sent(),t=s.g.predefinedUnit,void 0!==(n=i.nav.user)&&n.id>0?(o=this,[4,a.userAppUnits(this.uqsMan.id)]):[3,3];case 2:switch(o.appUnits=r.sent(),this.appUnits.length){case 0:return this.showUnsupport(t),[2,!1];case 1:if(void 0===(u=this.appUnits[0].id)||u<0||void 0!==t&&u!=t)return this.showUnsupport(t),[2,!1];s.g.unit=u;break;default:if(t>0&&void 0!==this.appUnits.find(function(e){return e.id===t})){s.g.unit=t;break}return this.openVPage(l),[2,!1]}r.label=3;case 3:return void 0!==e?(this.openVPage(d),[2,!1]):[2,!0];case 4:return r.sent(),this.openVPage(h),[2,!1];case 5:return[2]}})})},t.prototype.load=function(){return r.b(this,void 0,Promise,function(){var e,t,n,i,o,a,u,c,l,d;return r.e(this,function(r){switch(r.label){case 0:return e=this.uqsMan,t=e.appOwner,n=e.appName,i=this.uqsMan.localData,(o=i.get())&&o.version===this.version?[3,2]:[4,Object(s.k)(t,n)];case 1:for((o=r.sent()).version=this.version,i.set(o),a=0,u=o.uqs;a<u.length;a++)u[a].newVersion=!0;r.label=2;case 2:return c=o.id,l=o.uqs,this.uqsMan.id=c,[4,this.uqsMan.init(l)];case 3:return r.sent(),[4,this.uqsMan.load()];case 4:return 0===(d=r.sent()).length&&(d.push.apply(d,this.uqsMan.setTuidImportsLocal()),0===d.length)?(this.uqsMan.writeUQs(this.uqs),[2]):[2,d]}})})},t.prototype.showUnsupport=function(e){i.nav.clear(),this.openVPage(c,e)},t}(i.Controller);function f(e,t){return r.b(this,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,new e(t).start()];case 1:return n.sent(),[2]}})})}var m=function(e){function t(t){var n=e.call(this,void 0)||this;return n.cApp=t,n.uqs=t.uqs,n.init(),n}return r.d(t,e),t.prototype.init=function(){},t.prototype.newC=function(e){return new e(this.cApp)},t.prototype.newSub=function(e){return new e(this)},t}(i.Controller),v=function(e){function t(t){var n=e.call(this,t.cApp)||this;return n.owner=t,n}return r.d(t,e),t}(m);n.d(t,"a",function(){return p}),n.d(t,"d",function(){return f}),n.d(t,"b",function(){return m}),n.d(t,"c",function(){return v})},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(6),s=n.n(o),a=n(5),u=n(4),c=function(){function e(e){this.list=e}return Object.defineProperty(e.prototype,"isPaged",{get:function(){var e=this.list.props.items;return null!==e&&void 0!==e&&!1===Array.isArray(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this.list.props.items;return null===e?null:void 0!==e?!0===Array.isArray(e)?e:e.items:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loading",{get:function(){var e=this.list.props.items;if(null===e)return!1;if(void 0===e)return!0;var t=e;return void 0!==t.items&&t.loading},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItems",{get:function(){},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){},e.prototype.renderContent=function(e,t){var n=this.list.props.item.render;return void 0===n?i.createElement("div",{className:"px-3 py-2"},JSON.stringify(e)):n(e,t)},r.c([u.e],e.prototype,"loading",null),e}(),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render=function(e,n){var r=t.list.props.item,s=r.className,a=r.key,u=r.onClick;return i.createElement("li",{key:void 0===a?n:a(e),className:o("va-row-clickable",s),onClick:function(){return u&&u(e)}},t.renderContent(e,n))},t}return r.d(t,e),t}(c),d=n(19),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render=function(e,n){var r=t.list.props.item,s=r.className,a=r.key;r.render;if("string"===typeof e){var u=o("va-list-gap","px-3","pt-1");return i.createElement("li",{key:Object(d.a)(),className:u},e)}return i.createElement("li",{key:void 0===a?n:a(e),className:o(s)},t.renderContent(e,n))},t}return r.d(t,e),t}(c),p=function(e){function t(t){var n=e.call(this,t)||this;return n.buildItems=function(){console.log("buildItems in selectable.tsx");var e,t=n.list.props,r=t.items,i=t.selectedItems,o=t.compare;if(void 0!==r)if(null!==r){var s;e=!0===Array.isArray(r)?r:r.items,s=void 0===o?function(e,t){return e===t}:o;var a=e.map(function(e){Object(u.i)(e);return{selected:void 0!==i&&void 0!==i.find(function(t){return s(e,t)}),item:e,labelId:Object(d.a)()}});n._items=a}else n._items=null;else n._items=void 0},n.render=function(e,t){var r=n.list.props.item,o=r.className,a=r.key,u=(r.render,r.onSelect,e.labelId),c=e.selected,l=e.item;return i.createElement("li",{key:void 0===a?t:a(e),className:s()(o)},i.createElement("div",{className:"d-flex align-items-center px-3"},i.createElement("input",{ref:function(e){e&&(n.input=e,e.checked=c)},className:"",type:"checkbox",value:"",id:u,defaultChecked:c,onChange:function(t){n.onSelect(e,t.target.checked)}}),i.createElement("label",{className:"",style:{flex:1,marginBottom:0},htmlFor:u},n.renderContent(l,t))))},n.disposer=Object(u.d)(n.buildItems),n}return r.d(t,e),t.prototype.dispose=function(){this.disposer()},Object.defineProperty(t.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),t.prototype.selectAll=function(){this._items&&this._items.forEach(function(e){return e.selected=!0})},t.prototype.unselectAll=function(){this._items&&this._items.forEach(function(e){return e.selected=!1})},t.prototype.onSelect=function(e,t){e.selected=t;var n=this._items.some(function(e){return e.selected});this.list.props.item.onSelect(e.item,t,n)},Object.defineProperty(t.prototype,"selectedItems",{get:function(){return this._items.filter(function(e){return!0===e.selected}).map(function(e){return e.item})},enumerable:!0,configurable:!0}),r.c([u.m],t.prototype,"_items",void 0),t}(c);n(148);n.d(t,"a",function(){return f});var f=function(e){function t(t){var n=e.call(this,t)||this;return n._$scroll=function(e){console.log("############### items scroll to "+e)},n.buildBase(),n}return r.d(t,e),t.prototype.buildBase=function(){var e=this.props.item,t=e.onClick;void 0!==e.onSelect?this.selectable=this.listBase=new p(this):this.listBase=void 0!==t?new l(this):new h(this)},t.prototype.componentWillUnmount=function(){this.listBase.dispose()},t.prototype.selectAll=function(){this.selectable&&this.selectable.selectAll()},t.prototype.unselectAll=function(){this.selectable&&this.selectable.unselectAll()},Object.defineProperty(t.prototype,"selectedItems",{get:function(){return this.listBase.selectedItems},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this,t=this.props,n=t.className,r=t.header,o=t.footer,a=t.before,u=t.loading,c=t.none;t.item,t.selectedItems;void 0===a&&(a="-"),void 0===u&&(u=function(){return i.createElement("i",{className:"fa fa-spinner fa-spin fa-2x fa-fw text-info"})}),void 0===c&&(c="none");var l,d,h=this.listBase,p=(h.isPaged,h.items),f=h.loading;function m(e,t){if(e)switch(typeof e){default:case"string":return i.createElement("li",{className:"va-list-"+t},e);case"function":return i.createElement("li",{className:"va-list-"+t},e());case"object":return i.createElement("li",null,e)}}return l=null===p?m(a,"before"):void 0===p?m(u,"loading"):0===p.length?m(c,"none"):p.map(function(t,n){return e.listBase.render(t,n)}),!0===f&&p&&(d=m(u,"loading")),i.createElement("ul",{className:s()("va-list",n)},m(r,"header"),l,d,m(o,"footer"))},t=r.c([a.a],t)}(i.Component)},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(6),s=n.n(o),a=function(){function e(){}return e.prototype.setValues=function(e){},e}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(e){return i.createElement("div",{key:"_b_"+e,className:""},i.createElement("div",{className:"w-100"},i.createElement("div",{style:{borderTop:"1px solid #f0f0f0"}})))},t}(a),c=function(e){function t(t){var n=e.call(this)||this;return n.param=t,n}return r.d(t,e),t.prototype.render=function(e){var t;switch(this.param){default:t="py-2";break;case"=":t="py-1";break;case"-":t="pb-1"}var n=s()(t);return i.createElement("div",{key:"_g_"+e,className:n,style:{backgroundColor:"#f0f0f0"}})},t}(a),l=function(e){function t(t,n){var r=e.call(this)||this;return r.gridProps=t,r.prop=n,r.col=!0===t.labelFixLeft?"col":"col-sm",r}return r.d(t,e),t.prototype.render=function(e){var t=this.prop,n=t.onClick,r=t.bk,o=s()({"cursor-pointer":void 0!==n,"bg-white":void 0===r,row:!0});return i.createElement("div",{key:e,className:o,onClick:n},this.renderLabel(),this.renderProp())},t.prototype.renderLabel=function(){var e=this.prop.label;return void 0===e?null:i.createElement("label",{className:this.col+"-3 col-form-label"},e)},t.prototype.renderProp=function(){var e,t,n=this.prop.label;switch(this.gridProps.alignValue){case"left":e="justify-content-start";break;case"center":e="justify-content-center";break;case"right":e="justify-content-end"}switch(this.prop.vAlign){case"top":t="align-items-start";break;default:case"center":t="align-items-center";break;case"bottom":t="align-items-end";break;case"stretch":t="align-items-stretch"}var r=this.col+(void 0===n?"-12":"-9"),o=s()(e,t,r,"d-flex");return i.createElement("div",{className:o},this.renderPropBody())},t.prototype.renderPropBody=function(){return i.createElement("div",{className:"form-control-plaintext"},this.renderPropContent())},t.prototype.renderPropContent=function(){return this.content},t}(a),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.setValues=function(e){this.content=void 0===e?void 0:e[this.prop.name]},t}(l),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.setValues=function(e){this.content=void 0===e?void 0:e[this.prop.name]},t}(l),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.setValues=function(e){if(void 0===e)this.content=void 0;else{var t=this.prop.list;this.content="string"===typeof t?e[t]:void 0}},t.prototype.renderPropBody=function(){var e=this.prop,t=e.list,n=e.row,r="string"===typeof t?this.content:t;return void 0===r?i.createElement("div",null):i.createElement("div",{className:"w-100"},r.map(function(e,t){return i.createElement(i.Fragment,{key:t},0===t?null:i.createElement("div",{style:{width:"100%",borderBottom:"1px solid #f0f0f0"}}),i.createElement(n,e))}))},t}(l),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderPropBody=function(){return this.prop.component},t.prototype.renderProp=function(){var e,t,n,r=this.prop,o=r.label,a=r.full;switch(this.gridProps.alignValue){case"left":e="justify-content-start";break;case"center":e="justify-content-center";break;case"right":e="justify-content-end"}switch(this.prop.vAlign){case"top":t="align-items-start";break;default:case"center":t="align-items-center";break;case"bottom":t="align-items-end";break;case"stretch":t="align-items-stretch"}n=!0!==a?this.col+(void 0===o?"-12":"-9"):"w-100";var u=s()(e,t,n,"d-flex");return i.createElement("div",{className:u},this.renderPropBody())},t}(l),m=function(){function e(e,t){this.gridProps=e,this.props=t,this.buildRows()}return e.prototype.buildRows=function(){this.rows=[];for(var e=!0,t=0,n=this.props;t<n.length;t++){var r=n[t];if("string"===typeof r)this.rows.push(new c(r)),e=!0;else{e||this.rows.push(new u);var i=void 0;switch(r.type){default:continue;case"string":i=new d(this.gridProps,r);break;case"number":i=new h(this.gridProps,r);break;case"list":i=new p(this.gridProps,r);break;case"component":i=new f(this.gridProps,r)}this.rows.push(i),e=!1}}},e.prototype.setValues=function(e){for(var t=0,n=this.rows;t<n.length;t++){n[t].setValues(e)}},e.prototype.render=function(){return this.rows.map(function(e,t){return e.render(String(t))})},e}(),v=n(5),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.rows,r=e.values,o=new m(this.props,n);o.setValues(r);var a=s()("container-fluid",t);return i.createElement("div",{className:a},o.render())},t=r.c([v.a],t)}(i.Component);n.d(t,"a",function(){return b})},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(4),s=n(5),a=n(6),u=n.n(a),c=(n(146),function(){function e(){}return Object.defineProperty(e.prototype,"content",{get:function(){return!0!==this.selected?this._content:void 0!==this._content?this._content:this._content=this.contentBuilder()},enumerable:!0,configurable:!0}),e.prototype.start=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return void 0!==this._content?[2]:void 0===this.load?[2]:[4,this.load()];case 1:return e.sent(),[2]}})})},r.c([o.m],e.prototype,"selected",void 0),e}()),l=function(e,t,n){return i.createElement("div",{className:"d-flex justify-content-center align-items-center flex-column cursor-pointer "+n},i.createElement("div",null,i.createElement("i",{className:"fa fa-lg fa-"+t})),i.createElement("small",null,e))},d=function(e){function t(t){var n=e.call(this,t)||this;n.tabClick=function(e){return r.b(n,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,e.start()];case 1:return t.sent(),this.selectedTab.selected=!1,e.selected=!0,this.selectedTab=e,[2]}})})};var i=n.props,o=i.size,s=i.tabs,a=i.tabBack,u=i.contentBack,l=i.sep,d=i.selected;return n.size=o||"md",n.tabs=s.map(function(e){var t=new c;return t.name=e.name,t.selected=!1,t.caption=e.caption,t.contentBuilder=e.content,t.notify=e.notify,t.load=e.load,t}),n.tabBack=a||"bg-light",n.contentBack=u,n.sep=l||"border-top border-gray",void 0!==d&&(n.selectedTab=n.tabs.find(function(e){return e.name===d})),void 0===n.selectedTab&&(n.selectedTab=n.tabs[0]),n.selectedTab.selected=!0,n}return r.d(t,e),t.prototype.componentWillMount=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return void 0===this.tabs?[2]:0===this.tabs.length?[2]:[4,this.tabs[0].start()];case 1:return e.sent(),[2]}})})},t.prototype.showTab=function(e){var t=this.tabs.find(function(t){return t.name===e});void 0!==t&&(void 0!==this.selectedTab&&(this.selectedTab.selected=!1),t.selected=!0,this.selectedTab=t)},t.prototype.render=function(){var e=this,t=u()("tab","tab-"+this.size),n=i.createElement("div",{className:u()(this.contentBack,"tab-content")},this.tabs.map(function(e,t){var n={display:!0===e.selected?void 0:"none"};return i.createElement("div",{key:t,style:n},e.content)})),r=i.createElement("div",{className:u()(this.tabBack,this.sep,"tab-tabs")},this.tabs.map(function(t,n){var r,o=t.selected,s=t.caption,a=t.notify;if(void 0!==a){var u=a.get();void 0!==u&&(u>0?r=i.createElement("u",null,u>99?"99+":u):u<0&&(r=i.createElement("u",{className:"dot"})))}return i.createElement("div",{key:n,className:"",onClick:function(){return e.tabClick(t)}},i.createElement("div",{className:"align-self-center"},r,s(o)))}));return i.createElement("div",{className:t},"top"===this.props.tabPosition?i.createElement(i.Fragment,null,r,n):i.createElement(i.Fragment,null,n,r))},r.c([o.m],t.prototype,"selectedTab",void 0),r.c([o.m],t.prototype,"tabs",void 0),t=r.c([s.a],t)}(i.Component);n.d(t,"a",function(){return l}),n.d(t,"b",function(){return d})},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(4),s=n(3),a=n(42);!function(e){function t(t){var n=e.call(this,t)||this;n.schema=[{name:"nick",type:"string"},{name:"icon",type:"image"}],n.uiSchema={items:{nick:{widget:"text",label:"\u522b\u540d",placeholder:"\u597d\u7684\u522b\u540d\u66f4\u65b9\u4fbf\u8bb0\u5fc6"},icon:{widget:"image",label:"\u5934\u50cf"}}},n.onItemChanged=function(e,t,i){return r.b(n,void 0,void 0,function(){var n;return r.e(this,function(r){switch(r.label){case 0:return n=e.name,[4,a.a.userSetProp(n,t)];case 1:return r.sent(),this.data[n]=t,s.nav.user[n]=t,s.nav.saveLocalUser(),[2]}})})};var i=s.nav.user,o=i.nick,u=i.icon;return n.data={nick:o,icon:u},n}r.d(t,e),t.prototype.render=function(){return i.createElement(s.Page,{header:"\u4e2a\u4eba\u4fe1\u606f"},i.createElement(s.Edit,{schema:this.schema,uiSchema:this.uiSchema,data:this.data,onItemChanged:this.onItemChanged}))},r.c([o.m],t.prototype,"data",void 0)}(i.Component);n.d(t,"a",function(){return a.a})},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(8),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.reApi=function(){return r.b(t,void 0,void 0,function(){var e,t,n,i,s,a;return r.e(this,function(r){switch(r.label){case 0:return this.props.clearError(),e=this.props,t=e.channel,n=e.url,i=e.options,s=e.resolve,a=e.reject,[4,Object(o.n)(t,n,i,s,a)];case 1:return r.sent(),[2]}})})},t.close=function(){return r.b(t,void 0,void 0,function(){return r.e(this,function(e){return this.props.clearError(),[2]})})},t}return r.d(t,e),t.prototype.render=function(){var e,t=this.props,n=t.error,r=t.url;if("object"===typeof n){var o=[];for(var s in n)o.push(i.createElement("li",{key:s},i.createElement("label",null,s),i.createElement("div",null,n[s])));e=i.createElement("ul",null,o)}else e=i.createElement("div",null,n);return i.createElement("li",null,i.createElement("article",{className:"page-container"},i.createElement("section",null,i.createElement("div",{className:"va-error"},i.createElement("div",null,"\u7f51\u7edc\u51fa\u73b0\u95ee\u9898"),i.createElement("div",null,"\u70b9\u51fb\u91cd\u65b0\u8bbf\u95ee"),i.createElement("div",null,"url: ",r),e,i.createElement("div",{className:"p-3"},i.createElement("button",{type:"button",onClick:this.reApi},"\u91cd\u65b0API"),i.createElement("button",{type:"button",onClick:this.close},"\u5173\u95ed"))))))},t}(i.Component);t.a=s},,function(e,t,n){"use strict";var r=n(88);n.d(t,"ViewMainSubs",function(){return r.a});n(89),n(90)},function(e,t,n){e.exports=n.p+"static/media/AnalyticalChemistry.f85ff3e0.png"},function(e,t,n){e.exports=n.p+"static/media/LabSupplies.3f6ce00f.png"},function(e,t,n){e.exports=n.p+"static/media/LifeScience.5c2e6ff5.png"},function(e,t,n){e.exports=n.p+"static/media/MaterialScience.f2439aa0.png"},function(e,t,n){e.exports=n.p+"static/media/OrganicChemistry.6d56971c.png"},function(e,t,n){e.exports=n.p+"static/media/pig.772a31a6.png"},,function(e,t,n){},function(e,t,n){e.exports=n.p+"static/media/logo.ee7cd8ed.svg"},function(e,t,n){e.exports=n(278)},,,,,function(e,t,n){},,,,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(34),o=n(0),s=(n(131),n(2)),a=n(4);function u(e){for(var t=[],n=function(e){var n=e.product,r=e.pack,i=e.quantity,o=e.price,s=e.currency,a={pack:r,price:o,quantity:i,currency:s&&s.id},u=t.find(function(e){return e.product.id===n.id});void 0===u&&(u={product:n,packs:[]},t.push(u)),u.packs.push(a)},r=0,i=e.sort(function(e,t){return e.price-t.price});r<i.length;r++){n(i[r])}return t}var c=function(){function e(e){var t=this;this.data={list:Object(a.m)([])},this.count=a.m.box(0),this.amount=a.m.box(0),this.calcSum=function(){for(var e=0,n=0,r=0,i=t.cartItems;r<i.length;r++){var o=i[r],s=o.$isSelected,a=o.$isDeleted,u=o.packs;if(!0!==a&&!0===s)for(var c=0,l=u;c<l.length;c++){var d=l[c],h=d.price,p=d.quantity;e+=p,h!==Number.NaN&&p!==Number.NaN&&(n+=p*h)}}t.count.set(e),t.amount.set(parseFloat(n.toFixed(2)))},this.add=function(e,n,r,i,s){return o.b(t,void 0,void 0,function(){var t,a,u,c,l,d;return o.e(this,function(o){switch(o.label){case 0:if(t=this.cartItems.find(function(t){return t.product.id===e.id})){if(a=t.$isDeleted,u=t.packs,!0===a&&u.splice(0),void 0===(c=u.find(function(e){return e.pack.id===n.id}))){for(l=!1,d=u.length-1;d>=0;d--)if(u[d].price<i){u.splice(d+1,0,{pack:n,quantity:r,price:i,currency:s}),l=!0;break}l||u.unshift({pack:n,quantity:r,price:i,currency:s})}else c.quantity=r,c.price=i,c.currency=s;t.$isSelected=!0,t.$isDeleted=!1,t.createdate=Date.now()}else t={product:e,packs:[{pack:n,quantity:r,price:i,currency:s}],$isSelected:!0,$isDeleted:!1,createdate:Date.now()},this.cartItems.push(t);return[4,this.cartStore.storeCart(e,n,r,i,s)];case 1:return o.sent(),[2]}})})},this.cApp=e,this.cartItems=this.data.list,this.disposer=Object(a.d)(this.calcSum)}return e.prototype.dispose=function(){this.disposer()},e.prototype.init=function(){return o.b(this,void 0,Promise,function(){var e,t,n,r,i,s,a;return o.e(this,function(o){switch(o.label){case 0:return this.cApp.isLogined?this.cartStore=new d(this.cApp):this.cartStore=new h(this.cApp),[4,this.cartStore.load()];case 1:if(e=o.sent(),(t=u(e))&&t.length>0)for(n=0;n<t.length;n++)r=t[n],i=r.product,s=r.packs,a=r.createdate,this.cartItems.push({product:i,packs:s,$isSelected:!0,$isDeleted:!1,createdate:a});return[2]}})})},e.prototype.getQuantity=function(e,t){var n=this.cartItems.find(function(t){return!0!==t.$isDeleted&&t.product.id===e});if(!n)return 0;var r=n.packs.find(function(e){return e.pack.id===t});return void 0===r?0:r.quantity},e.prototype.isDeleted=function(e){return-1!==this.cartItems.findIndex(function(t){return!0===t.$isDeleted&&t.product.id===e})},e.prototype.getSelectedItems=function(){return this.cartItems.filter(function(e){var t=e.$isSelected,n=e.$isDeleted;return!0===t&&!0!==n})},e.prototype.removeFromCart=function(e){return o.b(this,void 0,void 0,function(){var t=this;return o.e(this,function(n){return e&&e.length>0&&(e.forEach(function(e){var n=t.cartItems.findIndex(function(t){return t.product.id===e.productId});if(n>=0){var r=t.cartItems[n],i=r.packs.findIndex(function(t){return t.pack.id===e.packId});i>=0&&(r.packs.splice(i,1),0===r.packs.length&&t.cartItems.splice(n,1))}}),this.cartStore.removeFromCart(e)),[2]})})},o.c([a.m],e.prototype,"data",void 0),e}(),l=function(){return function(e){this.cApp=e}}(),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),Object.defineProperty(t.prototype,"isLocal",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.load=function(){return o.b(this,void 0,Promise,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.cApp.uqs.order.GetCart.page(void 0,0,100)];case 1:return[2,e.sent()]}})})},t.prototype.storeCart=function(e,t,n,r,i){return o.b(this,void 0,void 0,function(){return o.e(this,function(o){switch(o.label){case 0:return[4,this.cApp.uqs.order.SetCart.submit({product:e.id,pack:t.id,price:r,currency:i,quantity:n})];case 1:return o.sent(),[2]}})})},t.prototype.removeFromCart=function(e){return o.b(this,void 0,void 0,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return t=e.map(function(e){return{product:e.productId,pack:e.packId}}),[4,this.cApp.uqs.order.RemoveFromCart.submit({rows:t})];case 1:return n.sent(),[2]}})})},t}(l),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cartData=[],t}return o.d(t,e),Object.defineProperty(t.prototype,"isLocal",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.load=function(){return o.b(this,void 0,Promise,function(){var e,t,n,r,i,s,a,u,c,l,d,h,p;return o.e(this,function(o){try{if(e=this.cApp.uqs.product.ProductX,t=e.div("packx"),null===(n=localStorage.getItem("cart")))return[2,[]];for(this.cartData=JSON.parse(n),r=[],i=0;i<this.cartData.length;i++)s=this.cartData[i],a=s.product,u=s.pack,c=s.quantity,l=s.price,d=s.currency,h=e.boxId(a),p=t.boxId(u),r.push({product:h,pack:p,quantity:c,price:l,currency:d});return[2,r]}catch(f){return localStorage.removeItem("cart"),this.cartData=[],[2,this.cartData]}return[2]})})},t.prototype.storeCart=function(e,t,n,r,i){return o.b(this,void 0,void 0,function(){var s;return o.e(this,function(o){return void 0!==(s=this.cartData.find(function(n){return n.product===e.id&&n.pack===t.id}))?(s.quantity=n,s.price=r,s.currency=i&&i.id):this.cartData.push({product:e.id,pack:t.id,quantity:n,price:r,currency:i&&i.id}),localStorage.setItem("cart",JSON.stringify(this.cartData)),[2]})})},t.prototype.removeFromCart=function(e){return o.b(this,void 0,void 0,function(){var t=this;return o.e(this,function(n){return e.forEach(function(e){var n=t.cartData.findIndex(function(t){return t.product=e.productId&&t.pack===e.packId});n>=0&&t.cartData.splice(n,1)}),localStorage.setItem("cart",JSON.stringify(this.cartData)),[2]})})},t}(l),p=function(){function e(e){var t=this;this.setUser=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return void 0===e?[3,2]:(this._user=e,this.id=e.id,this.name=e.name,this.nick=e.nick,this.icon=e.icon,this.guest=e.guest,this.token=e.token,[4,this.loadWebUser()]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},this.uqs=e}return Object.defineProperty(e.prototype,"allowOrdering",{get:function(){return void 0!==this.currentCustomer||this.mobile&&this.firstName&&this.organizationName},enumerable:!0,configurable:!0}),e.prototype.loadWebUser=function(){return o.b(this,void 0,void 0,function(){var e,t,n,r,i,s,a,u,c,l,d,h,p,m,v,b,y;return o.e(this,function(o){switch(o.label){case 0:return(e=this).id,e._user,void 0===this._user?[3,6]:[4,this.uqs.webuser.WebUser.load(this.id)];case 1:return(t=o.sent())&&(n=t.firstName,r=t.gender,i=t.salutation,s=t.organizationName,a=t.departmentName,this.firstName=n,this.gender=r,this.salutation=i,this.organizationName=s,this.departmentName=a),[4,this.uqs.webuser.WebUserContact.obj({webUser:this.id})];case 2:return(u=o.sent())&&(c=u.telephone,l=u.mobile,d=u.email,h=u.fax,p=u.address,m=u.addressString,v=u.zipCode,this.telephone=c,this.mobile=l,this.email=d,this.fax=h,this.address=p,this.addressString=m,this.zipCode=v),b=this,[4,this.uqs.webuser.WebUserSetting.obj({webUser:this.id})];case 3:return b.webUserSettings=o.sent()||{webUser:this.id},[4,this.uqs.webuser.WebUserCustomer.obj({webUser:this.id})];case 4:return void 0==(y=o.sent())?[3,6]:(this.currentCustomer=new f(y.customer,this.uqs),[4,this.currentCustomer.init()]);case 5:o.sent(),o.label=6;case 6:return[2]}})})},Object.defineProperty(e.prototype,"isLogined",{get:function(){return void 0!==this._user},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasCustomer",{get:function(){return void 0!==this.currentCustomer},enumerable:!0,configurable:!0}),e.prototype.getContacts=function(){return o.b(this,void 0,Promise,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.uqs.webuser.WebUserContacts.table({webUser:this.id})];case 1:return[2,e.sent()]}})})},e.prototype.addContact=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.uqs.webuser.WebUserContacts.add({webUser:this.id,arr1:[{contact:e}]})];case 1:return t.sent(),[2]}})})},e.prototype.delContact=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.uqs.webuser.WebUserContacts.del({webUser:this.id,arr1:[{contact:e}]})];case 1:return t.sent(),[2]}})})},e.prototype.getSetting=function(){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return[2,this.webUserSettings]})})},e.prototype.setDefaultShippingContact=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.webUserSettings.shippingContact=e,this.saveDefaultSettings(),[2]})})},e.prototype.setDefaultInvoiceContact=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.webUserSettings.invoiceContact=e,this.saveDefaultSettings(),[2]})})},e.prototype.setDefaultInvoice=function(e,t){return o.b(this,void 0,void 0,function(){return o.e(this,function(n){return this.webUserSettings.invoiceType=e,this.webUserSettings.invoiceInfo=t,this.saveDefaultSettings(),[2]})})},e.prototype.saveDefaultSettings=function(){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.uqs.webuser.WebUserSetting.add(this.webUserSettings)];case 1:return e.sent(),[2]}})})},e.prototype.changeWebUser=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.uqs.webuser.WebUser.save(this.id,e)];case 1:return t.sent(),[4,this.loadWebUser()];case 2:return t.sent(),[2]}})})},e.prototype.changeWebUserContact=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return e.webUser=this.id,[4,this.uqs.webuser.WebUserContact.add(e)];case 1:return t.sent(),[4,this.loadWebUser()];case 2:return t.sent(),[2]}})})},o.c([a.m],e.prototype,"firstName",void 0),o.c([a.m],e.prototype,"organizationName",void 0),o.c([a.m],e.prototype,"mobile",void 0),o.c([a.e],e.prototype,"allowOrdering",null),e}(),f=function(){function e(e,t){this.id=e.id,this.uqs=t}return e.prototype.getContacts=function(){return o.b(this,void 0,Promise,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.uqs.customer.CustomerContacts.table({customer:this.id})];case 1:return[2,e.sent()]}})})},e.prototype.addContact=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.uqs.customer.CustomerContacts.add({customer:this.id,arr1:[{contact:e}]})];case 1:return t.sent(),[2]}})})},e.prototype.delContact=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.uqs.customer.CustomerContacts.del({customer:this.id,arr1:[{contact:e}]})];case 1:return t.sent(),[2]}})})},e.prototype.init=function(){return o.b(this,void 0,void 0,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return e=this,[4,this.uqs.customer.CustomerSetting.obj({customer:this.id})];case 1:return e.customerSettings=t.sent()||{customer:this.id},[2]}})})},e.prototype.getSetting=function(){return this.customerSettings},e.prototype.setDefaultShippingContact=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return this.customerSettings.shippingContact=e,[4,this.setDefaultSettings()];case 1:return t.sent(),[2]}})})},e.prototype.setDefaultInvoiceContact=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return this.customerSettings.invoiceContact=e,[4,this.setDefaultSettings()];case 1:return t.sent(),[2]}})})},e.prototype.setDefaultInvoice=function(e,t){return o.b(this,void 0,void 0,function(){return o.e(this,function(n){switch(n.label){case 0:return this.customerSettings.invoiceType=e,this.customerSettings.invoiceInfo=t,[4,this.setDefaultSettings()];case 1:return n.sent(),[2]}})})},e.prototype.setDefaultSettings=function(){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.uqs.customer.CustomerSetting.add(this.customerSettings)];case 1:return e.sent(),[2]}})})},e}(),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t}(s.CBase),v=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}o.d(t,e)}(s.CSub),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSearch=function(e,n){return o.b(t,void 0,void 0,function(){var t,r,i;return o.e(this,function(o){return t=this.controller.cApp,r=t.cProduct,i=t.topKey,"home"!==n&&s.nav.popTo(i),r.start(e),[2]})})},t}return o.d(t,e),t.prototype.render=function(e){var t=this,n="home"===e?"md":"sm";return r.createElement(s.SearchBox,{className:"px-1 w-100",size:n,onSearch:function(n){return t.onSearch(n,e)},placeholder:"\u641c\u7d22\u54c1\u540d\u3001\u7f16\u53f7\u3001CAS\u3001MDL\u7b49"})},t}(s.View)),b=n(5),y=n(28),g=n.n(y),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.render=function(){r.createElement(s.FA,{name:"globe"}),r.createElement("div",null,"\u767b\u5f55");var e=r.createElement("img",{className:"m-1",src:g.a,alt:"logo",style:{height:"3rem",width:"3rem"}});return r.createElement(s.LMR,{className:"mb-3 align-items-center bg-white",left:e,right:void 0},r.createElement("div",{className:""},this.controller.renderSearchHeader("md")))},t}(s.View),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=Object(b.a)(function(){return r.createElement(s.Page,{header:!1},r.createElement(t.content,null))}),t.content=Object(b.a)(function(){var e=t.controller.renderCategoryRootList,n=t.renderVm(w);return r.createElement(r.Fragment,null,n,e())}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.openPage(this.page),[2]})})},t.prototype.render=function(e){return r.createElement(this.content,null)},t}(s.View),C=(function(e){function t(t){var n=e.call(this)||this;return n.firstSize=n.pageSize=13,n.sectionTuid=t,n}o.d(t,e),t.prototype.load=function(e,t,n){return o.b(this,void 0,Promise,function(){return o.e(this,function(e){switch(e.label){case 0:return void 0===t&&(t=0),[4,this.sectionTuid.search("",t,n)];case 1:return[2,e.sent()]}})})},t.prototype.setPageStart=function(e){return void 0===e?0:e.id}}(s.PageItems),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderSearchHeader=function(e){return t.renderView(v,e)},t.renderCategoryRootList=function(){return t.cApp.cProductCategory.renderRootList()},t.tab=function(){return t.renderView(E)},t}return o.d(t,e),t.prototype.internalStart=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.cApp.cProductCategory.start()];case 1:return e.sent(),this.openVPage(E),[2]}})})},t}(m)),N=n(6),k=n.n(N),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showCart=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){return this.controller.start(),[2]})})},t.content=Object(b.a)(function(){var e,n,i,o=t.controller.cApp.cart.count.get();return o>0&&(n=t.showCart,i="cursor-pointer",e=o<100?r.createElement("u",null,o):r.createElement("u",null,"99+")),r.createElement("div",{className:k()("jk-cart ml-1 mr-2",i),onClick:n},r.createElement("div",null,r.createElement("span",{className:"fa-stack"},r.createElement("i",{className:"fa fa-square fa-stack-2x text-white"}),r.createElement("i",{className:"fa fa-shopping-cart fa-stack-1x text-info"})),e))}),t}return o.d(t,e),t.prototype.render=function(e){return r.createElement(this.content,null)},t}(s.View),S=[107,109,110,187,189],x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minusClick=function(){var e=t.getValue();e||(e=0),t.setValue(e-1)},t.plusClick=function(){var e=t.getValue();e||(e=0),t.setValue(e+1)},t.ref=function(e){var n;if(t.input=e,null!==t.input)for(n=t.input;n;n=n.parentElement)if("FIELDSET"===n.tagName){!0===n.disabled&&(t.disabled=!0);break}},t.renderContent=Object(b.a)(function(){var e=t.renderTemplet();if(void 0!==e)return e;var n={};!0===t.hasError?n["is-invalid"]=!0:n["required-item"]=!0===t.itemSchema.required;var i,o,s,a,u,c=t.hasFocus,l=!0!==t.readOnly&&!0!==t.disabled,d=NaN!==t.value&&void 0!==t.value&&t.value>0;!0===t.disabled?(i="cursor-pointer",o=a="text-light"):(s=t.minusClick,u=t.plusClick,o="text-danger-2",a="text-danger");var h=r.createElement("i",{className:k()("fa","fa-minus-circle","fa-lg",o,i,{invisible:!(!0===c||!0===l&&!0===d)}),onClick:s}),p=r.createElement("input",{ref:t.ref,className:k()(t.className,n,"mx-1 w-4c form-control",{invisible:!(!0===c||!0===d)}),type:"text",defaultValue:t.value,onChange:t.onChange,placeholder:t.placeholder,readOnly:t.readOnly,disabled:t.disabled,onKeyDown:t.onKeyDown,onFocus:function(e){return t.onFocus(e)},onBlur:function(e){return t.onBlur(e)},maxLength:10}),f=r.createElement("i",{className:k()("fa fa-plus-circle fa-lg",a,i,{invisible:!(!0===l)}),onClick:u});return r.createElement("div",{className:"d-flex align-items-center"},h,p,f,t.renderErrors())}),t}return o.d(t,e),t.prototype.isValidKey=function(t){return void 0===S.find(function(e){return e===t})&&e.prototype.isValidKey.call(this,t)},t.prototype.onBlur=function(t){e.prototype.onBlur.call(this,t),this.hasFocus=!1},t.prototype.onFocus=function(t){e.prototype.onFocus.call(this,t),this.hasFocus=!0},t.prototype.onChange=function(e){},t.prototype.render=function(){return r.createElement(this.renderContent,null)},o.c([a.m],t.prototype,"value",void 0),o.c([a.m],t.prototype,"disabled",void 0),o.c([a.m],t.prototype,"hasFocus",void 0),t}(s.UpdownWidget),F=[{name:"list",type:"arr",arr:[{name:"checked",type:"boolean"},{name:"product",type:"object"},{name:"packs",type:"arr",arr:[{name:"pack",type:"object"},{name:"price",type:"number"},{name:"quantity",type:"number"},{name:"currency",type:"object"}]}]}],I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.CheckOutButton=Object(b.a)(function(){var e=t.controller,n=e.checkOut,i=e.cApp.cart.amount.get(),o=i>0?r.createElement(r.Fragment,null,"\u53bb\u7ed3\u7b97"," (\xa5",i,")"):r.createElement(r.Fragment,null,"\u53bb\u7ed3\u7b97");return r.createElement("button",{className:"btn btn-success w-100",type:"button",onClick:n,disabled:i<=0},o)}),t.renderCartItem=function(e){var n=e.product,i=t.controller,o=i.onProductClick,a=i.renderCartProduct;return r.createElement("div",{className:"pr-1"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-lg-6 pb-3",onClick:function(){return o(n)}},a(n)),r.createElement("div",{className:"col-lg-6"},r.createElement(s.FormField,{name:"packs"}))))},t.packsRow=function(e){var n=e.pack,i=e.price;e.currency;return r.createElement("div",{className:"px-2"},r.createElement("div",{className:"d-flex align-items-center"},r.createElement("div",{className:"flex-grow-1"},r.createElement("b",null,Object(s.tv)(n))),r.createElement("div",{className:"w-6c mr-4 text-right"},r.createElement("span",{className:"text-danger h5"},"\xa5",i)),r.createElement(s.FormField,{name:"quantity"})),r.createElement("div",null,t.controller.renderDeliveryTime(n)))},t.uiSchema={selectable:!0,deletable:!0,restorable:!0,items:{list:{widget:"arr",Templet:t.renderCartItem,ArrContainer:function(e,t){return t},RowContainer:function(e){return r.createElement("div",{className:"py-3"},e)},items:{packs:{widget:"arr",Templet:t.packsRow,selectable:!1,deletable:!1,ArrContainer:function(e,t){return t},RowContainer:function(e){return e},RowSeperator:r.createElement("div",{className:"border border-gray border-top my-3"}),items:{quantity:{widget:"custom",className:"text-center",WidgetClass:x,onChanged:t.controller.onQuantityChanged}}}}}}},t.cartForm=Object(b.a)(function(){var e=t.controller.cApp.cart.data;return r.createElement(s.Form,{className:"bg-white flex-fill overflow-auto",schema:F,uiSchema:t.uiSchema,formData:e})}),t.page=Object(b.a)(function(e){var n,i,o=t.controller.cApp.cart;return 0===o.count.get()&&0===o.cartItems.length?(i=t.empty(),n=void 0):(i=r.createElement(t.cartForm,null),n=r.createElement(t.CheckOutButton,null)),r.createElement(s.Page,{header:"\u8d2d\u7269\u8f66",footer:n},i)}),t.tab=Object(b.a)(function(){var e=t.controller.cApp.cart,n=r.createElement("header",{className:"py-2 text-center bg-info text-white"},r.createElement(s.FA,{className:"align-middle",name:"shopping-cart",size:"2x"})," \xa0 ",r.createElement("span",{className:"h5 align-middle"},"\u8d2d\u7269\u8f66"));return 0===e.count.get()&&0===e.cartItems.length?r.createElement(r.Fragment,null,n,t.empty()):r.createElement("div",{className:"bg-white d-flex flex-column h-100"},n,r.createElement(t.cartForm,null),r.createElement("footer",{className:"p-3"},r.createElement(t.CheckOutButton,null)))}),t}return o.d(t,e),t.prototype.open=function(){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.openPage(this.page),[2]})})},t.prototype.render=function(e){return r.createElement(this.tab,null)},t.prototype.empty=function(){return r.createElement("div",{className:"py-5 text-center bg-white"},"\u4f60\u7684\u8d2d\u7269\u8f66\u7a7a\u7a7a\u5982\u4e5f")},t}(s.VPage),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onQuantityChanged=function(e,n,r){return o.b(t,void 0,void 0,function(){var t,r,i,s,a,u,c,l;return o.e(this,function(o){switch(o.label){case 0:return t=e.data,r=e.parentData,i=r.product,a=(s=t).pack,u=s.price,c=s.currency,l=this.cApp.cart,n>0?[4,l.add(i,a,n,u,c)]:[3,2];case 1:return o.sent(),[3,4];case 2:return[4,l.removeFromCart([{productId:i.id,packId:a.id}])];case 3:o.sent(),o.label=4;case 4:return[2]}})})},t.onRowStateChanged=function(e,n,r){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){return alert("onRowStateChanged"),[2]})})},t.loginCallback=function(e){return o.b(t,void 0,Promise,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return[4,(t=this.cApp).currentUser.setUser(e)];case 1:return n.sent(),[4,t.loginCallBack(e)];case 2:return n.sent(),this.closePage(1),[4,this.doCheckOut()];case 3:return n.sent(),[2]}})})},t.onProductClick=function(e){var n=t.cApp,r=n.cart,i=n.cProduct;r.isDeleted(e.id)||i.showProductDetail(e)},t.checkOut=function(){return o.b(t,void 0,void 0,function(){var e;return o.e(this,function(t){return e=this.cApp.cart,this.selectedCartItems=e.getSelectedItems(),void 0===this.selectedCartItems?[2]:(this.isLogined?this.doCheckOut():s.nav.showLogin(this.loginCallback,!0),[2])})})},t.doCheckOut=function(){return o.b(t,void 0,void 0,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return e=this.cApp.cOrder,void 0===this.selectedCartItems?[2]:[4,e.start(this.selectedCartItems)];case 1:return t.sent(),[2]}})})},t.tab=function(){return t.renderView(I)},t.renderDeliveryTime=function(e){return t.cApp.cProduct.renderDeliveryTime(e)},t.renderCartProduct=function(e){return t.cApp.cProduct.renderCartProduct(e)},t}return o.d(t,e),t.prototype.internalStart=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.openVPage(I),[2]})})},t.prototype.renderCartLabel=function(){return this.renderView(P)},t}(m),T=n(116),A="https://www.jkchemical.com/static/Structure/",q="https://www.jkchemical.com/static/Structure/999.png";function j(e){var t=e.style,n=e.className,i=e.chemicalId;return r.createElement(s.Image,{src:i&&A+i.substr(0,3)+"/"+i+".png",style:t,className:n,altImage:q})}var V=[{name:"pack",type:"object"},{name:"retail",type:"number"},{name:"vipPrice",type:"number"},{name:"promotionPrice",type:"number"},{name:"currency",type:"string"},{name:"quantity",type:"number"},{name:"inventoryAllocation",type:"object"},{name:"futureDeliveryTimeDescription",type:"string"}],D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderProduct=function(e){var t=e.brand,n=e.description,i=e.descriptionC,o=e.CAS,s=e.purity,a=e.molecularFomula,u=e.molecularWeight,c=e.origin,l=e.imageUrl;return r.createElement("div",{className:"mb-3 px-2"},r.createElement("div",{className:"py-2"},r.createElement("strong",null,n)),r.createElement("div",null,i),r.createElement("div",{className:"row mt-3"},r.createElement("div",{className:"col-12 col-sm-3"},r.createElement(j,{chemicalId:l,className:"w-100"})),r.createElement("div",{className:"col-12 col-sm-9"},r.createElement("div",{className:"row mx-3"},Y("CAS",o,"font-weight-bold"),Y("\u4ea7\u54c1\u7f16\u53f7",c,"font-weight-bold"),Y("\u7eaf\u5ea6",s),Y("\u5206\u5b50\u5f0f",a),Y("\u5206\u5b50\u91cf",u),Z(t)))))},t.arrTemplet=function(e){var n=e.pack,i=e.retail,o=e.vipPrice,a=e.promotionPrice,u=null;if(i){var c=t.minPrice(o,a),l=void 0;c?l=r.createElement("small",{className:"text-muted"},r.createElement("del",null,"\xa5",i)):c=i,u=r.createElement("div",{className:"row"},r.createElement("div",{className:"col-sm-6 pb-2 d-flex justify-content-end align-items-center"},r.createElement("small",{className:"text-muted"},l),"\xa0 \xa0",r.createElement("span",{className:"text-danger"},"\xa5 ",r.createElement("span",{className:"h5"},c))),r.createElement("div",{className:"col-sm-6 pb-2 d-flex justify-content-end align-items-center"},r.createElement(s.FormField,{name:"quantity"})))}else u=r.createElement("small",null,"\u8bf7\u8be2\u4ef7");return r.createElement("div",{className:"px-2"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-6"},r.createElement("div",null,r.createElement("b",null,Object(s.tv)(n))),r.createElement("div",null,t.controller.renderDeliveryTime(n))),r.createElement("div",{className:"col-6"},u)))},t.onQuantityChanged=function(e,n,r){return o.b(t,void 0,void 0,function(){var t,r,i,s,a,u,c,l,d;return o.e(this,function(o){switch(o.label){case 0:return t=e.data,r=t.pack,i=t.retail,s=t.vipPrice,a=t.promotionPrice,u=t.currency,c=this.minPrice(s,a)||i,l=this.controller.cApp,d=l.cart,n>0?[4,d.add(this.productBox,r,n,c,u)]:[3,2];case 1:return o.sent(),[3,4];case 2:return[4,d.removeFromCart([{productId:this.productBox.id,packId:r.id}])];case 3:o.sent(),o.label=4;case 4:return[2]}})})},t.uiSchema={Templet:t.arrTemplet,items:{quantity:{widget:"custom",className:"text-center",WidgetClass:x,onChanged:t.onQuantityChanged}}},t.renderPack=function(e){return r.createElement(r.Fragment,null,r.createElement("div",{className:"sep-product-select"}),r.createElement(s.Form,{className:"mx-3",schema:V,uiSchema:t.uiSchema,formData:e}))},t.page=Object(b.a)(function(e){var n=t.controller.cApp,i=n.cHome.renderSearchHeader(),o=n.cCart.renderCartLabel(),a=new T.ViewMainSubs(t.renderProduct,t.renderPack);return a.model=e,r.createElement(s.Page,{header:i,right:o},r.createElement("div",{className:"px-2 py-2 bg-white mb-3"},a.render()))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){var t,n;return o.e(this,function(r){return t=e.productData,n=e.product,this.productBox=n,this.openPage(this.page,t),[2]})})},t.prototype.minPrice=function(e,t){if(e||t)return Math.min("number"===typeof e?e:1/0,"number"===typeof t?t:1/0)},t}(s.VPage),R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onProductClick=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.controller.showProductDetail(e.id),[2]})})},t.onScrollBottom=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.pageProducts.more()];case 1:return e.sent(),[2]}})})},t.page=Object(b.a)(function(){var e=t.controller,n=e.pageProducts,i=e.cApp,o=i.cHome,a=i.cCart,u=o.renderSearchHeader(),c=a.renderCartLabel(),l=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u62b1\u6b49\uff0c\u672a\u627e\u5230\u76f8\u5173\u4ea7\u54c1\uff0c\u8bf7\u91cd\u65b0\u641c\u7d22\uff01");return r.createElement(s.Page,{header:u,right:c,onScrollBottom:t.onScrollBottom},r.createElement("div",{className:"bg-white p-2 mb-1"},"\u641c\u7d22\u6761\u4ef6: ",r.createElement("strong",null,t.searchKey)),r.createElement(s.List,{before:"",none:l,items:n,item:{render:$,onClick:t.onProductClick}}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.searchKey=e,this.openPage(this.page),[2]})})},t}(s.VPage),L=n(10),U=n.n(L),M=function(){function e(e){this.entities=[],this.schemaLoaded=!1,this.cApp=e}return e.prototype.loadSchemas=function(){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return!0===this.schemaLoaded?[2]:[4,Promise.all(this.entities)];case 1:return e.sent(),this.schemaLoaded=!0,[2]}})})},e.prototype.load=function(e){return o.b(this,void 0,Promise,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.loadSchemas()];case 1:return n.sent(),t=this.initData(),[4,this.loadToData(e,t)];case 2:return n.sent(),[2,t]}})})},e}(),B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.loadToData=function(e,t){return o.b(this,void 0,Promise,function(){var n,r,i,s,a,u;return o.e(this,function(o){switch(o.label){case 0:return[4,this.cApp.uqs.product.ProductChemical.obj({product:e})];case 1:return(n=o.sent())&&(r=n.chemical,i=n.purity,s=n.CAS,a=n.molecularFomula,u=n.molecularWeight,t.chemical=r,t.purity=i,t.CAS=s,t.molecularFomula=a,t.molecularWeight=u),[2]}})})},t.prototype.initData=function(){return{}},t}(M),W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.loadToData=function(e,t){return o.b(this,void 0,Promise,function(){var n;return o.e(this,function(r){switch(r.label){case 0:return[4,this.cApp.uqs.product.Brand.load(e)];case 1:return n=r.sent(),t.id=n.id,t.name=n.name,[2]}})})},t.prototype.initData=function(){return{}},t}(M),H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.loadToData=function(e,t){return o.b(this,void 0,Promise,function(){var n,r,i,s,a,u,c,l,d;return o.e(this,function(o){switch(o.label){case 0:return[4,this.cApp.uqs.product.ProductX.load(e)];case 1:return void 0===(n=o.sent())?[2]:(U.a.merge(t,n),r=new W(this.cApp),i=t,[4,r.load(t.brand.id)]);case 2:return i.brand=o.sent(),[4,new B(this.cApp).load(e)];case 3:return(s=o.sent())&&(a=s.chemical,u=s.purity,c=s.CAS,l=s.molecularFomula,d=s.molecularWeight,t.chemical=a,t.purity=u,t.CAS=c,t.molecularFomula=l,t.molecularWeight=d),t.packs=[],n.packx.forEach(function(e){t.packs.push(e)}),[2]}})})},t.prototype.initData=function(){return{}},t}(M),z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.initData=function(){return{main:{},subs:[]}},t.prototype.loadToData=function(e,t){return o.b(this,void 0,Promise,function(){var n,r,i,s,a,u,c,l,d,h,p,f,m,v,b,y,g,w,E,C;return o.e(this,function(o){switch(o.label){case 0:return n=this.cApp.uqs,r=n.customerDiscount,i=n.product,s=n.promotion,a=new H(this.cApp),u=t,[4,a.load(e)];case 1:return u.main=o.sent(),c=0,l=this.cApp,d=l.currentUser,h=l.currentSalesRegion,p=l.cart,f=l.currentLanguage,d.hasCustomer?[4,r.GetDiscount.obj({brand:t.main.brand.id,customer:d.currentCustomer})]:[3,3];case 2:m=o.sent(),c=m&&m.discount,o.label=3;case 3:return v=h.id,[4,i.PriceX.table({product:e,salesRegion:v})];case 4:return b=o.sent(),t.subs=b.filter(function(e){return 0===e.discountinued&&e.expireDate>Date.now()}).sort(function(e,t){return e.retail-t.retail}).map(function(t){var n={};return n.pack=t.pack,n.retail=t.retail,0!==c&&(n.vipPrice=Math.round(t.retail*(1-c))),n.currency=h.currency,n.quantity=p.getQuantity(e,t.pack.id),n}),y=[],t.subs.forEach(function(t){y.push(s.GetPromotionPack.obj({product:e,pack:t.pack,salesRegion:h,language:f}))}),[4,Promise.all(y)];case 5:for(g=o.sent(),w=0;w<t.subs.length;w++)E=g[w],(C=E&&E.discount)&&(t.subs[w].promotionPrice=Math.round((1-C)*t.subs[w].retail));return[2]}})})},t}(M),K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=Object(b.a)(function(e){var n=e.packId,i=e.productId,o=t.controller,a=o.inventoryAllocationContainer,u=o.futureDeliveryTimeDescriptionContainer,c=a[n],l=u[i];return c&&c.length>0?c.map(function(e,t){var n=e.warehouse,i=e.quantity,o=e.deliveryTimeDescription;if(i>0)return r.createElement("div",{key:t,className:"text-success"},Object(s.tv)(n,function(e){return r.createElement("span",{className:"small"},e.name)}),": ",i>10?">10":i,o)}):r.createElement("div",null,l&&"\u671f\u8d27: "+l)}),t}return o.d(t,e),t.prototype.render=function(e){var t=e.obj,n=e.id,i=t.owner,o=this.controller,s=o.cApp.currentSalesRegion;return o.getInventoryAllocation(i,n,s),o.getFutureDeliveryTimeDescription(i,s),r.createElement(this.content,{packId:n,productId:i})},t}(s.View),Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderCartProduct=function(e){e.id;var n=e.brand,i=e.description,o=e.descriptionC,a=e.origin,u=e.imageUrl;return r.createElement("div",{className:"row d-flex mb-3 px-2"},r.createElement("div",{className:"col-12"},r.createElement("div",{className:"py-2"},r.createElement("strong",null,i)),r.createElement("div",{className:"pb-2"},r.createElement("strong",null,o)),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-3"},r.createElement(j,{chemicalId:u,className:"w-4c h-4c"})),r.createElement("div",{className:"col-9"},r.createElement("div",{className:"row"},t.controller.renderChemicalInfo(e),Y("\u7f16\u53f7",a),Object(s.tv)(n,Z))))))},t}return o.d(t,e),t.prototype.render=function(e){return r.createElement(r.Fragment,null,Object(s.tv)(e,this.renderCartProduct))},t}(s.View),J=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderProduct=function(e){var n=e.brand,i=e.description,o=e.descriptionC,a=e.origin,u=e.imageUrl;return r.createElement("div",{className:"d-block mb-4 px-3"},r.createElement("div",{className:"py-2"},r.createElement("div",null,r.createElement("strong",null,i)),r.createElement("div",null,o)),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-3"},r.createElement(j,{chemicalId:u,className:"w-100"})),r.createElement("div",{className:"col-9"},r.createElement("div",{className:"row"},Y("\u4ea7\u54c1\u7f16\u53f7",a),Object(s.tv)(n,Z),t.controller.renderChemicalInfo(e)))))},t}o.d(t,e),t.prototype.render=function(e){return r.createElement(r.Fragment,null,Object(s.tv)(e,this.renderProduct))}}(s.View),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=Object(b.a)(function(e){var n=e.productId,i=t.controller.chemicalInfoContainer[n];if(void 0!==i){i.chemical;var o=i.purity,s=i.CAS;i.molecularFomula,i.molecularWeight;return r.createElement(r.Fragment,null,Y("CAS",s),Y("\u7eaf\u5ea6",o))}return r.createElement(r.Fragment,null)}),t}return o.d(t,e),t.prototype.render=function(e){var t=e.id;return this.controller.getChemicalInfo(t),r.createElement(this.content,{productId:t})},t}(s.View)),G=function(e){function t(t){var n=e.call(this)||this;return n.firstSize=n.pageSize=10,n.searchProductQuery=t,n}return o.d(t,e),t.prototype.load=function(e,t,n){return o.b(this,void 0,Promise,function(){return o.e(this,function(r){switch(r.label){case 0:return void 0===t&&(t=0),[4,this.searchProductQuery.page(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.setPageStart=function(e){this.pageStart=void 0===e?0:e.seq},t}(s.PageItems),X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inventoryAllocationContainer={},t.futureDeliveryTimeDescriptionContainer={},t.chemicalInfoContainer={},t.showProductDetail=function(e){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return[4,new z(this.cApp).load(e.id)];case 1:return t=n.sent(),this.openVPage(D,{productData:t,product:e}),[2]}})})},t.renderPrice=function(e,n,r){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){return[2]})})},t.renderDeliveryTime=function(e){return t.renderView(K,e)},t.getInventoryAllocation=function(e,n,r){return o.b(t,void 0,void 0,function(){var t,r;return o.e(this,function(i){switch(i.label){case 0:return void 0!==this.inventoryAllocationContainer[n]?[3,2]:(t=this.inventoryAllocationContainer,r=n,[4,this.uqs.warehouse.GetInventoryAllocation.table({product:e,pack:n,salesRegion:this.cApp.currentSalesRegion})]);case 1:t[r]=i.sent(),i.label=2;case 2:return[2]}})})},t.getFutureDeliveryTimeDescription=function(e,n){return o.b(t,void 0,void 0,function(){var t,r,i,s,a;return o.e(this,function(o){switch(o.label){case 0:return void 0!==this.futureDeliveryTimeDescriptionContainer[e]?[3,2]:[4,this.uqs.product.GetFutureDeliveryTime.table({product:e,salesRegion:n})];case 1:(t=o.sent()).length>0?(r=t[0],i=r.minValue,s=r.maxValue,a=r.unit,r.deliveryTimeDescription,this.futureDeliveryTimeDescriptionContainer[e]=i+(s>i?"~"+s:"")+" "+a):this.futureDeliveryTimeDescriptionContainer[e]=null,o.label=2;case 2:return[2]}})})},t.renderChemicalInfo=function(e){return t.renderView(J,e)},t.getChemicalInfo=function(e){return o.b(t,void 0,void 0,function(){var t,n;return o.e(this,function(r){switch(r.label){case 0:return void 0!==this.chemicalInfoContainer[e]?[3,2]:(t=this.chemicalInfoContainer,n=e,[4,this.uqs.product.ProductChemical.obj({product:e})]);case 1:t[n]=r.sent(),r.label=2;case 2:return[2]}})})},t.renderCartProduct=function(e){return t.renderView(Q,e)},t}return o.d(t,e),t.prototype.internalStart=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.searchByKey(e),[2]})})},t.prototype.searchByKey=function(e){var t=this.cApp.currentSalesRegion;this.pageProducts=new G(this.uqs.product.SearchProduct),this.pageProducts.first({keyWord:e,salesRegion:t.id}),this.openVPage(R,e)},t.prototype.searchByCategory=function(e){return o.b(this,void 0,void 0,function(){var t,n,r;return o.e(this,function(i){return t=this.cApp.currentSalesRegion,this.pageProducts=new G(this.uqs.product.SearchProductByCategory),n=e.productCategoryId,r=e.name,this.pageProducts.first({productCategory:n,salesRegion:t.id}),this.openVPage(R,r),[2]})})},o.c([a.m],t.prototype,"inventoryAllocationContainer",void 0),o.c([a.m],t.prototype,"futureDeliveryTimeDescriptionContainer",void 0),o.c([a.m],t.prototype,"chemicalInfoContainer",void 0),t}(m);function Z(e){return Y("\u54c1\u724c",e.name)}function Y(e,t,n){if(null===t||void 0===t||"0"===t)return null;var i=n?k()(n):k()("text-muted"),o=n?k()(n):"";return r.createElement(r.Fragment,null,r.createElement("div",{className:k()("col-6 col-sm-2 pr-0 small",i)}," ",e),r.createElement("div",{className:k()("col-6 col-sm-4",o)},t))}function $(e){var t=e.brand,n=e.description,i=e.descriptionC,o=e.CAS,a=e.purity,u=e.molecularFomula,c=e.molecularWeight,l=e.origin,d=e.imageUrl;return r.createElement("div",{className:"d-block mb-4 px-3"},r.createElement("div",{className:"py-2"},r.createElement("div",null,r.createElement("strong",null,n)),r.createElement("div",null,i)),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-3"},r.createElement(j,{chemicalId:d,className:"w-100"})),r.createElement("div",{className:"col-9"},r.createElement("div",{className:"row"},Y("CAS",o),Y("\u4ea7\u54c1\u7f16\u53f7",l),Y("\u7eaf\u5ea6",a),Y("\u5206\u5b50\u5f0f",u),Y("\u5206\u5b50\u91cf",c),Object(s.tv)(t,Z)))))}var _=n(117),ee=n.n(_),te=n(118),ne=n.n(te),re=n(119),ie=n.n(re),oe=n(120),se=n.n(oe),ae=n(121),ue={CHINA:43,CHINESE:197,SALESREGION_CN:4,ROOTCATEGORY:{7:{src:n.n(ae).a,labelColor:"text-info"},430:{src:ee.a,labelColor:"text-success"},986:{src:ie.a,labelColor:"text-danger"},1214:{src:se.a,labelColor:"text-warning"},1545:{src:ne.a,labelColor:"text-primary"}},TIPDISPLAYTIME:2e3},ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.useShippingAddress=!0,t.shippingAddressIsBlank=!1,t.invoiceAddressIsBlank=!1,t.invoiceIsBlank=!1,t.nullContact=function(){return r.createElement("span",{className:"text-primary"},"\u9009\u62e9\u6536\u8d27\u5730\u5740")},t.packsRow=function(e,n){var i=e.pack,o=e.quantity,a=(e.price,e.retail);e.currency;return r.createElement("div",{key:n,className:"px-2 py-2 border-top"},r.createElement("div",{className:"d-flex align-items-center"},r.createElement("div",{className:"flex-grow-1"},r.createElement("b",null,Object(s.tv)(i))),r.createElement("div",{className:"w-12c mr-4 text-right"},r.createElement("span",{className:"text-danger h5"},r.createElement("small",null,"\xa5"),parseFloat((a*o).toFixed(2))),r.createElement("small",{className:"text-muted"},"(\xa5",parseFloat(a.toFixed(2))," \xd7 ",o,")"))),r.createElement("div",null,t.controller.renderDeliveryTime(i)))},t.renderOrderItem=function(e){var n=e.product,i=e.packs,o=t,s=o.controller,a=o.packsRow;return r.createElement("div",null,r.createElement("div",{className:"row"},r.createElement("div",{className:"col-lg-6 pb-3"},s.renderOrderItemProduct(n)),r.createElement("div",{className:"col-lg-6"},i.map(function(e,t){return a(e,t)}))))},t.orderItemKey=function(e){return e.product.id},t.renderCoupon=Object(b.a)(function(e){var n=t.controller.couponData;if(void 0===n.id)return r.createElement("span",{className:"text-primary"},"\u586b\u5199\u4f18\u60e0\u7801");n.id;var i=n.code,o=(n.discount,n.preferential,n.validitydate,n.isValid,e.couponOffsetAmount),s=e.couponRemitted,a=void 0,u=void 0,c=void 0;return o||s?(o&&(a=r.createElement("div",{className:"d-flex flex-row justify-content-between"},r.createElement("div",{className:"text-muted"},"\u6298\u6263:"),r.createElement("div",{className:"text-right text-danger"},r.createElement("small",null,"\xa5"),o.toFixed(2)))),s&&(u=r.createElement("div",{className:"d-flex flex-row justify-content-between"},r.createElement("div",{className:"text-muted"},"\u62b5\u6263:"),r.createElement("div",{className:"text-right text-danger"},r.createElement("small",null,"\xa5"),s.toFixed(2))))):c=r.createElement("div",null,"\u6b64\u5355\u65e0\u4f18\u60e0"),r.createElement("div",{className:"mr-2"},r.createElement("div",{className:"text-success"},i.substr(0,4)," ",i.substr(4)),a,u,c)}),t.onSubmit=function(){return o.b(t,void 0,void 0,function(){var e,t,n,r,i,s=this;return o.e(this,function(o){if(e=this.controller.orderData,t=e.shippingContact,n=e.invoiceContact,r=e.invoiceType,i=e.invoiceInfo,!t)return this.shippingAddressIsBlank=!0,setTimeout(function(){return s.shippingAddressIsBlank=!1},ue.TIPDISPLAYTIME),[2];if(!n){if(!this.useShippingAddress)return this.invoiceAddressIsBlank=!0,setTimeout(function(){return s.invoiceAddressIsBlank=!1},ue.TIPDISPLAYTIME),[2];e.invoiceContact=t,this.invoiceAddressIsBlank=!1}return r&&i?(this.controller.submitOrder(),[2]):(this.invoiceIsBlank=!0,setTimeout(function(){return s.invoiceIsBlank=!1},ue.TIPDISPLAYTIME),[2])})})},t.page=Object(b.a)(function(){var e=t.controller,n=e.cApp,i=e.orderData,o=e.onSelectShippingContact,a=e.onSelectInvoiceContact,u=e.openMeInfo,c=e.onInvoiceInfoEdit,l=e.onCouponEdit,d=n.currentUser,h=r.createElement("div",{onClick:u,className:"alert alert-warning text-primary py-1",role:"alert"},"\u9996\u6b21\u4e0b\u5355\u8bf7\u70b9\u51fb\u5b8c\u5584\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f");d.allowOrdering&&(h=null);var p=r.createElement("div",{className:"d-block"},h,r.createElement("div",{className:"w-100 px-3"},r.createElement("div",{className:"d-flex justify-content-left flex-grow-1"},r.createElement("span",{className:"text-danger",style:{fontSize:"1.8rem"}},r.createElement("small",null,"\xa5"),i.amount)),r.createElement("button",{type:"button",className:k()("btn","w-30",{"btn-danger":d.allowOrdering,"btn-secondary":!d.allowOrdering}),onClick:t.onSubmit,disabled:!d.allowOrdering},"\u63d0\u4ea4\u8ba2\u5355"))),f=r.createElement(s.FA,{name:"chevron-right",className:"cursor-pointer"}),m=t.shippingAddressIsBlank?r.createElement("div",{className:"text-danger small my-2"},r.createElement(s.FA,{name:"exclamation-circle"})," \u5fc5\u987b\u586b\u5199\u6536\u8d27\u5730\u5740"):null,v=t.invoiceAddressIsBlank?r.createElement("div",{className:"text-danger small my-2"},r.createElement(s.FA,{name:"exclamation-circle"})," \u5fc5\u987b\u586b\u5199\u53d1\u7968\u5730\u5740"):null,b=null;!1===t.useShippingAddress&&(b=void 0!==i.invoiceContact?r.createElement("div",{className:"col-8 col-sm-10 offset-4 offset-sm-2 d-flex"},Object(s.tv)(i.invoiceContact,void 0,void 0,t.nullContact),r.createElement("div",null,f)):r.createElement("div",{className:"col-8 offset-4 offset-sm-2"},r.createElement("button",{className:"btn btn-outline-primary",onClick:a},"\u9009\u62e9\u53d1\u7968\u5730\u5740"),v));var y=r.createElement("div",{className:"row py-3 bg-white mb-1"},r.createElement("div",{className:"col-4 col-sm-2 pb-2 text-muted"},"\u53d1\u7968\u5730\u5740:"),r.createElement("div",{className:"col-8 col-sm-10"},r.createElement("div",null,r.createElement("label",{className:"cursor-pointer"},r.createElement("input",{type:"checkbox",defaultChecked:t.useShippingAddress,onChange:function(e){t.useShippingAddress=e.currentTarget.checked,i.invoiceContact=void 0,t.invoiceAddressIsBlank=!1}})," \u540c\u6536\u8d27\u5730\u5740"))),b),g=t.invoiceIsBlank?r.createElement("div",{className:"text-danger small my-2"},r.createElement(s.FA,{name:"exclamation-circle"})," \u5fc5\u987b\u586b\u5199\u53d1\u7968\u4fe1\u606f"):null,w=r.createElement("div",{className:"row py-3 bg-white mb-1",onClick:c},r.createElement("div",{className:"col-4 col-sm-2 pb-2 text-muted"},"\u53d1\u7968\u4fe1\u606f:"),r.createElement("div",{className:"col-8 col-sm-10"},r.createElement(s.LMR,{className:"w-100 align-items-center",right:f},Object(s.tv)(i.invoiceType,function(e){return r.createElement(r.Fragment,null,e.description)},void 0,function(){return r.createElement("span",{className:"text-primary"},"\u586b\u5199\u53d1\u7968\u4fe1\u606f")}),Object(s.tv)(i.invoiceInfo,function(e){return r.createElement(r.Fragment,null," -- ",e.title)},void 0,function(){return r.createElement(r.Fragment,null)}),g))),E=r.createElement(r.Fragment,null),C=r.createElement(r.Fragment,null);i.freightFee&&(E=r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 pb-2 text-muted"},"\u8fd0\u8d39:"),r.createElement("div",{className:"col-8 col-sm-10 text-right text-danger"},r.createElement("small",null,"\xa5"),i.freightFee)),i.freightFeeRemitted&&(C=r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 pb-2 text-muted"},"\u8fd0\u8d39\u51cf\u514d:"),r.createElement("div",{className:"col-8 col-sm-10 text-right text-danger"},r.createElement("small",null,"\xa5"),i.freightFeeRemitted))));var N=r.createElement(r.Fragment,null);return N=r.createElement("div",{className:"row py-3 bg-white mb-1",onClick:l},r.createElement("div",{className:"col-4 col-sm-2 pb-2 text-muted"},"\u4f18\u60e0\u7801:"),r.createElement("div",{className:"col-8 col-sm-10"},r.createElement(s.LMR,{className:"w-100 align-items-center",right:f},r.createElement(t.renderCoupon,{couponOffsetAmount:i.couponOffsetAmount,couponRemitted:i.couponRemitted})))),r.createElement(s.Page,{header:"\u8ba2\u5355\u9884\u89c8",footer:p},r.createElement("div",{className:"px-2"},r.createElement("div",{className:"row py-3 bg-white mb-1",onClick:o},r.createElement("div",{className:"col-4 col-sm-2 pb-2 text-muted"},"\u6536\u8d27\u5730\u5740:"),r.createElement("div",{className:"col-8 col-sm-10"},r.createElement(s.LMR,{className:"w-100 align-items-center",right:f},Object(s.tv)(i.shippingContact,void 0,void 0,t.nullContact)),m)),y,w),r.createElement(s.List,{items:i.orderItems,item:{render:t.renderOrderItem,key:t.orderItemKey}}),r.createElement("div",{className:"px-2"},r.createElement("div",{className:"row py-3 pr-3 bg-white my-1"},r.createElement("div",{className:"col-4 col-sm-2 pb-2 text-muted"},"\u5546\u54c1\u603b\u989d:"),r.createElement("div",{className:"col-8 col-sm-10 text-right"},r.createElement("small",null,"\xa5"),i.productAmount),E,C),N))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.openPage(this.page),[2]})})},o.c([a.m],t.prototype,"useShippingAddress",void 0),o.c([a.m],t.prototype,"shippingAddressIsBlank",void 0),o.c([a.m],t.prototype,"invoiceAddressIsBlank",void 0),o.c([a.m],t.prototype,"invoiceIsBlank",void 0),t}(s.VPage),le=function(){function e(){this.orderItems=[]}return Object.defineProperty(e.prototype,"amount",{get:function(){return parseFloat((this.orderItems.reduce(function(e,t){return e+t.subAmount},0)+(this.freightFee?this.freightFee:0)+(this.freightFeeRemitted?this.freightFeeRemitted:0)).toFixed(2))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"productAmount",{get:function(){return parseFloat(this.orderItems.reduce(function(e,t){return e+t.subListAmount},0).toFixed(2))},enumerable:!0,configurable:!0}),e.prototype.getDataForSave=function(){var e=this,t=[];return this.orderItems.forEach(function(n){n.packs.forEach(function(r){e.currency=r.currency,t.push({product:n.product,pack:r.pack,price:r.price,quantity:r.quantity,subAmount:r.quantity*r.price})})}),{webUser:this.webUser,organization:this.organization,customer:this.customer,shippingContact:this.shippingContact,invoiceContact:this.invoiceContact,invoiceType:this.invoiceType,invoiceInfo:this.invoiceInfo,amount:this.amount,currency:this.currency,freightFee:this.freightFee,freightFeeRemitted:this.freightFeeRemitted,coupon:this.coupon,couponOffsetAmount:this.couponOffsetAmount,couponRemitted:this.couponRemitted,orderitems:t,salesRegion:this.salesRegion}},o.c([a.m],e.prototype,"shippingContact",void 0),o.c([a.m],e.prototype,"invoiceContact",void 0),o.c([a.m],e.prototype,"invoiceType",void 0),o.c([a.m],e.prototype,"invoiceInfo",void 0),o.c([a.m],e.prototype,"orderItems",void 0),o.c([a.m],e.prototype,"freightFee",void 0),o.c([a.m],e.prototype,"freightFeeRemitted",void 0),o.c([a.e],e.prototype,"amount",null),o.c([a.e],e.prototype,"productAmount",null),o.c([a.m],e.prototype,"coupon",void 0),o.c([a.m],e.prototype,"couponOffsetAmount",void 0),o.c([a.m],e.prototype,"couponRemitted",void 0),e}(),de=function(){function e(){}return Object.defineProperty(e.prototype,"subAmount",{get:function(){return this.packs.reduce(function(e,t){return e+t.price*t.quantity},0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subListAmount",{get:function(){return this.packs.reduce(function(e,t){return e+t.retail*t.quantity},0)},enumerable:!0,configurable:!0}),o.c([a.m],e.prototype,"packs",void 0),o.c([a.e],e.prototype,"subAmount",null),o.c([a.e],e.prototype,"subListAmount",null),e}(),he=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=function(e){return r.createElement(s.Page,{header:"\u4e0b\u5355\u6210\u529f",back:"close"},r.createElement("div",{className:"p-3 bg-white mb-3"},r.createElement("div",{className:"mb-3"},"\u4e0b\u5355\u6210\u529f\uff0c\u611f\u8c22\u60a8\u5bf9\u767e\u7075\u5a01\u7684\u539a\u7231\uff01"),r.createElement("p",{className:""},"\u8ba2\u5355\u7f16\u53f7: ",r.createElement("span",{className:"h5 text-info"},e.no),r.createElement("br",null),r.createElement("br",null),"\u6211\u4eec\u5c06\u7acb\u523b\u5904\u7406\u60a8\u7684\u8ba2\u5355\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536\u5230\u8d27\u77ed\u4fe1\u3002")))},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.openPage(this.page,e),[2]})})},t}(s.VPage),pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onContactRender=function(e){var n=t.controller,i=n.onEditContact,o=n.onContactSelected,a=r.createElement("div",{className:"p-2 cursor-pointer text-info",onClick:function(){return i(e)}},r.createElement(s.FA,{name:"edit"}));return r.createElement(s.LMR,{right:a,className:"px-3 py-2"},r.createElement("div",{onClick:function(){return o(e)}},Object(s.tv)(e)))},t.page=Object(b.a)(function(){var e=t.controller,n=e.onNewContact,i=e.userContacts,o=r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:function(){return n()}},"\u6dfb\u52a0\u65b0\u5730\u5740"),a=r.createElement(s.List,{items:i,item:{render:t.onContactRender},none:"\u65e0\u5730\u5740"});return r.createElement(s.Page,{footer:o,header:"\u7ba1\u7406\u5730\u5740"},a)}),t}return o.d(t,e),t.prototype.open=function(){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.openPage(this.page),[2]})})},t}(s.VPage);function fe(e){return e&&!/^(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}$/.test(e)?"\u56fa\u5b9a\u7535\u8bdd\u683c\u5f0f\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01":void 0}function me(e){return e&&!/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(e)?"\u624b\u673a\u53f7\u683c\u5f0f\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01":void 0}function ve(e){return e&&!/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(e)?"Email\u683c\u5f0f\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01":void 0}function be(e){return e&&!/^(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}$/.test(e)?"\u4f20\u771f\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01":void 0}function ye(e){return e&&e.length>200?"\u8be6\u7ec6\u5730\u5740\u6700\u591a200\u4e2a\u5b57\uff01":void 0}function ge(e){return e&&e.length>15?"\u90ae\u7f16\u8fc7\u957f\uff0c\u8bf7\u4fee\u6539\u540e\u5f55\u5165\uff01":void 0}function we(e){return e&&e.length>100?"\u5355\u4f4d\u540d\u79f0\u6700\u591a100\u4e2a\u5b57\uff01":void 0}function Ee(e){return e&&e.length>50?"\u59d3\u540d\u6700\u591a50\u4e2a\u5b57\uff01":void 0}var Ce=[{name:"id",type:"id",required:!1},{name:"name",type:"string",required:!0},{name:"organizationName",type:"string",required:!0},{name:"mobile",type:"string",required:!0},{name:"telephone",type:"string",required:!1},{name:"email",type:"string",required:!1},{name:"address",type:"id",required:!0},{name:"addressString",type:"string",required:!0},{name:"isDefault",type:"boolean",required:!1}],Ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uiSchema={items:{id:{visible:!1},name:{widget:"text",label:"\u59d3\u540d",placeholder:"\u59d3\u540d",rules:Ee},organizationName:{widget:"text",label:"\u5355\u4f4d\u540d\u79f0",placeholder:"\u5355\u4f4d\u540d\u79f0",rules:we},mobile:{widget:"text",label:"\u624b\u673a\u53f7",placeholder:"\u624b\u673a\u53f7",rules:me},telephone:{widget:"text",label:"\u7535\u8bdd",placeholder:"\u7535\u8bdd",rules:fe},email:{widget:"email",label:"Email",rules:ve,placeholder:"Email"},address:{widget:"id",label:"\u6240\u5728\u5730\u533a",placeholder:"\u6240\u5728\u5730\u533a",pickId:function(e,n,r){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.controller.pickAddress(e,n,r)];case 1:return[2,t.sent()]}})})},Templet:function(e){return Object(s.tv)(e,function(e){var t=e.country,n=e.province,i=e.city,o=e.county;return r.createElement(r.Fragment,null,t&&t.id&&Object(s.tv)(t,function(e){return r.createElement(r.Fragment,null,e.chineseName)}),n&&n.id&&Object(s.tv)(n,function(e){return r.createElement(r.Fragment,null,e.chineseName)}),i&&i.id&&Object(s.tv)(i,function(e){return r.createElement(r.Fragment,null,e.chineseName)}),o&&o.id&&Object(s.tv)(o,function(e){return r.createElement(r.Fragment,null,e.chineseName)}))},function(){return r.createElement("small",{className:"text-muted"},"\u8bf7\u9009\u62e9\u5730\u533a")})}},addressString:{widget:"text",label:"\u8be6\u7ec6\u5730\u5740",placeholder:"\u8be6\u7ec6\u5730\u5740",rules:ye},isDefault:{widget:"checkbox",label:"\u4f5c\u4e3a\u9ed8\u8ba4\u5730\u5740"},submit:{widget:"button",label:"\u63d0\u4ea4"}}},t.onSaveContact=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return this.form?[4,this.form.buttonClick("submit")]:[2];case 1:return e.sent(),[2]}})})},t.onFormButtonClick=function(e,n){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.saveContact(n.form.data)];case 1:return e.sent(),[2]}})})},t.onDelContact=function(){return o.b(t,void 0,void 0,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return e=this.userContactData.contact,[4,this.vCall(ke,e)];case 1:return!0!==t.sent()?[3,3]:[4,this.controller.delContact(e)];case 2:t.sent(),this.closePage(),t.label=3;case 3:return[2]}})})},t.page=function(){var e,n=U.a.clone(t.userContactData.contact);void 0!==n&&(e=r.createElement("button",{className:"btn btn-sm btn-info",onClick:t.onDelContact},"\u5220\u9664"));var i=t.controller.fromOrderCreation,o=r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:t.onSaveContact},i?"\u4fdd\u5b58\u5e76\u4f7f\u7528":"\u4fdd\u5b58");return r.createElement(s.Page,{header:"\u5730\u5740\u4fe1\u606f",footer:o,right:e},r.createElement("div",{className:"App-container container text-left"},r.createElement(s.Form,{ref:function(e){return t.form=e},className:"my-3",schema:Ce,uiSchema:t.uiSchema,formData:n,onButtonClick:t.onFormButtonClick,fieldLabelSize:3})))},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.userContactData=e,this.openPage(this.page),[2]})})},t}(s.VPage),ke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onConfirm=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.returnCall(!0)];case 1:return e.sent(),this.closePage(),[2]}})})},t.onCancel=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.returnCall(!1)];case 1:return e.sent(),this.closePage(),[2]}})})},t.page=function(e){return r.createElement(s.Page,{header:"\u5220\u9664\u5730\u5740",back:"close"},r.createElement("div",{className:"w-75 mx-auto border border-primary rounded my-3 p-3 bg-white"},r.createElement("div",{className:"p-4 position-relative"},r.createElement("i",{className:"fa fa-question-circle position-absolute fa-2x text-warning",style:{left:0,top:0}}),r.createElement("b",{className:""},"\u662f\u5426\u5220\u9664\u8be5\u5730\u5740\uff1f")),r.createElement("div",{className:"d-flex mt-3 justify-content-end"},r.createElement("button",{className:"btn btn-danger mr-3",onClick:t.onConfirm},"\u5220\u9664\u5730\u5740"),r.createElement("button",{className:"btn btn-outline-info mr-3",onClick:t.onCancel},"\u53d6\u6d88"))))},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.openPage(this.page,e),[2]})})},t}(s.VPage),Pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backLevel=0,t.page=function(e){return t.backLevel++,r.createElement(s.Page,{header:"\u9009\u62e9\u6240\u5728\u7701\u5e02"},r.createElement("div",{className:"row no-gutters"},e.provinces.map(function(e){return t.renderPCC(e.province,t.onProvinceClick)})))},t.renderPCC=function(e,t){return r.createElement("div",{key:e.id,className:"col-6 col-md-4 col-lg-3 cursor-pointer"},Object(s.tv)(e,function(e){var n=e.id,i=e.chineseName;return r.createElement(r.Fragment,null,r.createElement("div",{className:"pt-1 pb-1 px-2",onClick:function(){return t(n)},style:{border:"1px solid #eeeeee",marginRight:"-1px",marginBottom:"-1px"}},r.createElement("span",{className:"ml-1 align-middle"},r.createElement(s.FA,{name:"chevron-right",className:"text-info small"}),"\xa0 ",i)))}))},t.onProvinceClick=function(e){return o.b(t,void 0,void 0,function(){var t,n,i=this;return o.e(this,function(o){switch(o.label){case 0:return this.provinceId=e,[4,this.controller.getProvinceCities(e)];case 1:return(t=o.sent())?1!==(n=t.length)?[3,3]:[4,this.onCityClick(t[0].id)]:[3,4];case 2:return o.sent(),[2];case 3:return n>0?(this.backLevel++,this.openPageElement(r.createElement(s.Page,{header:"\u9009\u62e9\u6240\u5728\u57ce\u5e02"},r.createElement("div",{className:"row no-gutters"},t.map(function(e){return i.renderPCC(e.city,i.onCityClick)})))),[2]):[3,5];case 4:this.closePage(this.backLevel),this.saveAddress(),o.label=5;case 5:return[2]}})})},t.onCityClick=function(e){return o.b(t,void 0,void 0,function(){var t,n=this;return o.e(this,function(i){switch(i.label){case 0:return this.cityId=e,[4,this.controller.getCityCounties(e)];case 1:return(t=i.sent())&&t.length>0?(this.backLevel++,this.openPageElement(r.createElement(s.Page,{header:"\u9009\u62e9\u6240\u5728\u533a\u53bf"},r.createElement("div",{className:"row no-gutters"},t.map(function(e){return n.renderPCC(e.county,n.onCountyClick)}))))):(this.closePage(this.backLevel),this.saveAddress()),[2]}})})},t.onCountyClick=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.countyId=e,this.closePage(this.backLevel),this.saveAddress(),[2]})})},t.saveAddress=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.saveAddress(ue.CHINA,this.provinceId,this.cityId,this.countyId)];case 1:return e.sent(),[2]}})})},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return[4,this.controller.getCountryProvince(ue.CHINA)];case 1:return e=t.sent(),this.openPage(this.page,{provinces:e}),[2]}})})},t}(s.VPage),Se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getCountryProvince=function(e){return o.b(t,void 0,Promise,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.uqs.common.GetCountryProvinces.table({country:e})];case 1:return[2,t.sent()]}})})},t.getProvinceCities=function(e){return o.b(t,void 0,Promise,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.uqs.common.GetProvinceCities.table({province:e})];case 1:return[2,t.sent()]}})})},t.getCityCounties=function(e){return o.b(t,void 0,Promise,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.uqs.common.GetCityCounties.table({city:e})];case 1:return[2,t.sent()]}})})},t.saveAddress=function(e,n,r,i){return o.b(t,void 0,Promise,function(){var t,s,a;return o.e(this,function(o){switch(o.label){case 0:return[4,(t=this.uqs.common.Address).save(void 0,{country:e,province:n,city:r,county:i})];case 1:return s=o.sent(),a=s&&t.boxId(s.id),this.returnCall(a),[2]}})})},t}return o.d(t,e),t.prototype.internalStart=function(){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.openVPage(Pe),[2]})})},t}(m),xe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.userContacts=[],t.onNewContact=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){return this.openVPage(Ne,{contact:void 0}),[2]})})},t.onEditContact=function(e){return o.b(t,void 0,void 0,function(){var t,n,r,i,s;return o.e(this,function(o){switch(o.label){case 0:return t=e.id,[4,this.uqs.customer.Contact.load(t)];case 1:return n=o.sent(),[4,this.cApp.currentUser.getSetting()];case 2:return r=o.sent(),i=n,[4,this.getIsDefault(r,t)];case 3:return i.isDefault=o.sent(),s={contact:n},this.openVPage(Ne,s),[2]}})})},t.delContact=function(e){return o.b(t,void 0,void 0,function(){var t,n;return o.e(this,function(r){switch(r.label){case 0:return t=e.id,[4,this.cApp.currentUser.delContact(t)];case 1:return r.sent(),e.isDefault&&this.setDefaultContact(void 0),(n=this.userContacts.findIndex(function(e){return e.id===t}))>-1&&this.userContacts.splice(n,1),[2]}})})},t.saveContact=function(e){return o.b(t,void 0,void 0,function(){var t,n,r,i,s,a,u;return o.e(this,function(o){switch(o.label){case 0:return[4,(t=this.uqs.customer.Contact).save(void 0,e)];case 1:return n=o.sent(),r=n.id,i=t.boxId(r),[4,(s=this.cApp.currentUser).addContact(r)];case 2:return o.sent(),this.userContacts.push(i),a=e.id,!0!==e.isDefault&&1!==this.userContacts.length?[3,4]:[4,this.setDefaultContact(i)];case 3:o.sent(),o.label=4;case 4:return void 0===a?[3,6]:[4,s.delContact(a)];case 5:o.sent(),(u=this.userContacts.findIndex(function(e){return e.id===a}))>-1&&this.userContacts.splice(u,1),o.label=6;case 6:return this.backPage(),this.fromOrderCreation&&this.onContactSelected(i),[2]}})})},t.onContactSelected=function(e){t.fromOrderCreation&&(t.backPage(),t.returnCall(e))},t.pickAddress=function(e,n,r){return o.b(t,void 0,Promise,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.newC(Se).call()];case 1:return[2,e.sent()]}})})},t}return o.d(t,e),t.prototype.internalStart=function(e){return o.b(this,void 0,void 0,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return this.fromOrderCreation=e,[4,this.cApp.currentUser.getContacts()];case 1:return t=n.sent(),this.userContacts=t.map(function(e){return e.contact}),this.openVPage(pe),!this.fromOrderCreation||this.userContacts&&0!==this.userContacts.length||this.onNewContact(),[2]}})})},o.c([a.m],t.prototype,"userContacts",void 0),t}(m),Fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.getIsDefault=function(e,t){return o.b(this,void 0,Promise,function(){var n;return o.e(this,function(r){return void 0!==e?[2,(n=e.shippingContact)&&n.id===t]:[2,!1]})})},t.prototype.setDefaultContact=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.cApp.currentUser.setDefaultShippingContact(e)];case 1:return t.sent(),[2]}})})},t}(xe),Ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.getIsDefault=function(e,t){return o.b(this,void 0,Promise,function(){var n;return o.e(this,function(r){return void 0!==e?[2,(n=e.invoiceContact)&&n.id===t]:[2,!1]})})},t.prototype.setDefaultContact=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.cApp.currentUser.setDefaultInvoiceContact(e)];case 1:return t.sent(),[2]}})})},t}(xe),Oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderOrder=function(e,n){var i=t.controller.openOrderDetail,o=e.id,a=e.no,u=e.date;e.discription,e.flow;return r.createElement("div",{className:"m-3 justify-content-between cursor-pointer",onClick:function(){return i(o)}},r.createElement("div",null,r.createElement("span",{className:"small text-muted"},"\u8ba2\u5355\u7f16\u53f7: "),r.createElement("strong",null,a)),r.createElement("div",{className:"small text-muted"},r.createElement(s.EasyDate,{date:u})))},t.page=function(){var e=[{title:"\u5f85\u4ed8\u6b3e",content:function(){return r.createElement(s.List,{items:t.pendingOrders,item:{render:t.renderOrder},none:"\u65e0\u5f85\u4ed8\u6b3e\u8ba2\u5355"})},isSelected:"pendingpayment"===t.currentState,load:function(){return o.b(t,void 0,void 0,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return this.currentState="pendingpayment",e=this,[4,this.controller.getMyOrders(this.currentState)];case 1:return e.pendingOrders=t.sent(),[2]}})})}},{title:"\u8fdb\u884c\u4e2d",content:function(){return r.createElement(s.List,{items:t.processingOrders,item:{render:t.renderOrder},none:"\u4f60\u8fd8\u6ca1\u6709\u8ba2\u5355"})},isSelected:"processing"===t.currentState,load:function(){return o.b(t,void 0,void 0,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return this.currentState="processing",e=this,[4,this.controller.getMyOrders(this.currentState)];case 1:return e.processingOrders=t.sent(),[2]}})})}},{title:"\u5df2\u5b8c\u6210",content:function(){return r.createElement(s.List,{items:t.completedOrders,item:{render:t.renderOrder},none:"\u8fd8\u6ca1\u6709\u5df2\u5b8c\u6210\u7684\u8ba2\u5355"})},isSelected:"completed"===t.currentState,load:function(){return o.b(t,void 0,void 0,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return this.currentState="completed",e=this,[4,this.controller.getMyOrders(this.currentState)];case 1:return e.completedOrders=t.sent(),[2]}})})}}];return r.createElement(s.Page,{header:"\u6211\u7684\u8ba2\u5355",tabs:e,tabPosition:"top"})},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.currentState=e,this.openPage(this.page),[2]})})},o.c([a.m],t.prototype,"pendingOrders",void 0),o.c([a.m],t.prototype,"processingOrders",void 0),o.c([a.m],t.prototype,"completedOrders",void 0),t}(s.VPage),Te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.packsRow=function(e,t){var n=e.pack,i=e.quantity,o=e.price;e.currency;return r.createElement("div",{key:t,className:"px-2 py-2 border-top"},r.createElement("div",{className:"d-flex align-items-center"},r.createElement("div",{className:"flex-grow-1"},r.createElement("b",null,Object(s.tv)(n))),r.createElement("div",{className:"w-12c mr-4 text-right"},r.createElement("span",{className:"text-danger h5"},r.createElement("small",null,"\xa5"),parseFloat((o*i).toFixed(2))),r.createElement("small",{className:"text-muted"},"(\xa5",parseFloat(o.toFixed(2))," \xd7 ",i,")"))))},t.renderOrderItem=function(e){var n=e.product,i=e.packs,o=t,s=o.controller,a=o.packsRow;return r.createElement("div",null,r.createElement("div",{className:"row p-1 my-1"},r.createElement("div",{className:"col-lg-6 pb-3"},s.renderOrderItemProduct(n)),r.createElement("div",{className:"col-lg-6"},i.map(function(e,t){return a(e,t)}))))},t.page=function(e){var n,i,o,a=e.brief,u=e.data,c=(a.id,a.no),l=(a.state,a.description,a.date),d=u.orderItems,h=u.currency,p=u.shippingContact,f=u.invoiceContact,m=u.invoiceType,v=u.invoiceInfo,b=u.amount,y=u.couponOffsetAmount,g=u.couponRemitted,w=u.freightFee,E=u.freightFeeRemitted;if(y||g){var C=void 0,N=void 0;y&&(C=r.createElement("div",{className:"d-flex flex-row justify-content-between"},r.createElement("div",{className:"text-muted"},"\u6298\u6263:"),r.createElement("div",{className:"text-right text-danger"},r.createElement("small",null,"\xa5"),y))),g&&(N=r.createElement("div",{className:"d-flex flex-row justify-content-between"},r.createElement("div",{className:"text-muted"},"\u62b5\u6263:"),r.createElement("div",{className:"text-right text-danger"},r.createElement("small",null,"\xa5"),g))),n=r.createElement("div",{className:"bg-white row no-gutters p-3 my-1"},r.createElement("div",{className:"col-3 text-muted"},"\u4f18\u60e0\u7801:"),r.createElement("div",{className:"col-9"},C,N))}w&&(i=r.createElement(r.Fragment,null,r.createElement("div",{className:"text-right text-danger"},r.createElement("small",null,"\xa5"),w)),E&&(o=r.createElement(r.Fragment,null,r.createElement("div",{className:"text-right text-danger"},r.createElement("small",null,"\xa5"),E,"(\u51cf\u514d)"))));var k=r.createElement(r.Fragment,null,"\u8ba2\u5355\u8be6\u60c5: ",c);return r.createElement(s.Page,{header:k},r.createElement(s.List,{items:d,item:{render:t.renderOrderItem}}),r.createElement("div",{className:"bg-white row no-gutters p-3 my-1"},r.createElement("div",{className:"col-3 text-muted"},"\u6536\u8d27\u5730\u5740:"),r.createElement("div",{className:"col-9"},Object(s.tv)(p))),r.createElement("div",{className:"bg-white row no-gutters p-3 my-1"},r.createElement("div",{className:"col-3 text-muted"},"\u53d1\u7968\u5730\u5740:"),r.createElement("div",{className:"col-9"},Object(s.tv)(f))),r.createElement("div",{className:"bg-white row no-gutters p-3 my-1"},r.createElement("div",{className:"col-3 text-muted"},"\u53d1\u7968\u4fe1\u606f:"),r.createElement("div",{className:"col-9"},function(e,t){return r.createElement(r.Fragment,null,Object(s.tv)(e,Ae,void 0,function(){return r.createElement(r.Fragment,null)}),r.createElement("br",null),Object(s.tv)(t,qe,void 0,function(){return r.createElement(r.Fragment,null)}))}(m,v))),r.createElement("div",{className:"bg-white row no-gutters p-3 my-1"},r.createElement("div",{className:"col-3 text-muted"},"\u8fd0\u8d39:"),r.createElement("div",{className:"col-9"},i,o)),n,r.createElement("div",{className:"bg-white row no-gutters p-3 my-1"},r.createElement("div",{className:"col-3 text-muted"},"\u4e0b\u5355\u65f6\u95f4:"),r.createElement("div",{className:"col-9 text-right"},r.createElement(s.EasyDate,{date:l}))),r.createElement("div",{className:"bg-white p-3 my-1 text-right"},r.createElement("span",{className:"text-danger font-weight-bold"},"\u603b\u91d1\u989d: ",b,Object(s.tv)(h))))},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.openPage(this.page,e),[2]})})},t}(s.VPage);function Ae(e){e.id;var t=e.description;return r.createElement(r.Fragment,null,t)}function qe(e){e.id;var t=e.title;e.taxNo,e.address,e.telephone,e.bank,e.accountNo;return r.createElement(r.Fragment,null,t)}var je=[{name:"id",type:"id",required:!1},{name:"title",type:"string",required:!1},{name:"taxNo",type:"string",required:!1},{name:"address",type:"id",required:!1},{name:"telephone",type:"string",required:!1},{name:"bank",type:"string",required:!1},{name:"accountNo",type:"string",required:!1}],Ve={items:{id:{visible:!1},title:{widget:"text",label:"\u5355\u4f4d\u5168\u79f0",placeholder:"\u5fc5\u586b",rules:function(e){return e&&e.length>200?"\u5355\u4f4d\u5168\u79f0\u6700\u591a200\u4e2a\u5b57\uff01":void 0}},taxNo:{widget:"text",label:"\u7eb3\u7a0e\u4eba\u8bc6\u522b\u7801",placeholder:"\u5fc5\u586b",rules:function(e){if(e){for(var t=[/^[\da-z]{10,15}$/i,/^\d{6}[\da-z]{10,12}$/i,/^[a-z]\d{6}[\da-z]{9,11}$/i,/^[a-z]{2}\d{6}[\da-z]{8,10}$/i,/^\d{14}[\dx][\da-z]{4,5}$/i,/^\d{17}[\dx][\da-z]{1,2}$/i,/^[a-z]\d{14}[\dx][\da-z]{3,4}$/i,/^[a-z]\d{17}[\dx][\da-z]{0,1}$/i,/^[\d]{6}[\da-z]{13,14}$/i],n=t.length,r=0;r<n;r++)if(t[r].test(e))return;return"\u7eb3\u7a0e\u4eba\u8bc6\u522b\u7801\u683c\u5f0f\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01"}}},address:{widget:"text",label:"\u6ce8\u518c\u5730\u5740",placeholder:"\u5fc5\u586b",rules:function(e){return e&&e.length>200?"\u6ce8\u518c\u5730\u5740\u6700\u591a200\u4e2a\u5b57\uff01":void 0}},telephone:{widget:"text",label:"\u6ce8\u518c\u7535\u8bdd",placeholder:"\u5fc5\u586b",rules:function(e){return e&&!/^(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}$/.test(e)?"\u6ce8\u518c\u7535\u8bdd\u683c\u5f0f\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01":void 0}},bank:{widget:"text",label:"\u5f00\u6237\u94f6\u884c",placeholder:"\u5fc5\u586b",rules:function(e){return e&&e.length>100?"\u5f00\u6237\u94f6\u884c\u540d\u79f0\u6700\u591a100\u4e2a\u5b57\uff01":void 0}},accountNo:{widget:"text",label:"\u94f6\u884c\u8d26\u53f7",placeholder:"\u5fc5\u586b",rules:function(e){return e&&!/^([1-9]{1})(\d{14}|\d{18}|\d{15})$/.test(e)?"\u94f6\u884c\u8d26\u53f7\u683c\u5f0f\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01":void 0}},submit:{widget:"button",label:"\u63d0\u4ea4"}}},De={id:!1,title:!0,taxNo:!0,address:!1,telephone:!1,bank:!1,accountNo:!1,isDefault:!1},Re={id:!1,title:!0,taxNo:!0,address:!0,telephone:!0,bank:!0,accountNo:!0,isDefault:!1},Le={id:!1,title:!0,taxNo:!0,address:!1,telephone:!1,bank:!1,accountNo:!1,isDefault:!0},Ue={id:!1,title:!0,taxNo:!0,address:!0,telephone:!0,bank:!0,accountNo:!0,isDefault:!0},Me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showTip=!1,t.saveTip="",t.onFormButtonClick=function(e,n){return o.b(t,void 0,void 0,function(){var e,t,r,i=this;return o.e(this,function(o){switch(o.label){case 0:e=n.form,t=e.data,r={invoiceType:this.invoiceType,invoiceInfo:t},this.invoiceInfoData=t,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.controller.saveInvoiceInfo(r)];case 2:return o.sent(),this.saveTip="\u53d1\u7968\u4fe1\u606f\u5df2\u7ecf\u4fdd\u5b58",[3,4];case 3:return o.sent(),this.saveTip="\u53d1\u7968\u4fe1\u606f\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",[3,4];case 4:return this.showTip=!0,setTimeout(function(){i.showTip=!1},2e3),[2]}})})},t.onSaveInvoice=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return this.form?[4,this.form.buttonClick("submit")]:[2];case 1:return e.sent(),[2]}})})},t.onInvoiceTypeClick=function(e){t.invoiceType=parseInt(e.currentTarget.value)},t.page=Object(b.a)(function(){var e=t.buildForm(),n=t.showTip?r.createElement("div",{className:"alert alert-primary",role:"alert"},r.createElement(s.FA,{name:"exclamation-circle",className:"text-warning float-left mr-3",size:"2x"}),t.saveTip):null;return r.createElement(s.Page,{header:"\u53d1\u7968"},r.createElement("div",{className:"px-3"},r.createElement("div",{className:"form-group row py-3 mb-1 bg-white"},r.createElement("div",{className:"col-12 col-sm-3 pb-2 text-muted"},"\u53d1\u7968\u7c7b\u578b:"),r.createElement("div",{className:"col-12 col-sm-9"},r.createElement("div",{className:"form-check form-check-inline"},r.createElement("input",{className:"form-check-input",type:"radio",name:"invoiceType",id:"common",value:"1",onChange:function(e){return t.onInvoiceTypeClick(e)},checked:1===t.invoiceType}),r.createElement("label",{className:"form-check-label",htmlFor:"common"},"\u589e\u503c\u7a0e\u666e\u901a\u53d1\u7968")),r.createElement("div",{className:"form-check form-check-inline"},r.createElement("input",{className:"form-check-input",type:"radio",name:"invoiceType",id:"valueAdded",value:"2",onChange:function(e){return t.onInvoiceTypeClick(e)},checked:2===t.invoiceType}),r.createElement("label",{className:"form-check-label",htmlFor:"valueAdded"},"\u589e\u503c\u7a0e\u4e13\u7528\u53d1\u7968"))))),r.createElement("div",{className:"p-3 bg-white"},e,r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:t.onSaveInvoice},"\u786e\u5b9a"),n))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){var t,n;return o.e(this,function(r){return t=e.invoiceType,n=e.invoiceInfo,this.invoiceType=t&&t.id||1,n&&(n.assure(),this.invoiceInfoData=o.a({},n.obj)),this.openPage(this.page),[2]})})},t.prototype.buildForm=function(){var e=this,t=1===this.invoiceType?De:Re,n=1===this.invoiceType?Le:Ue;return je.forEach(function(e){var r=Ve.items;e.required=t[e.name],r[e.name].visible=n[e.name]}),r.createElement(s.Form,{ref:function(t){return e.form=t},className:"my-3",schema:je,uiSchema:Ve,formData:this.invoiceInfoData,onButtonClick:this.onFormButtonClick,fieldLabelSize:3})},o.c([a.m],t.prototype,"showTip",void 0),o.c([a.m],t.prototype,"invoiceType",void 0),t}(s.VPage),Be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.internalStart=function(e,t){return o.b(this,void 0,void 0,function(){return o.e(this,function(n){return this.fromOrderCreation=t,this.openVPage(Me,e),[2]})})},t.prototype.saveInvoiceInfo=function(e){return o.b(this,void 0,void 0,function(){var t,n,r,i,s;return o.e(this,function(o){switch(o.label){case 0:return t=e.invoiceType,n=e.invoiceInfo,e.isDefault,[4,this.uqs.customer.InvoiceInfo.save(void 0,n)];case 1:return r=o.sent(),i=r.id,s={invoiceType:this.uqs.common.InvoiceType.boxId(t),invoiceInfo:this.uqs.customer.InvoiceInfo.boxId(i)},[4,this.cApp.currentUser.setDefaultInvoice(s.invoiceType,s.invoiceInfo)];case 2:return o.sent(),this.fromOrderCreation&&(this.backPage(),this.returnCall(s)),[2]}})})},t}(m),We=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.applyCoupon=function(){return o.b(t,void 0,void 0,function(){var e,t=this;return o.e(this,function(n){switch(n.label){case 0:return(e=this.couponInput.value)?[4,this.controller.applyCoupon(e)]:[2];case 1:switch(n.sent()){case-1:this.tips="\u5bf9\u4e0d\u8d77\uff0c\u5f53\u524d\u670d\u52a1\u5668\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002";break;case 1:this.tips="\u6709\u6548";break;case 0:case 2:case 3:case 5:this.tips="\u4f18\u60e0\u7801\u65e0\u6548\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u6216\u4e0e\u60a8\u7684\u4e13\u5c5e\u9500\u552e\u4eba\u5458\u8054\u7cfb\u3002";break;case 4:this.tips="\u8be5\u4f18\u60e0\u7801\u5df2\u7ecf\u88ab\u4f7f\u7528\u8fc7\u4e86\uff0c\u4e0d\u5141\u8bb8\u91cd\u590d\u4f7f\u7528\u3002"}return this.tips&&setTimeout(function(){return t.tips=void 0},ue.TIPDISPLAYTIME),[2]}})})},t.page=Object(b.a)(function(){var e=r.createElement(r.Fragment,null);return t.tips&&(e=r.createElement("div",{className:"alert alert-primary",role:"alert"},r.createElement(s.FA,{name:"exclamation-circle",className:"text-warning float-left mr-3",size:"2x"}),t.tips)),r.createElement(s.Page,{header:"\u586b\u5199\u4f18\u60e0\u7801"},r.createElement("div",{className:"px-2 bg-white"},r.createElement("div",{className:"row py-3 pr-3 my-1"},r.createElement("div",{className:"col-4 col-sm-2 pb-2 text-muted"},"\u4f18\u60e0\u7801:"),r.createElement("div",{className:"col-8 col-sm-10 d-flex"},r.createElement("input",{ref:function(e){return t.couponInput=e},type:"number",className:"form-control"}))),r.createElement("div",{className:"row my-1"},r.createElement("div",{className:"col-12"},r.createElement("button",{className:"btn btn-primary w-100",onClick:t.applyCoupon},"\u5e94\u7528"))),e))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.openPage(this.page),[2]})})},o.c([a.m],t.prototype,"tips",void 0),t}(s.VPage),He=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.applyCoupon=function(e){return o.b(t,void 0,void 0,function(){var t,n,r;return o.e(this,function(i){switch(i.label){case 0:return t=this.cApp.currentUser.currentCustomer,[4,this.uqs.salesTask.IsCanUseCoupon.submit({code:e,customer:t&&t.id})];case 1:return n=i.sent(),1===(r=n.result)&&(this.returnCall(n),this.closePage()),[2,r]}})})},t}return o.d(t,e),t.prototype.internalStart=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.openVPage(We),[2]})})},t}(m),ze=12,Ke=100,Qe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.orderData=new le,t.couponData={},t.createOrderFromCart=function(e){return o.b(t,void 0,void 0,function(){var t,n,r,i,s,a,u;return o.e(this,function(c){switch(c.label){case 0:return t=this.cApp,n=t.currentUser,r=t.currentSalesRegion,this.orderData.webUser=n.id,this.orderData.salesRegion=r.id,this.removeCoupon(),void 0!==n.currentCustomer&&(this.orderData.customer=n.currentCustomer.id),void 0!==this.orderData.shippingContact?[3,2]:(i=this.orderData,[4,this.getDefaultShippingContact()]);case 1:i.shippingContact=c.sent(),c.label=2;case 2:return void 0!==this.orderData.invoiceContact?[3,4]:(s=this.orderData,[4,this.getDefaultInvoiceContact()]);case 3:s.invoiceContact=c.sent(),c.label=4;case 4:return void 0!==this.orderData.invoiceType?[3,6]:(a=this.orderData,[4,this.getDefaultInvoiceType()]);case 5:a.invoiceType=c.sent(),c.label=6;case 6:return void 0!==this.orderData.invoiceInfo?[3,8]:(u=this.orderData,[4,this.getDefaultInvoiceInfo()]);case 7:u.invoiceInfo=c.sent(),c.label=8;case 8:return void 0!==e&&e.length>0&&(this.orderData.currency=e[0].packs[0].currency,this.orderData.orderItems=e.map(function(e){var t=new de;return t.product=e.product,t.packs=e.packs.map(function(e){return o.a({},e)}).filter(function(e){return e.quantity>0&&e.price}),t.packs.forEach(function(e){e.retail=e.price}),t}),this.orderData.freightFee=ze,this.orderData.productAmount>Ke&&(this.orderData.freightFeeRemitted=-1*ze)),[2]}})})},t.submitOrder=function(){return o.b(t,void 0,void 0,function(){var e,t,n;return o.e(this,function(r){switch(r.label){case 0:return e=this.orderData.orderItems,[4,this.uqs.order.Order.save("order",this.orderData.getDataForSave())];case 1:return t=r.sent(),[4,this.uqs.order.Order.action(t.id,t.flow,t.state,"submit")];case 2:return r.sent(),n=[],e.forEach(function(e){e.packs.forEach(function(t){n.push({productId:e.product.id,packId:t.pack.id})})}),this.cApp.cart.removeFromCart(n),s.nav.popTo(this.cApp.topKey),this.openVPage(he,t),[2]}})})},t.onSelectShippingContact=function(){return o.b(t,void 0,void 0,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return[4,this.newC(Fe).call(!0)];case 1:return e=t.sent(),this.orderData.shippingContact=e,[2]}})})},t.onSelectInvoiceContact=function(){return o.b(t,void 0,void 0,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return[4,this.newC(Ie).call(!0)];case 1:return e=t.sent(),this.orderData.invoiceContact=e,[2]}})})},t.onCouponEdit=function(){return o.b(t,void 0,void 0,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return[4,this.newC(He).call(this.orderData.coupon)];case 1:return(e=t.sent())?[4,this.applyCoupon(e)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.applyCoupon=function(e){return o.b(t,void 0,void 0,function(){var t,n,r,i,s,a,u,c,l,d,h,p,f=this;return o.e(this,function(o){switch(o.label){case 0:return t=e.id,n=e.code,r=e.discount,i=e.preferential,s=e.validitydate,a=e.isValid,void 0!==n&&1===a&&new Date(s).getTime()>Date.now()?(this.orderData.coupon=t,this.couponData=e,r&&void 0!==(u=this.orderData.orderItems)&&u.length>0?(c=[],u.forEach(function(e){c.push(f.uqs.product.AgentPrice.table({product:e.product.id,salesRegion:f.cApp.currentSalesRegion.id}))}),[4,Promise.all(c)]):[3,2]):[3,3];case 1:if((l=o.sent())&&l.length>0){for(d=0,h=function(e){for(var t=u[e],n=t.product,i=t.packs,o=l[e],s=function(e){var t=i[e],s=o.find(function(e){return e.product.id===n.id&&e.pack.id===t.pack.id&&0===e.discountinued&&e.expireDate>Date.now()});if(!s)return"break";t.price=Math.round(Math.max(s.agentPrice,t.retail*(1-r))),d+=Math.round(t.quantity*(t.retail-t.price)*-1)},a=0;a<i.length;a++){if("break"===s(a))break}},p=0;p<u.length;p++)h(p);this.orderData.couponOffsetAmount=Math.round(d)}o.label=2;case 2:i&&(this.orderData.couponRemitted=-1*i),this.orderData.freightFee=ze,this.orderData.productAmount>Ke&&(this.orderData.freightFeeRemitted=-1*ze),o.label=3;case 3:return[2]}})})},t.removeCoupon=function(){t.orderData.coupon=void 0,t.couponData={},t.orderData.couponOffsetAmount=0,t.orderData.couponRemitted=0},t.openMyOrders=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.openVPage(Oe,e),[2]})})},t.getMyOrders=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:switch(e){case"pendingpayment":return[3,1];case"processing":return[3,3]}return[3,5];case 1:return[4,this.uqs.order.GetPendingPayment.table(void 0)];case 2:return[2,t.sent()];case 3:return[4,this.uqs.order.Order.mySheets(void 0,1,-20)];case 4:return[2,t.sent()];case 5:return[4,this.uqs.order.Order.mySheets("#",1,-20)];case 6:return[2,t.sent()]}})})},t.onInvoiceInfoEdit=function(){return o.b(t,void 0,void 0,function(){var e,t,n,r,i,s;return o.e(this,function(o){switch(o.label){case 0:return e=this.newC(Be),t=this.orderData,n=t.invoiceType,r=t.invoiceInfo,i={invoiceType:n,invoiceInfo:r},[4,e.call(i,!0)];case 1:return s=o.sent(),this.orderData.invoiceType=s.invoiceType,this.orderData.invoiceInfo=s.invoiceInfo,[2]}})})},t.openOrderDetail=function(e){return o.b(t,void 0,void 0,function(){var t,n,r,i;return o.e(this,function(o){switch(o.label){case 0:return[4,this.uqs.order.Order.getSheet(e)];case 1:return t=o.sent(),n=t.data,r=n.orderitems,i=u(r),n.orderItems=i,this.openVPage(Te,t),[2]}})})},t.openMeInfo=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.cApp.cMe.openMeInfoFirstOrder()];case 1:return e.sent(),[2]}})})},t.renderDeliveryTime=function(e){return t.cApp.cProduct.renderDeliveryTime(e)},t.renderOrderItemProduct=function(e){return t.cApp.cProduct.renderCartProduct(e)},t}return o.d(t,e),t.prototype.internalStart=function(e){return o.b(this,void 0,void 0,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return t=e,[4,this.createOrderFromCart(t)];case 1:return n.sent(),this.openVPage(ce),[2]}})})},t.prototype.getDefaultSetting=function(){return o.b(this,void 0,void 0,function(){var e,t;return o.e(this,function(n){switch(n.label){case 0:return this.defaultSetting?[2,this.defaultSetting]:(e=this.cApp.currentUser,t=this,[4,e.getSetting()]);case 1:return[2,t.defaultSetting=n.sent()||{}]}})})},t.prototype.getContact=function(){return o.b(this,void 0,Promise,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return null===this.contact0?[2]:void 0!==this.contact0?[2,this.contact0]:[4,this.cApp.currentUser.getContacts()];case 1:return void 0===(e=t.sent())||0===e.length?(this.contact0=null,[2]):[2,this.contact0=e[0].contact]}})})},t.prototype.getDefaultShippingContact=function(){return o.b(this,void 0,void 0,function(){var e,t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.getDefaultSetting()];case 1:return e=n.sent(),(t=e.shippingContact)?[3,3]:[4,this.getContact()];case 2:t=n.sent(),n.label=3;case 3:return[2,t]}})})},t.prototype.getDefaultInvoiceContact=function(){return o.b(this,void 0,void 0,function(){var e,t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.getDefaultSetting()];case 1:return e=n.sent(),(t=e.invoiceContact)?[3,3]:[4,this.getContact()];case 2:t=n.sent(),n.label=3;case 3:return[2,t]}})})},t.prototype.getDefaultInvoiceType=function(){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.getDefaultSetting()];case 1:return[2,e.sent().invoiceType]}})})},t.prototype.getDefaultInvoiceInfo=function(){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.getDefaultSetting()];case 1:return[2,e.sent().invoiceInfo]}})})},o.c([a.m],t.prototype,"orderData",void 0),o.c([a.m],t.prototype,"couponData",void 0),t}(m),Je={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},Ge={fontSize:"0.75rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},Xe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.categoryClick=function(e,n,r){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.controller.openMainPage(e,n,r)];case 1:return t.sent(),[2]}})})},t.renderRootCategory=function(e,n){var i=e.name,o=e.children,s=e.productCategory.id,a=ue.ROOTCATEGORY[s],u=a.src,c=a.labelColor;return r.createElement("div",{className:"bg-white mb-3",key:i},r.createElement("div",{className:"py-2 px-3 cursor-pointer",onClick:function(){return t.categoryClick(e,void 0,c)}},r.createElement("img",{className:"mr-5",src:u,alt:i,style:{height:"2.5rem",width:"2.5rem"}}),r.createElement("b",null,i)),r.createElement("div",{className:"",style:{paddingRight:"1px"}},r.createElement("div",{className:"row no-gutters"},o.map(function(n){return t.renderSubCategory(n,e,c)}))))},t.renderSubCategory=function(e,n,i){var o=e.name,a=e.children,u=e.total;return r.createElement("div",{key:o,className:"col-6 col-md-4 col-lg-3 cursor-pointer",onClick:function(){return t.categoryClick(e,n,i)}},r.createElement("div",{className:"py-2 px-2",style:{border:"1px solid #eeeeee",marginRight:"-1px",marginBottom:"-1px"}},r.createElement("div",{style:Je},r.createElement("span",{className:"ml-1 align-middle"},r.createElement(s.FA,{name:"chevron-circle-right",className:i}),"\xa0 ",o)),Ze(a,u)))},t.content=Object(b.a)(function(){var e=t.controller,n=e.categories;e.categories2;return r.createElement(r.Fragment,null,n.map(function(e){return t.renderRootCategory(e,void 0)}))}),t}return o.d(t,e),t.prototype.render=function(e){return r.createElement(this.content,null)},t.prototype.renderRoot=function(e){var t=e.productCategory.id;return console.log(t),r.createElement("div",{key:t},t)},t}(s.View);function Ze(e,t){return r.createElement("div",{className:"py-1 px-1 text-muted small",style:Ge},0===e.length?r.createElement(r.Fragment,null,"\u8be5\u7c7b\u4ea7\u54c1\u6570\u91cf: ",t>1e3?">1000":t):e.map(function(e){return e.name}).join(" / "))}var Ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderChild=function(e){return r.createElement("div",{className:"py-2"},r.createElement(s.FA,{name:"hand-o-right mr-2"}),e.name)},t.categoryClick=function(e,n,r){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.controller.openMainPage(e,n,r)];case 1:return t.sent(),[2]}})})},t.breadCrumb=function(e,n){return r.createElement("nav",{"arial-babel":"breadcrumb"},r.createElement("ol",{className:"breadcrumb"},Object(s.tv)(e,t.breadCrumbItem)))},t.breadCrumbItem=function(e,n){return void 0===e||void 0===e.productCategory?r.createElement(r.Fragment,null):r.createElement(r.Fragment,null,Object(s.tv)(e.productCategory.parent,t.breadCrumbItem),r.createElement("li",{className:"breadcrumb-item",onClick:function(){return t.categoryClick(e,void 0,"")}},e.name))},t.renderRootCategory=function(e,n,i){e.productCategory;var o=e.name,s=e.children;return r.createElement("div",{className:"bg-white mb-3",key:o},r.createElement("div",{className:"py-2 px-3 cursor-pointer",onClick:function(){return t.categoryClick(e,n,i)}},r.createElement("b",null,o)),r.createElement("div",{className:"",style:{paddingRight:"1px"}},r.createElement("div",{className:"row no-gutters"},s.map(function(n){return t.renderSubCategory(n,e,i)}))))},t.renderSubCategory=function(e,n,i){var o=e.name,a=e.children,u=e.total;return r.createElement("div",{key:o,className:"col-6 col-md-4 col-lg-3 cursor-pointer",onClick:function(){return t.categoryClick(e,n,i)}},r.createElement("div",{className:"py-2 px-2",style:{border:"1px solid #eeeeee",marginRight:"-1px",marginBottom:"-1px"}},r.createElement("div",{style:Je},r.createElement("span",{className:"ml-1 align-middle"},r.createElement(s.FA,{name:"chevron-circle-right",className:i}),"\xa0 ",o)),Ze(a,u)))},t.page=function(e){var n=t.controller.cApp.cHome.renderSearchHeader(),i=t.controller.cApp.cCart.renderCartLabel(),o=e.categoryWaper,a=e.parent,u=e.labelColor;return r.createElement(s.Page,{header:n,right:i},t.renderRootCategory(o,a,u))},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.openPage(this.page,e),[2]})})},t}(s.VPage),$e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.categories=[],t.categories2=[],t.renderRootList=function(){return t.renderView(Xe)},t}return o.d(t,e),t.prototype.internalStart=function(e){return o.b(this,void 0,void 0,function(){var e,t,n,r,i=this;return o.e(this,function(o){switch(o.label){case 0:return e=this.cApp,t=e.currentSalesRegion,n=e.currentLanguage,[4,this.uqs.product.GetRootCategory.query({salesRegion:t.id,language:n.id})];case 1:return r=o.sent(),this.categories=r.first,this.categories.forEach(function(e){i.buildCategories(e,r.secend,r.third)}),[2]}})})},t.prototype.getCategoryChildren=function(e){return o.b(this,void 0,void 0,function(){var t,n,r;return o.e(this,function(i){switch(i.label){case 0:return t=this.cApp,n=t.currentSalesRegion,r=t.currentLanguage,[4,this.uqs.product.GetChildrenCategory.query({parent:e,salesRegion:n.id,language:r.id})];case 1:return[2,i.sent()]}})})},t.prototype.buildCategories=function(e,t,n){return o.b(this,void 0,void 0,function(){var r=this;return o.e(this,function(i){return t.forEach(function(e){return o.b(r,void 0,void 0,function(){return o.e(this,function(t){return e.children=n.filter(function(t){return t.parent===e.productCategory.id}),[2]})})}),e.children=t.filter(function(t){return t.parent===e.productCategory.id}),[2]})})},t.prototype.openMainPage=function(e,t,n){return o.b(this,void 0,void 0,function(){var r,i,s,a;return o.e(this,function(o){switch(o.label){case 0:return r=e.productCategory,i=e.name,s=r.id,[4,this.getCategoryChildren(s)];case 1:return 0===(a=o.sent()).first.length?[3,2]:(this.buildCategories(e,a.first,a.secend),this.openVPage(Ye,{categoryWaper:e,parent:t,labelColor:n}),[3,4]);case 2:return[4,this.cApp.cProduct.searchByCategory({productCategoryId:s,name:i})];case 3:o.sent(),o.label=4;case 4:return[2]}})})},o.c([a.m],t.prototype,"categories",void 0),o.c([a.m],t.prototype,"categories2",void 0),t}(m),_e=n(122),et={width:"100%",height:"20rem",backgroundImage:"url("+n.n(_e).a+")",backgroundSize:"contain",backgroundColor:"rgba(255,255,255,0.1)",opacity:.09,position:"absolute"},tt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.recommendationCodeRef=r.createRef(),t.content=Object(b.a)(function(){var e=t.controller,n=e.cApp,i=e.member;if(void 0===i)return r.createElement(r.Fragment,null);var o=n.currentUser,a=i.recommendationCode,u=i.point;u||(u=0);var c=r.createElement(s.Image,{className:"mr-3 w-3c h-3c",src:o.icon}),l=r.createElement("div",{className:"small"},"\u9080\u8bf7\u7801: ",a),d=r.createElement("div",{className:"my-3 text-center bg-white h-25",style:{position:"relative"}},r.createElement("div",{className:"w-100 bg-white h-20c",style:{position:"absolute"}}),r.createElement("div",{className:"d-flex align-items-center justify-content-center",style:et}),r.createElement("div",{className:"w-100 d-flex align-items-center justify-content-center h-20c",style:{position:"absolute"}},r.createElement("div",{className:"muted mr-3 small"},"\u79ef\u5206: "),r.createElement("div",{className:"text-danger",style:{fontSize:"2rem"}},u))),h=(r.createElement("p",{className:"h4"},"\u6211\u7684\u79ef\u5206"),r.createElement("p",{className:"small align-self-end"},"\u67e5\u770b\u8be6\u60c5 ",r.createElement(s.FA,{name:"angle-right"})),r.createElement(r.Fragment,null,r.createElement("p",{className:"h5 mb-0"},"0"),r.createElement(s.Muted,null,"\u672c\u5468"))),p=r.createElement(r.Fragment,null,r.createElement("p",{className:"h5 mb-0"},u),r.createElement(s.Muted,null,"\u7d2f\u8ba1")),f=r.createElement("p",null,"\u6211\u7684\u7c89\u4e1d"),m=r.createElement("p",{className:"small align-self-end"},"\u67e5\u770b\u8be6\u60c5 ",r.createElement(s.FA,{name:"angle-right"}));r.createElement("div",{className:"shadow bg-white rounded p-3 mb-1"},r.createElement(s.LMR,{left:f,right:m}),r.createElement(s.LMR,{className:"pb-2"},r.createElement("p",{className:"h4 mb-0"},"0"),r.createElement(s.Muted,null,"\u4eca\u65e5")),r.createElement(s.LMR,{left:h,right:p}),r.createElement(s.LMR,null,r.createElement("input",{type:"text",className:"form-control",ref:t.recommendationCodeRef}),r.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return t.submitRecommendationCode()}},"\u8f93\u5165\u9080\u8bf7\u7801")));return r.createElement("div",null,r.createElement(s.LMR,{className:"bg-white p-3 mb-1 align-items-center",left:c,right:l},r.createElement("b",null,o.name)),d)}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return[2]})})},t.prototype.render=function(e){return r.createElement(this.content,null)},t.prototype.submitRecommendationCode=function(){var e=this.recommendationCodeRef.current.value;e&&(0,this.controller.setReferrer)(e)},t}(s.VPage),nt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loginCallback=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return s.nav.pop(),[4,this.internalStart(void 0)];case 1:return e.sent(),[2]}})})},t.render=Object(b.a)(function(){return t.isLogined?void 0===t.member?r.createElement(s.Loading,null):t.renderView(tt):r.createElement("div",{className:"d-flex h-100 flex-column align-items-center justify-content-center"},r.createElement("div",{className:"flex-fill"}),r.createElement("button",{className:"btn btn-success w-20c",onClick:function(){return s.nav.showLogin(t.loginCallback,!0)}},r.createElement(s.FA,{name:"sign-out",size:"lg"})," \u8bf7\u767b\u5f55"),r.createElement("div",{className:"flex-fill"}),r.createElement("div",{className:"flex-fill"}))}),t.tab=function(){return t.start(),r.createElement(t.render,null)},t}return o.d(t,e),t.prototype.internalStart=function(e){return o.b(this,void 0,void 0,function(){var e,t,n,r,i,s,a;return o.e(this,function(o){switch(o.label){case 0:return this.isLogined?(e=this.uqs.member,t=this.user.id,(n=[]).push(e.MemberAction.submit({})),n.push(e.MemberRecommender.table({referrer:t})),n.push(e.MemberRecommender.table({member:t})),[4,Promise.all(n)]):[3,2];case 1:r=o.sent(),i=r[0],s=i.code,a=i.point,this.referrer=r[2],this.member={recommendationCode:s,point:a,fans:r[1],referrer:r[2]},o.label=2;case 2:return[2]}})})},t.prototype.setReferrer=function(e){if(e&&!this.referrer)this.user.id},o.c([a.m],t.prototype,"member",void 0),t}(m),rt=n(123),it=n.n(rt),ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.render=function(){return r.createElement(s.Page,{header:"\u5173\u4e8e\u767e\u7075\u5a01",right:null},r.createElement("div",{className:"bg-white p-3"},r.createElement("img",{className:"h-3c position-absolute",src:g.a}),r.createElement("div",{className:"h3 flex-fill text-center"},r.createElement("span",{className:"text-primary mr-3"},"\u767e\u7075\u5a01\u96c6\u56e2")),r.createElement(it.a,{className:"mt-5",source:'\u767e\u7075\u5a01\u79d1\u6280\u6709\u9650\u516c\u53f8\u662f\u4e00\u5bb6\u81f4\u529b\u4e8e\u7814\u53d1\u548c\u751f\u4ea7\u5316\u5b66\u53ca\u751f\u547d\u79d1\u5b66\u76f8\u5173\u4ea7\u54c1\uff0c\u96c6\u654f\u6377\u5236\u9020\u3001\u5168\u7403\u8425\u9500\u548c\u73b0\u4ee3\u7269\u6d41\u4e3a\u4e00\u4f53\u7684\u9ad8\u79d1\u6280\u4f01\u4e1a\u3002\n\n\u767e\u7075\u5a01\u79c9\u627f\u201c\u8bda\u5b9e\u5b88\u4fe1\u3001\u5f00\u62d3\u521b\u65b0\u3001\u5408\u4f5c\u5171\u8d62\u3001\u5b9e\u73b0\u5353\u8d8a\u201d\u7684\u4ef7\u503c\u89c2\uff0c\u81f4\u529b\u4e8e\u4e0e\u5316\u5b66\u3001\u751f\u7269\u533b\u836f\u3001\u7cbe\u7ec6\u5316\u5de5\u3001\u98df\u54c1\u5de5\u4e1a\u3001\u73b0\u4ee3\u519c\u4e1a\u3001\u7535\u5b50\u3001\u65e5\u5316\u3001\u77f3\u5316\u3001\u7eba\u7ec7\u3001\u751f\u547d\u79d1\u5b66\u3001\u73af\u5883\u4fdd\u62a4\u3001\u75be\u75c5\u63a7\u5236\u3001\u65b0\u80fd\u6e90\u3001\u65b0\u6750\u6599\u3001\u822a\u7a7a\u822a\u5929\u7b49\u9886\u57df\u7684\u5ba2\u6237\u5efa\u7acb\u4e92\u4fe1\u3001\u957f\u4e45\u7684\u5408\u4f5c\u5173\u7cfb\uff0c\u4e3a\u5b9e\u73b0\u201c\u4fc3\u8fdb\u79d1\u6280\u4e0e\u5de5\u4e1a\u53d1\u5c55\uff0c\u9020\u798f\u4eba\u7c7b\u201d\u7684\u4f7f\u547d\u800c\u4e0d\u61c8\u52aa\u529b\uff01\n\n<h2>\u4f01\u4e1a\u4f7f\u547d</h2>\n\n\u4fc3\u8fdb\u79d1\u6280\u4e0e\u5de5\u4e1a\u53d1\u5c55\uff0c\u9020\u798f\u4eba\u7c7b\n\n<h2>\u4f01\u4e1a\u613f\u666f</h2>\n\nJ\uff06K Scientific\u60f3\u8c61\u4e00\u4e2a\u6240\u6709\u4eba\u90fd\u80fd\u5728\u5b89\u5168\u548c\u6e05\u6d01\u7684\u73af\u5883\u4e2d\u8fc7\u4e0a\u5065\u5eb7\uff0c\u6709\u76ca\u7684\u751f\u6d3b\u7684\u4e16\u754c\u3002\u6211\u4eec\u81f4\u529b\u4e8e\u7eaa\u5ff5\u672a\u6765\uff0c\u52aa\u529b\u6539\u5584\u6211\u4eec\u7684\u5b69\u5b50\u53ca\u5176\u5b50\u5973\u7684\u4e16\u754c\u3002\u5f53\u6211\u4eec\u4e0e\u5ba2\u6237\u5408\u4f5c\u89e3\u51b3\u4ed6\u4eec\u7684\u751f\u4ea7\u9700\u6c42\u65f6\uff0c\u8fd9\u4e2a\u613f\u666f\u6307\u5bfc\u6211\u4eec\u7684\u884c\u52a8\u3002\n\n<h2>\u6838\u5fc3\u4ef7\u503c\u89c2</h2>\n\n<style>\n* {\n  box-sizing: border-box;\n}\n.box {\n  float: left;\n  width: 25%;\n  padding: 1px;\n  text-align: center;\n}\n.clearfix::after {\n  content: "";\n  clear: both;\n  display: table;\n}\n</style>\n\n<div class="clearfix">\n  <div class="box" style="background-color:#bbb">\n  <h3>\u8bda\u5b9e\u5b88\u4fe1</h3>\n  <p style="color:grey;font-size: 1rem;">\u8bda\u5b9e\u5b88\u4fe1</p>\n  </div>\n  <div class="box" style="background-color:#ccc">\n      <h3>\u5f00\u62d3\u521b\u65b0</h3>\n  <p style="color:grey;font-size: 1rem;">\u5f00\u62d3\u521b\u65b0</p>\n  </div>\n  <div class="box" style="background-color:#ddd">\n      <h3>\u5408\u4f5c\u5171\u8d62</h3>\n  <p style="color:grey;font-size: 1rem;">\u5408\u4f5c\u5171\u8d62</p>\n  </div>\n  <div class="box" style="background-color:#eee">\n      <h3>\u5b9e\u73b0\u5353\u8d8a</h3>\n  <p style="color:grey;font-size: 1rem;">\u5b9e\u73b0\u5353\u8d8a</p>\n  </div>\n</div>\n\n<h2>\u56fd\u9645\u8425\u9500\u4e2d\u5fc3</h2>\n\n<style>\nimg {\n  float: left;\n}\n</style>\n\n<img src="http://47.92.87.6/wordpress/wp-content/uploads/2019/05/World-Wide-Distribution.png" alt="World Wide Distribution"\n    title="ww distribution" class="img-fluid"/>\n    \u767e\u7075\u5a01\u5728\u4e2d\u56fd\u5185\u5730\u3001\u9999\u6e2f\uff0c\u6b27\u6d32\u53ca\u5317\u7f8e\u7b49\u591a\u4e2a\u56fd\u5bb6\u548c\u5730\u533a\u8bbe\u6709\u7269\u6d41\u4e2d\u5fc3\uff0c\u5b9e\u884c\u4e13\u4e1a\u5316\u3001\u4e2a\u6027\u5316\u7684\u4e00\u7ad9\u5f0f\u670d\u52a1\uff0c\u4e3a\u5168\u7403\u8d85\u8fc7200,000 \u540d\u79d1\u6280\u548c\u5de5\u4e1a\u9886\u57df\u7684\u5ba2\u6237\u63d0\u4f9b\u4ea7\u54c1\u8d44\u6e90\u53ca\u914d\u5957\u6280\u672f\u670d\u52a1\u3002\u767e\u7075\u5a01\u5177\u6709\u56fd\u9645\u5316\u5b66\u6280\u672f\u8d44\u6e90\u80cc\u666f\u53ca\u5f3a\u5927\u7684\u56fd\u9645\u64cd\u63a7\u80fd\u529b\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6709\u7279\u6b8a\u8981\u6c42\u7684\u5ba2\u6237\u4ece\u56fd\u5916\u5355\u72ec\u8fdb\u53e3\u7279\u79cd\u5316\u5b66\u4ea7\u54c1\uff0c\u4e3a\u9879\u76ee\u8bd5\u9a8c\u4e43\u81f3\u5de5\u4e1a\u5316\u5e94\u7528\u63d0\u4f9b\u5f3a\u5927\u652f\u6301\u3002\u767e\u7075\u5a01\u5177\u6709\u5f3a\u5927\u7684\u4e13\u4e1a\u5316\u5b66\u54c1\u5b9a\u5236\u3001\u91c7\u8d2d\u548c\u51fa\u53e3\u80fd\u529b\uff0c\u66f4\u5177\u5907\u4f17\u591a\u56fd\u9645\u6027\u5408\u4f5c\u9879\u76ee\uff08\u5982\u591a\u56fd\u5316\u5b66\u5b9e\u9a8c\u5ba4\u8054\u5408\u5f00\u53d1\u6218\u7565\u6027\u5316\u5408\u7269\uff09\u7684\u8fd0\u4f5c\u80fd\u529b\uff0c\u767e\u7075\u5a01\u613f\u4e0e\u4e2d\u56fd\u7684\u540c\u884c\u643a \u624b\uff0c\u5171\u521b\u6211\u56fd\u5316\u5b66\u4e8b\u4e1a\u66f4\u52a0\u8f89\u714c\u7684\u672a\u6765\uff01\n\n<h2>\u56fd\u9645\u8ba4\u8bc1</h2>\n\n<h3>ISO 9001</h3>\n\n\u3010\u914d\u56fe\u3011\n',escapeHtml:!1})))},t}(r.Component),st=function(e){function t(t){var n=e.call(this,t)||this;n.schema=[{name:"nick",type:"string"},{name:"icon",type:"image"}],n.uiSchema={items:{nick:{widget:"text",label:"\u522b\u540d",placeholder:"\u597d\u7684\u522b\u540d\u66f4\u65b9\u4fbf\u8bb0\u5fc6"},icon:{widget:"image",label:"\u5934\u50cf"}}},n.onItemChanged=function(e,t,r){return o.b(n,void 0,void 0,function(){var n;return o.e(this,function(r){switch(r.label){case 0:return n=e.name,[4,s.userApi.userSetProp(n,t)];case 1:return r.sent(),this.data[n]=t,s.nav.user[n]=t,s.nav.saveLocalUser(),[2]}})})},n.onWebUserChanged=function(e,t,r){return o.b(n,void 0,void 0,function(){var n;return o.e(this,function(r){switch(r.label){case 0:return n=e.name,this.webUserData[n]=t,[4,this.controller.changeWebUser(this.webUserData)];case 1:return r.sent(),[2]}})})},n.onWebUserContactChanged=function(e,t,r){return o.b(n,void 0,void 0,function(){var n;return o.e(this,function(r){switch(r.label){case 0:return n=e.name,this.webUserContactData[n]=t,[4,this.controller.changeWebUserContact(this.webUserContactData)];case 1:return r.sent(),[2]}})})},n.page=function(){var e=n,t=e.schema,i=e.uiSchema,o=e.data,a=e.onItemChanged,u=e.webUserData,c=e.onWebUserChanged,l=e.webUserContactData,d=e.onWebUserContactChanged,h=e.controller;return r.createElement(s.Page,{header:"\u4e2a\u4eba\u4fe1\u606f"},r.createElement(s.Edit,{schema:t,uiSchema:i,data:o,onItemChanged:a}),r.createElement(s.Edit,{schema:at,uiSchema:ut,data:u,onItemChanged:c}),r.createElement(s.Edit,{schema:ct,uiSchema:lt(h.pickAddress),data:l,onItemChanged:d}))};var i=s.nav.user,a=i.nick,u=i.icon;n.data={nick:a,icon:u};var c=n.controller.cApp.currentUser,l=c.firstName,d=c.gender,h=c.salutation,p=c.organizationName,f=c.departmentName,m=c.telephone,v=c.mobile,b=c.email,y=c.fax,g=c.zipCode,w=c.address,E=c.addressString;return n.webUserData={firstName:l,gender:d,salutation:h,organizationName:p,departmentName:f},n.webUserContactData={telephone:m,mobile:v,email:b,fax:y,address:w,addressString:E,zipCode:g},n}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.openPage(this.page),[2]})})},o.c([a.m],t.prototype,"data",void 0),o.c([a.m],t.prototype,"webUserData",void 0),o.c([a.m],t.prototype,"webUserContactData",void 0),t}(s.VPage),at=[{name:"firstName",type:"string",required:!0},{name:"gender",type:"string"},{name:"salutation",type:"string"},{name:"organizationName",type:"string",required:!0},{name:"departmentName",type:"string"}],ut={items:{firstName:{widget:"text",label:"\u771f\u5b9e\u59d3\u540d",placeholder:"\u5316\u5b66\u54c1\u662f\u53d7\u56fd\u5bb6\u5b89\u5168\u6cd5\u89c4\u9650\u5236\u7684\u7279\u6b8a\u5546\u54c1\uff0c\u767e\u7075\u5a01\u63d0\u4f9b\u6280\u672f\u54a8\u8be2\u3001\u8d44\u6599\u4ee5\u53ca\u5316\u5b66\u4ea7\u54c1\u7684\u5bf9\u8c61\u5fc5\u987b\u662f\u5177\u6709\u5316\u5b66\u7ba1\u7406\u548c\u5e94\u7528\u80fd\u529b\u7684\u4e13\u4e1a\u5355\u4f4d\uff08\u975e\u4e2a\u4eba\uff09\u3002\u4e3a\u6b64\uff0c\u9700\u8981\u60a8\u91cd\u65b0\u63d0\u4f9b\u975e\u865a\u62df\u7684\u3001\u53ef\u6838\u67e5\u7684\u4fe1\u606f\u3002",rules:Ee},gender:{widget:"radio",label:"\u6027\u522b",list:[{value:"1",title:"\u7537"},{value:"0",title:"\u5973"}]},salutation:{widget:"text",label:"\u79f0\u8c13",rules:function(e){return e&&e.length>100?"\u5355\u4f4d\u540d\u79f0\u6700\u591a100\u4e2a\u5b57\uff01":void 0}},organizationName:{widget:"text",label:"\u5355\u4f4d\u540d\u79f0",rules:we},departmentName:{widget:"text",label:"\u90e8\u95e8\u540d\u79f0",rules:function(e){return e&&e.length>100?"\u90e8\u95e8\u540d\u79f0\u540d\u79f0\u6700\u591a100\u4e2a\u5b57\uff01":void 0}}}},ct=[{name:"telephone",type:"string"},{name:"mobile",type:"string",required:!0},{name:"email",type:"string"},{name:"fax",type:"string",required:!1},{name:"address",type:"id",required:!1},{name:"addressString",type:"string",required:!1},{name:"zipCode",type:"string",required:!1}];function lt(e){var t=this;return{items:{telephone:{widget:"text",label:"\u56fa\u5b9a\u7535\u8bdd",rules:fe},mobile:{widget:"text",label:"\u624b\u673a\u53f7",rules:me},email:{widget:"text",label:"Email",rules:ve,placeholder:"Email"},fax:{widget:"text",label:"\u4f20\u771f",rules:be},address:{widget:"id",label:"\u6240\u5728\u5730\u533a",pickId:function(n,r,i){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,e(n,r,i)];case 1:return[2,t.sent()]}})})},Templet:function(e){return Object(s.tv)(e,function(e){var t=e.country,n=e.province,i=e.city,o=e.county;return r.createElement(r.Fragment,null,void 0!==t&&void 0!==t.id&&Object(s.tv)(t,function(e){return r.createElement(r.Fragment,null,e.chineseName)}),void 0!==n&&void 0!==n.id&&Object(s.tv)(n,function(e){return r.createElement(r.Fragment,null,e.chineseName)}),void 0!==i&&void 0!==i.id&&Object(s.tv)(i,function(e){return r.createElement(r.Fragment,null,e.chineseName)}),void 0!==o&&void 0!==o.id&&Object(s.tv)(o,function(e){return r.createElement(r.Fragment,null,e.chineseName)}))},function(){return r.createElement("small",{className:"text-muted"},"\u8bf7\u9009\u62e9\u5730\u533a")})}},addressString:{widget:"text",label:"\u8be6\u7ec6\u5730\u5740",rules:ye},zipCode:{widget:"text",label:"\u90ae\u7f16",rules:ge}}}}var dt=function(e){var t=e.country,n=e.province,i=e.city,o=e.county;return r.createElement(r.Fragment,null,Object(s.tv)(t),Object(s.tv)(n,void 0,void 0,function(){return r.createElement(r.Fragment,null)}),Object(s.tv)(i,void 0,void 0,function(){return r.createElement(r.Fragment,null)}),Object(s.tv)(o,void 0,void 0,function(){return r.createElement(r.Fragment,null)}))},ht=function(e){return r.createElement(r.Fragment,null," ",e.chineseName," ")},pt=function(e){return r.createElement(r.Fragment,null," ",e.name," ")},ft=function(e){var t=e,n=t.brand,i=t.description,o=t.CAS,a=t.purity,u=t.molecularFomula,c=t.molecularWeight,l=t.origin,d=t.imageUrl;return r.createElement("div",{className:"row d-flex"},r.createElement("div",{className:"col-12"},r.createElement("div",{className:"row py-2"},r.createElement("div",{className:"col-12"},r.createElement("strong",null,i))),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-3"},r.createElement(j,{chemicalId:d,className:"w-100"})),r.createElement("div",{className:"col-9"},r.createElement("div",{className:"row"},mt("CAS",o),mt("\u7eaf\u5ea6",a),mt("\u5206\u5b50\u5f0f",u),mt("\u5206\u5b50\u91cf",c),mt("\u4ea7\u54c1\u7f16\u53f7",l),Object(s.tv)(n,function(e){return r.createElement(r.Fragment,null,mt("\u54c1\u724c",e.name))}))))))};function mt(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 text-muted pr-0"},e,":"),r.createElement("div",{className:"col-8"},t))}var vt=function(e){var t=e.name,n=e.mobile,i=e.organizationName,o=e.address,a=e.addressString;return r.createElement("div",{className:"flex-grow-1"},r.createElement("b",null,t),"\xa0 ",n," \xa0 ",i,r.createElement("br",null),r.createElement("small",null,Object(s.tv)(o)," ",a))},bt={appName:"\u767e\u7075\u5a01\u7cfb\u7edf\u5de5\u7a0b\u90e8/cart",version:"1.0.8",tvs:{common:{address:dt,country:ht,province:ht,city:ht,county:ht,currency:pt},warehouse:{warehouse:function(e){var t=e.name;return r.createElement("div",null,t)}},product:{productx:ft,packx:function(e){var t=e.radiox,n=e.radioy,i=e.unit;return 1!==t?r.createElement(r.Fragment,null,t," * ",n,i):r.createElement(r.Fragment,null,n,i)},productCategory:function(e){e.children;return r.createElement(r.Fragment,null,"aaa")}},order:{productx:ft,address:dt,country:ht,province:ht,city:ht,county:ht,contact:vt,currency:pt},customer:{contact:vt,address:dt,country:ht,province:ht,city:ht,county:ht,invoiceInfo:function(e){var t=e.title,n=e.taxNo;return r.createElement("div",{className:"flex-grow-1"},r.createElement("b",null,t),"\xa0 ",n)},invoiceType:function(e){e.id;var t=e.description;return r.createElement("div",{className:"flex-grow-1"},t)}}},loginTop:r.createElement("div",{className:"d-flex align-items-center"},r.createElement("img",{className:"h-3c position-absolute",src:g.a}),r.createElement("div",{className:"h3 flex-fill text-center"},r.createElement("span",{className:"text-primary mr-3"},"\u767e\u7075\u5a01")))},yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.render=function(){return r.createElement(s.Page,{header:"\u5173\u4e8e\u767e\u7075\u5a01APP",right:null},r.createElement("div",{className:"bg-white p-3"},r.createElement("div",{className:"h3 flex-fill text-center"},r.createElement("img",{src:g.a})),r.createElement("div",{className:"h3 flex-fill text-center"},r.createElement("span",{className:"text-primary mr-3"},"\u767e\u7075\u5a01APP")),r.createElement("div",{className:"h3 flex-fill text-center small"},r.createElement("span",{className:"text-muted mr-3"},"V",bt.version))))},t}(r.Component),gt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.about=function(){return s.nav.push(r.createElement(ot,null))},t.aboutThisApp=function(){return s.nav.push(r.createElement(yt,null))},t.changePassword=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,s.nav.changePassword()];case 1:return e.sent(),[2]}})})},t.openContactList=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){return this.controller.openContactList(),[2]})})},t.openInvoice=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){return this.controller.openInvoice(),[2]})})},t.meInfo=Object(b.a)(function(){var e=s.nav.user;if(void 0===e)return null;var n=e.id,i=e.name,o=e.nick,a=e.icon;return r.createElement(s.LMR,{className:"py-2 cursor-pointer w-100",left:r.createElement(s.Image,{className:"w-3c h-3c mr-3",src:a}),right:r.createElement(s.FA,{className:"align-self-end",name:"angle-right"}),onClick:function(){t.openVPage(st)}},r.createElement("div",null,r.createElement("div",null,function(e,t){return t?r.createElement(r.Fragment,null,r.createElement("b",null,t," \xa0 ",r.createElement("small",{className:"muted"},e))):r.createElement("b",null,e)}(i,o)),r.createElement("div",{className:"small"},r.createElement("span",{className:"text-muted"},"ID:")," ",n>1e4?n:String(n+1e4).substr(1))))}),t.orderStates=function(){var e=t.controller.openMyOrders;return r.createElement("div",{className:"d-flex justify-content-around w-100 my-3"},r.createElement("div",{className:"d-flex flex-column align-items-center",onClick:function(){return e("pendingpayment")}},r.createElement(s.FA,{name:"file-text-o",className:"text-info fa-2x"}),r.createElement("small",null,"\u5f85\u4ed8\u6b3e")),r.createElement("div",{className:"d-flex flex-column align-items-center",onClick:function(){return e("processing")}},r.createElement(s.FA,{name:"file-text-o",className:"text-info fa-2x"}),r.createElement("small",null,"\u8fdb\u884c\u4e2d")),r.createElement("div",{className:"d-flex flex-column align-items-center",onClick:function(){return e("completed")}},r.createElement(s.FA,{name:"file-text-o",className:"text-info fa-2x"}),r.createElement("small",null,"\u5df2\u5b8c\u6210")))},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return[2]})})},t.prototype.exit=function(){s.nav.showLogout()},t.prototype.render=function(){var e,t=s.nav.user,n=["",{type:"component",component:r.createElement(s.IconText,{iconClass:"text-info mr-2",icon:"smile-o",text:"\u5173\u4e8e\u767e\u7075\u5a01"}),onClick:this.about},"",{type:"component",component:r.createElement("div",{className:"w-100 d-flex justify-content-between"},r.createElement(s.IconText,{iconClass:"text-info mr-2",icon:"smile-o",text:"\u5173\u4e8e\u672cAPP"}),r.createElement("div",{className:"py-2 small"},"V",bt.version))},""];if(void 0===t)(e=n).push({type:"component",component:r.createElement("button",{className:"btn btn-success w-100 my-2",onClick:function(){return s.nav.showLogin(void 0,!0)}},r.createElement(s.FA,{name:"sign-out",size:"lg"})," \u8bf7\u767b\u5f55")});else{var i=["",{type:"component",bk:"",component:r.createElement("button",{className:"btn btn-danger w-100",onClick:this.exit},r.createElement(s.FA,{name:"sign-out",size:"lg"})," \u9000\u51fa\u767b\u5f55")}];(e=["",{type:"component",component:r.createElement(this.meInfo,null)},"",{type:"component",component:r.createElement(this.orderStates,null)},"",{type:"component",component:r.createElement(s.IconText,{iconClass:"text-info mr-2",icon:"address-book-o",text:"\u5730\u5740\u7ba1\u7406"}),onClick:this.openContactList},"",{type:"component",component:r.createElement(s.IconText,{iconClass:"text-info mr-2",icon:"address-book-o",text:"\u53d1\u7968\u7ba1\u7406"}),onClick:this.openInvoice},"",{type:"component",component:r.createElement(s.IconText,{iconClass:"text-info mr-2",icon:"key",text:"\u4fee\u6539\u5bc6\u7801"}),onClick:this.changePassword}]).push.apply(e,n.concat(i))}return r.createElement(s.PropGrid,{rows:e,values:{}})},t}(s.VPage);var wt=function(e){function t(t){var n=e.call(this,t)||this;n.onWebUserChanged=function(e,t,r){return o.b(n,void 0,void 0,function(){var n;return o.e(this,function(r){switch(r.label){case 0:return n=e.name,this.webUserData[n]=t,[4,this.controller.changeWebUser(this.webUserData)];case 1:return r.sent(),[2]}})})},n.onWebUserContactChanged=function(e,t,r){return o.b(n,void 0,void 0,function(){var n;return o.e(this,function(r){switch(r.label){case 0:return n=e.name,this.webUserContactData[n]=t,[4,this.controller.changeWebUserContact(this.webUserContactData)];case 1:return r.sent(),[2]}})})},n.page=function(){return r.createElement(s.Page,{header:"\u9996\u6b21\u4e0b\u5355\u8865\u5145\u4e2a\u4eba\u4fe1\u606f"},r.createElement("div",{className:"alert alert-primary small",role:"alert"},r.createElement(s.FA,{name:"exclamation-circle",className:"text-warning mr-3 my-1 float-left",size:"3x"}),"\u5316\u5b66\u54c1\u662f\u53d7\u56fd\u5bb6\u5b89\u5168\u6cd5\u89c4\u9650\u5236\u7684\u7279\u6b8a\u5546\u54c1\uff0c\u767e\u7075\u5a01\u63d0\u4f9b\u6280\u672f\u54a8\u8be2\u3001\u8d44\u6599\u4ee5\u53ca\u5316\u5b66\u4ea7\u54c1\u7684\u5bf9\u8c61\u5fc5\u987b\u662f\u5177\u6709\u5316\u5b66\u7ba1\u7406\u548c\u5e94\u7528\u80fd\u529b\u7684\u4e13\u4e1a\u5355\u4f4d\uff08\u975e\u4e2a\u4eba\uff09\u3002 \u4e3a\u6b64\uff0c\u9700\u8981\u60a8\u91cd\u65b0\u63d0\u4f9b\u975e\u865a\u62df\u7684\u3001\u53ef\u6838\u67e5\u7684\u4fe1\u606f\u3002\u8fd9\u4e9b\u4fe1\u606f\u5305\u62ec\u4e0b\u9762\u6240\u6709\u5e26\u6709 ",r.createElement("span",{className:"text-danger"},"*")," \u7684\u4fe1\u606f\u3002"),r.createElement(s.Edit,{schema:at,uiSchema:ut,data:n.webUserData,onItemChanged:n.onWebUserChanged}),r.createElement(s.Edit,{schema:ct,uiSchema:lt(n.controller.pickAddress),data:n.webUserContactData,onItemChanged:n.onWebUserContactChanged}),r.createElement("div",{className:"p-3 bg-white"},r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:function(){return n.backPage()}},"\u4fdd\u5b58\u5e76\u8fd4\u56de")))};var i=n.controller.cApp.currentUser,a=i.firstName,u=i.gender,c=i.salutation,l=i.organizationName,d=i.departmentName,h=i.telephone,p=i.mobile,f=i.email;return n.webUserData={firstName:a,gender:u,salutation:c,organizationName:l,departmentName:d},n.webUserContactData={telephone:h,mobile:p,email:f},n}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.openPage(this.page),[2]})})},o.c([a.m],t.prototype,"webUserData",void 0),o.c([a.m],t.prototype,"webUserContactData",void 0),t}(s.VPage),Et=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tab=function(){return t.renderView(gt)},t.openMyOrders=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.cApp.cOrder.openMyOrders(e)];case 1:return t.sent(),[2]}})})},t.openContactList=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.newC(Fe).start(!1)];case 1:return e.sent(),[2]}})})},t.openInvoice=function(){return o.b(t,void 0,void 0,function(){var e,t,n;return o.e(this,function(r){switch(r.label){case 0:return e=this.newC(Be),[4,this.cApp.currentUser.getSetting()];case 1:return t=r.sent(),n=U.a.pick(t,["invoiceType","invoiceInfo"]),e.start(n),[2]}})})},t.openMeInfoFirstOrder=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.openVPage(wt)];case 1:return e.sent(),[2]}})})},t.pickAddress=function(e,n,r){return o.b(t,void 0,Promise,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.newC(Se).call()];case 1:return[2,e.sent()]}})})},t}return o.d(t,e),t.prototype.internalStart=function(){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return[2]})})},t.prototype.changeWebUser=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.cApp.currentUser.changeWebUser(e)];case 1:return t.sent(),[2]}})})},t.prototype.changeWebUserContact=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.cApp.currentUser.changeWebUserContact(e)];case 1:return t.sent(),[2]}})})},t}(m),Ct=function(e){return!0===e?"text-primary":"text-muted"},Nt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render=function(e){var n=t.controller,i=n.cHome,o=(n.cMember,n.cCart),a=n.cMe,u=n.cart,c=[{name:"home",label:"\u9996\u9875",icon:"home",content:i.tab,notify:void 0},{name:"cart",label:"\u8d2d\u7269\u8f66",icon:"shopping-cart",content:o.tab,notify:u.count},{name:"me",label:"\u6211\u7684",icon:"user",content:a.tab}].map(function(e){var t=e.name,n=e.label,r=e.icon;return{name:t,caption:function(e){return Object(s.TabCaptionComponent)(n,r,Ct(e))},content:e.content,notify:e.notify}});return r.createElement(s.Page,{header:!1},r.createElement(s.Tabs,{tabs:c}))},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.openPage(this.render),[2]})})},t}(s.VPage),kt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.newC=function(e){return new e(this)},t.prototype.internalStart=function(){return o.b(this,void 0,void 0,function(){var e,t,n;return o.e(this,function(r){switch(r.label){case 0:return e=this,[4,this.uqs.common.SalesRegion.load(ue.SALESREGION_CN)];case 1:return e.currentSalesRegion=r.sent(),t=this,[4,this.uqs.common.Language.load(ue.CHINESE)];case 2:return t.currentLanguage=r.sent(),this.currentUser=new p(this.uqs),this.isLogined&&this.currentUser.setUser(this.user),this.cart=new c(this),[4,this.cart.init()];case 3:return r.sent(),this.cProductCategory=this.newC($e),this.cCart=this.newC(O),this.cHome=this.newC(C),this.cProduct=this.newC(X),this.cOrder=this.newC(Qe),this.cMember=this.newC(nt),this.cMe=this.newC(Et),(n=[]).push(this.cProductCategory.start()),[4,Promise.all(n)];case 4:return r.sent(),this.showMain(),this.topKey=s.nav.topKey(),[2]}})})},t.prototype.showMain=function(e){this.openVPage(Nt,e)},t.prototype.loginCallBack=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return[2]})})},t.prototype.onDispose=function(){this.cart.dispose()},t}(s.CAppBase);s.nav.setSettings(bt);var Pt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onLogined=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,Object(s.start)(kt,bt)];case 1:return e.sent(),[2]}})})},t}return o.d(t,e),t.prototype.render=function(){return r.createElement(s.NavView,{onLogined:this.onLogined,notLogined:this.onLogined})},t}(r.Component),St=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function xt(e){navigator.serviceWorker.register(e,{scope:"."}).then(function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(274),n(276);i.render(r.createElement(Pt,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="./service-worker.js";St?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):xt(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):xt(e)})}}()}],[[126,4,3]]]);
//# sourceMappingURL=main.9fd7bdc4.chunk.js.map