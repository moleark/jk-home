webpackJsonp([0],{304:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(6),i=(t.n(r),t(57)),o=t(56),s=t(309),a=t(312),l=t(307),c=t(0),m=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(s,a)}l((r=r.apply(e,n||[])).next())})};const d=t(124);n.default=class extends r.Component{constructor(){super(...arguments),this.schema=new o.b({fields:[{type:"string",name:"username",placeholder:"\u7528\u6237\u540d",rules:["required","maxlength:100"]},{type:"password",name:"password",placeholder:"\u5bc6\u7801",rules:["required","maxlength:100"]}],onSumit:this.onLoginSubmit.bind(this)})}onLoginSubmit(e){return m(this,void 0,void 0,function*(){let n=e.username,t=e.password;if(void 0===t)return void alert("something wrong, pwd is undefined");let r=yield l.a.login({user:n,pwd:t});void 0===r?(this.schema.clear(),this.schema.errors.push("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\uff01")):(console.log("onLoginSubmit: user=%s pwd:%s",r.name,r.token),yield o.h.logined(r))})}click(){o.h.replace(r.createElement(s.a,null))}render(){let e=r.createElement("div",{className:"text-center"},r.createElement(i.a,{color:"link",style:{margin:"0px auto"},onClick:()=>o.h.push(r.createElement(s.a,null))},"\u5982\u679c\u6ca1\u6709\u8d26\u53f7\uff0c\u8bf7\u6ce8\u518c")),n=!1,t="\u540c\u82b1";return!0===this.props.withBack&&(n="\u767b\u5f55",t="\u767b\u5f55\u7528\u6237"),r.createElement(o.d,{header:n,footer:e},r.createElement("div",{style:{maxWidth:"400px",margin:"20px auto",padding:"0 30px"}},r.createElement("div",{className:"container",style:{display:"flex",position:"relative"}},r.createElement("img",{className:"App-logo",src:d,style:{height:"60px",position:"absolute"}}),r.createElement("span",{style:{flex:1,fontSize:"x-large",alignSelf:"center",textAlign:"center",margin:"10px"}},t)),r.createElement("div",{style:{height:"20px"}}),r.createElement(c.i,{formSchema:this.schema})),r.createElement("div",{className:"constainer"},r.createElement(i.a,{color:"link",block:!0,onClick:()=>o.h.push(r.createElement(a.a,null))},"\u5fd8\u8bb0\u5bc6\u7801")))}}},307:function(e,n,t){"use strict";var r=t(43),i=t(125),o=t(56),s=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(s,a)}l((r=r.apply(e,n||[])).next())})};const a=new class extends r.a{login(e){return s(this,void 0,void 0,function*(){e.device=o.h.local.device.get();let n=yield this.get("login",e);switch(typeof n){default:return;case"string":return Object(i.a)(n);case"object":let e=n.token,t=Object(i.a)(e),{nick:r,icon:o}=n;return r&&(t.nick=r),o&&(t.icon=o),t}})}register(e){return s(this,void 0,void 0,function*(){return yield this.post("register",e)})}}("tv/user/",void 0);n.a=a},308:function(e,n,t){var r=t(311);"string"===typeof r&&(r=[[e.i,r,""]]);var i={hmr:!1,transform:void 0};t(306)(r,i);r.locals&&(e.exports=r.locals)},309:function(e,n,t){"use strict";var r=t(6),i=(t.n(r),t(56)),o=t(304),s=t(307),a=t(310),l=t(308),c=(t.n(l),this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(s,a)}l((r=r.apply(e,n||[])).next())})});const m=t(124);n.a=class extends r.Component{constructor(){super(...arguments),this.schema=new i.b({fields:[{type:"string",name:"user",placeholder:"\u7528\u6237\u540d",rules:["required","maxlength:100"]},{type:"password",name:"pwd",placeholder:"\u5bc6\u7801",rules:["required","maxlength:100"]},{type:"password",name:"rePwd",placeholder:"\u91cd\u590d\u5bc6\u7801",rules:["required","maxlength:100"]}],submitText:"\u6ce8\u518c\u65b0\u7528\u6237",onSumit:this.onLoginSubmit.bind(this)})}onLoginSubmit(e){return c(this,void 0,void 0,function*(){let n,{user:t,pwd:o,rePwd:l,country:c,mobile:m,email:d}=e;if(o!==l)return this.schema.errors.push("\u5bc6\u7801\u4e0d\u5bf9\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u5bc6\u7801\uff01"),this.schema.inputs.pwd.clear(),void this.schema.inputs.rePwd.clear();switch(yield s.a.register({nick:void 0,user:t,pwd:o,country:void 0,mobile:void 0,email:void 0})){default:throw"unknown return";case 0:return i.h.clear(),void i.h.show(r.createElement(a.a,{user:t,pwd:o}));case 1:n="\u7528\u6237\u540d "+t;break;case 2:n="\u624b\u673a\u53f7 +"+c+" "+m;break;case 3:n="\u7535\u5b50\u90ae\u4ef6 "+d}this.schema.errors.push(n+" \u5df2\u7ecf\u88ab\u6ce8\u518c\u8fc7\u4e86")})}click(){i.h.replace(r.createElement(o.default,null))}render(){return r.createElement(i.d,{header:"\u6ce8\u518c"},r.createElement("div",{style:{maxWidth:"400px",margin:"20px auto",padding:"0 30px"}},r.createElement("div",{className:"container",style:{display:"flex",position:"relative"}},r.createElement("img",{className:"App-logo",src:m,style:{height:"60px",position:"absolute"}}),r.createElement("span",{style:{flex:1,fontSize:"x-large",alignSelf:"center",textAlign:"center",margin:"10px"}},"\u540c\u82b1")),r.createElement("div",{style:{height:"20px"}}),r.createElement(i.f,{formSchema:this.schema})))}}},310:function(e,n,t){"use strict";var r=t(6),i=(t.n(r),t(57)),o=t(56),s=t(307),a=t(308),l=(t.n(a),this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(s,a)}l((r=r.apply(e,n||[])).next())})});n.a=class extends r.Component{failed(){}login(){const{user:e,pwd:n}=this.props;s.a.login({user:e,pwd:n}).then(e=>l(this,void 0,void 0,function*(){void 0!==e?yield o.h.logined(e):this.failed()}))}render(){const{user:e,pwd:n}=this.props;return r.createElement(o.d,{header:!1},r.createElement(i.d,{className:"entry-form"},r.createElement(i.h,null,r.createElement("span",{className:"info"},"\u7528\u6237 ",r.createElement("strong",null,e," ")," \u6ce8\u518c\u6210\u529f\uff01"),r.createElement(i.a,{color:"success",block:!0,onClick:()=>this.login()},"\u76f4\u63a5\u767b\u5f55"))))}}},311:function(e,n,t){(e.exports=t(305)(!0)).push([e.i,"div.entry-form{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;max-width:400px;margin:20px auto;padding:0 30px}div.entry-form>form{margin-top:50px}div.entry-form>form>button,div.entry-form>form>div,div.entry-form>form>input,div.entry-form>form>span{margin-top:20px}div.entry-form>form>span{display:block;color:red;padding:1px 15px}div.entry-form>form>span.info{color:green}div.entry-form>form>header{display:-ms-flexbox;display:flex;margin:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;position:relative}div.entry-form>form>header>img{position:absolute;left:0}div.entry-form>form>header>span{font-size:x-large;display:inline-block;margin-left:20px}","",{version:3,sources:["C:/Users/ligsh/tonva/tonva-tools/dist/css/va-form.css"],names:[],mappings:"AACA,eACC,oBAAqB,AACrB,aAAc,AACd,0BAA2B,AACvB,sBAAuB,AAC3B,gBAAiB,AACjB,iBAAkB,AAClB,cAAgB,CAChB,AACD,oBACC,eAAiB,CACjB,AACD,sGAIC,eAAiB,CACjB,AACD,yBACC,cAAe,AACf,UAAW,AACX,gBAAkB,CAClB,AACD,8BACC,WAAa,CACb,AACD,2BACC,oBAAqB,AACrB,aAAc,AACd,SAAU,AACV,sBAAuB,AACnB,mBAAoB,AACxB,qBAAsB,AAClB,uBAAwB,AAC5B,iBAAmB,CACnB,AACD,+BACC,kBAAmB,AACnB,MAAQ,CACR,AACD,gCACC,kBAAmB,AACnB,qBAAsB,AACtB,gBAAkB,CAClB",file:"va-form.css",sourcesContent:["\r\ndiv.entry-form {\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\t-ms-flex-direction: column;\r\n\t    flex-direction: column;\r\n\tmax-width: 400px;\r\n\tmargin: 20px auto;\r\n\tpadding: 0 30px;\r\n}\r\ndiv.entry-form>form {\r\n\tmargin-top: 50px;\r\n}\r\ndiv.entry-form>form>input, \r\ndiv.entry-form>form>button,\r\ndiv.entry-form>form>span,\r\ndiv.entry-form>form>div {\r\n\tmargin-top: 20px;\r\n}\r\ndiv.entry-form>form>span {\r\n\tdisplay: block;\r\n\tcolor: red;\r\n\tpadding: 1px 15px;\r\n}\r\ndiv.entry-form>form>span.info {\r\n\tcolor: green;\r\n}\r\ndiv.entry-form>form>header {\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\tmargin: 0;\r\n\t-ms-flex-align: center;\r\n\t    align-items: center;\r\n\t-ms-flex-pack: center;\r\n\t    justify-content: center;\r\n\tposition: relative;\r\n}\r\ndiv.entry-form>form>header>img {\r\n\tposition: absolute;\r\n\tleft: 0;\r\n}\r\ndiv.entry-form>form>header>span {\r\n\tfont-size: x-large;\r\n\tdisplay: inline-block;\r\n\tmargin-left: 20px;\r\n}\r\n"],sourceRoot:""}])},312:function(e,n,t){"use strict";var r=t(6),i=(t.n(r),t(56));n.a=class extends r.Component{render(){return r.createElement(i.d,{header:"\u5fd8\u8bb0\u5bc6\u7801"},"\u6b63\u5728\u8bbe\u8ba1\u4e2d...")}}}});
//# sourceMappingURL=0.a7f5f997.chunk.js.map