{"version":3,"sources":["tools/groupByProduct.ts","cart/Cart.ts","CurrentUser.ts","CBase.ts","home/VSearchHeader.tsx","home/VSiteHeader.tsx","home/VHome.tsx","home/CHome.tsx","cart/VCartLabel.tsx","tools/minusPlusWidget.tsx","cart/VCart.tsx","cart/CCart.tsx","tools/productImage.tsx","product/VProduct.tsx","product/VProductList.tsx","mainSubs/loader.ts","tools/productChemical.ts","product/itemLoader.ts","product/VProductDelivery.tsx","product/VProductView.tsx","product/VChemicalInfo.tsx","product/CProduct.tsx","order/VCreateOrder.tsx","order/Order.ts","order/OrderSuccess.tsx","customer/VContactList.tsx","tools/inputValidations.ts","customer/VContact.tsx","ui/index.tsx","customer/VAddress.tsx","customer/CAddress.tsx","customer/CSelectContact.tsx","order/VMyOrders.tsx","order/VOrderDetail.tsx","customer/VInvoiceInfo.tsx","customer/CInvoiceInfo.tsx","order/VCouponEdit.tsx","order/CCoupon.tsx","order/COrder.tsx","productCategory/VRootCategory.tsx","productCategory/VCategory.tsx","productCategory/CProductCategory.tsx","member/VMember.tsx","member/CMember.tsx","me/about.tsx","me/EditMeInfo.tsx","me/VMe.tsx","me/EditMeInfoFirstOrder.tsx","me/CMe.tsx","ui/main.tsx","CApp.ts","tvs/common.tsx","tvs/product.tsx","tvs/customer.tsx","index.ts","tvs/index.tsx","tvs/warehouse.tsx","tvs/order.tsx","me/loginTop.tsx","App.tsx","registerServiceWorker.ts","index.tsx","images/logo.png","mainSubs/mainSubs.tsx","mainSubs/render.tsx","mainSubs/index.ts","images/AnalyticalChemistry.png","images/LabSupplies.png","images/LifeScience.png","images/MaterialScience.png","images/OrganicChemistry.png","images/pig.png"],"names":["groupByProduct","packItems","result","cd","product","pack","quantity","price","currency","packRow","id","cpi","find","e","undefined","packs","push","_i","packItems_1","length","Cart_Cart","Cart","cApp","_this","this","data","list","Object","mobx_module","count","box","amount","calcSum","_a","cartItems","cp","$isSelected","$isDeleted","_b","packs_1","pi","Number","NaN","set","parseFloat","toFixed","add","tslib_es6","cartItemExists","splice","packExists","createdate","Date","now","cartStore","storeCart","sent","disposer","prototype","dispose","init","Promise","isLogined","Cart_CartRemote","Cart_CartLocal","load","cartData","cartDataGrouped","i","getQuantity","productId","packId","v","cpp","isDeleted","findIndex","getSelectedItems","filter","removeFromCart","rows","forEach","pe","cartItemIndex","cartItem","CartStore","_super","CartRemote","defineProperty","uqs","order","GetCart","page","SetCart","submit","param","map","RemoveFromCart","CartLocal","apply","arguments","productTuid","ProductX","packTuid","div","cartstring","localStorage","getItem","JSON","parse","cartDataBoxed","productbox","boxId","packbox","_c","removeItem","setItem","stringify","CurrentUser_WebUser","WebUser","setUser","user","_user","name","nick","icon","guest","token","loadWebUser","currentCustomer","mobile","firstName","organizationName","webuser","webUser","gender","salutation","departmentName","WebUserContact","obj","contact","telephone","email","fax","address","addressString","zipCode","WebUserSetting","webUserSettings","WebUserCustomer","value","CurrentUser_Customer","customer","getContacts","WebUserContacts","table","addContact","contactId","arr1","delContact","del","getSetting","setDefaultShippingContact","shippingContact","saveDefaultSettings","setDefaultInvoiceContact","invoiceContact","setDefaultInvoice","invoiceTypeId","invoiceInfoId","invoiceType","invoiceInfo","changeWebUser","save","changeWebUserContact","webUserContact","Customer","CustomerContacts","CustomerSetting","customerSettings","setDefaultSettings","CBase_CUqBase","CUqBase","dist","VSearchHeader_VSearchHeader","CUqSub","VSearchHeader","onSearch","key","controller","cProduct","topKey","popTo","start","render","size","react","className","placeholder","VSiteHeader_VSiteHeader","VSiteHeader","left","src","logo_default","a","alt","style","height","width","right","renderSearchHeader","VHome_VHome","VHome","index_module","header","content","renderCategoryRootList","siteHeader","renderVm","open","openPage","CHome_CHome","HomeSections","sectionTuid","call","firstSize","pageSize","pageStart","search","setPageStart","item","CHome","renderView","cProductCategory","renderRootList","tab","internalStart","openVPage","VCartLabel_VCartLabel","VCartLabel","showCart","badge","onClick","pointer","cart","get","classnames_default","keys","minusPlusWidget_MinusPlusWidget","MinusPlusWidget","minusClick","getValue","setValue","plusClick","ref","input","p","parentElement","tagName","disabled","renderContent","renderTemplet","cn","hasError","itemSchema","required","cursorPointer","minusColor","plusColor","hasFocus","hasAction","readOnly","hasValue","minus","invisible","type","defaultValue","onChange","onKeyDown","onFocus","evt","onBlur","maxLength","plus","renderErrors","isValidKey","cartSchema","arr","VCart_VCart","VCart","CheckOutButton","checkOut","renderCartItem","onProductClick","renderCartProduct","packsRow","renderDeliveryTime","uiSchema","selectable","deletable","restorable","items","widget","Templet","ArrContainer","label","RowContainer","RowSeperator","WidgetClass","onChanged","onQuantityChanged","cartForm","schema","formData","test","row","testButton","params","footer","empty","CCart_CCart","CCart","context","prev","parentData","onRowStateChanged","selected","deleted","alert","loginCallback","currentUser","loginCallBack","closePage","doCheckOut","selectedCartItems","showLogin","cOrder","renderCartLabel","showProductDetail","imagePath","altimagePath","ProductImage","props","chemicalId","substr","altImage","VProduct_schema","VProduct_VProduct","VProduct","renderProduct","brand","description","descriptionC","CAS","purity","molecularFomula","molecularWeight","origin","imageUrl","productPropItem","renderBrand","arrTemplet","retail","vipPrice","promotionPrice","minPrice","retailUI","productBox","renderPack","cHome","cartLabel","cCart","viewProduct","mainSubs","model","productData","Math","min","Infinity","VProductList_VProductList","VProductList","onScrollBottom","pageProducts","more","none","searchKey","before","loader_Loader","Loader","entities","schemaLoaded","loadSchemas","all","initData","loadToData","productChemical_LoaderProductChemical","LoaderProductChemical","ProductChemical","productChemical","chemical","itemLoader_LoaderBrand","LoaderBrand","brandId","Brand","itemLoader_LoaderProductWithChemical","LoaderProductWithChemical","lodash_default","merge","brandLoader","packx","itemLoader_LoaderProductChemicalWithPrices","LoaderProductChemicalWithPrices","main","subs","customerDiscount","promotion","productLoader","_d","discount","currentSalesRegion","currentLanguage","hasCustomer","GetDiscount","discountSetting","currentSalesRegionId","PriceX","salesRegion","prices","discountinued","expireDate","sort","b","element","ret","round","promises","GetPromotionPack","language","results","promotion_1","discount_1","VProductDelivery_VProductDelivery","VProductDelivery","inventoryAllocationContainer","futureDeliveryTimeDescriptionContainer","inventoryAllocation","futureDeliveryTimeDescription","index","warehouse","deliveryTimeDescription","values","packObj","owner","getInventoryAllocation","getFutureDeliveryTimeDescription","VProductView_VCartProuductView","VCartProuductView","renderChemicalInfo","VChemicalInfo_VChemicalInfo","VProuductView","VChemicalInfo","chemicalInfo","chemicalInfoContainer","getChemicalInfo","CProduct_PageProducts","PageProducts","searchProductQuery","seq","CProduct_CProduct","CProduct","renderPrice","salesRegionId","GetInventoryAllocation","GetFutureDeliveryTime","futureDeliveryTime","minValue","maxValue","unit","searchByKey","SearchProduct","first","keyWord","searchByCategory","category","SearchProductByCategory","productCategoryId","productCategory","caption","captionClass","capClass","valClass","blankTime","VCreateOrder_VCreateOrder","VCreateOrder","useShippingAddress","shippingAddressIsBlank","invoiceAddressIsBlank","invoiceIsBlank","nullContact","renderOrderItem","orderItem","renderOrderItemProduct","orderItemKey","renderCoupon","couponData","code","couponOffsetAmount","preferential","validitydate","isValid","couponRemitted","offsetUI","remittedUI","onSubmit","orderData","setTimeout","submitOrder","onSelectShippingContact","onSelectInvoiceContact","openMeInfo","onInvoiceInfoEdit","onCouponEdit","fillMeInfo","role","allowOrdering","fontSize","chevronRight","shippingAddressBlankTip","invoiceAddressBlankTip","divInvoiceContact","invoiceContactUI","defaultChecked","currentTarget","checked","invoiceBlankTip","invoiceInfoUI","title","freightFeeUI","freightFeeRemittedUI","freightFee","freightFeeRemitted","couponUI","orderItems","productAmount","Order_Order","Order","reduce","pv","cv","subAmount","getDataForSave","oi","pk","organization","coupon","orderitems","Order_OrderItem","OrderItem","c","OrderSuccess_OrderSuccess","OrderSuccess","orderCreateResult","back","no","VContactList_VContactList","VContactList","onContactRender","onEditContact","onContactSelected","onNewContact","userContacts","contactList","telephoneValidation","mobileValidation","emailValidation","faxValidation","addressDetailValidation","zipCodeValidation","organizationNameValidation","nameValidation","VContact_schema","VContact_VContact","VContact","visible","rules","pickId","pickAddress","addressValue","country","province","city","county","chineseName","isDefault","onSaveContact","form","buttonClick","onFormButtonClick","saveContact","onDelContact","userContactData","vCall","VContact_VConfirmDeleteContact","buttonDel","contactData","clone","fromOrderCreation","onButtonClick","fieldLabelSize","VConfirmDeleteContact","onConfirm","returnCall","onCancel","top","GLOABLE","CHINA","CHINESE","SALESREGION_CN","ROOTCATEGORY","7","labelColor","430","AnalyticalChemistry_default","986","LifeScience_default","1214","MaterialScience_default","1545","LabSupplies_default","VAddress_VAddress","VAddress","backLevel","provinces","renderPCC","onProvinceClick","pcc","border","marginRight","marginBottom","provinceId","getProvinceCities","cities","len","onCityClick","openPageElement","saveAddress","cityId","getCityCounties","counties","onCountyClick","countyId","getCountryProvince","CAddress_CAddress","CAddress","countryId","common","GetCountryProvinces","GetProvinceCities","GetCityCounties","Address","newAddress","addressId","CSelectContact_CSelectContact","CSelectContact","userContact","userContactId","Contact","userSetting","getIsDefault","setDefaultContact","contactTuid","newContact","newContactId","contactBox","backPage","newC","userContactMaps","CSelectContact_CSelectShippingContact","CSelectShippingContact","CSelectContact_CSelectInvoiceContact","CSelectInvoiceContact","VMyOrders_VMyOrders","VMyOrders","renderOrder","openOrderDetail","date","discription","flow","tabs","pendingOrders","isSelected","currentState","getMyOrders","processingOrders","completedOrders","tabPosition","VOrderDetail_VOrderDetail","VOrderDetail","brief","state","invoiceTypeUI","VOrderDetail_invoiceInfoUI","invoiceTemplate","taxNo","bank","accountNo","VInvoiceInfo_schema","VInvoiceInfo_uiSchema","regArr","j","commonRequired","valueAddedRequired","commonVisible","valueAddedVisible","VInvoiceInfo_VInvoiceInfo","VInvoiceInfo","showTip","saveTip","invoice","invoiceInfoData","saveInvoiceInfo","onSaveInvoice","onInvoiceTypeClick","event","parseInt","frm","buildForm","tipUI","htmlFor","origInvoice","assure","requiredFields","visibleFields","CInvoiceInfo_CInvoiceInfo","CInvoiceInfo","InvoiceInfo","newInvoiceInfo","newInvoiceInfoId","invoiceBox","InvoiceType","VCouponEdit_VCouponEdit","VCouponEdit","applyCoupon","couponInput","tips","tipsUI","CCoupon_CCoupon","CCoupon","salesTask","IsCanUseCoupon","validationResult","rtn","FREIGHTFEEFIXED","FREIGHTFEEREMITTEDSTARTPOINT","COrder_COrder","COrder","createOrderFromCart","removeCoupon","getDefaultShippingContact","_e","getDefaultInvoiceContact","getDefaultInvoiceType","getDefaultInvoiceInfo","action","getTime","promises_1","AgentPrice","agentPrices","eachAgentPrice","agentPrice","openMyOrders","GetPendingPayment","mySheets","cInvoiceInfo","newInvoice","orderId","getSheet","orderItemsGrouped","loaderProduct","cMe","openMeInfoFirstOrder","getDefaultSetting","defaultSetting","getContact","contact0","contactArr","titleTitle","overflow","textOverflow","whiteSpace","subStyle","VRootCategory_VRootCategory","VRootCategory","categoryClick","categoryWapper","parent","openMainPage","renderRootCategory","children","productCategoryID","paddingRight","renderSubCategory","color","total","renderThirdCategory","categories","categories2","renderRoot","root","console","log","join","VCategory_VCategory","VCategory","renderChild","childWapper","breadCrumb","arial-babel","breadCrumbItem","categoryWaper","CProductCategory_CProductCategory","CProductCategory","GetRootCategory","query","buildCategories","secend","third","getCategoryChildren","parentCategoryId","GetChildrenCategory","firstCategory","secendCategory","stylePig","backgroundImage","backgroundSize","backgroundColor","opacity","position","VMember_VMember","VMember","recommendationCodeRef","member","recommendationCode","point","im","inviteCode","divPoints","pointThisWeek","pointAll","fansTitle","fansDetail","submitRecommendationCode","current","setReferrer","CMember_CMember","CMember","pop","currentUserId","MemberAction","MemberRecommender","referrer","fans","about_About","About","with_html_default","source","escapeHtml","EditMeInfo_EditMeInfo","EditMeInfo","onItemChanged","newValue","preValue","userSetProp","saveLocalUser","onWebUserChanged","webUserData","onWebUserContactChanged","webUserContactData","webUserSchema","webUserUiSchema","webUserContactSchema","webUserContactUiSchema","VMe_VMe","VMe","about","changePassword","openContactList","openInvoice","meInfo","userSpan","String","orderStates","exit","showLogout","aboutRows","component","iconClass","text","logOutRows","bk","concat","EditMeInfoFirstOrder_EditMeInfoFirstOrder","EditMeInfoFirstOrder","CMe_CMe","CMe","pick","main_color","main_VMain","VMain","cMember","faceTabs","notify","CApp_CApp","CApp","SalesRegion","Language","showMain","initTabName","onDispose","tvAddress","tvCountry","tvCurrency","tvProduct","product_item","tvContact","appConfig","appName","version","tvs","productx","radiox","radioy","loginTop","setSettings","src_App_0","App","onLogined","notLogined","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","scope","then","registration","onupdatefound","installingWorker","installing","onstatechange","catch","error","react_dom","document","getElementById","URL","toString","addEventListener","fetch","response","status","headers","indexOf","ready","unregister","reload","checkValidServiceWorker","module","exports","ViewBase","ViewMainSubs","sub","renderSubs","subsContainer","renderSubItems","tslib__WEBPACK_IMPORTED_MODULE_0__","subViews","react__WEBPACK_IMPORTED_MODULE_1__","ViewListMainSubs","view","__webpack_require__","_mainSubs__WEBPACK_IMPORTED_MODULE_0__","d","__webpack_exports__"],"mappings":"wKACO,SAASA,EAAeC,GAE3B,IADA,IAAIC,EAAgB,cACXC,GACC,IAAAC,EAAAD,EAAAC,QAASC,EAAAF,EAAAE,KAAMC,EAAAH,EAAAG,SAAUC,EAAAJ,EAAAI,MAAOC,EAAAL,EAAAK,SAClCC,EAAe,CACfJ,KAAMA,EACNE,MAAOA,EACPD,SAAUA,EACVE,SAAUA,GAAYA,EAASE,IAE/BC,EAAMT,EAAOU,KAAK,SAAAC,GAAK,OAAAA,EAAET,QAAQM,KAAON,EAAQM,UACxCI,IAARH,IACAA,EAAM,CAAEP,QAASA,EAASW,MAAO,IACjCb,EAAOc,KAAKL,IAEhBA,EAAII,MAAMC,KAAKP,IAbJQ,EAAA,EAAAC,EAAAjB,EAAAgB,EAAAC,EAAAC,OAAAF,IAAS,GAAbC,EAAAD,IAeX,OAAOf,ECIX,IAAAkB,EAAA,WAaI,SAAAC,EAAYC,GAAZ,IAAAC,EAAAC,KAPYA,KAAAC,KAAY,CACpBC,KAAMC,OAAAC,EAAA,EAAAD,CAAsB,KAGhCH,KAAAK,MAAQD,EAAA,EAAWE,IAAY,GAC/BN,KAAAO,OAASH,EAAA,EAAWE,IAAY,GAYtBN,KAAAQ,QAAU,WAEhB,IADA,IAAIH,EAAQ,EAAGE,EAAS,EACTd,EAAA,EAAAgB,EAAAV,EAAKW,UAALjB,EAAAgB,EAAAd,OAAAF,IAAgB,CAA1B,IAAIkB,EAAEF,EAAAhB,GACDmB,EAAAD,EAAAC,YAAaC,EAAAF,EAAAE,WAAYtB,EAAAoB,EAAApB,MAC/B,IAAmB,IAAfsB,EACJ,IAAe,IAAAC,EAAA,EAAAC,EAAAxB,EAAAuB,EAAAC,EAAApB,OAAAmB,IAAO,CAAjB,IAAIE,EAAED,EAAAD,GACD/B,EAAAiC,EAAAjC,MAAOD,EAAAkC,EAAAlC,SACbuB,GAASvB,EACLC,IAAUkC,OAAOC,KAAOpC,IAAamC,OAAOC,OAC5B,IAAhBN,IACAL,GAAUzB,EAAWC,KAIjCgB,EAAKM,MAAMc,IAAId,GACfN,EAAKQ,OAAOY,IAAIC,WAAWb,EAAOc,QAAQ,MAsE9CrB,KAAAsB,IAAM,SAAO1C,EAAgBC,EAAaC,EAAkBC,EAAeC,GAAa,OAAAuC,EAAA,EAAAxB,OAAA,mFA+BpF,OA7BIyB,EAAiBxB,KAAKU,UAAUtB,KAAK,SAACC,GAAM,OAAAA,EAAET,QAAQM,KAAON,EAAQM,OAY/D2B,EAAsBW,EAAcX,WAAxBtB,EAAUiC,EAAcjC,OACvB,IAAfsB,GACAtB,EAAMkC,OAAO,QAGEnC,KADfoC,EAA0BnC,EAAMH,KAAK,SAAAC,GAAK,OAAAA,EAAER,KAAKK,KAAOL,EAAKK,MAE7DK,EAAMC,KAAK,CAAEX,KAAMA,EAAMC,SAAUA,EAAUC,MAAOA,EAAOC,SAAUA,KAErE0C,EAAW5C,SAAWA,EACtB4C,EAAW3C,MAAQA,EACnB2C,EAAW1C,SAAWA,GAE1BwC,EAAeZ,aAAc,EAC7BY,EAAeX,YAAa,EAC5BW,EAAeG,WAAaC,KAAKC,QAxBjCL,EAAiB,CACb5C,QAASA,EACTW,MAAO,CAAC,CAAEV,KAAMA,EAAMC,SAAUA,EAAUC,MAAOA,EAAOC,SAAUA,IAClE4B,aAAa,EACbC,YAAY,EACZc,WAAYC,KAAKC,OAErB7B,KAAKU,UAAUlB,KAAKgC,IAoBxB,GAAMxB,KAAK8B,UAAUC,UAAUnD,EAASC,EAAMC,EAAUC,EAAOC,kBAA/DyB,EAAAuB,iBA7HAhC,KAAKF,KAAOA,EACZE,KAAKU,UAAYV,KAAKC,KAAKC,KAC3BF,KAAKiC,SAAW9B,OAAAC,EAAA,EAAAD,CAAQH,KAAKQ,SAiMrC,OA9LIX,EAAAqC,UAAAC,QAAA,WACInC,KAAKiC,YAqBHpC,EAAAqC,UAAAE,KAAN,kCAAcC,QAAO,gFAKF,OAJXrC,KAAKF,KAAKwC,UACVtC,KAAK8B,UAAY,IAAIS,EAAWvC,KAAKF,MAErCE,KAAK8B,UAAY,IAAIU,EAAUxC,KAAKF,MACzB,GAAME,KAAK8B,UAAUW,eAEpC,GAFIC,EAAW5B,EAAAkB,QACXW,EAAkBnE,EAAekE,KACdC,EAAgBhD,OAAS,EAC5C,IAASiD,EAAI,EAAGA,EAAID,EAAgBhD,OAAQiD,IACpCnC,EAAiCkC,EAAgBC,GAA/ChE,EAAO6B,EAAA7B,QAAEW,EAAKkB,EAAAlB,MAAEoC,EAAUlB,EAAAkB,WAChC3B,KAAKU,UAAUlB,KAAK,CAChBZ,QAASA,EACTW,MAAOA,EACPqB,aAAa,EACbC,YAAY,EACZc,WAAYA,oBA8B5B9B,EAAAqC,UAAAW,YAAA,SAAYC,EAAmBC,GAC3B,IAAIpC,EAAKX,KAAKU,UAAUtB,KAAK,SAAA4D,GAAK,OAAiB,IAAjBA,EAAEnC,YAAuBmC,EAAEpE,QAAQM,KAAO4D,IAC5E,IAAKnC,EAAI,OAAO,EAChB,IAAIsC,EAAMtC,EAAGpB,MAAMH,KAAK,SAAA4D,GAAK,OAAAA,EAAEnE,KAAKK,KAAO6D,IAC3C,YAAezD,IAAR2D,EAAoB,EAAIA,EAAInE,UAGvCe,EAAAqC,UAAAgB,UAAA,SAAUJ,GAEN,OAAc,IADN9C,KAAKU,UAAUyC,UAAU,SAAAH,GAAK,OAAiB,IAAjBA,EAAEnC,YAAuBmC,EAAEpE,QAAQM,KAAO4D,KAIpFjD,EAAAqC,UAAAkB,iBAAA,WACI,OAAOpD,KAAKU,UAAU2C,OAAO,SAAAL,GACnB,IAAApC,EAAAoC,EAAApC,YAAaC,EAAAmC,EAAAnC,WACnB,OAAuB,IAAhBD,IAAuC,IAAfC,KA6CjChB,EAAAqC,UAAAoB,eAAN,SAAqBC,0FACbA,GAAQA,EAAK5D,OAAS,IACtB4D,EAAKC,QAAQ,SAAAC,GACT,IAAIC,EAAgB3D,EAAKW,UAAUyC,UAAU,SAAA9D,GAAK,OAAAA,EAAET,QAAQM,KAAOuE,EAAGX,YACtE,GAAIY,GAAiB,EAAG,CACpB,IAAIC,EAAW5D,EAAKW,UAAUgD,GAC1Bd,EAAIe,EAASpE,MAAM4D,UAAU,SAAA9D,GAAK,OAAAA,EAAER,KAAKK,KAAOuE,EAAGV,SACnDH,GAAK,IACLe,EAASpE,MAAMkC,OAAOmB,EAAG,GACK,IAA1Be,EAASpE,MAAMI,QACfI,EAAKW,UAAUe,OAAOiC,EAAe,OAKrD1D,KAAK8B,UAAUwB,eAAeC,aA3J1BhC,EAAA,GAAXnB,EAAA,8BA2MLP,EAjNA,GAmNA+D,EAAA,WAUA,OAPI,SAAY9D,GACRE,KAAKF,KAAOA,GAJpB,GAYAyC,EAAA,SAAAsB,GAAA,SAAAC,mDA4CA,OA5CyBvC,EAAA,EAAAuC,EAAAD,GAKrB1D,OAAA4D,eAAID,EAAA5B,UAAA,UAAO,KAAX,WAAyB,OAAO,mCAa1B4B,EAAA5B,UAAAO,KAAN,kCAAcJ,QAAO,8DACV,SAAMrC,KAAKF,KAAKkE,IAAIC,MAAMC,QAAQC,UAAK7E,EAAW,EAAG,aAA5D,SAAOmB,EAAAuB,cAWL8B,EAAA5B,UAAAH,UAAN,SAAgBnD,EAAgBC,EAAaC,EAAkBC,EAAeC,+FAC1E,SAAMgB,KAAKF,KAAKkE,IAAIC,MAAMG,QAAQC,OAAO,CACrCzF,QAASA,EAAQM,GACjBL,KAAMA,EAAKK,GACXH,MAAOA,EACPC,SAAUA,EACVF,SAAUA,mBALd2B,EAAAuB,iBASE8B,EAAA5B,UAAAoB,eAAN,SAAqBC,qGAEjB,OADIe,EAAQf,EAAKgB,IAAI,SAAAlF,GAAO,MAAO,CAAET,QAASS,EAAEyD,UAAWjE,KAAMQ,EAAE0D,UACnE,GAAM/C,KAAKF,KAAKkE,IAAIC,MAAMO,eAAeH,OAAO,CAAEd,KAAMe,mBAAxD7D,EAAAuB,iBAER8B,EA5CA,CAAyBF,GA+CzBpB,EAAA,SAAAqB,GAAA,SAAAY,IAAA,IAAA1E,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAEYD,EAAA2C,SAAkB,KA+D9B,OAjEwBnB,EAAA,EAAAkD,EAAAZ,GAcpB1D,OAAA4D,eAAIU,EAAAvC,UAAA,UAAO,KAAX,WAAyB,OAAO,mCAE1BuC,EAAAvC,UAAAO,KAAN,kCAAcJ,QAAO,qEACjB,IAII,GAHIuC,EAAc5E,KAAKF,KAAKkE,IAAIpF,QAAQiG,SACpCC,EAAWF,EAAYG,IAAI,SAEZ,QADfC,EAAaC,aAAaC,QArBZ,SAsBO,SAAO,IAGhC,IAFAlF,KAAK0C,SAAWyC,KAAKC,MAAMJ,GACvBK,EAAgB,GACXzC,EAAI,EAAGA,EAAI5C,KAAK0C,SAAS/C,OAAQiD,IAClCnC,EAA+CT,KAAK0C,SAASE,GAA3DhE,EAAO6B,EAAA7B,QAAEC,EAAI4B,EAAA5B,KAAEC,EAAQ2B,EAAA3B,SAAEC,EAAK0B,EAAA1B,MAAEC,EAAQyB,EAAAzB,SAC1CsG,EAAaV,EAAYW,MAAM3G,GAC/B4G,EAAUV,EAASS,MAAM1G,GAC7BwG,EAAc7F,KAAK,CACfZ,QAAS0G,EACTzG,KAAM2G,EACN1G,SAAUA,EACVC,MAAOA,EACPC,SAAUA,IAGlB,SAAOqG,GAEX,MAAAI,GAGI,OAFAR,aAAaS,WAxCK,QAyClB1F,KAAK0C,SAAW,GAChB,GAAO1C,KAAK0C,yBAId+B,EAAAvC,UAAAH,UAAN,SAAgBnD,EAAgBC,EAAaC,EAAkBC,EAAeC,0FAEnDM,KADnBkC,EAAiBxB,KAAK0C,SAAStD,KAAK,SAAAC,GAAK,OAAAA,EAAET,UAAYA,EAAQM,IAAMG,EAAER,OAASA,EAAKK,OAErFsC,EAAe1C,SAAWA,EAC1B0C,EAAezC,MAAQA,EACvByC,EAAexC,SAAWA,GAAYA,EAASE,IAE/Cc,KAAK0C,SAASlD,KAAK,CAAEZ,QAASA,EAAQM,GAAIL,KAAMA,EAAKK,GAAIJ,SAAUA,EAAUC,MAAOA,EAAOC,SAAUA,GAAYA,EAASE,KAC9H+F,aAAaU,QAtDS,OAsDcR,KAAKS,UAAU5F,KAAK0C,oBAGtD+B,EAAAvC,UAAAoB,eAAN,SAAqBC,0FAEjBA,EAAKC,QAAQ,SAAAnE,GACT,IAAIuD,EAAI7C,EAAK2C,SAASS,UAAU,SAAAH,GAAK,OAAAA,EAAEpE,QAAUS,EAAEyD,WAAaE,EAAEnE,OAASQ,EAAE0D,SACzEH,GAAK,GACL7C,EAAK2C,SAASjB,OAAOmB,EAAG,KAEhCqC,aAAaU,QAhES,OAgEcR,KAAKS,UAAU5F,KAAK0C,oBAEhE+B,EAjEA,CAAwBb,GC/RxBiC,EAAA,WAkCI,SAAAC,EAAY9B,GAAZ,IAAAjE,EAAAC,KAIAA,KAAA+F,QAAU,SAAOC,GAAU,OAAAzE,EAAA,EAAAxB,OAAA,mFACVT,IAAT0G,EAAA,OACAhG,KAAKiG,MAAQD,EACbhG,KAAKd,GAAK8G,EAAK9G,GACfc,KAAKkG,KAAOF,EAAKE,KACjBlG,KAAKmG,KAAOH,EAAKG,KACjBnG,KAAKoG,KAAOJ,EAAKI,KACjBpG,KAAKqG,MAAQL,EAAKK,MAClBrG,KAAKsG,MAAQN,EAAKM,MAElB,GAAMtG,KAAKuG,uBAAX9F,EAAAuB,wCAbJhC,KAAKgE,IAAMA,EAiJnB,OA9Jc7D,OAAA4D,eAAI+B,EAAA5D,UAAA,gBAAa,KAAjB,WACN,YAAgC5C,IAAzBU,KAAKwG,iBACPxG,KAAKyG,QAAUzG,KAAK0G,WAAa1G,KAAK2G,kDA4BjCb,EAAA5D,UAAAqE,YAAd,oJACQ9F,EAAgBT,MAAZd,GAAOuB,EAAAwF,WACI3G,IAAfU,KAAKiG,MAAL,MACc,GAAMjG,KAAKgE,IAAI4C,QAAQd,QAAQrD,KAAKzC,KAAKd,YASzC,OATV2H,EAAUpB,EAAAzD,UAEJ0E,EAAoEG,EAAOH,UAAhEI,EAAyDD,EAAOC,OAAxDC,EAAiDF,EAAOE,WAA5CJ,EAAqCE,EAAOF,iBAA1BK,EAAmBH,EAAOG,eACjFhH,KAAK0G,UAAYA,EACjB1G,KAAK8G,OAASA,EACd9G,KAAK+G,WAAaA,EAClB/G,KAAK2G,iBAAmBA,EACxB3G,KAAKgH,eAAiBA,GAEZ,GAAMhH,KAAKgE,IAAI4C,QAAQK,eAAeC,IAAI,CAAEL,QAAS7G,KAAKd,aAWjD,OAXnBiI,EAAU1B,EAAAzD,UAEJoF,EAAmED,EAAOC,UAA/DX,EAAwDU,EAAOV,OAAvDY,EAAgDF,EAAOE,MAAhDC,EAAyCH,EAAOG,IAA3CC,EAAoCJ,EAAOI,QAAlCC,EAA2BL,EAAOK,cAAnBC,EAAYN,EAAOM,QAChFzH,KAAKoH,UAAYA,EACjBpH,KAAKyG,OAASA,EACdzG,KAAKqH,MAAQA,EACbrH,KAAKsH,IAAMA,EACXtH,KAAKuH,QAAUA,EACfvH,KAAKwH,cAAgBA,EACrBxH,KAAKyH,QAAUA,GAEnB3G,EAAAd,KAAuB,GAAMA,KAAKgE,IAAI4C,QAAQc,eAAeR,IAAI,CAAEL,QAAS7G,KAAKd,aACrE,OADZ4B,EAAK6G,gBAAkBlC,EAAAzD,QAAmE,CAAE6E,QAAS7G,KAAKd,IAC9F,GAAMc,KAAKgE,IAAI4C,QAAQgB,gBAAgBV,IAAI,CAAEL,QAAS7G,KAAKd,yBAC1DI,IADTuI,EAAQpC,EAAAzD,QACR,OACAhC,KAAKwG,gBAAkB,IAAIsB,EAASD,EAAME,SAAU/H,KAAKgE,KACzD,GAAMhE,KAAKwG,gBAAgBpE,gBAA3BqD,EAAAzD,wCAKZ7B,OAAA4D,eAAI+B,EAAA5D,UAAA,YAAS,KAAb,WACI,YAAsB5C,IAAfU,KAAKiG,uCAEhB9F,OAAA4D,eAAI+B,EAAA5D,UAAA,cAAW,KAAf,WACI,YAAgC5C,IAAzBU,KAAKwG,iDAIVV,EAAA5D,UAAA8F,YAAN,kCAAqB3F,QAAO,8DAMjB,SAAMrC,KAAKgE,IAAI4C,QAAQqB,gBAAgBC,MAAM,CAAErB,QAAS7G,KAAKd,aAApE,SAAOuB,EAAAuB,cAGL8D,EAAA5D,UAAAiG,WAAN,SAAiBC,+FAOb,SAAMpI,KAAKgE,IAAI4C,QAAQqB,gBAAgB3G,IAAI,CAAEuF,QAAS7G,KAAKd,GAAImJ,KAAM,CAAC,CAAElB,QAASiB,qBAAjF3H,EAAAuB,iBAGE8D,EAAA5D,UAAAoG,WAAN,SAAiBF,+FAOb,SAAMpI,KAAKgE,IAAI4C,QAAQqB,gBAAgBM,IAAI,CAAE1B,QAAS7G,KAAKd,GAAImJ,KAAM,CAAC,CAAElB,QAASiB,qBAAjF3H,EAAAuB,iBAGE8D,EAAA5D,UAAAsG,WAAN,gFAMI,SAAOxI,KAAK2H,sBAGV7B,EAAA5D,UAAAuG,0BAAN,SAAgCL,+EAO5BpI,KAAK2H,gBAAgBe,gBAAkBN,EACvCpI,KAAK2I,+BAGH7C,EAAA5D,UAAA0G,yBAAN,SAA+BR,+EAO3BpI,KAAK2H,gBAAgBkB,eAAiBT,EACtCpI,KAAK2I,+BAGH7C,EAAA5D,UAAA4G,kBAAN,SAAwBC,EAAsBC,+EAQ1ChJ,KAAK2H,gBAAgBsB,YAAcF,EACnC/I,KAAK2H,gBAAgBuB,YAAcF,EACnChJ,KAAK2I,+BAGH7C,EAAA5D,UAAAyG,oBAAN,uGACI,SAAM3I,KAAKgE,IAAI4C,QAAQc,eAAepG,IAAItB,KAAK2H,gCAA/ClH,EAAAuB,iBAIE8D,EAAA5D,UAAAiH,cAAN,SAAoBtC,+FAChB,SAAM7G,KAAKgE,IAAI4C,QAAQd,QAAQsD,KAAKpJ,KAAKd,GAAI2H,WAC7C,OADApG,EAAAuB,OACA,GAAMhC,KAAKuG,6BAAX9F,EAAAuB,iBAGE8D,EAAA5D,UAAAmH,qBAAN,SAA2BC,+FAEvB,OADAA,EAAezC,QAAU7G,KAAKd,GAC9B,GAAMc,KAAKgE,IAAI4C,QAAQK,eAAe3F,IAAIgI,WAC1C,OADA7I,EAAAuB,OACA,GAAMhC,KAAKuG,6BAAX9F,EAAAuB,iBAzKQT,EAAA,GAAXnB,EAAA,mCAGWmB,EAAA,GAAXnB,EAAA,0CAIWmB,EAAA,GAAXnB,EAAA,gCAMSmB,EAAA,GAATnB,EAAA,qCA8JL0F,EApLA,GAsLAgC,EAAA,WASI,SAAAyB,EAAYxB,EAAiB/D,GACzBhE,KAAKd,GAAK6I,EAAS7I,GACnBc,KAAKgE,IAAMA,EA8CnB,OAvCUuF,EAAArH,UAAA8F,YAAN,kCAAqB3F,QAAO,8DACjB,SAAMrC,KAAKgE,IAAI+D,SAASyB,iBAAiBtB,MAAM,CAAEH,SAAU/H,KAAKd,aAAvE,SAAOuB,EAAAuB,cAGLuH,EAAArH,UAAAiG,WAAN,SAAiBC,+FACb,SAAMpI,KAAKgE,IAAI+D,SAASyB,iBAAiBlI,IAAI,CAAEyG,SAAU/H,KAAKd,GAAImJ,KAAM,CAAC,CAAElB,QAASiB,qBAApF3H,EAAAuB,iBAGEuH,EAAArH,UAAAoG,WAAN,SAAiBF,+FACb,SAAMpI,KAAKgE,IAAI+D,SAASyB,iBAAiBjB,IAAI,CAAER,SAAU/H,KAAKd,GAAImJ,KAAM,CAAC,CAAElB,QAASiB,qBAApF3H,EAAAuB,iBAGEuH,EAAArH,UAAAE,KAAN,6GAC4B,OAAxB3B,EAAAT,KAAwB,GAAMA,KAAKgE,IAAI+D,SAAS0B,gBAAgBvC,IAAI,CAAEa,SAAU/H,KAAKd,oBAArFuB,EAAKiJ,iBAAmB5I,EAAAkB,QAAsE,CAAE+F,SAAU/H,KAAKd,cAGnHqK,EAAArH,UAAAsG,WAAA,WACI,OAAOxI,KAAK0J,kBAGVH,EAAArH,UAAAuG,0BAAN,SAAgCL,+FAE5B,OADApI,KAAK0J,iBAAiBhB,gBAAkBN,EACxC,GAAMpI,KAAK2J,oCAAXlJ,EAAAuB,iBAGEuH,EAAArH,UAAA0G,yBAAN,SAA+BR,+FAE3B,OADApI,KAAK0J,iBAAiBb,eAAiBT,EACvC,GAAMpI,KAAK2J,oCAAXlJ,EAAAuB,iBAGEuH,EAAArH,UAAA4G,kBAAN,SAAwBC,EAAsBC,+FAG1C,OAFAhJ,KAAK0J,iBAAiBT,YAAcF,EACpC/I,KAAK0J,iBAAiBR,YAAcF,EACpC,GAAMhJ,KAAK2J,oCAAXlJ,EAAAuB,iBAGEuH,EAAArH,UAAAyH,mBAAN,uGACI,SAAM3J,KAAKgE,IAAI+D,SAAS0B,gBAAgBnI,IAAItB,KAAK0J,iCAAjDjJ,EAAAuB,iBAERuH,EAzDA,GCxLAK,EAAA,SAAA/F,GAAA,SAAAgG,mDAEA,OAFsCtI,EAAA,EAAAsI,EAAAhG,GAEtCgG,EAFA,CAAsCC,EAAA,GCEtCC,GDEA,SAAAlG,GAAA,SAAAmG,mDAAqCzI,EAAA,EAAAyI,EAAAnG,GAArC,CAAqCiG,EAAA,GCFrC,SAAAjG,GAAA,SAAAoG,IAAA,IAAAlK,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAEYD,EAAAmK,SAAW,SAAOC,EAAa7F,GAA4C,OAAA/C,EAAA,EAAAxB,OAAA,iEAC3EU,EAAuBT,KAAKoK,WAAWtK,KAArCuK,EAAQ5J,EAAA4J,SAAEC,EAAM7J,EAAA6J,OACR,SAAVhG,GACAwF,EAAA,EAAIS,MAAMD,GAGdD,EAASG,MAAML,cAUvB,OAlBmC5I,EAAA,EAAA0I,EAAApG,GAW/BoG,EAAA/H,UAAAuI,OAAA,SAAOnG,GAAP,IAAAvE,EAAAC,KACQ0K,EAAsB,SAAVpG,EAAmB,KAAO,KAC1C,OAAOqG,EAAA,cAACb,EAAA,EAAS,CAACc,UAAU,aACxBF,KAAMA,EACNR,SAAU,SAACC,GAAgB,OAAApK,EAAKmK,SAASC,EAAK7F,IAC9CuG,YAAY,wEAExBZ,EAlBA,CAAmCH,EAAA,6BCCnCgB,EAAA,SAAAjH,GAAA,SAAAkH,mDAuBA,OAvBiCxJ,EAAA,EAAAwJ,EAAAlH,GAC7BkH,EAAA7I,UAAAuI,OAAA,WAC6BE,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,UACtByE,EAAA,yCADZ,IAIIK,EAAOL,EAAA,qBAAKC,UAAU,MAAMK,IAAKC,EAAAC,EAAMC,IAAI,OAAOC,MAAO,CAACC,OAAQ,OAAQC,MAAO,UAQrF,OAAOZ,EAAA,cAACb,EAAA,EAAG,CACPc,UAAU,mCACVI,KAAMA,EAAMQ,WARJlM,GASRqL,EAAA,qBAAKC,UAAU,IACV5K,KAAKoK,WAAWqB,mBAAmB,SAKpDV,EAvBA,CAAiCjB,EAAA,GCAjC4B,EAAA,SAAA7H,GAAA,SAAA8H,IAAA,IAAA5L,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAUYD,EAAAoE,KAAOhE,OAAAyL,EAAA,EAAAzL,CAAS,WACpB,OAAOwK,EAAA,cAACb,EAAA,EAAI,CAAC+B,QAAQ,GACjBlB,EAAA,cAAC5K,EAAK+L,QAAO,SAIb/L,EAAA+L,QAAU3L,OAAAyL,EAAA,EAAAzL,CAAS,WACjB,IACA4L,EADAhM,EAAAqK,WACA2B,uBACFC,EAAajM,EAAKkM,SAASnB,GAC/B,OAAOH,EAAA,cAAAA,EAAA,cACFqB,EACAD,SAGb,OAzB2BxK,EAAA,EAAAoK,EAAA9H,GAEjB8H,EAAAzJ,UAAAgK,KAAN,SAAW5H,+EACPtE,KAAKmM,SAASnM,KAAKmE,eAGvBwH,EAAAzJ,UAAAuI,OAAA,SAAOnG,GACH,OAAOqG,EAAA,cAAC3K,KAAK8L,QAAO,OAkB5BH,EAzBA,CAA2B7B,EAAA,GCwB3BsC,GAtBA,SAAAvI,GAII,SAAAwI,EAAYC,GAAZ,IAAAvM,EACI8D,EAAA0I,KAAAvM,OAAOA,YACPD,EAAKyM,UAAYzM,EAAK0M,SAAW,GACjC1M,EAAKuM,YAAcA,IAPA/K,EAAA,EAAA8K,EAAAxI,GAUPwI,EAAAnK,UAAAO,KAAhB,SAAqB6B,EAAYoI,EAAgBD,0BAAmBpK,QAAO,8DAE7D,YADQ/C,IAAdoN,IAAyBA,EAAY,GAC/B,GAAM1M,KAAKsM,YAAYK,OAAO,GAAID,EAAWD,WACvD,SADUhM,EAAAuB,cAIJqK,EAAAnK,UAAA0K,aAAV,SAAuBC,GACnB,YAAavN,IAATuN,EAA2B,EACxBA,EAAK3N,IAlBpB,CAA2B4K,EAAA,GAsB3B,SAAAjG,GAAA,SAAAiJ,IAAA,IAAA/M,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAaID,EAAA0L,mBAAqB,SAACf,GAClB,OAAO3K,EAAKgN,WAAWhD,EAAeW,IAG1C3K,EAAAgM,uBAAyB,WAErB,OADMhM,EAAAD,KAAAkN,iBACkBC,kBAG5BlN,EAAAmN,IAAM,WAAM,OAAAnN,EAAKgN,WAAWrB,MAChC,OAvB2BnK,EAAA,EAAAuL,EAAAjJ,GAMjBiJ,EAAA5K,UAAAiL,cAAN,SAAoB7I,+FAGhB,SAD2BtE,KAAKF,KAAIkN,iBACbxC,uBAAvB/J,EAAAuB,OACAhC,KAAKoN,UAAU1B,aAavBoB,EAvBA,CAA2BlD,qBCxB3ByD,EAAA,SAAAxJ,GAAA,SAAAyJ,IAAA,IAAAvN,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAEYD,EAAAwN,SAAW,kBAAAhM,EAAA,EAAAxB,OAAA,uDACfC,KAAKoK,WAAWI,iBAOZzK,EAAA+L,QAAU3L,OAAAyL,EAAA,EAAAzL,CAAS,WACjB,IAEFqN,EAAOC,EAASC,EADhBrN,EADEN,EAAAqK,WAAAtK,KAAA6N,KACgBtN,MAAMuN,MAQ5B,OANIvN,EAAQ,IACRoN,EAAU1N,EAAKwN,SACfG,EAAU,iBACOF,EAAbnN,EAAQ,IAAasK,EAAA,uBAAItK,GAChBsK,EAAA,+BAEVA,EAAA,qBAAKC,UAAWiD,IAAW,oBAAqBH,GAAUD,QAASA,GACtE9C,EAAA,yBACIA,EAAA,sBAAMC,UAAU,YACZD,EAAA,mBAAGC,UAAU,wCACbD,EAAA,mBAAGC,UAAU,+CAEhB4C,QAIjB,OA9BgCjM,EAAA,EAAA+L,EAAAzJ,GAM5ByJ,EAAApL,UAAAuI,OAAA,SAAOnG,GACH,OAAOqG,EAAA,cAAC3K,KAAK8L,QAAO,OAuB5BwB,EA9BA,CAAgCxD,EAAA,GCA1BgE,EAAO,CAAC,IAAK,IAAK,IAAK,IAAK,KAElCC,EAAA,SAAAlK,GAAA,SAAAmK,IAAA,IAAAjO,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAuBYD,EAAAkO,WAAa,WACjB,IAAIjL,EAAIjD,EAAKmO,WACRlL,IAAGA,EAAI,GACZjD,EAAKoO,SAASnL,EAAI,IAEdjD,EAAAqO,UAAY,WAChB,IAAIpL,EAAIjD,EAAKmO,WACRlL,IAAGA,EAAI,GACZjD,EAAKoO,SAASnL,EAAI,IAGdjD,EAAAsO,IAAM,SAACC,GAGX,IAAIC,EADJ,GADAxO,EAAKuO,MAAQA,EACM,OAAfvO,EAAKuO,MAET,IAAKC,EAAIxO,EAAKuO,MACLC,EADcA,EAAIA,EAAEC,cAEzB,GAAkB,aAAdD,EAAEE,QAAN,EACsB,IAAlBF,EAAY,WACZxO,EAAK2O,UAAW,GAEpB,QAIA3O,EAAA4O,cAAgBxO,OAAAyL,EAAA,EAAAzL,CAAS,WAC7B,IAAIyO,EAAgB7O,EAAK6O,gBACzB,QAAsBtP,IAAlBsP,EAA6B,OAAOA,EACxC,IAAIC,EAAK,IAGa,IAAlB9O,EAAK+O,SACLD,EAAG,eAAgB,EAGnBA,EAAG,kBAAgD,IAA7B9O,EAAKgP,WAAWC,SAE1C,IAGIC,EACAC,EAAoBjB,EACpBkB,EAAmBf,EALnBgB,EAAWrP,EAAKqP,SAChBC,GAA8B,IAAlBtP,EAAKuP,WAAuC,IAAlBvP,EAAK2O,SAC3Ca,EAA0BrO,MAAfnB,EAAK8H,YAAgCvI,IAAfS,EAAK8H,OAAuB9H,EAAK8H,MAAQ,GAIxD,IAAlB9H,EAAK2O,UACLO,EAAgB,iBAChBC,EAAaC,EAAY,eAGzBlB,EAAalO,EAAKkO,WAClBG,EAAYrO,EAAKqO,UACjBc,EAAa,gBACbC,EAAY,eAEhB,IAAIK,EAAQ7E,EAAA,mBAAGC,UAAWiD,IAAW,KACjC,kBAAmB,QAASqB,EAAYD,EACxC,CAAEQ,aAA0B,IAAbL,IAAmC,IAAdC,IAAmC,IAAbE,KAC1D9B,QAASQ,IACTK,EAAQ3D,EAAA,uBAAO0D,IAAKtO,EAAKsO,IACzBzD,UAAWiD,IAAW9N,EAAK6K,UAAWiE,EAAI,yBACtC,CAAEY,aAA0B,IAAbL,IAAkC,IAAbG,KACxCG,KAAK,OACLC,aAAc5P,EAAK8H,MACnB+H,SAAU7P,EAAK6P,SACf/E,YAAa9K,EAAK8K,YAClByE,SAAUvP,EAAKuP,SACfZ,SAAU3O,EAAK2O,SACfmB,UAAW9P,EAAK8P,UAChBC,QAAS,SAACC,GAA+B,OAAAhQ,EAAK+P,QAAQC,IACtDC,OAAQ,SAACD,GAA+B,OAAAhQ,EAAKiQ,OAAOD,IACpDE,UAAW,KAEXC,EAAOvF,EAAA,mBAAGC,UAAWiD,IAAW,0BAChCsB,EAAWF,EACX,CAAEQ,aAA2B,IAAdJ,KACf5B,QAASW,IACb,OAAOzD,EAAA,qBAAKC,UAAU,6BAA6B4E,EAAOlB,EAAO4B,EAC5DnQ,EAAKoQ,oBAOlB,OA1GqC5O,EAAA,EAAAyM,EAAAnK,GAKvBmK,EAAA9L,UAAAkO,WAAV,SAAqBjG,GACjB,YAAkC7K,IAA9BwO,EAAK1O,KAAK,SAAA4D,GAAK,OAAAA,IAAMmH,KAClBtG,EAAA3B,UAAMkO,WAAU7D,KAAAvM,KAACmK,IAGlB6D,EAAA9L,UAAA8N,OAAV,SAAiBD,GACblM,EAAA3B,UAAM8N,OAAMzD,KAAAvM,KAAC+P,GACb/P,KAAKoP,UAAW,GAGVpB,EAAA9L,UAAA4N,QAAV,SAAkBC,GACdlM,EAAA3B,UAAM4N,QAAOvD,KAAAvM,KAAC+P,GACd/P,KAAKoP,UAAW,GAGVpB,EAAA9L,UAAA0N,SAAV,SAAmBG,KAmFnB/B,EAAA9L,UAAAuI,OAAA,WACI,OAAOE,EAAA,cAAC3K,KAAK2O,cAAa,OAvGlBpN,EAAA,GAAXnB,EAAA,+BACWmB,EAAA,GAAXnB,EAAA,kCACWmB,EAAA,GAAXnB,EAAA,kCAuGL4N,EA1GA,CAAqClE,EAAA,GCG/BuG,EAAa,CACf,CACInK,KAAM,OACNwJ,KAAM,MACNY,IAAK,CACD,CAAEpK,KAAM,UAAWwJ,KAAM,WACzB,CAAExJ,KAAM,UAAWwJ,KAAM,UACzB,CACIxJ,KAAM,QAASwJ,KAAM,MAAOY,IAAK,CAC7B,CAAEpK,KAAM,OAAQwJ,KAAM,UACtB,CAAExJ,KAAM,QAASwJ,KAAM,UACvB,CAAExJ,KAAM,WAAYwJ,KAAM,UAC1B,CAAExJ,KAAM,WAAYwJ,KAAM,UAC1B,CAAExJ,KAAM,sBAAuBwJ,KAAM,UACrC,CAAExJ,KAAM,gCAAiCwJ,KAAM,eAOnEa,EAAA,SAAA1M,GAAA,SAAA2M,IAAA,IAAAzQ,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAKcD,EAAA0Q,eAAiBtQ,OAAAyL,EAAA,EAAAzL,CAAS,WAC5B,IAAAM,EAAAV,EAAAqK,WAAEsG,EAAAjQ,EAAAiQ,SAEFnQ,EAFYE,EAAAX,KACV6N,KACqBpN,OAAOqN,MAE9B9B,EAAUvL,EAAS,EACnBoK,EAAA,cAAAA,EAAA,cAFQ,8BAEKpK,OACboK,EAAA,cAAAA,EAAA,cAHQ,sBAIZ,OAAOA,EAAA,wBAAQC,UAAU,wBAAwB8E,KAAK,SAASjC,QAASiD,EAAUhC,SAAUnO,GAAU,GACjGuL,KAQD/L,EAAA4Q,eAAiB,SAAC9D,GAChB,IAAAjO,EAAAiO,EAAAjO,QACAwL,EAAArK,EAAAqK,WACAwG,EAAAxG,EAAAwG,eAAgBC,EAAAzG,EAAAyG,kBACtB,OAAOlG,EAAA,qBAAKC,UAAU,QAClBD,EAAA,qBAAKC,UAAU,OACXD,EAAA,qBAAKC,UAAU,gBAAgB6C,QAAS,WAAM,OAAAmD,EAAehS,KACxDiS,EAAkBjS,IAEvB+L,EAAA,qBAAKC,UAAU,YAAWD,EAAA,cAACb,EAAA,EAAS,CAAC5D,KAAK,cAK9CnG,EAAA+Q,SAAW,SAACjE,GACV,IAAAhO,EAAAgO,EAAAhO,KAAME,EAAA8N,EAAA9N,MAAO8N,EAAA7N,SAEnB,OAAO2L,EAAA,qBAAKC,UAAU,QAClBD,EAAA,qBAAKC,UAAU,6BACXD,EAAA,qBAAKC,UAAU,eAAcD,EAAA,uBAAIxK,OAAA2J,EAAA,EAAA3J,CAAGtB,KACpC8L,EAAA,qBAAKC,UAAU,wBAAuBD,EAAA,sBAAMC,UAAU,yBAAmB7L,IACzE4L,EAAA,cAACb,EAAA,EAAS,CAAC5D,KAAK,cAEpByE,EAAA,yBAAM5K,EAAKqK,WAAW2G,mBAAmBlS,MAIzCkB,EAAAiR,SAAqB,CACzBC,YAAY,EACZC,WAAW,EACXC,YAAY,EACZC,MAAO,CACHlR,KAAM,CACFmR,OAAQ,MACRC,QAASvR,EAAK4Q,eACdY,aAAc,SAACC,EAAY1F,GAAyB,OAAAA,GACpD2F,aAAc,SAAC3F,GAAyB,OAAAnB,EAAA,qBAAKC,UAAU,QAAQkB,IAC/DsF,MAAO,CACH7R,MAAO,CACH8R,OAAQ,MACRC,QAASvR,EAAK+Q,SACdG,YAAY,EACZC,WAAW,EACXK,aAAc,SAACC,EAAY1F,GAAyB,OAAAA,GACpD2F,aAAc,SAAC3F,GAAyB,OAAAA,GACxC4F,aAAc/G,EAAA,qBAAKC,UAAU,uCAC7BwG,MAAO,CACHtS,SAAU,CACNuS,OAAQ,SACRzG,UAAW,cACX+G,YAAa5D,EACb6D,UAAW7R,EAAKqK,WAAWyH,yBAS7C9R,EAAA+R,SAAW3R,OAAAyL,EAAA,EAAAzL,CAAS,WACpB,IACAuC,EADA3C,EAAAqK,WAAAtK,KAAA6N,KACA1N,KACN,OAAO0K,EAAA,cAACb,EAAA,EAAI,CAACc,UAAU,mCAAmCmH,OAAQ1B,EAAYW,SAAUjR,EAAKiR,SAAUgB,SAAUtP,MAO7G3C,EAAAkS,KAAO,WACL,IACFC,EADEnS,EAAAqK,WAAAtK,KAAA6N,KACkBjN,UAAU,GAClCwR,EAAI3S,MAAM,GAAGT,SAAWoT,EAAI3S,MAAM,GAAGT,SAAW,GAG5CiB,EAAAoS,WAAa,WAAM,OAAAxH,EAAA,wBAAQ8C,QAAS,WAAM,OAAA1N,EAAKkS,SAAM,SAErDlS,EAAAoE,KAAOhE,OAAAyL,EAAA,EAAAzL,CAAS,SAACiS,GACf,IACFC,EAAavG,EADX6B,EAAA5N,EAAAqK,WAAAtK,KAAA6N,KAUN,OARyB,IAArBA,EAAKtN,MAAMuN,OAAyC,IAA1BD,EAAKjN,UAAUf,QACzCmM,EAAU/L,EAAKuS,QACfD,OAAS/S,IAGTwM,EAAUnB,EAAA,cAAC5K,EAAK+R,SAAQ,MACxBO,EAAS1H,EAAA,cAAC5K,EAAK0Q,eAAc,OAE1B9F,EAAA,cAACb,EAAA,EAAI,CAAC+B,OAAO,qBAAMwG,OAAQA,GAC7BvG,KAID/L,EAAAmN,IAAM/M,OAAAyL,EAAA,EAAAzL,CAAS,WACb,IAAAwN,EAAA5N,EAAAqK,WAAAtK,KAAA6N,KACF9B,EAASlB,EAAA,wBAAQC,UAAU,uCAC3BD,EAAA,cAACb,EAAA,EAAE,CAACc,UAAU,eAAe1E,KAAK,gBAAgBwE,KAAK,gBAAeC,EAAA,sBAAMC,UAAU,mBAAiB,uBAE3G,OAAyB,IAArB+C,EAAKtN,MAAMuN,OAAyC,IAA1BD,EAAKjN,UAAUf,OAClCgL,EAAA,cAAAA,EAAA,cACFkB,EACA9L,EAAKuS,SAGP3H,EAAA,qBAAKC,UAAU,qCACjBiB,EACDlB,EAAA,cAAC5K,EAAK+R,SAAQ,MACdnH,EAAA,wBAAQC,UAAU,OAAMD,EAAA,cAAC5K,EAAK0Q,eAAc,YAGxD,OArI2BlP,EAAA,EAAAiP,EAAA3M,GACjB2M,EAAAtO,UAAAgK,KAAN,uFACIlM,KAAKmM,SAASnM,KAAKmE,eAgBvBqM,EAAAtO,UAAAuI,OAAA,SAAO2H,GACH,OAAOzH,EAAA,cAAC3K,KAAKkN,IAAG,OAqEZsD,EAAAtO,UAAAoQ,MAAR,WACI,OAAO3H,EAAA,qBAAKC,UAAU,6BAA2B,2DA4CzD4F,EArIA,CAA2B1G,EAAA,GCvB3ByI,EAAA,SAAA1O,GAAA,SAAA2O,IAAA,IAAAzS,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAiBID,EAAA8R,kBAAoB,SAAOY,EAAqB5K,EAAY6K,GAAS,OAAAnR,EAAA,EAAAxB,OAAA,kGAC3DE,EAAqBwS,EAAOxS,KAAtB0S,EAAeF,EAAOE,WAC5B/T,EAAY+T,EAAU/T,QACtBC,GAAF4B,EAA4BR,GAAtBpB,KAAEE,EAAK0B,EAAA1B,MAAEC,EAAQyB,EAAAzB,SACrB2O,EAAS3N,KAAKF,KAAI6N,KACpB9F,EAAQ,EACR,GAAM8F,EAAKrM,IAAI1C,EAASC,EAAMgJ,EAAO9I,EAAOC,IAD5C,oBACA8B,EAAAkB,oBAEA,SAAM2L,EAAKrK,eAAe,CAAC,CAAER,UAAWlE,EAAQM,GAAI6D,OAAQlE,EAAKK,cAAjE4B,EAAAkB,wCAGRjC,EAAA6S,kBAAoB,SAAOH,EAAqBI,EAAmBC,GAAgB,OAAAvR,EAAA,EAAAxB,OAAA,uDAC/EgT,MAAM,8BAGFhT,EAAAiT,cAAgB,SAAOhN,GAAU,OAAAzE,EAAA,EAAAxB,OAAA,EAAGsC,QAAO,oEAE/C,UADMvC,EAASE,KAAIF,MACRmT,YAAYlN,QAAQC,WAC/B,OADAvF,EAAAuB,OACA,GAAMlC,EAAKoT,cAAclN,WAEzB,OAFAvF,EAAAuB,OACAhC,KAAKmT,UAAU,GACf,GAAMnT,KAAKoT,4BAAX3S,EAAAuB,iBAUJjC,EAAA2Q,SAAW,kBAAAnP,EAAA,EAAAxB,OAAA,sDAGP,OAFM4N,EAAS3N,KAAKF,KAAI6N,KACxB3N,KAAKqT,kBAAoB1F,EAAKvK,wBACC9D,IAA3BU,KAAKqT,kBAAiC,KACrCrT,KAAKsC,UAGNtC,KAAKoT,aAFLtJ,EAAA,EAAIwJ,UAAUtT,KAAKgT,eAAe,aASlCjT,EAAAqT,WAAa,kBAAA7R,EAAA,EAAAxB,OAAA,6EAGjB,OADMwT,EAAWvT,KAAKF,KAAIyT,YACKjU,IAA3BU,KAAKqT,kBAAiC,IAC1C,GAAME,EAAO/I,MAAMxK,KAAKqT,kCAAxB5S,EAAAuB,iBAGJjC,EAAAmN,IAAM,WAAM,OAAAnN,EAAKgN,WAAWwD,IAE5BxQ,EAAAgR,mBAAqB,SAAClS,GAElB,OADMkB,EAAAD,KAAAuK,SACU0G,mBAAmBlS,IAGvCkB,EAAA8Q,kBAAoB,SAACjS,GAEjB,OADMmB,EAAAD,KAAAuK,SACUwG,kBAAkBjS,MAE1C,OA/E2B2C,EAAA,EAAAiR,EAAA3O,GAKP2O,EAAAtQ,UAAAiL,cAAhB,SAA8B7I,+EAC1BtE,KAAKoN,UAAUmD,YAOnBiC,EAAAtQ,UAAAsR,gBAAA,WACI,OAAOxT,KAAK+M,WAAWM,IA0B3BmF,EAAAtQ,UAAA0O,eAAA,SAAehS,GACP,IAAA6B,EAAAT,KAAAF,KAAE6N,EAAAlN,EAAAkN,KAAMtD,EAAA5J,EAAA4J,SACPsD,EAAKzK,UAAUtE,EAAQM,KACxBmL,EAASoJ,kBAAkB7U,IAoCvC4T,EA/EA,CAA2B5I,WCNrB8J,EAAY,+CACZC,EAAe,sDAQd,SAASC,EAAaC,GAEnB,IAAAxI,EAAAwI,EAAAxI,MAAOT,EAAAiJ,EAAAjJ,UAAWkJ,EAAAD,EAAAC,WACxB,OAAOnJ,EAAA,cAACb,EAAA,EAAK,CAACmB,IAAK6I,GAAeJ,EAAYI,EAAWC,OAAO,EAAG,GAAK,IAAMD,EAAa,OACvFzI,MAAOA,EAAOT,UAAWA,EAAWoJ,SAAUL,ICHtD,IAAMM,EAAuB,CACzB,CAAE/N,KAAM,OAAQwJ,KAAM,UACtB,CAAExJ,KAAM,SAAUwJ,KAAM,UACxB,CAAExJ,KAAM,WAAYwJ,KAAM,UAC1B,CAAExJ,KAAM,iBAAkBwJ,KAAM,UAChC,CAAExJ,KAAM,WAAYwJ,KAAM,UAC1B,CAAExJ,KAAM,WAAYwJ,KAAM,UAC1B,CAAExJ,KAAM,sBAAuBwJ,KAAM,UACrC,CAAExJ,KAAM,gCAAiCwJ,KAAM,WAGnDwE,EAAA,SAAArQ,GAAA,SAAAsQ,IAAA,IAAApU,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YASYD,EAAAqU,cAAgB,SAACxV,GAEf,IAAAyV,EAAAzV,EAAAyV,MAAOC,EAAA1V,EAAA0V,YAAaC,EAAA3V,EAAA2V,aAAcC,EAAA5V,EAAA4V,IAAKC,EAAA7V,EAAA6V,OAAQC,EAAA9V,EAAA8V,gBAAiBC,EAAA/V,EAAA+V,gBAAiBC,EAAAhW,EAAAgW,OAAQC,EAAAjW,EAAAiW,SAC/F,OAAOlK,EAAA,qBAAKC,UAAU,aAClBD,EAAA,qBAAKC,UAAU,QAAOD,EAAA,4BAAS2J,IAC/B3J,EAAA,yBAAM4J,GACN5J,EAAA,qBAAKC,UAAU,YACXD,EAAA,qBAAKC,UAAU,mBACXD,EAAA,cAACiJ,EAAY,CAACE,WAAYe,EAAUjK,UAAU,WAElDD,EAAA,qBAAKC,UAAU,mBACXD,EAAA,qBAAKC,UAAU,YACVkK,EAAgB,MAAON,EAAK,oBAC5BM,EAAgB,2BAAQF,EAAQ,oBAChCE,EAAgB,eAAML,GACtBK,EAAgB,qBAAOJ,GACvBI,EAAgB,qBAAOH,GACvBI,EAAYV,QAOzBtU,EAAAiV,WAAa,SAACnI,GACZ,IAAAhO,EAAAgO,EAAAhO,KAAMoW,EAAApI,EAAAoI,OAAQC,EAAArI,EAAAqI,SAAUC,EAAAtI,EAAAsI,eAC1B3J,EAAQ,KACZ,GAAIyJ,EAAQ,CACR,IAAIlW,EAAgBgB,EAAKqV,SAASF,EAAUC,GACxCE,OAAQ,EACRtW,EACAsW,EAAW1K,EAAA,uBAAOC,UAAU,cAAaD,EAAA,gCAAOsK,IAGhDlW,EAAQkW,EAEZzJ,EAAQb,EAAA,qBAAKC,UAAU,OACnBD,EAAA,qBAAKC,UAAU,+DACXD,EAAA,uBAAOC,UAAU,cAAcyK,eAC/B1K,EAAA,sBAAMC,UAAU,uBAAgBD,EAAA,sBAAMC,UAAU,MAAM7L,KAE1D4L,EAAA,qBAAKC,UAAU,+DAA8DD,EAAA,cAACb,EAAA,EAAS,CAAC5D,KAAK,oBAGjGsF,EAAQb,EAAA,iDAGZ,OAAOA,EAAA,qBAAKC,UAAU,QAClBD,EAAA,qBAAKC,UAAU,OACXD,EAAA,qBAAKC,UAAU,SACXD,EAAA,yBAAKA,EAAA,uBAAIxK,OAAA2J,EAAA,EAAA3J,CAAGtB,KACZ8L,EAAA,yBAAM5K,EAAKqK,WAAW2G,mBAAmBlS,KAE7C8L,EAAA,qBAAKC,UAAU,SACVY,MAMTzL,EAAA8R,kBAAoB,SAAOY,EAAqB5K,EAAY6K,GAAS,OAAAnR,EAAA,EAAAxB,OAAA,oGACnEE,EAASwS,EAAOxS,KAChBpB,EAAqDoB,EAAIpB,KAAnDoW,EAA+ChV,EAAIgV,OAA3CC,EAAuCjV,EAAIiV,SAAjCC,EAA6BlV,EAAIkV,eAAjBnW,EAAaiB,EAAIjB,SAC3DD,EAAQiB,KAAKoV,SAASF,EAAUC,IAAmBF,EACjDnV,EAASE,KAAKoK,WAAUtK,KACxB6N,EAAS7N,EAAI6N,KACf9F,EAAQ,EACR,GAAM8F,EAAKrM,IAAItB,KAAKsV,WAAYzW,EAAMgJ,EAAO9I,EAAOC,IADpD,oBACAyB,EAAAuB,oBAEA,SAAM2L,EAAKrK,eAAe,CAAC,CAAER,UAAW9C,KAAKsV,WAAWpW,GAAI6D,OAAQlE,EAAKK,cAAzEuB,EAAAuB,wCAQAjC,EAAAiR,SAAqB,CACzBM,QAASvR,EAAKiV,WACd5D,MAAO,CACHtS,SAAU,CACNuS,OAAQ,SACRzG,UAAW,cACX+G,YAAa5D,EACb6D,UAAW7R,EAAK8R,qBAKpB9R,EAAAwV,WAAa,SAAC1W,GAClB,OAAO8L,EAAA,cAAAA,EAAA,cACHA,EAAA,qBAAKC,UAAU,uBACfD,EAAA,cAACb,EAAA,EAAI,CAACc,UAAU,OAAOmH,OAAQkC,EAAQjD,SAAUjR,EAAKiR,SAAUgB,SAAUnT,MAI1EkB,EAAAoE,KAAOhE,OAAAyL,EAAA,EAAAzL,CAAS,SAACvB,GAEf,IAAAkB,EAAAC,EAAAqK,WAAAtK,KACF+L,EAAS/L,EAAK0V,MAAM/J,qBACpBgK,EAAY3V,EAAK4V,MAAMlC,kBACvBmC,EAAc,IAAIC,EAAA,aAAkD7V,EAAKqU,cAAerU,EAAKwV,YAGjG,OAFAI,EAAYE,MAAQjX,EAEb+L,EAAA,cAACb,EAAA,EAAI,CAAC+B,OAAQA,EAAQL,MAAOiK,GAChC9K,EAAA,qBAAKC,UAAU,2BAA2B+K,EAAYlL,eAuClE,OAzJ8BlJ,EAAA,EAAA4S,EAAAtQ,GAGpBsQ,EAAAjS,UAAAgK,KAAN,SAAW5H,uFACDwR,EAAyBxR,EAAKwR,YAAjBlX,EAAY0F,EAAK1F,QACpCoB,KAAKsV,WAAa1W,EAClBoB,KAAKmM,SAASnM,KAAKmE,KAAM2R,YA2ErB3B,EAAAjS,UAAAkT,SAAR,SAAiBF,EAAeC,GAC5B,GAAID,GAAYC,EACZ,OAAOY,KAAKC,IAA0B,kBAAf,EAA0Bd,EAAWe,IAAsC,kBAArB,EAAgCd,EAAiBc,MAsE1I9B,EAzJA,CAA8BrK,EAAA,GCjB9BoM,EAAA,SAAArS,GAAA,SAAAsS,IAAA,IAAApW,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAQYD,EAAA6Q,eAAiB,SAAOhS,GAAY,OAAA2C,EAAA,EAAAxB,OAAA,uDACxCC,KAAKoK,WAAWqJ,kBAAkB7U,EAAQM,aAGtCa,EAAAqW,eAAiB,kBAAA7U,EAAA,EAAAxB,OAAA,uEAErB,SAAMC,KAAKoK,WAAWiM,aAAaC,sBAAnC7V,EAAAuB,iBAGIjC,EAAAoE,KAAOhE,OAAAyL,EAAA,EAAAzL,CAAS,WAEhB,IAAAM,EAAAV,EAAAqK,WAAEiM,EAAA5V,EAAA4V,aAAcvW,EAAAW,EAAAX,KACd0V,EAAA1V,EAAA0V,MAAOE,EAAA5V,EAAA4V,MACT7J,EAAS2J,EAAM/J,qBACfkC,EAAO+H,EAAMlC,kBACb+C,EAAO5L,EAAA,qBAAKC,UAAU,0BAAwB,0GAClD,OAAOD,EAAA,cAACb,EAAA,EAAI,CAAC+B,OAAQA,EAAQL,MAAOmC,EAAMyI,eAAgBrW,EAAKqW,gBAC3DzL,EAAA,qBAAKC,UAAU,kDAA0BD,EAAA,4BAAS5K,EAAKyW,YACvD7L,EAAA,cAACb,EAAA,EAAI,CAAC2M,OAAQ,GAAIF,KAAMA,EAAMnF,MAAOiF,EAAcxJ,KAAM,CAAEpC,OAAQ2J,EAAe3G,QAAS1N,EAAK6Q,uBAG5G,OA7BkCrP,EAAA,EAAA4U,EAAAtS,GAGxBsS,EAAAjU,UAAAgK,KAAN,SAAW/B,+EACPnK,KAAKwW,UAAYrM,EACjBnK,KAAKmM,SAASnM,KAAKmE,eAwB3BgS,EA7BA,CAAkCrM,EAAA,oBCHlC4M,EAAA,WAII,SAAAC,EAAY7W,GAFJE,KAAA4W,SAAqB,GACrB5W,KAAA6W,cAAwB,EAE5B7W,KAAKF,KAAOA,EAoBpB,OAdoB6W,EAAAzU,UAAA4U,YAAhB,uGACI,OAA0B,IAAtB9W,KAAK6W,aAAuB,IAChC,GAAMxU,QAAQ0U,IAAI/W,KAAK4W,yBAAvBnW,EAAAuB,OACAhC,KAAK6W,cAAe,YAGlBF,EAAAzU,UAAAO,KAAN,SAAW6B,0BAAajC,QAAO,oEAC3B,SAAMrC,KAAK8W,sBAEX,OAFArW,EAAAuB,OACI/B,EAAOD,KAAKgX,WAChB,GAAMhX,KAAKiX,WAAW3S,EAAOrE,WAC7B,OADAQ,EAAAuB,OACA,GAAO/B,SAIf0W,EAzBA,GCFAO,EAAA,SAAArT,GAAA,SAAAsT,mDAiBA,OAjB2C5V,EAAA,EAAA4V,EAAAtT,GACvBsT,EAAAjV,UAAA+U,WAAhB,SAA2BnU,EAAmB7C,0BAAYoC,QAAO,8EAEvC,SAAMrC,KAAKF,KAAKkE,IAAIpF,QAAQwY,gBAAgBlQ,IAAI,CAAEtI,QAASkE,mBAA7EuU,EAAkB5W,EAAAuB,UAEZsV,EAA4DD,EAAeC,SAAjE7C,EAAkD4C,EAAe5C,OAAzDD,EAA0C6C,EAAe7C,IAApDE,EAAqC2C,EAAe3C,gBAAnCC,EAAoB0C,EAAe1C,gBACjF1U,EAAKqX,SAAWA,EAChBrX,EAAKwU,OAASA,EACdxU,EAAKuU,IAAMA,EACXvU,EAAKyU,gBAAkBA,EACvBzU,EAAK0U,gBAAkBA,aAIrBwC,EAAAjV,UAAA8U,SAAV,WACI,MAAO,IAEfG,EAjBA,CAA2CT,GCK3Ca,EAAA,SAAA1T,GAAA,SAAA2T,mDAkBA,OAlBiCjW,EAAA,EAAAiW,EAAA3T,GASb2T,EAAAtV,UAAA+U,WAAhB,SAA2BQ,EAAiBxX,0BAAkBoC,QAAO,oEACrD,SAAMrC,KAAKF,KAAKkE,IAAIpF,QAAQ8Y,MAAMjV,KAAKgV,kBAA/CpD,EAAQ5T,EAAAuB,OACZ/B,EAAKf,GAAKmV,EAAMnV,GAChBe,EAAKiG,KAAOmO,EAAMnO,eAGZsR,EAAAtV,UAAA8U,SAAV,WACI,MAAO,IAEfQ,EAlBA,CAAiCd,GAoBjCiB,EAAA,SAAA9T,GAAA,SAAA+T,mDA0CA,OA1C+CrW,EAAA,EAAAqW,EAAA/T,GAW3B+T,EAAA1V,UAAA+U,WAAhB,SAA2BnU,EAAmB7C,0BAA4BoC,QAAO,oFAE/D,SAAMrC,KAAKF,KAAKkE,IAAIpF,QAAQiG,SAASpC,KAAKK,WACxD,YAAgBxD,KADZV,EAAUkC,EAAAkB,QAEV,KACJ6V,EAAA1M,EAAE2M,MAAM7X,EAAMrB,GAEVmZ,EAAc,IAAIR,EAAYvX,KAAKF,MACvCW,EAAAR,EAAa,GAAM8X,EAAYtV,KAAKxC,EAAKoU,MAAMnV,aAGpB,OAH3BuB,EAAK4T,MAAQvT,EAAAkB,OAGc,GADC,IAAIkV,EAAsBlX,KAAKF,MACJ2C,KAAKK,kBAAxDuU,EAAuBvW,EAAAkB,UAEjBsV,EAA4DD,EAAeC,SAAjE7C,EAAkD4C,EAAe5C,OAAzDD,EAA0C6C,EAAe7C,IAApDE,EAAqC2C,EAAe3C,gBAAnCC,EAAoB0C,EAAe1C,gBACjF1U,EAAKqX,SAAWA,EAChBrX,EAAKwU,OAASA,EACdxU,EAAKuU,IAAMA,EACXvU,EAAKyU,gBAAkBA,EACvBzU,EAAK0U,gBAAkBA,GAG3B1U,EAAKV,MAAQ,GACbX,EAAQoZ,MAAMxU,QAAQ,SAAAnE,GAElBY,EAAKV,MAAMC,KAAKH,eAIduY,EAAA1V,UAAA8U,SAAV,WACI,MAAO,IAEfY,EA1CA,CAA+ClB,GA4C/CuB,EAAA,SAAApU,GAAA,SAAAqU,mDA0DA,OA1DqD3W,EAAA,EAAA2W,EAAArU,GAgBvCqU,EAAAhW,UAAA8U,SAAV,WACI,MAAO,CAAEmB,KAAM,GAA2BC,KAAM,KAGpCF,EAAAhW,UAAA+U,WAAhB,SAA2BnU,EAAgB7C,0BAAsDoC,QAAO,0GAGxF,OAFR5B,EAA2CT,KAAKF,KAAKkE,IAAnDqU,EAAgB5X,EAAA4X,iBAAEzZ,EAAO6B,EAAA7B,QAAE0Z,EAAS7X,EAAA6X,UACtCC,EAAgB,IAAIZ,EAA0B3X,KAAKF,MACvDgB,EAAAb,EAAY,GAAMsY,EAAc9V,KAAKK,kBAArChC,EAAKqX,KAAOK,EAAAxW,OAERyW,EAAW,EACXhT,EAA6DzF,KAAKF,KAAhEmT,EAAWxN,EAAAwN,YAAEyF,EAAkBjT,EAAAiT,mBAAE/K,EAAIlI,EAAAkI,KAAEgL,EAAelT,EAAAkT,gBACxD1F,EAAY2F,YACU,GAAMP,EAAiBQ,YAAY3R,IAAI,CAAEmN,MAAOpU,EAAKkY,KAAK9D,MAAMnV,GAAI6I,SAAUkL,EAAYzM,mBADhH,aACIsS,EAAkBN,EAAAxW,OACtByW,EAAWK,GAAmBA,EAAgBL,0BAIrC,OADHM,EAAyBL,EAAkBxZ,GACxC,GAAMN,EAAQoa,OAAO9Q,MAAM,CAAEtJ,QAASkE,EAAWmW,YAAaF,YAgB7D,OAhBVG,EAASV,EAAAxW,OACb/B,EAAKmY,KAAOc,EAAO7V,OAAO,SAAAhE,GAAK,OAAoB,IAApBA,EAAE8Z,eAAuB9Z,EAAE+Z,WAAaxX,KAAKC,QAAOwX,KAAK,SAAClO,EAAGmO,GAAM,OAAAnO,EAAE8J,OAASqE,EAAErE,SAAQ1Q,IAAI,SAAAgV,GACvH,IAAIC,EAAW,GAOf,OANAA,EAAI3a,KAAO0a,EAAQ1a,KACnB2a,EAAIvE,OAASsE,EAAQtE,OACJ,IAAbwD,IACAe,EAAItE,SAAWa,KAAK0D,MAAMF,EAAQtE,QAAU,EAAIwD,KACpDe,EAAIxa,SAAW0Z,EAAmB1Z,SAClCwa,EAAI1a,SAAW6O,EAAK9K,YAAYC,EAAWyW,EAAQ1a,KAAKK,IACjDsa,IAGPE,EAA+B,GACnCzZ,EAAKmY,KAAK5U,QAAQ,SAAAR,GACd0W,EAASla,KAAK8Y,EAAUqB,iBAAiBzS,IAAI,CAAEtI,QAASkE,EAAWjE,KAAMmE,EAAEnE,KAAMoa,YAAaP,EAAoBkB,SAAUjB,OAElH,GAAMtW,QAAQ0U,IAAI2C,WAEhC,IAFIG,EAAUrB,EAAAxW,OAELY,EAAI,EAAGA,EAAI3C,EAAKmY,KAAKzY,OAAQiD,IAC9BkX,EAAYD,EAAQjX,IACpBmX,EAAWD,GAAaA,EAAUrB,YAElCxY,EAAKmY,KAAKxV,GAAGuS,eAAiBY,KAAK0D,OAAO,EAAIM,GAAY9Z,EAAKmY,KAAKxV,GAAGqS,yBAGvFiD,EA1DA,CAAqDxB,GClErDsD,EAAA,SAAAnW,GAAA,SAAAoW,IAAA,IAAAla,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAYYD,EAAA+L,QAAU3L,OAAAyL,EAAA,EAAAzL,CAAS,SAACmE,GAExB,IACMvB,EAAAuB,EAAAvB,OAAQD,EAAAwB,EAAAxB,UACVrC,EAAAV,EAAAqK,WAAE8P,EAAAzZ,EAAAyZ,6BAA8BC,EAAA1Z,EAAA0Z,uCAChCC,EAAsBF,EAA6BnX,GACnDsX,EAAgCF,EAAuCrX,GAc3E,OAbIsX,GAAuBA,EAAoBza,OAAS,EACnCya,EAAoB7V,IAAI,SAACvB,EAAGsX,GACnC,IAAAC,EAAAvX,EAAAuX,UAAWzb,EAAAkE,EAAAlE,SAAU0b,EAAAxX,EAAAwX,wBAC3B,GAAI1b,EAAW,EACX,OAAO6L,EAAA,qBAAKR,IAAKmQ,EAAO1P,UAAU,gBAC7BzK,OAAA2J,EAAA,EAAA3J,CAAGoa,EAAW,SAACE,GAAgB,OAAA9P,EAAA,sBAAMC,UAAU,SAAS6P,EAAOvU,aAAkBpH,EAAW,GAAK,MAAQA,EACzG0b,KAKI7P,EAAA,yBAAM0P,GAAiC,iBAASA,OAI7E,OAlCsC9Y,EAAA,EAAA0Y,EAAApW,GAElCoW,EAAA/X,UAAAuI,OAAA,SAAOnG,GACG,IAAAoW,EAAApW,EAAA4C,IAAcnE,EAAAuB,EAAApF,GACd4D,EAAA4X,EAAAC,MACAvQ,EAAApK,KAAAoK,WACAsO,EAAAtO,EAAAtK,KAAA4Y,mBAGN,OAFAtO,EAAWwQ,uBAAuB9X,EAAWC,EAAQ2V,GACrDtO,EAAWyQ,iCAAiC/X,EAAW4V,GAChD/N,EAAA,cAAC3K,KAAK8L,QAAO,CAAC/I,OAAQA,EAAQD,UAAWA,KAyBxDmX,EAlCA,CAAsCnQ,EAAA,GCAtCgR,EAAA,SAAAjX,GAAA,SAAAkX,IAAA,IAAAhb,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAOYD,EAAA8Q,kBAAoB,SAACjS,GACnBA,EAAAM,GAAA,IAAImV,EAAAzV,EAAAyV,MAAOC,EAAA1V,EAAA0V,YAAaC,EAAA3V,EAAA2V,aAAcK,EAAAhW,EAAAgW,OAAQC,EAAAjW,EAAAiW,SAEpD,OAAOlK,EAAA,qBAAKC,UAAU,wBAClBD,EAAA,qBAAKC,UAAU,UACXD,EAAA,qBAAKC,UAAU,QACXD,EAAA,4BAAS2J,IAEb3J,EAAA,qBAAKC,UAAU,QACXD,EAAA,4BAAS4J,IAEb5J,EAAA,qBAAKC,UAAU,OACXD,EAAA,qBAAKC,UAAU,SACXD,EAAA,cAACiJ,EAAY,CAACE,WAAYe,EAAUjK,UAAU,eAElDD,EAAA,qBAAKC,UAAU,SACXD,EAAA,qBAAKC,UAAU,OACV7K,EAAKqK,WAAW4Q,mBAAmBpc,GACnCkW,EAAgB,eAAMF,GACtBzU,OAAA2J,EAAA,EAAA3J,CAAGkU,EAAOU,WAOvC,OAjCuCxT,EAAA,EAAAwZ,EAAAlX,GAEnCkX,EAAA7Y,UAAAuI,OAAA,SAAOnG,GACH,OAAOqG,EAAA,cAAAA,EAAA,cAAGxK,OAAA2J,EAAA,EAAA3J,CAAGmE,EAAOtE,KAAK6Q,qBA8BjCkK,EAjCA,CAAuCjR,EAAA,GCAvCmR,GDoCA,SAAApX,GAAA,SAAAqX,IAAA,IAAAnb,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAMYD,EAAAqU,cAAgB,SAACxV,GACf,IAAAyV,EAAAzV,EAAAyV,MAAOC,EAAA1V,EAAA0V,YAAaC,EAAA3V,EAAA2V,aAAcK,EAAAhW,EAAAgW,OAAQC,EAAAjW,EAAAiW,SAChD,OAAOlK,EAAA,qBAAKC,UAAU,qBAClBD,EAAA,qBAAKC,UAAU,QACXD,EAAA,yBAAKA,EAAA,4BAAS2J,IACd3J,EAAA,yBAAM4J,IAEV5J,EAAA,qBAAKC,UAAU,OACXD,EAAA,qBAAKC,UAAU,SACXD,EAAA,cAACiJ,EAAY,CAACE,WAAYe,EAAUjK,UAAU,WAElDD,EAAA,qBAAKC,UAAU,SACXD,EAAA,qBAAKC,UAAU,OACVkK,EAAgB,2BAAQF,GACxBzU,OAAA2J,EAAA,EAAA3J,CAAGkU,EAAOU,GACVhV,EAAKqK,WAAW4Q,mBAAmBpc,UArBzB2C,EAAA,EAAA2Z,EAAArX,GAE/BqX,EAAAhZ,UAAAuI,OAAA,SAAOnG,GACH,OAAOqG,EAAA,cAAAA,EAAA,cAAGxK,OAAA2J,EAAA,EAAA3J,CAAGmE,EAAOtE,KAAKoU,iBAHjC,CAAmCtK,EAAA,GCpCnC,SAAAjG,GAAA,SAAAsX,IAAA,IAAApb,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YASYD,EAAA+L,QAAU3L,OAAAyL,EAAA,EAAAzL,CAAS,SAACmE,GAElB,IAAAxB,EAAAwB,EAAAxB,UAEFsY,EADErb,EAAAqK,WAAAiR,sBACmCvY,GACzC,QAAqBxD,IAAjB8b,EAA4B,CACtBA,EAAA9D,SAAA,IAAU7C,EAAA2G,EAAA3G,OAAQD,EAAA4G,EAAA5G,IAAK4G,EAAA1G,gBAAiB0G,EAAAzG,gBAC9C,OAAOhK,EAAA,cAAAA,EAAA,cACFmK,EAAgB,MAAON,GACvBM,EAAgB,eAAML,IAG/B,OAAO9J,EAAA,cAAAA,EAAA,mBAEf,OAvBmCpJ,EAAA,EAAA4Z,EAAAtX,GAE/BsX,EAAAjZ,UAAAuI,OAAA,SAAOnG,GACG,IAAAxB,EAAAwB,EAAApF,GAGN,OAFMc,KAAAoK,WACKkR,gBAAgBxY,GACpB6H,EAAA,cAAC3K,KAAK8L,QAAO,CAAChJ,UAAWA,KAiBxCqY,EAvBA,CAAmCrR,EAAA,ICYnCyR,EAAA,SAAA1X,GAII,SAAA2X,EAAYC,GAAZ,IAAA1b,EACI8D,EAAA0I,KAAAvM,OAAOA,YACPD,EAAKyM,UAAYzM,EAAK0M,SAAW,GACjC1M,EAAK0b,mBAAqBA,IAYlC,OAnB2Bla,EAAA,EAAAia,EAAA3X,GAUP2X,EAAAtZ,UAAAO,KAAhB,SAAqB6B,EAAYoI,EAAgBD,0BAAmBpK,QAAO,8DAE7D,YADQ/C,IAAdoN,IAAyBA,EAAY,GAC/B,GAAM1M,KAAKyb,mBAAmBtX,KAAKG,EAAOoI,EAAWD,WAC/D,SADUhM,EAAAuB,cAIJwZ,EAAAtZ,UAAA0K,aAAV,SAAuBC,GACnB7M,KAAK0M,eAAqBpN,IAATuN,EAAqB,EAAIA,EAAK6O,KAEvDF,EAnBA,CAA2B1R,EAAA,GAwB3B6R,EAAA,SAAA9X,GAAA,SAAA+X,IAAA,IAAA7b,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAIgBD,EAAAma,6BAA4D,GAC5Dna,EAAAoa,uCAA0E,GAC1Epa,EAAAsb,sBAAsD,GAuBlEtb,EAAA0T,kBAAoB,SAAO7U,GAAc,OAAA2C,EAAA,EAAAxB,OAAA,6EAGnB,SADL,IAAIkY,EAAgCjY,KAAKF,MACvB2C,KAAK7D,EAAQM,mBAAxC4W,EAAcrV,EAAAuB,OAClBhC,KAAKoN,UAAU8G,EAAU,CAAE4B,YAAWA,EAAElX,QAAOA,cAGnDmB,EAAA8b,YAAc,SAAO/Y,EAAmBC,EAAekW,GAAmB,OAAA1X,EAAA,EAAAxB,OAAA,+DAI1EA,EAAAgR,mBAAqB,SAAClS,GAClB,OAAOkB,EAAKgN,WAAWiN,EAAkBnb,IAG7CkB,EAAA6a,uBAAyB,SAAO9X,EAAmBC,EAAgB+Y,GAAqB,OAAAva,EAAA,EAAAxB,OAAA,2FAClCT,IAA9CU,KAAKka,6BAA6BnX,GAAlC,OACAtC,EAAAT,KAAKka,6BAA6BpZ,EAAAiC,EAAU,GAAM/C,KAAKgE,IAAIuW,UAAUwB,uBAAuB7T,MAAM,CAAEtJ,QAASkE,EAAWjE,KAAMkE,EAAQkW,YAAajZ,KAAKF,KAAK4Y,8BAA7JjY,EAAAK,GAA4C2E,EAAAzD,wCAGpDjC,EAAA8a,iCAAmC,SAAO/X,EAAmBgZ,GAAqB,OAAAva,EAAA,EAAAxB,OAAA,iGACfT,IAA3DU,KAAKma,uCAAuCrX,GAA5C,MACyB,GAAM9C,KAAKgE,IAAIpF,QAAQod,sBAAsB9T,MAAM,CAAEtJ,QAASkE,EAAWmW,YAAa6C,aAA3GG,EAAqBnb,EAAAkB,QACFrC,OAAS,GACxBc,EAAwDwb,EAAmB,GAAzEC,EAAQzb,EAAAyb,SAAEC,EAAQ1b,EAAA0b,SAAEC,EAAI3b,EAAA2b,KAAyB3b,EAAA+Z,wBACvDxa,KAAKma,uCAAuCrX,GAAaoZ,GAAYC,EAAWD,EAAW,IAAMC,EAAW,IAAM,IAAMC,GAExHpc,KAAKma,uCAAuCrX,GAAa,sCAKrE/C,EAAAib,mBAAqB,SAACpc,GAClB,OAAOmB,EAAKgN,WAAWkO,EAAerc,IAG1CmB,EAAAub,gBAAkB,SAAOxY,GAAiB,OAAAvB,EAAA,EAAAxB,OAAA,2FACQT,IAA1CU,KAAKqb,sBAAsBvY,GAA3B,OACArC,EAAAT,KAAKqb,sBAAsBva,EAAAgC,EAAa,GAAM9C,KAAKgE,IAAIpF,QAAQwY,gBAAgBlQ,IAAI,CAAEtI,QAASkE,aAA9FrC,EAAAK,GAAwC2E,EAAAzD,wCAIhDjC,EAAA8Q,kBAAoB,SAACjS,GACjB,OAAOmB,EAAKgN,WAAW+N,EAAmBlc,MAElD,OA1E8B2C,EAAA,EAAAqa,EAAA/X,GAQV+X,EAAA1Z,UAAAiL,cAAhB,SAA8B7I,+EAC1BtE,KAAKqc,YAAY/X,YAGrBsX,EAAA1Z,UAAAma,YAAA,SAAYlS,GACF,IAAAuO,EAAA1Y,KAAAF,KAAA4Y,mBAEN1Y,KAAKqW,aAAe,IAAIkF,EAAavb,KAAKgE,IAAIpF,QAAQ0d,eACtDtc,KAAKqW,aAAakG,MAAM,CAAEC,QAASrS,EAAK8O,YAAaP,EAAmBxZ,KACxEc,KAAKoN,UAAU8I,EAAc/L,IAG3ByR,EAAA1Z,UAAAua,iBAAN,SAAuBC,yFACbhE,EAAuB1Y,KAAKF,KAAI4Y,mBAEtC1Y,KAAKqW,aAAe,IAAIkF,EAAavb,KAAKgE,IAAIpF,QAAQ+d,yBAChDC,EAA4BF,EAAQE,kBAAjB1W,EAASwW,EAAQxW,KAC1ClG,KAAKqW,aAAakG,MAAM,CAAEM,gBAAiBD,EAAmB3D,YAAaP,EAAmBxZ,KAC9Fc,KAAKoN,UAAU8I,EAAchQ,YAtBrB3E,EAAA,GAAXnB,EAAA,sDACWmB,EAAA,GAAXnB,EAAA,gEACWmB,EAAA,GAAXnB,EAAA,+CAoELwb,EA1EA,CAA8BhS,GA4EvB,SAASmL,EAAYV,GACxB,OAAOS,EAAgB,eAAMT,EAAMnO,MAGhC,SAAS4O,EAAgBgI,EAAiBjV,EAAYkV,GACzD,GAAc,OAAVlV,QAA4BvI,IAAVuI,GAAiC,MAAVA,EAAe,OAAO,KACnE,IAAImV,EAAWD,EAAelP,IAAWkP,GAAgBlP,IAAW,cAChEoP,EAAWF,EAAelP,IAAWkP,GAAgB,GACzD,OAAOpS,EAAA,cAAAA,EAAA,cACHA,EAAA,qBAAKC,UAAWiD,IAAW,4BAA6BmP,QAAaF,GACrEnS,EAAA,qBAAKC,UAAWiD,IAAW,iBAAkBoP,IAAYpV,IAI1D,SAASuM,EAAcxV,GACpB,IAAAyV,EAAAzV,EAAAyV,MAAOC,EAAA1V,EAAA0V,YAAaC,EAAA3V,EAAA2V,aAAcC,EAAA5V,EAAA4V,IAAKC,EAAA7V,EAAA6V,OAAQC,EAAA9V,EAAA8V,gBAAiBC,EAAA/V,EAAA+V,gBAAiBC,EAAAhW,EAAAgW,OAAQC,EAAAjW,EAAAiW,SAC/F,OAAOlK,EAAA,qBAAKC,UAAU,qBAClBD,EAAA,qBAAKC,UAAU,QACXD,EAAA,yBAAKA,EAAA,4BAAS2J,IACd3J,EAAA,yBAAM4J,IAEV5J,EAAA,qBAAKC,UAAU,OACXD,EAAA,qBAAKC,UAAU,SACXD,EAAA,cAACiJ,EAAY,CAACE,WAAYe,EAAUjK,UAAU,WAElDD,EAAA,qBAAKC,UAAU,SACXD,EAAA,qBAAKC,UAAU,OACVkK,EAAgB,MAAON,GACvBM,EAAgB,2BAAQF,GACxBE,EAAgB,eAAML,GACtBK,EAAgB,qBAAOJ,GACvBI,EAAgB,qBAAOH,GACvBxU,OAAA2J,EAAA,EAAA3J,CAAGkU,EAAOU,OC7I/B,IAAMmI,EAAY,IAElBC,GAAA,SAAAtZ,GAAA,SAAAuZ,IAAA,IAAArd,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YACwBD,EAAAsd,oBAA8B,EAC9Btd,EAAAud,wBAAkC,EAClCvd,EAAAwd,uBAAiC,EACjCxd,EAAAyd,gBAA0B,EAMtCzd,EAAA0d,YAAc,WAClB,OAAO9S,EAAA,sBAAMC,UAAU,gBAAc,yCAGjC7K,EAAA+Q,SAAW,SAACjE,EAAmByN,GAC7B,IAAAzb,EAAAgO,EAAAhO,KAAMC,EAAA+N,EAAA/N,SAAUC,EAAA8N,EAAA9N,MAAO8N,EAAA7N,SAE7B,OAAO2L,EAAA,qBAAKR,IAAKmQ,EAAO1P,UAAU,wBAC9BD,EAAA,qBAAKC,UAAU,6BACXD,EAAA,qBAAKC,UAAU,eAAcD,EAAA,uBAAIxK,OAAA2J,EAAA,EAAA3J,CAAGtB,KACpC8L,EAAA,qBAAKC,UAAU,yBACXD,EAAA,sBAAMC,UAAU,kBAAiBD,EAAA,mCAAiBvJ,YAAYrC,EAAQD,GAAUuC,QAAQ,KACxFsJ,EAAA,uBAAOC,UAAU,sBAAgBxJ,WAAWrC,EAAMsC,QAAQ,aAAQvC,SAG1E6L,EAAA,yBAAM5K,EAAKqK,WAAW2G,mBAAmBlS,MAIzCkB,EAAA2d,gBAAkB,SAACC,GACjB,IAAA/e,EAAA+e,EAAA/e,QAASW,EAAAoe,EAAApe,MACXkB,EAAAV,EAAEqK,EAAA3J,EAAA2J,WAAY0G,EAAArQ,EAAAqQ,SAClB,OAAOnG,EAAA,yBACHA,EAAA,qBAAKC,UAAU,OACXD,EAAA,qBAAKC,UAAU,iBAAiBR,EAAWwT,uBAAuBhf,IAClE+L,EAAA,qBAAKC,UAAU,YACXrL,EAAMgF,IAAI,SAACgK,EAAG+L,GACV,OAAOxJ,EAASvC,EAAG+L,SAO/Bva,EAAA8d,aAAe,SAACF,GACpB,OAAOA,EAAU/e,QAAQM,IAGrBa,EAAA+d,aAAe3d,OAAAyL,EAAA,EAAAzL,CAAS,SAACmE,GACvB,IAAAyZ,EAAAhe,EAAAqK,WAAA2T,WACN,QAAyBze,IAArBye,EAAe,GACf,OAAOpT,EAAA,sBAAMC,UAAU,gBAAc,kCAE/BmT,EAAA7e,GAAA,IAAI8e,EAAAD,EAAAC,KACJC,GADUF,EAAAtF,SAAUsF,EAAAG,aAAcH,EAAAI,aAAcJ,EAAAK,QAChD9Z,EAAA2Z,oBAAoBI,EAAA/Z,EAAA+Z,eACtBC,OAAQ,EAAEC,OAAU,EAaxB,OAZIN,IACAK,EAAW3T,EAAA,qBAAKC,UAAU,2CACtBD,EAAA,qBAAKC,UAAU,cAAY,iBAC3BD,EAAA,qBAAKC,UAAU,0BAAyBD,EAAA,mCAAiBsT,KAG7DI,IACAE,EAAa5T,EAAA,qBAAKC,UAAU,2CACxBD,EAAA,qBAAKC,UAAU,cAAY,iBAC3BD,EAAA,qBAAKC,UAAU,0BAAyBD,EAAA,mCAAiB0T,KAG1D1T,EAAA,qBAAKC,UAAU,QAClBD,EAAA,qBAAKC,UAAU,gBAAgBoT,EAAKjK,OAAO,EAAG,OAAKiK,EAAKjK,OAAO,IAC9DuK,EACAC,KAKLxe,EAAAye,SAAW,kBAAAjd,EAAA,EAAAxB,OAAA,qEAIf,GAHM0e,EAAcze,KAAKoK,WAAUqU,UAE7B/V,EAA8D+V,EAAS/V,gBAAtDG,EAA6C4V,EAAS5V,eAAtCI,EAA6BwV,EAASxV,YAAzBC,EAAgBuV,EAASvV,aACxER,EAGD,OAFA1I,KAAKsd,wBAAyB,EAC9BoB,WAAW,WAAM,OAAA3e,EAAKud,wBAAyB,GAAOJ,GACtD,IAEJ,IAAKrU,EAAgB,CACjB,IAAI7I,KAAKqd,mBAML,OAFArd,KAAKud,uBAAwB,EAC7BmB,WAAW,WAAM,OAAA3e,EAAKwd,uBAAwB,GAAOL,GACrD,IALAuB,EAAU5V,eAAiBH,EAC3B1I,KAAKud,uBAAwB,EAOrC,OAAKtU,GAAgBC,GAMrBlJ,KAAKoK,WAAWuU,oBALZ3e,KAAKwd,gBAAiB,EACtBkB,WAAW,WAAM,OAAA3e,EAAKyd,gBAAiB,GAAON,GAC9C,UAMAnd,EAAAoE,KAAOhE,OAAAyL,EAAA,EAAAzL,CAAS,WAEhB,IAAAM,EAAAV,EAAAqK,WAAEtK,EAAAW,EAAAX,KAAM2e,EAAAhe,EAAAge,UAAWG,EAAAne,EAAAme,wBAAyBC,EAAApe,EAAAoe,uBAAwBC,EAAAre,EAAAqe,WAAYC,EAAAte,EAAAse,kBAAmBC,EAAAve,EAAAue,aACjG/L,EAAAnT,EAAAmT,YACFgM,EAAatU,EAAA,qBAAK8C,QAASqR,EAAYlU,UAAU,wCAAwCsU,KAAK,SAAO,gEAGrGjM,EAAYkM,gBACZF,EAAa,MACjB,IAAI5M,EAAS1H,EAAA,qBAAKC,UAAU,WACvBqU,EACDtU,EAAA,qBAAKC,UAAU,cACXD,EAAA,qBAAKC,UAAU,2CACXD,EAAA,sBAAMC,UAAU,cAAcS,MAAO,CAAE+T,SAAU,WAAYzU,EAAA,mCAAiB8T,EAAUle,SAE5FoK,EAAA,wBAAQ+E,KAAK,SACT9E,UAAU,sBACV6C,QAAS1N,EAAKye,SAAU9P,UAAWuE,EAAYkM,eAAa,8BAKpEE,EAAe1U,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,gBAAgB0E,UAAU,mBAClD0U,EAA0Bvf,EAAKud,uBAC/B3S,EAAA,qBAAKC,UAAU,0BAAyBD,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,4EAC/C,KACFqZ,EAAyBxf,EAAKwd,sBAAwB5S,EAAA,qBAAKC,UAAU,0BAAyBD,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,4EAAyC,KAChJsZ,EAAyB,MACG,IAA5Bzf,EAAKsd,qBAEDmC,OAD6BlgB,IAA7Bmf,EAAU5V,eACU8B,EAAA,qBAAKC,UAAU,+CAC9BzK,OAAA2J,EAAA,EAAA3J,CAAGse,EAAU5V,oBAAgBvJ,OAAWA,EAAWS,EAAK0d,aACzD9S,EAAA,yBAAM0U,IAGU1U,EAAA,qBAAKC,UAAU,8BAC/BD,EAAA,wBAAQC,UAAU,0BACd6C,QAASoR,GAAsB,wCAClCU,IAKb,IAAIE,EAAmB9U,EAAA,qBAAKC,UAAU,0BAClCD,EAAA,qBAAKC,UAAU,kCAAgC,6BAC/CD,EAAA,qBAAKC,UAAU,mBACXD,EAAA,yBACIA,EAAA,uBAAOC,UAAU,kBACbD,EAAA,uBAAO+E,KAAK,WACRgQ,eAAgB3f,EAAKsd,mBACrBzN,SAAU,SAAAvQ,GACNU,EAAKsd,mBAAqBhe,EAAEsgB,cAAcC,QAC1CnB,EAAU5V,oBAAiBvJ,EAC3BS,EAAKwd,uBAAwB,0CAKhDiC,GAGDK,EAAkB9f,EAAKyd,eAAiB7S,EAAA,qBAAKC,UAAU,0BAAyBD,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,4EAAyC,KAClI4Z,EAAgBnV,EAAA,qBAAKC,UAAU,yBAAyB6C,QAASsR,GACjEpU,EAAA,qBAAKC,UAAU,kCAAgC,6BAC/CD,EAAA,qBAAKC,UAAU,mBACXD,EAAA,cAACb,EAAA,EAAG,CAACc,UAAU,2BAA2BY,MAAO6T,GAC5Clf,OAAA2J,EAAA,EAAA3J,CAAGse,EAAUxV,YAAa,SAACjG,GAAM,OAAA2H,EAAA,cAAAA,EAAA,cAAG3H,EAAEsR,mBAAiBhV,EAAW,WAAM,OAAAqL,EAAA,sBAAMC,UAAU,gBAAc,0CACtGzK,OAAA2J,EAAA,EAAA3J,CAAGse,EAAUvV,YAAa,SAAClG,GAAM,OAAA2H,EAAA,cAAAA,EAAA,qBAAO3H,EAAE+c,aAAWzgB,EAAW,WAAM,OAAAqL,EAAA,cAAAA,EAAA,iBACtEkV,KAKTG,EAAerV,EAAA,cAAAA,EAAA,eACfsV,EAAuBtV,EAAA,cAAAA,EAAA,eACvB8T,EAAUyB,aACVF,EAAerV,EAAA,cAAAA,EAAA,cACXA,EAAA,qBAAKC,UAAU,kCAAgC,iBAC/CD,EAAA,qBAAKC,UAAU,0CAAyCD,EAAA,mCAAiB8T,EAAUyB,aAEnFzB,EAAU0B,qBACVF,EAAuBtV,EAAA,cAAAA,EAAA,cACnBA,EAAA,qBAAKC,UAAU,kCAAgC,6BAC/CD,EAAA,qBAAKC,UAAU,0CAAyCD,EAAA,mCAAiB8T,EAAU0B,uBAK/F,IAAIC,EAAWzV,EAAA,cAAAA,EAAA,eAYf,OAVIyV,EAAWzV,EAAA,qBAAKC,UAAU,yBAAyB6C,QAASuR,GACxDrU,EAAA,qBAAKC,UAAU,kCAAgC,uBAC/CD,EAAA,qBAAKC,UAAU,mBACXD,EAAA,cAACb,EAAA,EAAG,CAACc,UAAU,2BAA2BY,MAAO6T,GAC7C1U,EAAA,cAAC5K,EAAK+d,aAAY,CAACG,mBAAoBQ,EAAUR,mBAAoBI,eAAgBI,EAAUJ,oBAMxG1T,EAAA,cAACb,EAAA,EAAI,CAAC+B,OAAO,2BAAOwG,OAAQA,GAC/B1H,EAAA,qBAAKC,UAAU,QACXD,EAAA,qBAAKC,UAAU,yBAAyB6C,QAASmR,GAC7CjU,EAAA,qBAAKC,UAAU,kCAAgC,6BAC/CD,EAAA,qBAAKC,UAAU,mBACXD,EAAA,cAACb,EAAA,EAAG,CAACc,UAAU,2BAA2BY,MAAO6T,GAAelf,OAAA2J,EAAA,EAAA3J,CAAGse,EAAU/V,qBAAiBpJ,OAAWA,EAAWS,EAAK0d,cACxH6B,IAGRG,EACAK,GAELnV,EAAA,cAACb,EAAA,EAAI,CAACsH,MAAOqN,EAAU4B,WAAYxT,KAAM,CAAEpC,OAAQ1K,EAAK2d,gBAAiBvT,IAAKpK,EAAK8d,gBACnFlT,EAAA,qBAAKC,UAAU,QACXD,EAAA,qBAAKC,UAAU,+BACXD,EAAA,qBAAKC,UAAU,kCAAgC,6BAC/CD,EAAA,qBAAKC,UAAU,8BAA6BD,EAAA,mCAAiB8T,EAAU6B,eACtEN,EACAC,GAEJG,QAIjB,OApOkC7e,EAAA,EAAA6b,EAAAvZ,GAMxBuZ,EAAAlb,UAAAgK,KAAN,SAAW5H,+EACPtE,KAAKmM,SAASnM,KAAKmE,eANX5C,EAAA,GAAXnB,EAAA,4CACWmB,EAAA,GAAXnB,EAAA,gDACWmB,EAAA,GAAXnB,EAAA,+CACWmB,EAAA,GAAXnB,EAAA,wCAgOLgd,EApOA,CAAkCtT,EAAA,GCNlCyW,GAAA,oBAAAC,IAUgBxgB,KAAAqgB,WAA0B,GAiD1C,OA5CclgB,OAAA4D,eAAIyc,EAAAte,UAAA,SAAM,KAAV,WACN,OAAOd,YAAYpB,KAAKqgB,WAAWI,OAAO,SAACC,EAAIC,GAAO,OAACD,EAAKC,EAAGC,WAAY,IACtE5gB,KAAKkgB,WAAalgB,KAAKkgB,WAAa,IACpClgB,KAAKmgB,mBAAqBngB,KAAKmgB,mBAAqB,IACpDngB,KAAKie,mBAAqBje,KAAKie,mBAAqB,IACpDje,KAAKqe,eAAiBre,KAAKqe,eAAiB,IAAIhd,QAAQ,qCAEvDlB,OAAA4D,eAAIyc,EAAAte,UAAA,gBAAa,KAAjB,WACN,OAAOd,WAAWpB,KAAKqgB,WAAWI,OAAO,SAACC,EAAIC,GAAO,OAAAD,EAAKC,EAAGC,WAAW,GAAGvf,QAAQ,qCAOvFmf,EAAAte,UAAA2e,eAAA,eAAA9gB,EAAAC,KACQqgB,EAAoB,GAUxB,OATArgB,KAAKqgB,WAAW7c,QAAQ,SAAAsd,GACpBA,EAAGvhB,MAAMiE,QAAQ,SAAAud,GACbhhB,EAAKf,SAAW+hB,EAAG/hB,SACnBqhB,EAAW7gB,KAAK,CACZZ,QAASkiB,EAAGliB,QAASC,KAAMkiB,EAAGliB,KAAME,MAAOgiB,EAAGhiB,MAAOD,SAAUiiB,EAAGjiB,SAChE8hB,UAAWG,EAAGjiB,SAAWiiB,EAAGhiB,YAInC,CACH8H,QAAS7G,KAAK6G,QACdma,aAAchhB,KAAKghB,aACnBjZ,SAAU/H,KAAK+H,SACfW,gBAAiB1I,KAAK0I,gBACtBG,eAAgB7I,KAAK6I,eACrBI,YAAajJ,KAAKiJ,YAClBC,YAAalJ,KAAKkJ,YAClB3I,OAAQP,KAAKO,OACbvB,SAAUgB,KAAKhB,SACfkhB,WAAYlgB,KAAKkgB,WACjBC,mBAAoBngB,KAAKmgB,mBACzBc,OAAQjhB,KAAKihB,OACbhD,mBAAoBje,KAAKie,mBACzBI,eAAgBre,KAAKqe,eACrB6C,WAAYb,IAlDR9e,EAAA,GAAXnB,EAAA,yCACWmB,EAAA,GAAXnB,EAAA,wCACWmB,EAAA,GAAXnB,EAAA,qCACWmB,EAAA,GAAXnB,EAAA,qCACWmB,EAAA,GAAXnB,EAAA,oCAEWmB,EAAA,GAAXnB,EAAA,oCACWmB,EAAA,GAAXnB,EAAA,4CAESmB,EAAA,GAATnB,EAAA,8BAOSmB,EAAA,GAATnB,EAAA,qCAIWmB,EAAA,GAAXnB,EAAA,gCACWmB,EAAA,GAAXnB,EAAA,4CACWmB,EAAA,GAAXnB,EAAA,wCA+BLogB,EA3DA,GA6DAW,GAAA,oBAAAC,KAkBA,OAdcjhB,OAAA4D,eAAIqd,EAAAlf,UAAA,YAAS,KAAb,WACN,OAAOlC,KAAKT,MAAMkhB,OAAO,SAAClS,EAAG8S,GACzB,OAAO9S,EAAI8S,EAAEtiB,MAAQsiB,EAAEviB,UACxB,oCAJKyC,EAAA,GAAXnB,EAAA,+BACSmB,EAAA,GAATnB,EAAA,iCAcLghB,EAlBA,GC7DAE,GAAA,SAAAzd,GAAA,SAAA0d,IAAA,IAAAxhB,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAOYD,EAAAoE,KAAO,SAACqd,GACZ,OAAO7W,EAAA,cAACb,EAAA,EAAI,CAAC+B,OAAO,2BAAO4V,KAAK,SAC5B9W,EAAA,qBAAKC,UAAU,qBACXD,EAAA,qBAAKC,UAAU,QAAM,oGACrBD,EAAA,mBAAGC,UAAU,iCACHD,EAAA,sBAAMC,UAAU,gBAAgB4W,EAAkBE,IAAU/W,EAAA,yBAAMA,EAAA,sKAM5F,OAlBkCpJ,EAAA,EAAAggB,EAAA1d,GAExB0d,EAAArf,UAAAgK,KAAN,SAAWsV,+EAEPxhB,KAAKmM,SAASnM,KAAKmE,KAAMqd,YAcjCD,EAlBA,CAAkCzX,EAAA,GCGlC6X,GAAA,SAAA9d,GAAA,SAAA+d,IAAA,IAAA7hB,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAOYD,EAAA8hB,gBAAkB,SAAC1a,GACnB,IAAA1G,EAAAV,EAAAqK,WAAE0X,EAAArhB,EAAAqhB,cAAeC,EAAAthB,EAAAshB,kBACjBvW,EAAQb,EAAA,qBAAKC,UAAU,+BAA+B6C,QAAS,WAAM,OAAAqU,EAAc3a,KACnFwD,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,UAEb,OAAOyE,EAAA,cAACb,EAAA,EAAG,CAAC0B,MAAOA,EAAOZ,UAAU,aAChCD,EAAA,qBAAK8C,QAAS,WAAM,OAAAsU,EAAkB5a,KACjChH,OAAA2J,EAAA,EAAA3J,CAAGgH,MAKRpH,EAAAoE,KAAOhE,OAAAyL,EAAA,EAAAzL,CAAS,WAChB,IAAAM,EAAAV,EAAAqK,WAAE4X,EAAAvhB,EAAAuhB,aAAcC,EAAAxhB,EAAAwhB,aAChB5P,EAAS1H,EAAA,wBAAQ+E,KAAK,SAAS9E,UAAU,wBAAwB6C,QAAS,WAAM,OAAAuU,MAAc,kCAC9FE,EAAcvX,EAAA,cAACb,EAAA,EAAI,CAACsH,MAAO6Q,EAAcpV,KAAM,CAAEpC,OAAQ1K,EAAK8hB,iBAAmBtL,KAAK,uBAC1F,OAAO5L,EAAA,cAACb,EAAA,EAAI,CAACuI,OAAQA,EAAQxG,OAAO,4BAC/BqW,OAGb,OA3BkC3gB,EAAA,EAAAqgB,EAAA/d,GAExB+d,EAAA1f,UAAAgK,KAAN,uFAEIlM,KAAKmM,SAASnM,KAAKmE,eAuB3Byd,EA3BA,CAAkC9X,EAAA,GCN3B,SAASqY,GAAoBta,GAChC,OAAIA,IAAU,uCAAuCoK,KAAKpK,GAC/C,wGAEP,EAGD,SAASua,GAAiBva,GAC7B,OAAIA,IAAU,+BAA+BoK,KAAKpK,GACvC,kGAEP,EAGD,SAASwa,GAAgBxa,GAC5B,OAAIA,IAAU,8CAA8CoK,KAAKpK,GACtD,qFAEP,EAGD,SAASya,GAAcza,GAC1B,OAAIA,IAAU,uCAAuCoK,KAAKpK,GAC/C,wGAEP,EAGD,SAAS0a,GAAwB1a,GACpC,OAAQA,GAASA,EAAMlI,OAAS,IAAO,iEAAiBL,EAGrD,SAASkjB,GAAkB3a,GAC9B,OAAQA,GAASA,EAAMlI,OAAS,GAAM,gFAAiBL,EAIpD,SAASmjB,GAA2B5a,GACvC,OAAQA,GAASA,EAAMlI,OAAS,IAAO,iEAAiBL,EAWrD,SAASojB,GAAe7a,GAC3B,OAAQA,GAASA,EAAMlI,OAAS,GAAM,oDAAcL,EC5CxD,IAAMqjB,GAAiB,CACnB,CAAEzc,KAAM,KAAMwJ,KAAM,KAAMV,UAAU,GACpC,CAAE9I,KAAM,OAAQwJ,KAAM,SAAUV,UAAU,GAC1C,CAAE9I,KAAM,mBAAoBwJ,KAAM,SAAUV,UAAU,GACtD,CAAE9I,KAAM,SAAUwJ,KAAM,SAAUV,UAAU,GAC5C,CAAE9I,KAAM,YAAawJ,KAAM,SAAUV,UAAU,GAC/C,CAAE9I,KAAM,QAASwJ,KAAM,SAAUV,UAAU,GAC3C,CAAE9I,KAAM,UAAWwJ,KAAM,KAAMV,UAAU,GACzC,CAAE9I,KAAM,gBAAiBwJ,KAAM,SAAUV,UAAU,GACnD,CAAE9I,KAAM,YAAawJ,KAAM,UAAWV,UAAU,IAGpD4T,GAAA,SAAA/e,GAAA,SAAAgf,IAAA,IAAA9iB,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAKYD,EAAAiR,SAAqB,CACzBI,MAAO,CACHlS,GAAI,CAAE4jB,SAAS,GACf5c,KAAM,CAAEmL,OAAQ,OAAQG,MAAO,eAAM3G,YAAa,eAAMkY,MAAOL,IAC/D/b,iBAAkB,CAAE0K,OAAQ,OAAQG,MAAO,2BAAQ3G,YAAa,2BAAQkY,MAAON,IAC/Ehc,OAAQ,CAAE4K,OAAQ,OAAQG,MAAO,qBAAO3G,YAAa,qBAAOkY,MAAOX,IAAmChb,UAAW,CAAEiK,OAAQ,OAAQG,MAAO,eAAM3G,YAAa,eAAMkY,MAAOZ,IAC1K9a,MAAO,CAAEgK,OAAQ,QAASG,MAAO,QAASuR,MAAOV,GAAiBxX,YAAa,SAA0BtD,QAAS,CAC9G8J,OAAQ,KAAMG,MAAO,2BAAQ3G,YAAa,2BAC1CmY,OAAQ,SAAOvQ,EAAkBvM,EAAc2B,GAAa,OAAAtG,EAAA,EAAAxB,OAAA,2BAAAwB,EAAA,EAAAvB,KAAA,SAAAS,0BAAK,SAAMT,KAAKoK,WAAW6Y,YAAYxQ,EAASvM,EAAM2B,WAAjD,SAAApH,EAAAuB,cACjEsP,QAAS,SAAC/J,GACN,OAAOpH,OAAA2J,EAAA,EAAA3J,CAAGoH,EAAS,SAAC2b,GACV,IAAAC,EAAAD,EAAAC,QAASC,EAAAF,EAAAE,SAAUC,EAAAH,EAAAG,KAAMC,EAAAJ,EAAAI,OAE/B,OAAO3Y,EAAA,cAAAA,EAAA,cACFwY,GAAWA,EAAQjkB,IAAMiB,OAAA2J,EAAA,EAAA3J,CAAGgjB,EAAS,SAAAngB,GAAK,OAAA2H,EAAA,cAAAA,EAAA,cAAG3H,EAAEugB,eAC/CH,GAAYA,EAASlkB,IAAMiB,OAAA2J,EAAA,EAAA3J,CAAGijB,EAAU,SAACpgB,GAAM,OAAA2H,EAAA,cAAAA,EAAA,cAAG3H,EAAEugB,eACpDF,GAAQA,EAAKnkB,IAAMiB,OAAA2J,EAAA,EAAA3J,CAAGkjB,EAAM,SAACrgB,GAAM,OAAA2H,EAAA,cAAAA,EAAA,cAAG3H,EAAEugB,eACxCD,GAAUA,EAAOpkB,IAAMiB,OAAA2J,EAAA,EAAA3J,CAAGmjB,EAAQ,SAACtgB,GAAM,OAAA2H,EAAA,cAAAA,EAAA,cAAG3H,EAAEugB,iBAEpD,WACC,OAAO5Y,EAAA,uBAAOC,UAAU,cAAY,sCAIhDpD,cAAe,CAAE6J,OAAQ,OAAQG,MAAO,2BAAQ3G,YAAa,2BAAQkY,MAAOR,IAC5EiB,UAAW,CAAEnS,OAAQ,WAAYG,MAAO,wCACxCnN,OAAQ,CAAEgN,OAAQ,SAAUG,MAAO,kBASnCzR,EAAA0jB,cAAgB,kBAAAliB,EAAA,EAAAxB,OAAA,uEACpB,OAAKC,KAAK0jB,KACV,GAAM1jB,KAAK0jB,KAAKC,YAAY,WADZ,kBAChBljB,EAAAuB,iBAGIjC,EAAA6jB,kBAAoB,SAAO1d,EAAcuM,GAAgB,OAAAlR,EAAA,EAAAxB,OAAA,uEAC7D,SAAMC,KAAKoK,WAAWyZ,YAAYpR,EAAQiR,KAAKzjB,qBAA/CQ,EAAAuB,iBAGIjC,EAAA+jB,aAAe,kBAAAviB,EAAA,EAAAxB,OAAA,6EAEf,OADEoH,EAAYnH,KAAK+jB,gBAAe5c,QAClC,GAAMnH,KAAKgkB,MAAMC,GAAuB9c,kBAAa,IAArD1G,EAAAuB,OAAA,MACA,GAAMhC,KAAKoK,WAAW9B,WAAWnB,WAAjC1G,EAAAuB,OACAhC,KAAKmT,6CAILpT,EAAAoE,KAAO,WACX,IAEI+f,EAFAC,EAActM,EAAA1M,EAAEiZ,MAAMrkB,EAAKgkB,gBAAgB5c,cAG3B7H,IAAhB6kB,IACAD,EAAYvZ,EAAA,wBAAQC,UAAU,sBAAsB6C,QAAS1N,EAAK+jB,cAAY,iBAE5E,IAAAO,EAAAtkB,EAAAqK,WAAAia,kBACFhS,EAAS1H,EAAA,wBAAQ+E,KAAK,SACtB9E,UAAU,wBACV6C,QAAS1N,EAAK0jB,eAAgBY,EAAoB,iCAAU,gBAChE,OAAO1Z,EAAA,cAACb,EAAA,EAAI,CAAC+B,OAAO,2BAAOwG,OAAQA,EAAQ7G,MAAO0Y,GAC9CvZ,EAAA,qBAAKC,UAAU,qCACXD,EAAA,cAACb,EAAA,EAAI,CAACuE,IAAK,SAAArL,GAAK,OAAAjD,EAAK2jB,KAAO1gB,GAAG4H,UAAU,OACrCmH,OAAQ4Q,GACR3R,SAAUjR,EAAKiR,SACfgB,SAAUmS,EACVG,cAAevkB,EAAK6jB,kBACpBW,eAAgB,SAIpC,OA/E8BhjB,EAAA,EAAAshB,EAAAhf,GAmCpBgf,EAAA3gB,UAAAgK,KAAN,SAAW6X,+EACP/jB,KAAK+jB,gBAAkBA,EACvB/jB,KAAKmM,SAASnM,KAAKmE,eA0C3B0e,EA/EA,CAA8B/Y,EAAA,GAiF9Bma,GAAA,SAAApgB,GAAA,SAAA2gB,IAAA,IAAAzkB,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAKYD,EAAA0kB,UAAY,kBAAAljB,EAAA,EAAAxB,OAAA,uEAChB,SAAMC,KAAK0kB,YAAW,kBAAtBjkB,EAAAuB,OACAhC,KAAKmT,sBAGDpT,EAAA4kB,SAAW,kBAAApjB,EAAA,EAAAxB,OAAA,uEACf,SAAMC,KAAK0kB,YAAW,kBAAtBjkB,EAAAuB,OACAhC,KAAKmT,sBAGDpT,EAAAoE,KAAO,SAACgD,GACZ,OAAOwD,EAAA,cAACb,EAAA,EAAI,CAAC+B,OAAO,2BAAO4V,KAAK,SAC5B9W,EAAA,qBAAKC,UAAU,gEACXD,EAAA,qBAAKC,UAAU,yBACXD,EAAA,mBAAGC,UAAU,6DAA6DS,MAAO,CAAEL,KAAM,EAAG4Z,IAAK,KACjGja,EAAA,mBAAGC,UAAU,IAAE,qDAEnBD,EAAA,qBAAKC,UAAU,mCACXD,EAAA,wBAAQC,UAAU,sBAAsB6C,QAAS1N,EAAK0kB,WAAS,4BAC/D9Z,EAAA,wBAAQC,UAAU,4BAA4B6C,QAAS1N,EAAK4kB,UAAQ,sBAKxF,OA7BoCpjB,EAAA,EAAAijB,EAAA3gB,GAC1B2gB,EAAAtiB,UAAAgK,KAAN,SAAW/E,+EACPnH,KAAKmM,SAASnM,KAAKmE,KAAMgD,YA2BjCqd,EA7BA,CAAoC1a,EAAA,4FChEvB+a,GAAU,CACnBC,MAAO,GACPC,QAAS,IACTC,eAAgB,EAChBC,aAAc,CACVC,EAAG,CACCja,YAAKE,EACLga,WAAY,aAEhBC,IAAK,CACDna,IAAKoa,GAAAla,EACLga,WAAY,gBAEhBG,IAAK,CACDra,IAAKsa,GAAApa,EACLga,WAAY,eAEhBK,KAAM,CACFva,IAAKwa,GAAAta,EACLga,WAAY,gBAEhBO,KAAM,CACFza,IAAK0a,GAAAxa,EACLga,WAAY,kBCpDxBS,GAAA,SAAA/hB,GAAA,SAAAgiB,IAAA,IAAA9lB,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAIYD,EAAA+lB,UAAY,EAOZ/lB,EAAAoE,KAAO,SAACG,GAEZ,OADAvE,EAAK+lB,YACEnb,EAAA,cAACb,EAAA,EAAI,CAAC+B,OAAO,wCAChBlB,EAAA,qBAAKC,UAAU,kBACVtG,EAAMyhB,UAAUxhB,IAAI,SAAAvB,GAAK,OAAAjD,EAAKimB,UAAUhjB,EAAEogB,SAAUrjB,EAAKkmB,sBAK9DlmB,EAAAimB,UAAY,SAACE,EAAYzY,GAC7B,OAAO9C,EAAA,qBAAKR,IAAK+b,EAAIhnB,GAAI0L,UAAU,0CAC9BzK,OAAA2J,EAAA,EAAA3J,CAAG+lB,EAAK,SAACre,GACA,IAAA3I,EAAA2I,EAAA3I,GAAIqkB,EAAA1b,EAAA0b,YACV,OAAO5Y,EAAA,cAAAA,EAAA,cACHA,EAAA,qBAAKC,UAAU,iBAAiB6C,QAAS,WAAM,OAAAA,EAAQvO,IACnDmM,MAAO,CAAE8a,OAAQ,oBAAqBC,YAAa,OAAQC,aAAc,SAEzE1b,EAAA,sBAAMC,UAAU,qBACZD,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,gBAAgB0E,UAAU,4BAC3B2Y,SAQxBxjB,EAAAkmB,gBAAkB,SAAOK,GAAe,OAAA/kB,EAAA,EAAAxB,OAAA,sFAE/B,OADbC,KAAKsmB,WAAaA,EACL,GAAMtmB,KAAKoK,WAAWmc,kBAAkBD,kBAAjDE,EAAS/lB,EAAAuB,QAGG,KADRykB,EAAMD,EAAO7mB,QACb,MACA,GAAMK,KAAK0mB,YAAYF,EAAO,GAAGtnB,KAHrC,aAII,OADAuB,EAAAuB,OACA,WAEJ,OAAIykB,EAAM,GACNzmB,KAAK8lB,YACL9lB,KAAK2mB,gBAAgBhc,EAAA,cAACb,EAAA,EAAI,CAAC+B,OAAO,wCAC9BlB,EAAA,qBAAKC,UAAU,kBACV4b,EAAOjiB,IAAI,SAAAvB,GAAK,OAAAjD,EAAKimB,UAAUhjB,EAAEqgB,KAAMtjB,EAAK2mB,kBAGrD,kBAGJ1mB,KAAKmT,UAAUnT,KAAK8lB,WACpB9lB,KAAK4mB,+CAIL7mB,EAAA2mB,YAAc,SAAOG,GAAW,OAAAtlB,EAAA,EAAAxB,OAAA,oFAErB,OADfC,KAAK6mB,OAASA,EACC,GAAM7mB,KAAKoK,WAAW0c,gBAAgBD,kBAAjDE,EAAWtmB,EAAAuB,SACC+kB,EAASpnB,OAAS,GAC9BK,KAAK8lB,YACL9lB,KAAK2mB,gBAAgBhc,EAAA,cAACb,EAAA,EAAI,CAAC+B,OAAO,wCAC9BlB,EAAA,qBAAKC,UAAU,kBACVmc,EAASxiB,IAAI,SAAAvB,GAAK,OAAAjD,EAAKimB,UAAUhjB,EAAEsgB,OAAQvjB,EAAKinB,sBAIzDhnB,KAAKmT,UAAUnT,KAAK8lB,WACpB9lB,KAAK4mB,yBAIL7mB,EAAAinB,cAAgB,SAAOC,GAAa,OAAA1lB,EAAA,EAAAxB,OAAA,uDACxCC,KAAKinB,SAAWA,EAChBjnB,KAAKmT,UAAUnT,KAAK8lB,WACpB9lB,KAAK4mB,uBAGD7mB,EAAA6mB,YAAc,kBAAArlB,EAAA,EAAAxB,OAAA,uEAClB,SAAMC,KAAKoK,WAAWwc,YAAY/B,GAAQC,MAAO9kB,KAAKsmB,WAAYtmB,KAAK6mB,OAAQ7mB,KAAKinB,yBAApFxmB,EAAAuB,mBAER,OAvF8BT,EAAA,EAAAskB,EAAAhiB,GAMpBgiB,EAAA3jB,UAAAgK,KAAN,SAAW5H,qGACS,SAAMtE,KAAKoK,WAAW8c,mBAAmBrC,GAAQC,sBAA7DiB,EAAYtlB,EAAAuB,OAChBhC,KAAKmM,SAASnM,KAAKmE,KAAM,CAAE4hB,UAAWA,cA+E9CF,EAvFA,CAA8B/b,EAAA,GCE9Bqd,GAAA,SAAAtjB,GAAA,SAAAujB,IAAA,IAAArnB,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAmCID,EAAAmnB,mBAAqB,SAAOG,GAAiB,OAAA9lB,EAAA,EAAAxB,OAAA,EAAGsC,QAAO,8DAC5C,SAAMrC,KAAKgE,IAAIsjB,OAAOC,oBAAoBrf,MAAM,CAAEib,QAASkE,YAAlE,SAAO5mB,EAAAuB,cAGXjC,EAAAwmB,kBAAoB,SAAOD,GAAkB,OAAA/kB,EAAA,EAAAxB,OAAA,EAAGsC,QAAO,8DAC5C,SAAMrC,KAAKgE,IAAIsjB,OAAOE,kBAAkBtf,MAAM,CAAEkb,SAAUkD,YAAjE,SAAO7lB,EAAAuB,cAGXjC,EAAA+mB,gBAAkB,SAAOD,GAAc,OAAAtlB,EAAA,EAAAxB,OAAA,EAAGsC,QAAO,8DACtC,SAAMrC,KAAKgE,IAAIsjB,OAAOG,gBAAgBvf,MAAM,CAAEmb,KAAMwD,YAA3D,SAAOpmB,EAAAuB,cAGXjC,EAAA6mB,YAAc,SAAOS,EAAmBf,EAAoBO,EAAiBI,GAAiB,OAAA1lB,EAAA,EAAAxB,OAAA,EAAGsC,QAAO,wEAEnF,UADZqlB,EAAW1nB,KAAKgE,IAAIsjB,OAAMI,SACAte,UAAK9J,EAAW,CAAE6jB,QAASkE,EAAWjE,SAAUkD,EAAYjD,KAAMwD,EAAQvD,OAAQ2D,mBAA7GU,EAAalnB,EAAAuB,OACb4lB,EAAYD,GAAcD,EAAQniB,MAAMoiB,EAAWzoB,IACvDc,KAAK0kB,WAAWkD,eAExB,OArD8BrmB,EAAA,EAAA6lB,EAAAvjB,GA+BVujB,EAAAllB,UAAAiL,cAAhB,uFACInN,KAAKoN,UAAUwY,aAqBvBwB,EArDA,CAA8Bxd,GCE9Bie,GAAA,SAAAhkB,GAAA,SAAAikB,IAAA,IAAA/nB,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAKgBD,EAAAkiB,aAAwB,GAoCpCliB,EAAAiiB,aAAe,kBAAAzgB,EAAA,EAAAxB,OAAA,uDACXC,KAAKoN,UAAUwV,GAAU,CAAEzb,aAAS7H,aAMxCS,EAAA+hB,cAAgB,SAAOiG,GAAkB,OAAAxmB,EAAA,EAAAxB,OAAA,qFAEvB,OADVioB,EAAgBD,EAAY7oB,GAClB,GAAMc,KAAKgE,IAAI+D,SAASkgB,QAAQxlB,KAAKulB,WACjC,OADd7gB,EAAUrG,EAAAkB,OACI,GAAMhC,KAAKF,KAAKmT,YAAYzK,qBAC1B,OADhB0f,EAAcpnB,EAAAkB,OAClBvB,EAAA0G,EAAoB,GAAMnH,KAAKmoB,aAAaD,EAAaF,kBAAzDvnB,EAAQ+iB,UAAY1iB,EAAAkB,OAChB+hB,EAAuB,CAAE5c,QAASA,GACtCnH,KAAKoN,UAAUwV,GAAUmB,aAG7BhkB,EAAAuI,WAAa,SAAOnB,GAAY,OAAA5F,EAAA,EAAAxB,OAAA,+EAG5B,OAFMb,EAAOiI,EAAOjI,GAEpB,GADsBc,KAAKF,KAAImT,YACb3K,WAAWpJ,kBAA7BuB,EAAAuB,OACImF,EAAQqc,WACRxjB,KAAKooB,uBAAkB9oB,IAEvBgb,EAAQta,KAAKiiB,aAAa9e,UAAU,SAAAH,GAAK,OAAAA,EAAE9D,KAAOA,MACzC,GACTc,KAAKiiB,aAAaxgB,OAAO6Y,EAAO,aAGxCva,EAAA8jB,YAAc,SAAO1c,GAAY,OAAA5F,EAAA,EAAAxB,OAAA,yFAEZ,UADJsoB,EAAeroB,KAAKgE,IAAI+D,SAAQkgB,SACV7e,UAAK9J,EAAW6H,WAKnD,OALImhB,EAAa7nB,EAAAuB,OACPumB,EAAiBD,EAAUppB,GACjCspB,EAAaH,EAAY9iB,MAAMgjB,GAGnC,IADMtV,EAAgBjT,KAAKF,KAAImT,aACb9K,WAAWogB,kBAA7B9nB,EAAAuB,OACAhC,KAAKiiB,aAAaziB,KAAKgpB,GACjBtpB,EAAkBiI,EAAOjI,IACb,IADMiI,EAAOqc,WACwB,IAA7BxjB,KAAKiiB,aAAatiB,OAAxC,MACA,GAAMK,KAAKooB,kBAAkBI,WAA7B/nB,EAAAuB,oCAGO1C,IAAPJ,EAAA,MACA,GAAM+T,EAAY3K,WAAWpJ,WAA7BuB,EAAAuB,QACIsY,EAAQta,KAAKiiB,aAAa9e,UAAU,SAAAH,GAAK,OAAAA,EAAE9D,KAAOA,MACzC,GACTc,KAAKiiB,aAAaxgB,OAAO6Y,EAAO,2BAExCta,KAAKyoB,WACDzoB,KAAKqkB,mBACLrkB,KAAK+hB,kBAAkByG,aAM/BzoB,EAAAgiB,kBAAoB,SAAC5a,GACbpH,EAAKskB,oBACLtkB,EAAK0oB,WACL1oB,EAAK2kB,WAAWvd,KAIxBpH,EAAAkjB,YAAc,SAAOxQ,EAAkBvM,EAAc2B,GAAa,OAAAtG,EAAA,EAAAxB,OAAA,EAAGsC,QAAO,8DAEjE,SADQrC,KAAK0oB,KAAKvB,IACH5a,eAAtB,SAAO9L,EAAAuB,gBAEf,OA5G6CT,EAAA,EAAAumB,EAAAjkB,GA0BnCikB,EAAA5lB,UAAAiL,cAAN,SAAoBkX,qGAEM,OADtBrkB,KAAKqkB,kBAAoBA,EACH,GAAMrkB,KAAKF,KAAKmT,YAAYjL,6BAA9C2gB,EAAkBloB,EAAAuB,OACtBhC,KAAKiiB,aAAe0G,EAAgBpkB,IAAI,SAAAvB,GAAK,OAAAA,EAAEmE,UAC/CnH,KAAKoN,UAAUuU,KACX3hB,KAAKqkB,mBAAuBrkB,KAAKiiB,cAA6C,IAA7BjiB,KAAKiiB,aAAatiB,QACnEK,KAAKgiB,yBA3BDzgB,EAAA,GAAXnB,EAAA,sCAuGL0nB,EA5GA,CAA6Cle,GA8G7Cgf,GAAA,SAAA/kB,GAAA,SAAAglB,mDAaA,OAb4CtnB,EAAA,EAAAsnB,EAAAhlB,GACxBglB,EAAA3mB,UAAAimB,aAAhB,SAA6BD,EAAkBF,0BAAwB3lB,QAAO,6CAC1E,YAAoB/C,IAAhB4oB,EAEA,IADMxf,EAAoBwf,EAAWxf,kBACXA,EAAgBxJ,KAAO8oB,GAErD,IAAO,QAGKa,EAAA3mB,UAAAkmB,kBAAhB,SAAkChgB,+FAE9B,SADsBpI,KAAKF,KAAImT,YACbxK,0BAA0BL,kBAA5C3H,EAAAuB,iBAER6mB,EAbA,CAA4ChB,IAe5CiB,GAAA,SAAAjlB,GAAA,SAAAklB,mDAaA,OAb2CxnB,EAAA,EAAAwnB,EAAAllB,GACvBklB,EAAA7mB,UAAAimB,aAAhB,SAA6BD,EAAkBF,0BAAwB3lB,QAAO,6CAC1E,YAAoB/C,IAAhB4oB,EAEA,IADMrf,EAAmBqf,EAAWrf,iBACXA,EAAe3J,KAAO8oB,GAEnD,IAAO,QAGKe,EAAA7mB,UAAAkmB,kBAAhB,SAAkChgB,+FAE9B,SADsBpI,KAAKF,KAAImT,YACbrK,yBAAyBR,kBAA3C3H,EAAAuB,iBAER+mB,EAbA,CAA2ClB,ICjI3CmB,GAAA,SAAAnlB,GAAA,SAAAolB,IAAA,IAAAlpB,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAWYD,EAAAmpB,YAAc,SAACjlB,EAAYqW,GACzB,IAAA6O,EAAAppB,EAAAqK,WAAA+e,gBACAjqB,EAAA+E,EAAA/E,GAAIwiB,EAAAzd,EAAAyd,GAAI0H,EAAAnlB,EAAAmlB,KAAMnlB,EAAAolB,YAAaplB,EAAAqlB,KACjC,OAAO3e,EAAA,qBAAKC,UAAU,6CAA6C6C,QAAS,WAAM,OAAA0b,EAAgBjqB,KAC9FyL,EAAA,yBAAKA,EAAA,sBAAMC,UAAU,oBAAkB,8BAAcD,EAAA,4BAAS+W,IAC9D/W,EAAA,qBAAKC,UAAU,oBAAmBD,EAAA,cAACb,EAAA,EAAQ,CAACsf,KAAMA,OAIlDrpB,EAAAoE,KAAO,WAEX,IAAIolB,EAAO,CAAC,CACRxJ,MAAO,qBACPjU,QAAS,WACL,OAAOnB,EAAA,cAACb,EAAA,EAAI,CAACsH,MAAOrR,EAAKypB,cAAe3c,KAAM,CAAEpC,OAAQ1K,EAAKmpB,aAAe3S,KAAK,0CAErFkT,WAAkC,mBAAtB1pB,EAAK2pB,aACjBjnB,KAAM,kBAAAlB,EAAA,EAAAxB,OAAA,6EAEmB,OADrBC,KAAK0pB,aAAe,iBACpBjpB,EAAAT,KAAqB,GAAMA,KAAKoK,WAAWuf,YAAY3pB,KAAK0pB,6BAA5DjpB,EAAK+oB,cAAgB1oB,EAAAkB,kBAE1B,CACC+d,MAAO,qBACPjU,QAAS,WACL,OAAOnB,EAAA,cAACb,EAAA,EAAI,CAACsH,MAAOrR,EAAK6pB,iBAAkB/c,KAAM,CAAEpC,OAAQ1K,EAAKmpB,aAAe3S,KAAK,0CAExFkT,WAAkC,eAAtB1pB,EAAK2pB,aACjBjnB,KAAM,kBAAAlB,EAAA,EAAAxB,OAAA,6EAEsB,OADxBC,KAAK0pB,aAAe,aACpBjpB,EAAAT,KAAwB,GAAMA,KAAKoK,WAAWuf,YAAY3pB,KAAK0pB,6BAA/DjpB,EAAKmpB,iBAAmB9oB,EAAAkB,kBAE7B,CACC+d,MAAO,qBACPjU,QAAS,WACL,OAAOnB,EAAA,cAACb,EAAA,EAAI,CAACsH,MAAOrR,EAAK8pB,gBAAiBhd,KAAM,CAAEpC,OAAQ1K,EAAKmpB,aAAe3S,KAAK,4DAEvFkT,WAAkC,cAAtB1pB,EAAK2pB,aACjBjnB,KAAM,kBAAAlB,EAAA,EAAAxB,OAAA,6EAEqB,OADvBC,KAAK0pB,aAAe,YACpBjpB,EAAAT,KAAuB,GAAMA,KAAKoK,WAAWuf,YAAY3pB,KAAK0pB,6BAA9DjpB,EAAKopB,gBAAkB/oB,EAAAkB,mBAG/B,OAAO2I,EAAA,cAACb,EAAA,EAAI,CAAC+B,OAAO,2BAAO0d,KAAMA,EAAMO,YAAY,WAE3D,OAvD+BvoB,EAAA,EAAA0nB,EAAAplB,GAMrBolB,EAAA/mB,UAAAgK,KAAN,SAAW5H,+EACPtE,KAAK0pB,aAAeplB,EACpBtE,KAAKmM,SAASnM,KAAKmE,eANX5C,EAAA,GAAXnB,EAAA,uCACWmB,EAAA,GAAXnB,EAAA,0CACWmB,EAAA,GAAXnB,EAAA,yCAmDL6oB,EAvDA,CAA+Bnf,EAAA,GCC/BigB,GAAA,SAAAlmB,GAAA,SAAAmmB,IAAA,IAAAjqB,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAQYD,EAAA+Q,SAAW,SAACjE,EAAWyN,GACrB,IAAAzb,EAAAgO,EAAAhO,KAAMC,EAAA+N,EAAA/N,SAAUC,EAAA8N,EAAA9N,MAAO8N,EAAA7N,SAE7B,OAAO2L,EAAA,qBAAKR,IAAKmQ,EAAO1P,UAAU,wBAC9BD,EAAA,qBAAKC,UAAU,6BACXD,EAAA,qBAAKC,UAAU,eAAcD,EAAA,uBAAIxK,OAAA2J,EAAA,EAAA3J,CAAGtB,KACpC8L,EAAA,qBAAKC,UAAU,yBACXD,EAAA,sBAAMC,UAAU,kBAAiBD,EAAA,mCAAiBvJ,YAAYrC,EAAQD,GAAUuC,QAAQ,KACxFsJ,EAAA,uBAAOC,UAAU,sBAAgBxJ,WAAWrC,EAAMsC,QAAQ,aAAQvC,WAM1EiB,EAAA2d,gBAAkB,SAACC,GACjB,IAAA/e,EAAA+e,EAAA/e,QAASW,EAAAoe,EAAApe,MACXkB,EAAAV,EAAEqK,EAAA3J,EAAA2J,WAAY0G,EAAArQ,EAAAqQ,SAClB,OAAOnG,EAAA,yBACHA,EAAA,qBAAKC,UAAU,gBACXD,EAAA,qBAAKC,UAAU,iBAAiBR,EAAWwT,uBAAuBhf,IAClE+L,EAAA,qBAAKC,UAAU,YACXrL,EAAMgF,IAAI,SAACgK,EAAG+L,GACV,OAAOxJ,EAASvC,EAAG+L,SAO/Bva,EAAAoE,KAAO,SAACF,GAEN,IAIFmc,EAwBAJ,EAAcC,EA5BZgK,EAAAhmB,EAAAgmB,MAAOhqB,EAAAgE,EAAAhE,KACHyhB,GAAJuI,EAAA/qB,GAAI+qB,EAAAvI,IACJrB,GADQ4J,EAAAC,MAAOD,EAAA3V,YAAa2V,EAAAb,KAC5BnpB,EAAAogB,YAAYrhB,EAAAiB,EAAAjB,SAAU0J,EAAAzI,EAAAyI,gBAAiBG,EAAA5I,EAAA4I,eAAgBI,EAAAhJ,EAAAgJ,YAAaC,EAAAjJ,EAAAiJ,YAAa3I,EAAAN,EAAAM,OAAQ0d,EAAAhe,EAAAge,mBAAoBI,EAAApe,EAAAoe,eAC7G6B,EAAAjgB,EAAAigB,WAAYC,EAAAlgB,EAAAkgB,mBAElB,GAAIlC,GAAsBI,EAAgB,CACtC,IAAIC,OAAQ,EAAEC,OAAU,EACpBN,IACAK,EAAW3T,EAAA,qBAAKC,UAAU,2CACtBD,EAAA,qBAAKC,UAAU,cAAY,iBAC3BD,EAAA,qBAAKC,UAAU,0BAAyBD,EAAA,mCAAiBsT,KAG7DI,IACAE,EAAa5T,EAAA,qBAAKC,UAAU,2CACxBD,EAAA,qBAAKC,UAAU,cAAY,iBAC3BD,EAAA,qBAAKC,UAAU,0BAAyBD,EAAA,mCAAiB0T,KAGjE+B,EAAWzV,EAAA,qBAAKC,UAAU,oCACtBD,EAAA,qBAAKC,UAAU,oBAAkB,uBACjCD,EAAA,qBAAKC,UAAU,SACV0T,EACAC,IAMT2B,IACAF,EAAerV,EAAA,cAAAA,EAAA,cACXA,EAAA,qBAAKC,UAAU,0BAAyBD,EAAA,mCAAiBuV,IAEzDC,IACAF,EAAuBtV,EAAA,cAAAA,EAAA,cACnBA,EAAA,qBAAKC,UAAU,0BAAyBD,EAAA,mCAAiBwV,uBAKrE,IAAItU,EAASlB,EAAA,cAAAA,EAAA,2CAAS+W,GACtB,OAAO/W,EAAA,cAACb,EAAA,EAAI,CAAC+B,OAAQA,GACjBlB,EAAA,cAACb,EAAA,EAAI,CAACsH,MAAOiP,EAAYxT,KAAM,CAAEpC,OAAQ1K,EAAK2d,mBAC9C/S,EAAA,qBAAKC,UAAU,oCACXD,EAAA,qBAAKC,UAAU,oBAAkB,6BACjCD,EAAA,qBAAKC,UAAU,SAASzK,OAAA2J,EAAA,EAAA3J,CAAGuI,KAE/BiC,EAAA,qBAAKC,UAAU,oCACXD,EAAA,qBAAKC,UAAU,oBAAkB,6BACjCD,EAAA,qBAAKC,UAAU,SAASzK,OAAA2J,EAAA,EAAA3J,CAAG0I,KAE/B8B,EAAA,qBAAKC,UAAU,oCACXD,EAAA,qBAAKC,UAAU,oBAAkB,6BACjCD,EAAA,qBAAKC,UAAU,SAc/B,SAAyB3B,EAAoBC,GACzC,OAAOyB,EAAA,cAAAA,EAAA,cACFxK,OAAA2J,EAAA,EAAA3J,CAAG8I,EAAakhB,QAAe7qB,EAAW,WAAM,OAAAqL,EAAA,cAAAA,EAAA,iBAAOA,EAAA,yBACvDxK,OAAA2J,EAAA,EAAA3J,CAAG+I,EAAakhB,QAAe9qB,EAAW,WAAM,OAAAqL,EAAA,cAAAA,EAAA,kBAjBjB0f,CAAgBphB,EAAaC,KAEzDyB,EAAA,qBAAKC,UAAU,oCACXD,EAAA,qBAAKC,UAAU,oBAAkB,iBACjCD,EAAA,qBAAKC,UAAU,SAASoV,EAAcC,IAEzCG,EACDzV,EAAA,qBAAKC,UAAU,gCACXD,EAAA,sBAAMC,UAAU,uDAAqCrK,EAAQJ,OAAA2J,EAAA,EAAA3J,CAAGnB,SAIhF,OAxGkCuC,EAAA,EAAAyoB,EAAAnmB,GAExBmmB,EAAA9nB,UAAAgK,KAAN,SAAWjI,+EAEPjE,KAAKmM,SAASnM,KAAKmE,KAAMF,YAoGjC+lB,EAxGA,CAAkClgB,EAAA,GAiHlC,SAASqgB,GAAc1P,GACbA,EAAAvb,GAAA,IAAIoV,EAAAmG,EAAAnG,YACV,OAAO3J,EAAA,cAAAA,EAAA,cAAG2J,GAGd,SAAS8V,GAAc3P,GACbA,EAAAvb,GAAA,IAAI6gB,EAAAtF,EAAAsF,MAAOtF,EAAA6P,MAAO7P,EAAAlT,QAASkT,EAAArT,UAAWqT,EAAA8P,KAAM9P,EAAA+P,UAClD,OAAO7f,EAAA,cAAAA,EAAA,cAAGoV,GCzHd,IAAM0K,GAAiB,CACnB,CAAEvkB,KAAM,KAAMwJ,KAAM,KAAMV,UAAU,GACpC,CAAE9I,KAAM,QAASwJ,KAAM,SAAUV,UAAU,GAC3C,CAAE9I,KAAM,QAASwJ,KAAM,SAAUV,UAAU,GAC3C,CAAE9I,KAAM,UAAWwJ,KAAM,KAAMV,UAAU,GACzC,CAAE9I,KAAM,YAAawJ,KAAM,SAAUV,UAAU,GAC/C,CAAE9I,KAAM,OAAQwJ,KAAM,SAAUV,UAAU,GAC1C,CAAE9I,KAAM,YAAawJ,KAAM,SAAUV,UAAU,IAG7C0b,GAAqB,CACvBtZ,MAAO,CACHlS,GAAI,CAAE4jB,SAAS,GACf/C,MAAO,CACH1O,OAAQ,OAAQG,MAAO,2BAAQ3G,YAAa,eAC5CkY,MAAO,SAAClb,GACJ,OAAQA,GAASA,EAAMlI,OAAS,IAAO,iEAAiBL,IAGhEgrB,MAAO,CACHjZ,OAAQ,OAAQG,MAAO,uCAAU3G,YAAa,eAC9CkY,MAAO,SAAClb,GACJ,GAAIA,EAAO,CAGP,IAFA,IAAI8iB,EAAS,CAAC,oBAAqB,yBAA0B,6BAA8B,gCAAiC,6BAA8B,6BAA8B,kCAAmC,kCAAmC,4BAC1PC,EAAID,EAAOhrB,OACNiD,EAAI,EAAGA,EAAIgoB,EAAGhoB,IACnB,GAAI+nB,EAAO/nB,GAAGqP,KAAKpK,GACf,OAGR,MAAO,kHAInBN,QAAS,CACL8J,OAAQ,OAAQG,MAAO,2BAAQ3G,YAAa,eAC5CkY,MAAO,SAAClb,GACJ,OAAQA,GAASA,EAAMlI,OAAS,IAAO,iEAAiBL,IAGhE8H,UAAW,CACPiK,OAAQ,OAAQG,MAAO,2BAAQ3G,YAAa,eAC5CkY,MAAO,SAAClb,GACJ,OAAIA,IAAU,uCAAuCoK,KAAKpK,GAC/C,wGAEP,IAGZ0iB,KAAM,CACFlZ,OAAQ,OAAQG,MAAO,2BAAQ3G,YAAa,eAC5CkY,MAAO,SAAClb,GACJ,OAAQA,GAASA,EAAMlI,OAAS,IAAO,6EAAmBL,IAGlEkrB,UAAW,CACPnZ,OAAQ,OAAQG,MAAO,2BAAQ3G,YAAa,eAC5CkY,MAAO,SAAClb,GACJ,OAAIA,IAAU,qCAAqCoK,KAAKpK,GAC7C,wGAEP,IAGZxD,OAAQ,CAAEgN,OAAQ,SAAUG,MAAO,kBAIrCqZ,GAAiB,CACnB3rB,IAAI,EACJ6gB,OAAO,EACPuK,OAAO,EACP/iB,SAAS,EACTH,WAAW,EACXmjB,MAAM,EACNC,WAAW,EACXhH,WAAW,GAGTsH,GAAqB,CACvB5rB,IAAI,EACJ6gB,OAAO,EACPuK,OAAO,EACP/iB,SAAS,EACTH,WAAW,EACXmjB,MAAM,EACNC,WAAW,EACXhH,WAAW,GAGTuH,GAAgB,CAClB7rB,IAAI,EACJ6gB,OAAO,EACPuK,OAAO,EACP/iB,SAAS,EACTH,WAAW,EACXmjB,MAAM,EACNC,WAAW,EACXhH,WAAW,GAGTwH,GAAoB,CACtB9rB,IAAI,EACJ6gB,OAAO,EACPuK,OAAO,EACP/iB,SAAS,EACTH,WAAW,EACXmjB,MAAM,EACNC,WAAW,EACXhH,WAAW,GAGfyH,GAAA,SAAApnB,GAAA,SAAAqnB,IAAA,IAAAnrB,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAEgBD,EAAAorB,SAAmB,EAC/BprB,EAAAqrB,QAAkB,GAaVrrB,EAAA6jB,kBAAoB,SAAO1d,EAAcuM,GAAgB,OAAAlR,EAAA,EAAAxB,OAAA,wFACvD2jB,EAASjR,EAAOiR,KAChBzjB,EAASyjB,EAAIzjB,KACforB,EAAU,CACVpiB,YAAajJ,KAAKiJ,YAClBC,YAAajJ,GAEjBD,KAAKsrB,gBAAkBrrB,mBAGnB,gCAAMD,KAAKoK,WAAWmhB,gBAAgBF,kBAAtC5qB,EAAAuB,OACAhC,KAAKorB,QAAU,gFAEfprB,KAAKorB,QAAU,2GAEnBprB,KAAKmrB,SAAU,EACfzM,WAAW,WAAQ3e,EAAKorB,SAAU,GAAU,eAGxCprB,EAAAyrB,cAAgB,kBAAAjqB,EAAA,EAAAxB,OAAA,uEACpB,OAAKC,KAAK0jB,KACV,GAAM1jB,KAAK0jB,KAAKC,YAAY,WADZ,kBAChBljB,EAAAuB,iBAqBIjC,EAAA0rB,mBAAqB,SAACC,GAC1B3rB,EAAKkJ,YAAc0iB,SAASD,EAAM/L,cAAc9X,QAG5C9H,EAAAoE,KAAOhE,OAAAyL,EAAA,EAAAzL,CAAS,WACpB,IAAIyrB,EAAM7rB,EAAK8rB,YAEXC,EAAQ/rB,EAAKorB,QAAWxgB,EAAA,qBAAKC,UAAU,sBAAsBsU,KAAK,SAClEvU,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,qBAAqB0E,UAAU,+BAA+BF,KAAK,OAC3E3K,EAAKqrB,SACA,KACV,OAAOzgB,EAAA,cAACb,EAAA,EAAI,CAAC+B,OAAO,gBAChBlB,EAAA,qBAAKC,UAAU,QACXD,EAAA,qBAAKC,UAAU,qCACXD,EAAA,qBAAKC,UAAU,mCAAiC,6BAChDD,EAAA,qBAAKC,UAAU,mBACXD,EAAA,qBAAKC,UAAU,gCACXD,EAAA,uBAAOC,UAAU,mBAAmB8E,KAAK,QAAQxJ,KAAK,cAAchH,GAAG,SAAS2I,MAAM,IAClF+H,SAAU,SAAC8b,GAAU,OAAA3rB,EAAK0rB,mBAAmBC,IAAQ9L,QAA8B,IAArB7f,EAAKkJ,cACvE0B,EAAA,uBAAOC,UAAU,mBAAmBmhB,QAAQ,UAAQ,+CAExDphB,EAAA,qBAAKC,UAAU,gCACXD,EAAA,uBAAOC,UAAU,mBAAmB8E,KAAK,QAAQxJ,KAAK,cAAchH,GAAG,aAAa2I,MAAM,IACtF+H,SAAU,SAAC8b,GAAU,OAAA3rB,EAAK0rB,mBAAmBC,IAAQ9L,QAA8B,IAArB7f,EAAKkJ,cACvE0B,EAAA,uBAAOC,UAAU,mBAAmBmhB,QAAQ,cAAY,kDAKxEphB,EAAA,qBAAKC,UAAU,gBACVghB,EACDjhB,EAAA,wBAAQ+E,KAAK,SACT9E,UAAU,wBACV6C,QAAS1N,EAAKyrB,eAAa,gBAC9BM,QAIjB,OAhGkCvqB,EAAA,EAAA2pB,EAAArnB,GAMxBqnB,EAAAhpB,UAAAgK,KAAN,SAAW8f,uFACD/iB,EAA6B+iB,EAAW/iB,YAA3BC,EAAgB8iB,EAAW9iB,YAC9ClJ,KAAKiJ,YAAeA,GAAeA,EAAY/J,IAAO,EAClDgK,IACAA,EAAY+iB,SACZjsB,KAAKsrB,gBAAkB/pB,EAAA,KAAK2H,EAAYhC,MAE5ClH,KAAKmM,SAASnM,KAAKmE,eA6Bf+mB,EAAAhpB,UAAA2pB,UAAR,eAAA9rB,EAAAC,KACQksB,EAAsC,IAArBlsB,KAAKiJ,YAAoB4hB,GAAiBC,GAC3DqB,EAAqC,IAArBnsB,KAAKiJ,YAAoB8hB,GAAgBC,GAM7D,OALAP,GAAOjnB,QAAQ,SAAAnE,GACL,IAAA+R,EAAAsZ,GAAAtZ,MACN/R,EAAE2P,SAAWkd,EAAe7sB,EAAE6G,MAC9BkL,EAAM/R,EAAE6G,MAAM4c,QAAUqJ,EAAc9sB,EAAE6G,QAErCyE,EAAA,cAACb,EAAA,EAAI,CAACuE,IAAK,SAAArL,GAAK,OAAAjD,EAAK2jB,KAAO1gB,GAAG4H,UAAU,OAC5CmH,OAAQ0Y,GACRzZ,SAAU0Z,GACV1Y,SAAUhS,KAAKsrB,gBACfhH,cAAetkB,KAAK4jB,kBACpBW,eAAgB,KArDZhjB,EAAA,GAAXnB,EAAA,iCAsCWmB,EAAA,GAAXnB,EAAA,qCAwDL8qB,EAhGA,CAAkCphB,EAAA,GCjHlCsiB,GAAA,SAAAvoB,GAAA,SAAAwoB,mDAiDA,OAjDkC9qB,EAAA,EAAA8qB,EAAAxoB,GA0BxBwoB,EAAAnqB,UAAAiL,cAAN,SAAoB6e,EAAkB3H,+EAClCrkB,KAAKqkB,kBAAoBA,EACzBrkB,KAAKoN,UAAU6d,GAAce,YAG3BK,EAAAnqB,UAAAqpB,gBAAN,SAAsBF,6GAEG,OADfpiB,EAAwCoiB,EAAOpiB,YAAlCC,EAA2BmiB,EAAOniB,YAAPmiB,EAAO7H,UAChC,GAAMxjB,KAAKgE,IAAIsjB,OAAOgF,YAAYljB,UAAK9J,EAAW4J,WASvE,OATIqjB,EAAiB9rB,EAAAuB,OAEXwqB,EAAqBD,EAAcrtB,GACzCutB,EAAa,CACbxjB,YAAajJ,KAAKgE,IAAIsjB,OAAOoF,YAAYnnB,MAAM0D,GAC/CC,YAAalJ,KAAKgE,IAAIsjB,OAAOgF,YAAY/mB,MAAMinB,IAInD,GADsBxsB,KAAKF,KAAImT,YACbnK,kBAAkB2jB,EAAWxjB,YAAawjB,EAAWvjB,4BAAvEzI,EAAAuB,OAEIhC,KAAKqkB,oBACLrkB,KAAKyoB,WACLzoB,KAAK0kB,WAAW+H,cAG5BJ,EAjDA,CAAkCziB,GCAlC+iB,GAAA,SAAA9oB,GAAA,SAAA+oB,IAAA,IAAA7sB,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAWYD,EAAA8sB,YAAc,kBAAAtrB,EAAA,EAAAxB,OAAA,6EAElB,OADIkhB,EAASjhB,KAAK8sB,YAAYjlB,OAGpB,GAAM7H,KAAKoK,WAAWyiB,YAAY5L,IADxC,WAEJ,OADUxgB,EAAAuB,QAEN,KAAM,EACFhC,KAAK+sB,KAAO,+GACZ,MACJ,KAAK,EACD/sB,KAAK+sB,KAAO,eACZ,MACJ,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACD/sB,KAAK+sB,KAAO,mJACZ,MACJ,KAAK,EACD/sB,KAAK+sB,KAAO,2IAOhBhtB,EAAAoE,KAAOhE,OAAAyL,EAAA,EAAAzL,CAAS,WACpB,IAAI6sB,EAASriB,EAAA,cAAAA,EAAA,eAOb,OANI5K,EAAKgtB,OACLC,EAASriB,EAAA,qBAAKC,UAAU,sBAAsBsU,KAAK,SAC/CvU,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,qBAAqB0E,UAAU,+BAA+BF,KAAK,OAC3E3K,EAAKgtB,OAGPpiB,EAAA,cAACb,EAAA,EAAI,CAAC+B,OAAO,kCAChBlB,EAAA,qBAAKC,UAAU,iBACXD,EAAA,qBAAKC,UAAU,sBACXD,EAAA,qBAAKC,UAAU,kCAAgC,uBAC/CD,EAAA,qBAAKC,UAAU,0BACXD,EAAA,uBAAO0D,IAAK,SAAArL,GAAK,OAAAjD,EAAK+sB,YAAc9pB,GAAG0M,KAAK,SAAS9E,UAAU,mBAGvED,EAAA,qBAAKC,UAAU,YACXD,EAAA,qBAAKC,UAAU,UACXD,EAAA,wBAAQC,UAAU,wBAAwB6C,QAAS1N,EAAK8sB,aAAW,kBAG1EG,QAIjB,OA9DiCzrB,EAAA,EAAAqrB,EAAA/oB,GAIvB+oB,EAAA1qB,UAAAgK,KAAN,SAAW5H,+EAIPtE,KAAKmM,SAASnM,KAAKmE,eALX5C,EAAA,GAAXnB,EAAA,8BA2DLwsB,EA9DA,CAAiC9iB,EAAA,GCDjCmjB,GAAA,SAAAppB,GAAA,SAAAqpB,IAAA,IAAAntB,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAEID,EAAA8sB,YAAc,SAAO5L,GAAc,OAAA1f,EAAA,EAAAxB,OAAA,iFAGR,OADjByG,EAAoBxG,KAAKF,KAAKmT,YAAWzM,gBACxB,GAAMxG,KAAKgE,IAAImpB,UAAUC,eAAe/oB,OAAO,CAAE2Z,KAAMiD,EAAQlZ,SAAUvB,GAAmBA,EAAgBtH,aAMnI,OANImuB,EAAmB5sB,EAAAuB,OAEX,KADRsrB,EAAMD,EAAiB3uB,UAEvBsB,KAAK0kB,WAAW2I,GAChBrtB,KAAKmT,aAET,GAAOma,WAMf,OAjB6B/rB,EAAA,EAAA2rB,EAAArpB,GAcTqpB,EAAAhrB,UAAAiL,cAAhB,SAA8B7I,+EAC1BtE,KAAKoN,UAAUuf,aAEvBO,EAjBA,CAA6BtjB,GCcvB2jB,GAAkB,GAClBC,GAA+B,IAErCC,GAAA,SAAA5pB,GAAA,SAAA6pB,IAAA,IAAA3tB,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAGgBD,EAAA0e,UAAmB,IAAI8B,GACvBxgB,EAAAge,WAAkB,GAQtBhe,EAAA4tB,oBAAsB,SAAOjtB,GAAsB,OAAAa,EAAA,EAAAxB,OAAA,4FACjDkT,EAAgBjT,KAAKF,KAAImT,YAC/BjT,KAAKye,UAAU5X,QAAUoM,EAAY/T,GACrCc,KAAK4tB,oBAC+BtuB,IAAhC2T,EAAYzM,kBACZxG,KAAKye,UAAU1W,SAAWkL,EAAYzM,gBAAgBtH,SAGnBI,IAAnCU,KAAKye,UAAU/V,gBAAf,OACAjI,EAAAT,KAAKye,UAA4B,GAAMze,KAAK6tB,qCAA5CptB,EAAeiI,gBAAkBolB,EAAA9rB,oCAGC1C,IAAlCU,KAAKye,UAAU5V,eAAf,OACA/H,EAAAd,KAAKye,UAA2B,GAAMze,KAAK+tB,oCAA3CjtB,EAAe+H,eAAiBilB,EAAA9rB,oCAGD1C,IAA/BU,KAAKye,UAAUxV,YAAf,OACAxD,EAAAzF,KAAKye,UAAwB,GAAMze,KAAKguB,iCAAxCvoB,EAAewD,YAAc6kB,EAAA9rB,oCAGE1C,IAA/BU,KAAKye,UAAUvV,YAAf,OACAsP,EAAAxY,KAAKye,UAAwB,GAAMze,KAAKiuB,iCAAxCzV,EAAetP,YAAc4kB,EAAA9rB,oCAGf1C,IAAdoB,GAA2BA,EAAUf,OAAS,IAC9CK,KAAKye,UAAUzf,SAAW0B,EAAU,GAAGnB,MAAM,GAAGP,SAChDgB,KAAKye,UAAU4B,WAAa3f,EAAU6D,IAAI,SAACgV,EAAce,GACrD,IAAIzN,EAAO,IAAIsU,GAGf,OAFAtU,EAAKjO,QAAU2a,EAAQ3a,QACvBiO,EAAKtN,MAAQga,EAAQha,MAAM8D,OAAO,SAAAL,GAAK,OAAAA,EAAElE,SAAW,IAC7C+N,IAIX7M,KAAKye,UAAUyB,WAAaqN,GACxBvtB,KAAKye,UAAU6B,cAAgBkN,KAC/BxtB,KAAKye,UAAU0B,oBAAwC,EAAnBoN,eA4ChDxtB,EAAA4e,YAAc,kBAAApd,EAAA,EAAAxB,OAAA,iFAGQ,OAFZsgB,EAAergB,KAAKye,UAAS4B,WAEjB,GAAMrgB,KAAKgE,IAAIC,MAAMuc,MAAMpX,KAAK,QAASpJ,KAAKye,UAAUoC,0BAC1E,OADIniB,EAAc+B,EAAAuB,OAClB,GAAMhC,KAAKgE,IAAIC,MAAMuc,MAAM0N,OAAOxvB,EAAOQ,GAAIR,EAAO4qB,KAAM5qB,EAAOwrB,MAAO,yBAAxEzpB,EAAAuB,OAEIsC,EAAiD,GACrD+b,EAAW7c,QAAQ,SAAAnE,GACfA,EAAEE,MAAMiE,QAAQ,SAAAR,GACZsB,EAAM9E,KAAK,CAAEsD,UAAWzD,EAAET,QAAQM,GAAI6D,OAAQC,EAAEnE,KAAKK,SAG9Cc,KAAKF,KAAI6N,KACnBrK,eAAegB,GAGpBwF,EAAA,EAAIS,MAAMvK,KAAKF,KAAKwK,QACpBtK,KAAKoN,UAAUkU,GAAc5iB,aAGjCqB,EAAA6e,wBAA0B,kBAAArd,EAAA,EAAAxB,OAAA,6EAEL,SADHC,KAAK0oB,KAAKE,IACOrc,MAAY,kBAAvCic,EAAa/nB,EAAAuB,OACjBhC,KAAKye,UAAU/V,gBAAkB8f,YAGrCzoB,EAAA8e,uBAAyB,kBAAAtd,EAAA,EAAAxB,OAAA,6EAEJ,SADHC,KAAK0oB,KAAKI,IACOvc,MAAY,kBAAvCic,EAAa/nB,EAAAuB,OACjBhC,KAAKye,UAAU5V,eAAiB2f,YAGpCzoB,EAAAif,aAAe,kBAAAzd,EAAA,EAAAxB,OAAA,6EAEE,SADCC,KAAK0oB,KAAKuE,IACG1gB,KAAUvM,KAAKye,UAAUwC,uBAAhDA,EAASxgB,EAAAuB,QAET,GAAMhC,KAAK6sB,YAAY5L,IADvB,aACAxgB,EAAAuB,wCAORjC,EAAA8sB,YAAc,SAAO5L,GAAW,OAAA1f,EAAA,EAAAxB,OAAA,iHAEtBb,EAA4D+hB,EAAM/hB,GAA9D8e,EAAwDiD,EAAMjD,KAAxDvF,EAAkDwI,EAAMxI,SAA9CyF,EAAwC+C,EAAM/C,aAAhCC,EAA0B8C,EAAM9C,aAAlBC,EAAY6C,EAAM7C,aAC3D9e,IAAT0e,GAAkC,IAAZI,GAAiB,IAAIxc,KAAKuc,GAAcgQ,UAAYvsB,KAAKC,OAC/E7B,KAAKye,UAAUwC,OAAS/hB,EACxBc,KAAK+d,WAAakD,EACdxI,QAGmBnZ,KADb+gB,EAAergB,KAAKye,UAAS4B,aACHA,EAAW1gB,OAAS,GAC5CyuB,EAA+B,GACnC/N,EAAW7c,QAAQ,SAAAnE,GACf+uB,EAAS5uB,KAAKO,EAAKiE,IAAIpF,QAAQyvB,WAAWnmB,MAAM,CAAEtJ,QAASS,EAAET,QAAQM,GAAI+Z,YAAa,OAExE,GAAM5W,QAAQ0U,IAAIqX,KARxC,OAHJ,aAYQ,IADIE,EAAc7tB,EAAAuB,SACCssB,EAAY3uB,OAAS,EAAG,CAEvC,IADIse,EAAqB,aAChBrb,GAIL,IAHA,IAAIke,EAAKT,EAAWzd,GACdhE,EAAAkiB,EAAAliB,QAASW,EAAAuhB,EAAAvhB,MACXgvB,EAAiBD,EAAY1rB,cACxBgoB,GACL,IAAI7J,EAAKxhB,EAAMqrB,GACX4D,EAAkBD,EAAenvB,KACjC,SAAAmP,GAAK,OAAAA,EAAE3P,QAAQM,KAAON,EAAQM,IAC1BqP,EAAE1P,KAAKK,KAAO6hB,EAAGliB,KAAKK,IACF,IAApBqP,EAAE4K,eACF5K,EAAE6K,WAAaxX,KAAKC,QAC5B,IAAKysB,gBACLrQ,IAAyF,EAAnElI,KAAKC,IAAI+K,EAAGhiB,MAAQyvB,EAAWA,WAAYzN,EAAGhiB,MAAQ0Z,IARvEmS,EAAI,EAAGA,EAAIrrB,EAAMI,OAAQirB,IAAG,gBAA5BA,WAJJhoB,EAAI,EAAGA,EAAIyd,EAAW1gB,OAAQiD,MAA9BA,GAoBT5C,KAAKye,UAAUR,mBAAqBlI,KAAK0D,MAAMwE,oBAIvDC,IACAle,KAAKye,UAAUJ,gBAAiC,EAAhBH,GAGpCle,KAAKye,UAAUyB,WAAaqN,GACxBvtB,KAAKye,UAAU6B,cAAgBkN,KAC/BxtB,KAAKye,UAAU0B,oBAAwC,EAAnBoN,qCAOhDxtB,EAAA6tB,aAAe,WACX7tB,EAAK0e,UAAUwC,YAAS3hB,EACxBS,EAAKge,WAAa,GAClBhe,EAAK0e,UAAUR,mBAAqB,EACpCle,EAAK0e,UAAUJ,eAAiB,GAOpCte,EAAA0uB,aAAe,SAAOvE,GAAa,OAAA3oB,EAAA,EAAAxB,OAAA,uDAE/BC,KAAKoN,UAAU4b,GAAWkB,YAM9BnqB,EAAA4pB,YAAc,SAAOO,GAAa,OAAA3oB,EAAA,EAAAxB,OAAA,8EAEtBmqB,OACC,iCAGA,4CAFM,SAAMlqB,KAAKgE,IAAIC,MAAMyqB,kBAAkBxmB,WAAM5I,WAApD,SAAOwB,EAAAkB,eAGA,SAAMhC,KAAKgE,IAAIC,MAAMuc,MAAMmO,cAASrvB,EAAW,GAAI,YAA1D,SAAOwB,EAAAkB,eAGA,SAAMhC,KAAKgE,IAAIC,MAAMuc,MAAMmO,SAAS,IAAK,GAAI,YAApD,SAAO7tB,EAAAkB,cAQnBjC,EAAAgf,kBAAoB,kBAAAxd,EAAA,EAAAxB,OAAA,uFAOC,OANb6uB,EAAe5uB,KAAK0oB,KAAK0D,IACzB3rB,EAA+BT,KAAKye,UAAlCxV,EAAWxI,EAAAwI,YAAEC,EAAWzI,EAAAyI,YAC1B8iB,EAAc,CACd/iB,YAAaA,EACbC,YAAaA,GAEA,GAAM0lB,EAAariB,KAAUyf,GAAa,kBAAvD6C,EAAa/tB,EAAAkB,OACjBhC,KAAKye,UAAUxV,YAAc4lB,EAAW5lB,YACxCjJ,KAAKye,UAAUvV,YAAc2lB,EAAW3lB,sBAG5CnJ,EAAAopB,gBAAkB,SAAO2F,GAAe,OAAAvtB,EAAA,EAAAxB,OAAA,2FAExB,SAAMC,KAAKgE,IAAIC,MAAMuc,MAAMuO,SAASD,WAA5C7qB,EAAQnD,EAAAkB,OACN/B,EAASgE,EAAKhE,KACdihB,EAAejhB,EAAIihB,WACrB8N,EAAoBxwB,EAAe0iB,GACnC+N,EAAgB,IAAItX,EAA0B3X,KAAKF,MAC9C8C,EAAI,0BAAGA,EAAIosB,EAAkBrvB,QAC9BmD,EAAYksB,EAAkBpsB,GAAGhE,QAAQM,GAC7CuB,EAAAuuB,EAAkBpsB,GAAa,GAAMqsB,EAAcxsB,KAAKK,KAFhB,aAExCrC,EAAqB7B,QAAUkC,EAAAkB,+BAFWY,wBAI9C3C,EAAKogB,WAAa2O,EAClBhvB,KAAKoN,UAAU2c,GAAc9lB,aAGjClE,EAAA+e,WAAa,kBAAAvd,EAAA,EAAAxB,OAAA,uEAET,SADcC,KAAKF,KAAIovB,IACbC,sCAAV1uB,EAAAuB,iBAGJjC,EAAAgR,mBAAqB,SAAClS,GAElB,OADMkB,EAAAD,KAAAuK,SACU0G,mBAAmBlS,IAGvCkB,EAAA6d,uBAAyB,SAAChf,GAEtB,OADMmB,EAAAD,KAAAuK,SACUwG,kBAAkBjS,MAE1C,OA3Q4B2C,EAAA,EAAAmsB,EAAA7pB,GAMR6pB,EAAAxrB,UAAAiL,cAAhB,SAA8B7I,qGAE1B,OADIqJ,EAAOrJ,EACX,GAAMtE,KAAK2tB,oBAAoBhgB,kBAA/BlN,EAAAuB,OACAhC,KAAKoN,UAAU+P,cA4CLuQ,EAAAxrB,UAAAktB,kBAAd,+GACI,OAAIpvB,KAAKqvB,eAAgB,GAAOrvB,KAAKqvB,iBAC/Bpc,EAAgBjT,KAAKF,KAAImT,YACxBxS,EAAAT,KAAsB,GAAMiT,EAAYzK,sBAA/C,SAAO/H,EAAK4uB,eAAiBvuB,EAAAkB,QAAkC,UAIrD0rB,EAAAxrB,UAAAotB,WAAd,kCAA4BjtB,QAAO,oEAC/B,OAAsB,OAAlBrC,KAAKuvB,SAAmB,SACNjwB,IAAlBU,KAAKuvB,SAAwB,GAAOvvB,KAAKuvB,UAE5B,GADKvvB,KAAKF,KAAImT,YACIjL,sBACnC,YAAmB1I,KADfkwB,EAAa/uB,EAAAuB,SACqC,IAAtBwtB,EAAW7vB,QACvCK,KAAKuvB,SAAW,KAChB,KAEJ,GAAOvvB,KAAKuvB,SAAWC,EAAW,GAAGroB,eAG3BumB,EAAAxrB,UAAA2rB,0BAAd,+GACyB,SAAM7tB,KAAKovB,mCAA5BC,EAAiBvuB,EAAAkB,QACdvB,EAAA4uB,EAAe3mB,iBAAf,MAAkC,GAAM1I,KAAKsvB,uBAAXxuB,EAAAkB,wBAAzC,SAAAvB,SAGUitB,EAAAxrB,UAAA6rB,yBAAd,+GACyB,SAAM/tB,KAAKovB,mCAA5BC,EAAiBvuB,EAAAkB,QACdvB,EAAA4uB,EAAexmB,gBAAf,MAAiC,GAAM7I,KAAKsvB,uBAAXxuB,EAAAkB,wBAAxC,SAAAvB,SAGUitB,EAAAxrB,UAAA8rB,sBAAd,uGACyB,SAAMhuB,KAAKovB,4BAChC,SADqB3uB,EAAAuB,OACCiH,mBAGZykB,EAAAxrB,UAAA+rB,sBAAd,uGACyB,SAAMjuB,KAAKovB,4BAChC,SADqB3uB,EAAAuB,OACCkH,mBAtFd3H,EAAA,GAAXnB,EAAA,mCACWmB,EAAA,GAAXnB,EAAA,oCAuQLstB,EA3QA,CAA4B9jB,GCTf6lB,GAAkC,CAC3CC,SAAU,SACVC,aAAc,WACdC,WAAY,UAGHC,GAAgC,CACzCzQ,SAAU,UACVsQ,SAAU,SACVC,aAAc,WACdC,WAAY,UAGhBE,GAAA,SAAAjsB,GAAA,SAAAksB,IAAA,IAAAhwB,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAEYD,EAAAiwB,cAAgB,SAAOC,EAAqBC,EAAa/K,GAAkB,OAAA5jB,EAAA,EAAAxB,OAAA,uEAC/E,SAAMC,KAAKoK,WAAW+lB,aAAaF,EAAgBC,EAAQ/K,kBAA3D1kB,EAAAuB,iBAGIjC,EAAAqwB,mBAAqB,SAACvjB,EAAWqjB,GAC/B,IAAAhqB,EAAA2G,EAAA3G,KAAMmqB,EAAAxjB,EAAAwjB,SACNC,EADgBzjB,EAAAgQ,gBAChB3d,GACFuB,EAAAokB,GAAAI,aAAAqL,GAAErlB,EAAAxK,EAAAwK,IAAKka,EAAA1kB,EAAA0kB,WACX,OAAOxa,EAAA,qBAAKC,UAAU,gBAAgBT,IAAKjE,GACvCyE,EAAA,qBAAKC,UAAU,2BAA2B6C,QAAS,WAAM,OAAA1N,EAAKiwB,cAAcnjB,OAAMvN,EAAW6lB,KACzFxa,EAAA,qBAAKC,UAAU,OAAOK,IAAKA,EAAKG,IAAKlF,EAAMmF,MAAO,CAAEC,OAAQ,SAAUC,MAAO,YAC7EZ,EAAA,uBAAIzE,IAERyE,EAAA,qBAAKC,UAAU,GACXS,MAAO,CAAEklB,aAAc,QAEvB5lB,EAAA,qBAAKC,UAAU,kBACVylB,EAAS9rB,IAAI,SAAAvB,GAAK,OAAAjD,EAAKywB,kBAAkBxtB,EAAG6J,EAAMsY,SAM3DplB,EAAAywB,kBAAoB,SAAC3jB,EAAWqjB,EAAaO,GAC3C,IAAAvqB,EAAA2G,EAAA3G,KAAMmqB,EAAAxjB,EAAAwjB,SAAUK,EAAA7jB,EAAA6jB,MACtB,OAAO/lB,EAAA,qBAAKR,IAAKjE,EACb0E,UAAU,yCACV6C,QAAS,WAAM,OAAA1N,EAAKiwB,cAAcnjB,EAAMqjB,EAAQO,KAChD9lB,EAAA,qBAAKC,UAAU,YACXS,MAAO,CAAE8a,OAAQ,oBAAqBC,YAAa,OAAQC,aAAc,SAEzE1b,EAAA,qBAAKU,MAAOokB,IACR9kB,EAAA,sBAAMC,UAAU,qBACZD,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,uBAAuB0E,UAAW6lB,YACnCvqB,IAGfyqB,GAAoBN,EAAUK,MASnC3wB,EAAA+L,QAAU3L,OAAAyL,EAAA,EAAAzL,CAAS,WACnB,IAAAM,EAAAV,EAAAqK,WAAEwmB,EAAAnwB,EAAAmwB,WAAYnwB,EAAAowB,YAClB,OAAOlmB,EAAA,cAAAA,EAAA,cAAGimB,EAAWrsB,IAAI,SAAAvB,GAAK,OAAAjD,EAAKqwB,mBAAmBptB,OAAG1D,UAUjE,OA5DmCiC,EAAA,EAAAwuB,EAAAlsB,GA4C/BksB,EAAA7tB,UAAAuI,OAAA,SAAOnG,GACH,OAAOqG,EAAA,cAAC3K,KAAK8L,QAAO,OAShBikB,EAAA7tB,UAAA4uB,WAAR,SAAmBC,GACT,IACA7xB,EADA6xB,EAAAlU,gBACA3d,GAEN,OADA8xB,QAAQC,IAAI/xB,GACLyL,EAAA,qBAAKR,IAAKjL,GAAKA,IAE9B6wB,EA5DA,CAAmCjmB,EAAA,GA+D5B,SAAS6mB,GAAoBvf,EAAYsf,GAC5C,OAAO/lB,EAAA,qBAAKC,UAAU,6BAA6BS,MAAOwkB,IACpC,IAAjBze,EAAMzR,OAAegL,EAAA,cAAAA,EAAA,uDAAW+lB,EAAQ,IAAO,QAAUA,GAAYtf,EAAM7M,IAAI,SAAAvB,GAAK,OAAAA,EAAEkD,OAAMgrB,KAAK,QCpF1G,IAAAC,GAAA,SAAAttB,GAAA,SAAAutB,IAAA,IAAArxB,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAOYD,EAAAsxB,YAAc,SAACC,GAEnB,OAAO3mB,EAAA,qBAAKC,UAAU,QAAOD,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,sBAA0BorB,EAAYprB,OAGxEnG,EAAAiwB,cAAgB,SAAOsB,EAAkBpB,EAAa/K,GAAkB,OAAA5jB,EAAA,EAAAxB,OAAA,uEAC5E,SAAMC,KAAKoK,WAAW+lB,aAAamB,EAAapB,EAAQ/K,kBAAxD1kB,EAAAuB,iBAGIjC,EAAAwxB,WAAa,SAAC1kB,EAAWqjB,GAC7B,OAAOvlB,EAAA,qBAAA6mB,cAAiB,cACpB7mB,EAAA,oBAAIC,UAAU,cACTzK,OAAA2J,EAAA,EAAA3J,CAAG0M,EAAM9M,EAAK0xB,mBAMnB1xB,EAAA0xB,eAAiB,SAAChX,EAAayV,GACnC,YAAe5wB,IAAXmb,QAAmDnb,IAA3Bmb,EAAOoC,gBACxBlS,EAAA,cAAAA,EAAA,eACJA,EAAA,cAAAA,EAAA,cACFxK,OAAA2J,EAAA,EAAA3J,CAAGsa,EAAOoC,gBAAgBqT,OAAQnwB,EAAK0xB,gBACxC9mB,EAAA,oBAAIC,UAAU,kBAAkB6C,QAAS,WAAM,OAAA1N,EAAKiwB,cAAcvV,OAAQnb,EAAW,MAAMmb,EAAOvU,QAIlGnG,EAAAqwB,mBAAqB,SAACvjB,EAAWqjB,EAAa/K,GAC5CtY,EAAAgQ,gBAAA,IAAiB3W,EAAA2G,EAAA3G,KAAMmqB,EAAAxjB,EAAAwjB,SAC7B,OAAO1lB,EAAA,qBAAKC,UAAU,gBAAgBT,IAAKjE,GACvCyE,EAAA,qBAAKC,UAAU,2BAA2B6C,QAAS,WAAM,OAAA1N,EAAKiwB,cAAcnjB,EAAMqjB,EAAQ/K,KACtFxa,EAAA,uBAAIzE,IAERyE,EAAA,qBAAKC,UAAU,GACXS,MAAO,CAAEklB,aAAc,QAEvB5lB,EAAA,qBAAKC,UAAU,kBACVylB,EAAS9rB,IAAI,SAAAvB,GAAK,OAAAjD,EAAKywB,kBAAkBxtB,EAAG6J,EAAMsY,SAM3DplB,EAAAywB,kBAAoB,SAAC3jB,EAAWqjB,EAAa/K,GAC3C,IAAAjf,EAAA2G,EAAA3G,KAAMmqB,EAAAxjB,EAAAwjB,SAAUK,EAAA7jB,EAAA6jB,MACtB,OAAO/lB,EAAA,qBAAKR,IAAKjE,EACb0E,UAAU,yCACV6C,QAAS,WAAM,OAAA1N,EAAKiwB,cAAcnjB,EAAMqjB,EAAQ/K,KAChDxa,EAAA,qBAAKC,UAAU,iBACXS,MAAO,CAAE8a,OAAQ,oBAAqBC,YAAa,OAAQC,aAAc,SAEzE1b,EAAA,qBAAKU,MAAOokB,IACR9kB,EAAA,sBAAMC,UAAU,qBACZD,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,uBAAuB0E,UAAWua,YACnCjf,IAGfyqB,GAAoBN,EAAUK,MAKnC3wB,EAAAoE,KAAO,SAACutB,GAEN,IACF7lB,EADE9L,EAAAqK,WAAAtK,KAAA0V,MACa/J,qBACfgK,EAAY1V,EAAKqK,WAAWtK,KAAK4V,MAAMlC,kBAErC3G,EAAA6kB,gBAAqBxB,EAAAwB,EAAAxB,OAAQ/K,EAAAuM,EAAAvM,WACnC,OAAOxa,EAAA,cAACb,EAAA,EAAI,CAAC+B,OAAQA,EAAQL,MAAOiK,GAC/B1V,EAAKqwB,mBAAmBvjB,EAAMqjB,EAAQ/K,OAGnD,OAhF+B5jB,EAAA,EAAA6vB,EAAAvtB,GAErButB,EAAAlvB,UAAAgK,KAAN,SAAWwlB,+EAEP1xB,KAAKmM,SAASnM,KAAKmE,KAAMutB,YA4EjCN,EAhFA,CAA+BtnB,EAAA,GCD/B6nB,GAAA,SAAA9tB,GAAA,SAAA+tB,IAAA,IAAA7xB,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAGgBD,EAAA6wB,WAAoB,GACpB7wB,EAAA8wB,YAAqB,GAgBjC9wB,EAAAkN,eAAiB,WACb,OAAOlN,EAAKgN,WAAW+iB,OA4B/B,OAjDsCvuB,EAAA,EAAAqwB,EAAA/tB,GAM5B+tB,EAAA1vB,UAAAiL,cAAN,SAAoB7I,kHAEF,OADV7D,EAA0CT,KAAKF,KAA7C4Y,EAAkBjY,EAAAiY,mBAAEC,EAAelY,EAAAkY,gBAC3B,GAAM3Y,KAAKgE,IAAIpF,QAAQizB,gBAAgBC,MAAM,CAAE7Y,YAAaP,EAAmBxZ,GAAI0a,SAAUjB,EAAgBzZ,oBAAvH2a,EAAU/Y,EAAAkB,OACdhC,KAAK4wB,WAAa/W,EAAQ0C,MAC1Bvc,KAAK4wB,WAAWptB,QAAQ,SAAA+V,GACpBxZ,EAAKgyB,gBAAgBxY,EAASM,EAAQmY,OAAQnY,EAAQoY,mBAaxDL,EAAA1vB,UAAAgwB,oBAAN,SAA0BC,yGAEf,OADH1xB,EAA0CT,KAAKF,KAA7C4Y,EAAkBjY,EAAAiY,mBAAEC,EAAelY,EAAAkY,gBAClC,GAAM3Y,KAAKgE,IAAIpF,QAAQwzB,oBAAoBN,MAAM,CAAE5B,OAAQiC,EAAkBlZ,YAAaP,EAAmBxZ,GAAI0a,SAAUjB,EAAgBzZ,aAAlJ,SAAO4B,EAAAkB,cAGL4vB,EAAA1vB,UAAA6vB,gBAAN,SAAsB9B,EAAqBoC,EAAoBC,0FAC3DD,EAAc7uB,QAAQ,SAAM+V,GAAO,OAAAhY,EAAA,EAAAxB,OAAA,uDAC/BwZ,EAAQ8W,SAAWiC,EAAejvB,OAAO,SAAAL,GAAK,OAAAA,EAAEktB,SAAW3W,EAAQsD,gBAAgB3d,eAEvF+wB,EAAeI,SAAWgC,EAAchvB,OAAO,SAAAL,GAAK,OAAAA,EAAEktB,SAAWD,EAAepT,gBAAgB3d,cAG9F0yB,EAAA1vB,UAAAiuB,aAAN,SAAmBuB,EAAoBxB,EAAa/K,2GAIlC,OAFRtI,EAA0B6U,EAAa7U,gBAAtB3W,EAASwrB,EAAaxrB,KACnC0W,EAAsBC,EAAe3d,GACjC,GAAMc,KAAKkyB,oBAAoBtV,kBAChB,KADzB/C,EAAUpZ,EAAAuB,QACFua,MAAM5c,OAAd,OACAK,KAAK+xB,gBAAgBL,EAAe7X,EAAQ0C,MAAO1C,EAAQmY,QAC3DhyB,KAAKoN,UAAU+jB,GAAW,CAAEO,cAAaA,EAAExB,OAAMA,EAAE/K,WAAUA,kBAG7D,SADmBnlB,KAAKF,KAAIuK,SACboS,iBAAiB,CAAEG,kBAAiBA,EAAE1W,KAAIA,YAAzDzF,EAAAuB,wCA3CIT,EAAA,GAAXnB,EAAA,oCACWmB,EAAA,GAAXnB,EAAA,qCA6CLwxB,EAjDA,CAAsChoB,YCChC2oB,GAAgC,CAClChnB,MAAO,OACPD,OAAQ,QACRknB,gBAAiB,eAAOrnB,EAAG,IAC3BsnB,eAAgB,UAChBC,gBAAiB,wBACjBC,QAAS,IACTC,SAAU,YAGdC,GAAA,SAAAhvB,GAAA,SAAAivB,IAAA,IAAA/yB,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YACYD,EAAAgzB,sBAAwBpoB,EAAA,YAmBxB5K,EAAA+L,QAAU3L,OAAAyL,EAAA,EAAAzL,CAAS,WACnB,IAAAM,EAAAV,EAAAqK,WAAEtK,EAAAW,EAAAX,KAAMkzB,EAAAvyB,EAAAuyB,OACZ,QAAe1zB,IAAX0zB,EACA,OAAOroB,EAAA,cAAAA,EAAA,eACL,IAAAsI,EAAAnT,EAAAmT,YACAggB,EAAAD,EAAAC,mBAAoBC,EAAAF,EAAAE,MACrBA,IAAOA,EAAQ,GAEpB,IAAIC,EAAKxoB,EAAA,cAACb,EAAA,EAAK,CAACc,UAAU,iBAAiBK,IAAKgI,EAAY7M,OACxDgtB,EAAazoB,EAAA,qBAAKC,UAAU,gCAAcqoB,GAE1CI,EAAY1oB,EAAA,qBAAKC,UAAU,iCAAiCS,MAAO,CAAEunB,SAAU,aAC/EjoB,EAAA,qBAAKC,UAAU,uBAAuBS,MAAO,CAAEunB,SAAU,cACzDjoB,EAAA,qBAAKC,UAAU,mDAAmDS,MAAOknB,KACzE5nB,EAAA,qBAAKC,UAAU,+DAA+DS,MAAO,CAAEunB,SAAU,aAC7FjoB,EAAA,qBAAKC,UAAU,oBAAkB,kBACjCD,EAAA,qBAAKC,UAAU,cAAcS,MAAO,CAAE+T,SAAU,SAAW8T,KAM/DI,GAFa3oB,EAAA,mBAAGC,UAAU,MAAI,4BAChBD,EAAA,mBAAGC,UAAU,oDAA4BD,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,iBAChDyE,EAAA,cAAAA,EAAA,cAAEA,EAAA,mBAAGC,UAAU,WAAS,KAAMD,EAAA,cAACb,EAAA,EAAK,uBACpDypB,EAAW5oB,EAAA,cAAAA,EAAA,cAAEA,EAAA,mBAAGC,UAAU,WAAWsoB,GAAUvoB,EAAA,cAACb,EAAA,EAAK,sBAErD0pB,EAAY7oB,EAAA,mDACZ8oB,EAAa9oB,EAAA,mBAAGC,UAAU,oDAA4BD,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,iBACtDyE,EAAA,qBAAKC,UAAU,oCACxBD,EAAA,cAACb,EAAA,EAAG,CAACkB,KAAMwoB,EAAWhoB,MAAOioB,IAC7B9oB,EAAA,cAACb,EAAA,EAAG,CAACc,UAAU,QACXD,EAAA,mBAAGC,UAAU,WAAS,KACtBD,EAAA,cAACb,EAAA,EAAK,sBAEVa,EAAA,cAACb,EAAA,EAAG,CAACkB,KAAMsoB,EAAe9nB,MAAO+nB,IACjC5oB,EAAA,cAACb,EAAA,EAAG,KACAa,EAAA,uBAAO+E,KAAK,OAAO9E,UAAU,eAAeyD,IAAKtO,EAAKgzB,wBACtDpoB,EAAA,wBAAQ+E,KAAK,SAAS9E,UAAU,kBAAkB6C,QAAS,WAAM,OAAA1N,EAAK2zB,6BAA0B,oCAIxG,OAAO/oB,EAAA,yBACHA,EAAA,cAACb,EAAA,EAAG,CAACc,UAAU,uCACXI,KAAMmoB,EAAI3nB,MAAO4nB,GACjBzoB,EAAA,uBAAIsI,EAAY/M,OAEnBmtB,OAIb,OArE6B9xB,EAAA,EAAAuxB,EAAAjvB,GAGnBivB,EAAA5wB,UAAAgK,KAAN,SAAW5H,uFAIXwuB,EAAA5wB,UAAAuI,OAAA,SAAOuoB,GAEH,OAAOroB,EAAA,cAAC3K,KAAK8L,QAAO,OAGhBgnB,EAAA5wB,UAAAwxB,yBAAR,WACI,IAAI1V,EAAOhe,KAAK+yB,sBAAsBY,QAAQ9rB,MAC1CmW,IAEA3Z,EADMrE,KAAAoK,WAAAwpB,aACC5V,IAqDnB8U,EArEA,CAA6BhpB,EAAA,GCJ7B+pB,GAAA,SAAAhwB,GAAA,SAAAiwB,IAAA,IAAA/zB,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YA2CYD,EAAAiT,cAAgB,kBAAAzR,EAAA,EAAAxB,OAAA,uEAEpB,OADA+J,EAAA,EAAIiqB,MACJ,GAAM/zB,KAAKmN,mBAAc7N,kBAAzBmB,EAAAuB,iBAGJjC,EAAA0K,OAAStK,OAAAyL,EAAA,EAAAzL,CAAS,WACd,OAAIJ,EAAKuC,eACkBhD,IAAhBS,EAAKizB,OAAuBroB,EAAA,cAACb,EAAA,EAAO,MAAM/J,EAAKgN,WAAW8lB,IAE1DloB,EAAA,qBACHC,UAAU,sEACVD,EAAA,qBAAKC,UAAU,cACfD,EAAA,wBAAQC,UAAU,wBACd6C,QAAS,WAAM,OAAA3D,EAAA,EAAIwJ,UAAUvT,EAAKiT,eAAe,KACjDrI,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,WAAWwE,KAAK,8BAE7BC,EAAA,qBAAKC,UAAU,cACfD,EAAA,qBAAKC,UAAU,iBAK3B7K,EAAAmN,IAAM,WAEF,OADAnN,EAAKyK,QACEG,EAAA,cAAC5K,EAAK0K,OAAM,SAa3B,OAhF6BlJ,EAAA,EAAAuyB,EAAAjwB,GA2BTiwB,EAAA5xB,UAAAiL,cAAhB,SAA8B7I,wHAEtBtE,KAAKsC,WACA0wB,EAAUhzB,KAAKgE,IAAGgvB,OACbgB,EAAkBh0B,KAAKgG,KAAI9G,IACjCwa,EAA+B,IAC1Bla,KAAKwzB,EAAOiB,aAAa5vB,OAAO,KACzCqV,EAASla,KAAKwzB,EAAOkB,kBAAkBhsB,MAAM,CAAEisB,SAAUH,KACzDta,EAASla,KAAKwzB,EAAOkB,kBAAkBhsB,MAAM,CAAE8qB,OAAQgB,KAC1C,GAAM3xB,QAAQ0U,IAAI2C,KAP/B,aAOIhb,EAASoC,EAAAkB,OACTvB,EAAkB/B,EAAO,GAAvBsf,EAAIvd,EAAAud,KAAEkV,EAAKzyB,EAAAyyB,MACjBlzB,KAAKm0B,SAAWz1B,EAAO,GACvBsB,KAAKgzB,OAAS,CAAEC,mBAAoBjV,EAAMkV,MAAOA,EAAOkB,KAAM11B,EAAO,GAAIy1B,SAAUz1B,EAAO,qCA+BlGo1B,EAAA5xB,UAAA0xB,YAAA,SAAY5V,GACR,GAAIA,IAIKhe,KAAKm0B,SACAn0B,KAAAgG,KAAA9G,IAxENqC,EAAA,GAAXnB,EAAA,gCA4EL0zB,EAhFA,CAA6BlqB,uBC6D7ByqB,GAAA,SAAAxwB,GAAA,SAAAywB,mDAaA,OAb2B/yB,EAAA,EAAA+yB,EAAAzwB,GACvBywB,EAAApyB,UAAAuI,OAAA,WAEI,OAAOE,EAAA,cAACb,EAAA,EAAI,CAAC+B,OAAO,iCAAQL,MADhB,MAERb,EAAA,qBAAKC,UAAU,gBACXD,EAAA,qBAAKC,UAAU,yBAAyBK,IAAKC,EAAAC,IAC7CR,EAAA,qBAAKC,UAAU,4BACXD,EAAA,sBAAMC,UAAU,qBAAmB,mCAEvCD,EAAA,cAAC4pB,GAAAppB,EAAa,CAACP,UAAU,OAAO4pB,OA9EhC,goJA8EiDC,YAAY,OAI7EH,EAbA,CAA2B3pB,EAAA,WC/D3B+pB,GAAA,SAAA7wB,GAsBI,SAAA8wB,EAAY9gB,GAAZ,IAAA9T,EACI8D,EAAA0I,KAAAvM,KAAM6T,IAAM7T,KAjBRD,EAAAgS,OAAuB,CAC3B,CAAE7L,KAAM,OAAQwJ,KAAM,UACtB,CAAExJ,KAAM,OAAQwJ,KAAM,UAElB3P,EAAAiR,SAAqB,CACzBI,MAAO,CACHjL,KAAM,CAAEkL,OAAQ,OAAQG,MAAO,eAAM3G,YAAa,0DAClDzE,KAAM,CAAEiL,OAAQ,QAASG,MAAO,kBAuChCzR,EAAA60B,cAAgB,SAAO7lB,EAAwB8lB,EAAeC,GAAa,OAAAvzB,EAAA,EAAAxB,OAAA,6EAE/E,OADMmG,EAAS6I,EAAU7I,KACzB,GAAM4D,EAAA,EAAQirB,YAAY7uB,EAAM2uB,kBAAhCp0B,EAAAuB,OACAhC,KAAKC,KAAKiG,GAAQ2uB,EAClB/qB,EAAA,EAAI9D,KAAKE,GAAQ2uB,EACjB/qB,EAAA,EAAIkrB,0BAGAj1B,EAAAk1B,iBAAmB,SAAOlmB,EAAwB8lB,EAAeC,GAAa,OAAAvzB,EAAA,EAAAxB,OAAA,6EAGlF,OAFMmG,EAAS6I,EAAU7I,KACzBlG,KAAKk1B,YAAYhvB,GAAQ2uB,EACzB,GAAM70B,KAAKoK,WAAWjB,cAAcnJ,KAAKk1B,4BAAzCz0B,EAAAuB,iBAGIjC,EAAAo1B,wBAA0B,SAAOpmB,EAAwB8lB,EAAeC,GAAa,OAAAvzB,EAAA,EAAAxB,OAAA,6EAGzF,OAFMmG,EAAS6I,EAAU7I,KACzBlG,KAAKo1B,mBAAmBlvB,GAAQ2uB,EAChC,GAAM70B,KAAKoK,WAAWf,qBAAqBrJ,KAAKo1B,mCAAhD30B,EAAAuB,iBAGIjC,EAAAoE,KAAO,WACP,IAAA1D,EAAAV,EAAEgS,EAAAtR,EAAAsR,OAAQf,EAAAvQ,EAAAuQ,SAAU/Q,EAAAQ,EAAAR,KAAM20B,EAAAn0B,EAAAm0B,cAAeM,EAAAz0B,EAAAy0B,YAAaD,EAAAx0B,EAAAw0B,iBAAkBG,EAAA30B,EAAA20B,mBAAoBD,EAAA10B,EAAA00B,wBAAyB/qB,EAAA3J,EAAA2J,WACzH,OAAOO,EAAA,cAACb,EAAA,EAAI,CAAC+B,OAAO,4BAChBlB,EAAA,cAACb,EAAA,EAAI,CAACiI,OAAQA,EAAQf,SAAUA,EAC5B/Q,KAAMA,EACN20B,cAAeA,IACnBjqB,EAAA,cAACb,EAAA,EAAI,CAACiI,OAAQsjB,GAAerkB,SAAUskB,GACnCr1B,KAAMi1B,EACNN,cAAeK,IACnBtqB,EAAA,cAACb,EAAA,EAAI,CAACiI,OAAQwjB,GAAsBvkB,SAAUwkB,GAAuBprB,EAAW6Y,aAC5EhjB,KAAMm1B,EACNR,cAAeO,MA3DnB,IAAA10B,EAAAqJ,EAAA,EAAA9D,KAAEG,EAAA1F,EAAA0F,KAAMC,EAAA3F,EAAA2F,KACZrG,EAAKE,KAAO,CACRkG,KAAMA,EACNC,KAAMA,GAGJ,IACFtF,EADEf,EAAAqK,WAAAtK,KACFmT,YAAEvM,EAAA5F,EAAA4F,UAAWI,EAAAhG,EAAAgG,OAAQC,EAAAjG,EAAAiG,WAAYJ,EAAA7F,EAAA6F,iBAAkBK,EAAAlG,EAAAkG,eAAgBI,EAAAtG,EAAAsG,UACjEX,EAAA3F,EAAA2F,OAAQY,EAAAvG,EAAAuG,MAAOC,EAAAxG,EAAAwG,IAAKG,EAAA3G,EAAA2G,QAASF,EAAAzG,EAAAyG,QAASC,EAAA1G,EAAA0G,qBAC5CzH,EAAKm1B,YAAc,CACfxuB,UAAWA,EACXI,OAAQA,EACRC,WAAYA,EACZJ,iBAAkBA,EAClBK,eAAgBA,GAGpBjH,EAAKq1B,mBAAqB,CACtBhuB,UAAWA,EACXX,OAAQA,EACRY,MAAOA,EACPC,IAAKA,EACLC,QAASA,EACTC,cAAeA,EACfC,QAASA,KAsCrB,OAtFgClG,EAAA,EAAAozB,EAAA9wB,GAEtB8wB,EAAAzyB,UAAAgK,KAAN,SAAW5H,+EACPtE,KAAKmM,SAASnM,KAAKmE,eAaX5C,EAAA,GAAXnB,EAAA,8BAEWmB,EAAA,GAAXnB,EAAA,qCAEWmB,EAAA,GAAXnB,EAAA,4CAkELu0B,EAtFA,CAAgC7qB,EAAA,GAwFnBurB,GAA8B,CACvC,CAAEnvB,KAAM,YAAawJ,KAAM,SAAUV,UAAU,GAC/C,CAAE9I,KAAM,SAAUwJ,KAAM,UACxB,CAAExJ,KAAM,aAAcwJ,KAAM,UAC5B,CAAExJ,KAAM,mBAAoBwJ,KAAM,SAAUV,UAAU,GACtD,CAAE9I,KAAM,iBAAkBwJ,KAAM,WAGvB4lB,GAA4B,CACrClkB,MAAO,CACH1K,UAAW,CACP2K,OAAQ,OAAQG,MAAO,2BACvB3G,YAAa,6gBACbkY,MAAOL,IAEX5b,OAAQ,CAAEuK,OAAQ,QAASG,MAAO,eAAMtR,KAAM,CAAC,CAAE2H,MAAO,IAAKkY,MAAO,UAAO,CAAElY,MAAO,IAAKkY,MAAO,WAAQpQ,aAAc,GACtH5I,WAAY,CAAEsK,OAAQ,OAAQG,MAAO,eAAMuR,MnBrE5C,SAA8Blb,GACjC,OAAQA,GAASA,EAAMlI,OAAS,IAAO,iEAAiBL,ImBqEpDqH,iBAAkB,CAAE0K,OAAQ,OAAQG,MAAO,2BAAQuR,MAAON,IAC1Dzb,eAAgB,CAAEqK,OAAQ,OAAQG,MAAO,2BAAQuR,MnB3ElD,SAAkClb,GACrC,OAAQA,GAASA,EAAMlI,OAAS,IAAO,6EAAmBL,MmB+EjDi2B,GAAqC,CAC9C,CAAErvB,KAAM,YAAawJ,KAAM,UAC3B,CAAExJ,KAAM,SAAUwJ,KAAM,SAAUV,UAAU,GAC5C,CAAE9I,KAAM,QAASwJ,KAAM,UACvB,CAAExJ,KAAM,MAAOwJ,KAAM,SAAUV,UAAU,GACzC,CAAE9I,KAAM,UAAWwJ,KAAM,KAAMV,UAAU,GACzC,CAAE9I,KAAM,gBAAiBwJ,KAAM,SAAUV,UAAU,GACnD,CAAE9I,KAAM,UAAWwJ,KAAM,SAAUV,UAAU,IAG1C,SAASwmB,GAAuBvS,GAAvC,IAAAljB,EAAAC,KACI,MAAO,CACHoR,MAAO,CACHhK,UAAW,CAAEiK,OAAQ,OAAQG,MAAO,2BAAQuR,MAAOZ,IACnD1b,OAAQ,CAAE4K,OAAQ,OAAQG,MAAO,qBAAOuR,MAAOX,IAC/C/a,MAAO,CAAEgK,OAAQ,OAAQG,MAAO,QAASuR,MAAOV,GAAiBxX,YAAa,SAC9EvD,IAAK,CAAE+J,OAAQ,OAAQG,MAAO,eAAMuR,MAAOT,IAC3C/a,QAAS,CACL8J,OAAQ,KAAMG,MAAO,2BACrBwR,OAAQ,SAAOvQ,EAAkBvM,EAAc2B,GAAa,OAAAtG,EAAA,EAAAxB,OAAA,2BAAAwB,EAAA,EAAAvB,KAAA,SAAAS,0BAAK,SAAMwiB,EAAYxQ,EAASvM,EAAM2B,WAAjC,SAAApH,EAAAuB,cACjEsP,QAAS,SAAC/J,GACN,OAAOpH,OAAA2J,EAAA,EAAA3J,CAAGoH,EAAS,SAAC2b,GACV,IAAAC,EAAAD,EAAAC,QAASC,EAAAF,EAAAE,SAAUC,EAAAH,EAAAG,KAAMC,EAAAJ,EAAAI,OAE/B,OAAO3Y,EAAA,cAAAA,EAAA,mBACUrL,IAAZ6jB,QAAwC7jB,IAAf6jB,EAAQjkB,IAAoBiB,OAAA2J,EAAA,EAAA3J,CAAGgjB,EAAS,SAAAngB,GAAK,OAAA2H,EAAA,cAAAA,EAAA,cAAG3H,EAAEugB,oBAC9DjkB,IAAb8jB,QAA0C9jB,IAAhB8jB,EAASlkB,IAAoBiB,OAAA2J,EAAA,EAAA3J,CAAGijB,EAAU,SAACpgB,GAAM,OAAA2H,EAAA,cAAAA,EAAA,cAAG3H,EAAEugB,oBACvEjkB,IAAT+jB,QAAkC/jB,IAAZ+jB,EAAKnkB,IAAoBiB,OAAA2J,EAAA,EAAA3J,CAAGkjB,EAAM,SAACrgB,GAAM,OAAA2H,EAAA,cAAAA,EAAA,cAAG3H,EAAEugB,oBACzDjkB,IAAXgkB,QAAsChkB,IAAdgkB,EAAOpkB,IAAoBiB,OAAA2J,EAAA,EAAA3J,CAAGmjB,EAAQ,SAACtgB,GAAM,OAAA2H,EAAA,cAAAA,EAAA,cAAG3H,EAAEugB,iBAEhF,WACC,OAAO5Y,EAAA,uBAAOC,UAAU,cAAY,sCAIhDpD,cAAe,CAAE6J,OAAQ,OAAQG,MAAO,2BAAQuR,MAAOR,IACvD9a,QAAS,CAAE4J,OAAQ,OAAQG,MAAO,eAAMuR,MAAOP,MCtJ3D,IAAAiT,GAAA,SAAA5xB,GAAA,SAAA6xB,IAAA,IAAA31B,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAUYD,EAAA41B,MAAQ,WAAM,OAAA7rB,EAAA,EAAItK,KAAKmL,EAAA,cAAC0pB,GAAK,QAE7Bt0B,EAAA61B,eAAiB,kBAAAr0B,EAAA,EAAAxB,OAAA,uEACrB,SAAM+J,EAAA,EAAI8rB,gCAAVn1B,EAAAuB,iBAGIjC,EAAA81B,gBAAkB,kBAAAt0B,EAAA,EAAAxB,OAAA,uDACtBC,KAAKoK,WAAWyrB,2BAGZ91B,EAAA+1B,YAAc,kBAAAv0B,EAAA,EAAAxB,OAAA,uDAClBC,KAAKoK,WAAW0rB,uBAGZ/1B,EAAAg2B,OAAS51B,OAAAyL,EAAA,EAAAzL,CAAS,WAChB,IAAA6F,EAAA8D,EAAA,EAAA9D,KACN,QAAa1G,IAAT0G,EAAoB,OAAO,KACzB,IAAA9G,EAAA8G,EAAA9G,GAAIgH,EAAAF,EAAAE,KAAMC,EAAAH,EAAAG,KAAMC,EAAAJ,EAAAI,KACtB,OAAOuE,EAAA,cAACb,EAAA,EAAG,CAACc,UAAU,4BAClBI,KAAML,EAAA,cAACb,EAAA,EAAK,CAACc,UAAU,iBAAiBK,IAAK7E,IAC7CoF,MAAOb,EAAA,cAACb,EAAA,EAAE,CAACc,UAAU,iBAAiB1E,KAAK,gBAC3CuH,QAAS,WACL1N,EAAKqN,UAAUsnB,MAEnB/pB,EAAA,yBACIA,EAAA,yBAkGhB,SAAkBzE,EAAcC,GAC5B,OAAOA,EACHwE,EAAA,cAAAA,EAAA,cAAEA,EAAA,uBAAIxE,WAAawE,EAAA,uBAAOC,UAAU,SAAS1E,KAC3CyE,EAAA,uBAAIzE,GArGQ8vB,CAAS9vB,EAAMC,IACrBwE,EAAA,qBAAKC,UAAU,SAAQD,EAAA,sBAAMC,UAAU,cAAY,WAAa1L,EAAK,IAAQA,EAAK+2B,OAAO/2B,EAAK,KAAO6U,OAAO,QAKhHhU,EAAAm2B,YAAc,WAEZ,IAAAzH,EAAA1uB,EAAAqK,WAAAqkB,aACN,OAAO9jB,EAAA,qBAAKC,UAAU,4CAClBD,EAAA,qBAAKC,UAAU,wCAAwC6C,QAAS,WAAM,OAAAghB,EAAa,oBAC/E9jB,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,cAAc0E,UAAU,oBACjCD,EAAA,kDAEJA,EAAA,qBAAKC,UAAU,wCAAwC6C,QAAS,WAAM,OAAAghB,EAAa,gBAC/E9jB,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,cAAc0E,UAAU,oBACjCD,EAAA,kDAEJA,EAAA,qBAAKC,UAAU,wCAAwC6C,QAAS,WAAM,OAAAghB,EAAa,eAC/E9jB,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,cAAc0E,UAAU,oBACjCD,EAAA,sDA2EhB,OAlIyBpJ,EAAA,EAAAm0B,EAAA7xB,GAEf6xB,EAAAxzB,UAAAgK,KAAN,SAAW5H,uFAIHoxB,EAAAxzB,UAAAi0B,KAAR,WACIrsB,EAAA,EAAIssB,cAqDRV,EAAAxzB,UAAAuI,OAAA,WACY,IAWJlH,EAXIyC,EAAA8D,EAAA,EAAA9D,KACJqwB,EAAoB,CACpB,GACA,CACI3mB,KAAM,YACN4mB,UAAW3rB,EAAA,cAACb,EAAA,EAAQ,CAACysB,UAAU,iBAAiBnwB,KAAK,UAAUowB,KAAK,mCACpE/oB,QAASzN,KAAK21B,OAElB,IAIJ,QAAar2B,IAAT0G,GACAzC,EAAO8yB,GACF72B,KACD,CACIkQ,KAAM,YACN4mB,UAAW3rB,EAAA,wBAAQC,UAAU,6BAA6B6C,QAAS,WAAM,OAAA3D,EAAA,EAAIwJ,eAAUhU,GAAW,KAC9FqL,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,WAAWwE,KAAK,oCAKpC,CACD,IAAI+rB,EAAqB,CACrB,GACA,CACI/mB,KAAM,YACNgnB,GAAI,GACJJ,UAAW3rB,EAAA,wBAAQC,UAAU,uBAAuB6C,QAASzN,KAAKm2B,MAC9DxrB,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,WAAWwE,KAAK,uCAKrCnH,EAAO,CACH,GACA,CACImM,KAAM,YACN4mB,UAAW3rB,EAAA,cAAC3K,KAAK+1B,OAAM,OAE3B,GACA,CACIrmB,KAAM,YACN4mB,UAAW3rB,EAAA,cAAC3K,KAAKk2B,YAAW,OAEhC,GACA,CACIxmB,KAAM,YACN4mB,UAAW3rB,EAAA,cAACb,EAAA,EAAQ,CAACysB,UAAU,iBAAiBnwB,KAAK,iBAAiBowB,KAAK,6BAC3E/oB,QAASzN,KAAK61B,iBAElB,GACA,CACInmB,KAAM,YACN4mB,UAAW3rB,EAAA,cAACb,EAAA,EAAQ,CAACysB,UAAU,iBAAiBnwB,KAAK,iBAAiBowB,KAAK,6BAC3E/oB,QAASzN,KAAK81B,aAElB,GACA,CACIpmB,KAAM,YACN4mB,UAAW3rB,EAAA,cAACb,EAAA,EAAQ,CAACysB,UAAU,iBAAiBnwB,KAAK,MAAMowB,KAAK,6BAChE/oB,QAASzN,KAAK41B,kBAGjBp2B,KAAIkF,MAATnB,EAAa8yB,EAASM,OAAKF,IAE/B,OAAO9rB,EAAA,cAACb,EAAA,EAAQ,CAACvG,KAAMA,EAAMkX,OAAQ,MAE7Cib,EAlIA,CAAyB5rB,EAAA,GCFzB,IAAA8sB,GAAA,SAAA/yB,GASI,SAAAgzB,EAAYhjB,GAAZ,IAAA9T,EACI8D,EAAA0I,KAAAvM,KAAM6T,IAAM7T,KAmBRD,EAAAk1B,iBAAmB,SAAOlmB,EAAwB8lB,EAAeC,GAAa,OAAAvzB,EAAA,EAAAxB,OAAA,6EAGlF,OAFMmG,EAAS6I,EAAU7I,KACzBlG,KAAKk1B,YAAYhvB,GAAQ2uB,EACzB,GAAM70B,KAAKoK,WAAWjB,cAAcnJ,KAAKk1B,4BAAzCz0B,EAAAuB,iBAGIjC,EAAAo1B,wBAA0B,SAAOpmB,EAAwB8lB,EAAeC,GAAa,OAAAvzB,EAAA,EAAAxB,OAAA,6EAGzF,OAFMmG,EAAS6I,EAAU7I,KACzBlG,KAAKo1B,mBAAmBlvB,GAAQ2uB,EAChC,GAAM70B,KAAKoK,WAAWf,qBAAqBrJ,KAAKo1B,mCAAhD30B,EAAAuB,iBAGIjC,EAAAoE,KAAO,WACX,OAAOwG,EAAA,cAACb,EAAA,EAAI,CAAC+B,OAAO,gEAChBlB,EAAA,qBAAKC,UAAU,4BAA4BsU,KAAK,SAC5CvU,EAAA,cAACb,EAAA,EAAE,CAAC5D,KAAK,qBAAqB0E,UAAU,oCAAoCF,KAAK,8lBAE9CC,EAAA,sBAAMC,UAAU,eAAa,kCAEpED,EAAA,cAACb,EAAA,EAAI,CAACiI,OAAQsjB,GAAerkB,SAAUskB,GACnCr1B,KAAMF,EAAKm1B,YACXN,cAAe70B,EAAKk1B,mBACxBtqB,EAAA,cAACb,EAAA,EAAI,CAACiI,OAAQwjB,GAAsBvkB,SAAUwkB,GAAuBz1B,EAAKqK,WAAW6Y,aACjFhjB,KAAMF,EAAKq1B,mBACXR,cAAe70B,EAAKo1B,0BACxBxqB,EAAA,qBAAKC,UAAU,gBACXD,EAAA,wBAAQ+E,KAAK,SAAS9E,UAAU,wBAAwB6C,QAAS,WAAM,OAAA1N,EAAK0oB,aAAU,qCA3CxF,IACFhoB,EADEV,EAAAqK,WAAAtK,KACFmT,YAAEvM,EAAAjG,EAAAiG,UAAWI,EAAArG,EAAAqG,OAAQC,EAAAtG,EAAAsG,WAAYJ,EAAAlG,EAAAkG,iBAAkBK,EAAAvG,EAAAuG,eAAgBI,EAAA3G,EAAA2G,UAAWX,EAAAhG,EAAAgG,OAAQY,EAAA5G,EAAA4G,aAC1FtH,EAAKm1B,YAAc,CACfxuB,UAAWA,EACXI,OAAQA,EACRC,WAAYA,EACZJ,iBAAkBA,EAClBK,eAAgBA,GAGpBjH,EAAKq1B,mBAAqB,CACtBhuB,UAAWA,EACXX,OAAQA,EACRY,MAAOA,KAkCnB,OA3D0C9F,EAAA,EAAAs1B,EAAAhzB,GAEhCgzB,EAAA30B,UAAAgK,KAAN,SAAW5H,+EACPtE,KAAKmM,SAASnM,KAAKmE,eAGX5C,EAAA,GAAXnB,EAAA,qCACWmB,EAAA,GAAXnB,EAAA,4CAoDLy2B,EA3DA,CAA0C/sB,EAAA,GCM1CgtB,GAAA,SAAAjzB,GAAA,SAAAkzB,IAAA,IAAAh3B,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YA0BID,EAAAmN,IAAM,WAAM,OAAAnN,EAAKgN,WAAW0oB,KAE5B11B,EAAA0uB,aAAe,SAAOvE,GAAa,OAAA3oB,EAAA,EAAAxB,OAAA,uEAE/B,SADiBC,KAAKF,KAAIyT,OACbkb,aAAavE,kBAA1BzpB,EAAAuB,iBAGJjC,EAAA81B,gBAAkB,kBAAAt0B,EAAA,EAAAxB,OAAA,uEAEd,SADkBC,KAAK0oB,KAAKE,IACVpe,OAAM,kBAAxB/J,EAAAuB,iBAGJjC,EAAA+1B,YAAc,kBAAAv0B,EAAA,EAAAxB,OAAA,iFAGW,OAFjB6uB,EAAe5uB,KAAK0oB,KAAK0D,IAER,GADCpsB,KAAKF,KAAImT,YACQzK,4BAAnC6mB,EAAiB5uB,EAAAuB,OAEjBgqB,EAAcnU,EAAA1M,EAAE6rB,KAAK3H,EAAgB,CAAC,cAAe,gBACzDT,EAAapkB,MAAMwhB,aAGvBjsB,EAAAovB,qBAAuB,kBAAA5tB,EAAA,EAAAxB,OAAA,uEACnB,SAAMC,KAAKoN,UAAUwpB,mBAArBn2B,EAAAuB,iBAGJjC,EAAAkjB,YAAc,SAAOxQ,EAAkBvM,EAAc2B,GAAa,OAAAtG,EAAA,EAAAxB,OAAA,EAAGsC,QAAO,8DAEjE,SADQrC,KAAK0oB,KAAKvB,IACH5a,eAAtB,SAAO9L,EAAAuB,gBAEf,OAvDyBT,EAAA,EAAAw1B,EAAAlzB,GAYLkzB,EAAA70B,UAAAiL,cAAhB,+FAIM4pB,EAAA70B,UAAAiH,cAAN,SAAoBtC,+FAEhB,SADsB7G,KAAKF,KAAImT,YACb9J,cAActC,kBAAhCpG,EAAAuB,iBAGE+0B,EAAA70B,UAAAmH,qBAAN,SAA2BC,+FAEvB,SADsBtJ,KAAKF,KAAImT,YACb5J,qBAAqBC,kBAAvC7I,EAAAuB,iBAgCR+0B,EAvDA,CAAyBntB,GCFnBqtB,GAAQ,SAACpkB,GAAsB,OAAa,IAAbA,EAAoB,eAAiB,cAE1EqkB,GAAA,SAAArzB,GAAA,SAAAszB,IAAA,IAAAp3B,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAIID,EAAA0K,OAAS,SAACnG,GACF,IAAA7D,EAAAV,EAAAqK,WAAEoL,EAAA/U,EAAA+U,MAAgBE,GAATjV,EAAA22B,QAAS32B,EAAAiV,OAAOwZ,EAAAzuB,EAAAyuB,IAAKvhB,EAAAlN,EAAAkN,KAC9B0pB,EAAW,CACX,CAAEnxB,KAAM,OAAQsL,MAAO,eAAMpL,KAAM,OAAQ0F,QAAS0J,EAAMtI,IAAKoqB,YAAQh4B,GAEvE,CAAE4G,KAAM,OAAQsL,MAAO,qBAAOpL,KAAM,gBAAiB0F,QAAS4J,EAAMxI,IAAKoqB,OAAQ3pB,EAAKtN,OACtF,CAAE6F,KAAM,KAAMsL,MAAO,eAAMpL,KAAM,OAAQ0F,QAASojB,EAAIhiB,MACxD3I,IAAI,SAAAvB,GACI,IAAAkD,EAAAlD,EAAAkD,KAAMsL,EAAAxO,EAAAwO,MAAOpL,EAAApD,EAAAoD,KACnB,MAAO,CACHF,KAAMA,EACN4W,QAAS,SAACjK,GAAsB,OAAA1S,OAAA2J,EAAA,EAAA3J,CAAoBqR,EAAOpL,EAAM6wB,GAAMpkB,KACvE/G,QAJqB9I,EAAA8I,QAKrBwrB,OAL8Bt0B,EAAAs0B,UAQtC,OAAO3sB,EAAA,cAACb,EAAA,EAAI,CAAC+B,QAAQ,GACjBlB,EAAA,cAACb,EAAA,EAAI,CAACyf,KAAM8N,QAGxB,OAxB2B91B,EAAA,EAAA41B,EAAAtzB,GACjBszB,EAAAj1B,UAAAgK,KAAN,SAAW5H,+EACPtE,KAAKmM,SAASnM,KAAKyK,iBAsB3B0sB,EAxBA,CAA2BrtB,EAAA,GCG3BytB,GAAA,SAAA1zB,GAAA,SAAA2zB,mDAsEA,OAtE0Bj2B,EAAA,EAAAi2B,EAAA3zB,GAkBZ2zB,EAAAt1B,UAAAwmB,KAAV,SAAkChZ,GAC9B,OAAO,IAAIA,EAAK1P,OAGJw3B,EAAAt1B,UAAAiL,cAAhB,iHAC8B,OAA1B1M,EAAAT,KAA0B,GAAMA,KAAKgE,IAAIsjB,OAAOmQ,YAAYh1B,KAAKoiB,GAAQG,wBAElD,OAFvBvkB,EAAKiY,mBAAqBjT,EAAAzD,OAE1BlB,EAAAd,KAAuB,GAAMA,KAAKgE,IAAIsjB,OAAOoQ,SAASj1B,KAAKoiB,GAAQE,iBAQnE,OARAjkB,EAAK6X,gBAAkBlT,EAAAzD,OAEvBhC,KAAKiT,YAAc,IAAIpN,EAAQ7F,KAAKgE,KAChChE,KAAKsC,WACLtC,KAAKiT,YAAYlN,QAAQ/F,KAAKgG,MAGlChG,KAAK2N,KAAO,IAAI/N,EAAKI,MACrB,GAAMA,KAAK2N,KAAKvL,eAahB,OAbAqD,EAAAzD,OAEAhC,KAAKgN,iBAAmBhN,KAAK0oB,KAAKiJ,IAClC3xB,KAAK0V,MAAQ1V,KAAK0oB,KAAKnW,GACvBvS,KAAKwV,MAAQxV,KAAK0oB,KAAKtc,GACvBpM,KAAKqK,SAAWrK,KAAK0oB,KAAK/M,GAC1B3b,KAAKuT,OAASvT,KAAK0oB,KAAK+E,IAExBztB,KAAKo3B,QAAUp3B,KAAK0oB,KAAKmL,IACzB7zB,KAAKkvB,IAAMlvB,KAAK0oB,KAAKoO,KAEjBpd,EAAgC,IAC3Bla,KAAKQ,KAAKgN,iBAAiBxC,SACpC,GAAMnI,QAAQ0U,IAAI2C,kBAAlBjU,EAAAzD,OACAhC,KAAK23B,WACL33B,KAAKsK,OAASR,EAAA,EAAIQ,mBAGtBktB,EAAAt1B,UAAAy1B,SAAA,SAASC,GACL53B,KAAKoN,UAAU8pB,GAAOU,IAGpBJ,EAAAt1B,UAAAgR,cAAN,SAAoBlN,uFAYVwxB,EAAAt1B,UAAA21B,UAAV,WACI73B,KAAK2N,KAAKxL,WAElBq1B,EAtEA,CAA0B1tB,EAAA,GCZbguB,GAAY,SAACrd,GAChB,IAAA0I,EAAA1I,EAAA0I,QAASC,EAAA3I,EAAA2I,SAAUC,EAAA5I,EAAA4I,KAAMC,EAAA7I,EAAA6I,OAC/B,OAAO3Y,EAAA,cAAAA,EAAA,cACFxK,OAAA2J,EAAA,EAAA3J,CAAGgjB,GAAUhjB,OAAA2J,EAAA,EAAA3J,CAAGijB,OAAU9jB,OAAWA,EAAW,WAAM,OAAAqL,EAAA,cAAAA,EAAA,iBAAQxK,OAAA2J,EAAA,EAAA3J,CAAGkjB,OAAM/jB,OAAWA,EAAW,WAAM,OAAAqL,EAAA,cAAAA,EAAA,iBAAQxK,OAAA2J,EAAA,EAAA3J,CAAGmjB,OAAQhkB,OAAWA,EAAW,WAAM,OAAAqL,EAAA,cAAAA,EAAA,mBAI9IotB,GAAY,SAACtd,GACtB,OAAO9P,EAAA,cAAAA,EAAA,kBAAI8P,EAAO8I,kBAGTyU,GAAa,SAACvd,GACvB,OAAO9P,EAAA,cAAAA,EAAA,kBAAI8P,EAAOvU,WCXT+xB,GAAY,SAACxd,GACtB,IAAI7b,EAAU6b,EACRpG,EAAAzV,EAAAyV,MAAOC,EAAA1V,EAAA0V,YAAaE,EAAA5V,EAAA4V,IAAKC,EAAA7V,EAAA6V,OAAQC,EAAA9V,EAAA8V,gBAAiBC,EAAA/V,EAAA+V,gBAAiBC,EAAAhW,EAAAgW,OAAQC,EAAAjW,EAAAiW,SACjF,OAAOlK,EAAA,qBAAKC,UAAU,cAClBD,EAAA,qBAAKC,UAAU,UACXD,EAAA,qBAAKC,UAAU,YACXD,EAAA,qBAAKC,UAAU,UAASD,EAAA,4BAAS2J,KAErC3J,EAAA,qBAAKC,UAAU,OACXD,EAAA,qBAAKC,UAAU,SACXD,EAAA,cAACiJ,EAAY,CAACE,WAAYe,EAAUjK,UAAU,WAElDD,EAAA,qBAAKC,UAAU,SACXD,EAAA,qBAAKC,UAAU,OACVstB,GAAK,MAAO1jB,GACZ0jB,GAAK,eAAMzjB,GACXyjB,GAAK,qBAAOxjB,GACZwjB,GAAK,qBAAOvjB,GACZujB,GAAK,2BAAQtjB,GACbzU,OAAA2J,EAAA,EAAA3J,CAAGkU,EAAO,SAACoG,GAAgB,OAAA9P,EAAA,cAAAA,EAAA,cAAGutB,GAAK,eAAMzd,EAAOvU,eAczE,SAASgyB,GAAKpb,EAAiBjV,GAC3B,OAAc,OAAVA,QAA4BvI,IAAVuI,EAA4B,KAC3C8C,EAAA,cAAAA,EAAA,cACHA,EAAA,qBAAKC,UAAU,yBAAyBkS,OACxCnS,EAAA,qBAAKC,UAAU,SAAS/C,IAIhC,ICzCaswB,GAAY,SAAC1d,GAChB,IAAAvU,EAAAuU,EAAAvU,KAAMO,EAAAgU,EAAAhU,OAAQE,EAAA8T,EAAA9T,iBAAkBY,EAAAkT,EAAAlT,QAASC,EAAAiT,EAAAjT,cAC/C,OAAOmD,EAAA,qBAAKC,UAAU,eAClBD,EAAA,uBACKzE,WAEGO,WAAgBE,EAAiBgE,EAAA,yBACzCA,EAAA,2BAAQxK,OAAA2J,EAAA,EAAA3J,CAAGoH,OAAWC,KCLjB4wB,GAAuB,CAChCC,QAAS,wDACTC,QAAS,QACTC,ICFmB,CACnBjR,OJUkB,CAClB/f,QAASuwB,GACT3U,QAAS4U,GACT3U,SAAU2U,GACV1U,KAAM0U,GACNzU,OAAQyU,GACR/4B,SAAUg5B,IIfVzd,UCAqB,CACrBA,UARgB,SAACE,GACX,IAAAvU,EAAAuU,EAAAvU,KACN,OAAOyE,EAAA,yBACFzE,KDKLtH,QH0CmB,CACnB45B,SAAUP,GACVjgB,MAvBY,SAACyC,GACP,IAAAge,EAAAhe,EAAAge,OAAQC,EAAAje,EAAAie,OAAQtc,EAAA3B,EAAA2B,KACtB,OAAe,IAAXqc,EAAqB9tB,EAAA,cAAAA,EAAA,cAAG8tB,QAAWC,EAAQtc,GACxCzR,EAAA,cAAAA,EAAA,cAAG+tB,EAAQtc,IAqBlBS,gBAVsB,SAACpC,GACjBA,EAAA4V,SACN,OAAO1lB,EAAA,cAAAA,EAAA,uBGpCP1G,MEPiB,CACjBu0B,SAAUP,GACV1wB,QAASuwB,GACT3U,QAAS4U,GACT3U,SAAU2U,GACV1U,KAAM0U,GACNzU,OAAQyU,GACR5wB,QAASgxB,GACTn5B,SAAUg5B,IFAVjwB,SFoBoB,CACpBZ,QAASgxB,GACT5wB,QAASuwB,GACT3U,QAAS4U,GACT3U,SAAU2U,GACV1U,KAAM0U,GACNzU,OAAQyU,GACR7uB,YAjByB,SAACuR,GACpB,IAAAsF,EAAAtF,EAAAsF,MAAOuK,EAAA7P,EAAA6P,MACb,OAAO3f,EAAA,qBAAKC,UAAU,eAClBD,EAAA,uBACKoV,WAEGuK,IAYZrhB,YAzByB,SAACwR,GACpBA,EAAAvb,GAAA,IAAIoV,EAAAmG,EAAAnG,YACV,OAAO3J,EAAA,qBAAKC,UAAU,eACjB0J,MCRLqkB,SIPkBhuB,EAAA,qBAAKC,UAAU,6BACjCD,EAAA,qBAAKC,UAAU,yBAAyBK,IAAKC,EAAAC,IAC7CR,EAAA,qBAAKC,UAAU,4BACXD,EAAA,sBAAMC,UAAU,qBAAmB,yBCE3Cd,EAAA,EAAI8uB,YAAYR,IAEhB,IAUeS,GAVf,SAAAh1B,GAAA,SAAAi1B,IAAA,IAAA/4B,EAAA,OAAA8D,KAAAa,MAAA1E,KAAA2E,YAAA3E,YAEUD,EAAAg5B,UAAY,kBAAAx3B,EAAA,EAAAxB,OAAA,uEAClB,SAAMI,OAAA2J,EAAA,EAAA3J,CAAMo3B,GAAMa,mBAAlB33B,EAAAuB,mBAKJ,OARkBT,EAAA,EAAAu3B,EAAAj1B,GAKTi1B,EAAA52B,UAAAuI,OAAP,WACE,OAAOE,EAAA,cAACb,EAAA,EAAO,CAACivB,UAAW/4B,KAAK+4B,UAAWC,WAAYh5B,KAAK+4B,aAEhED,EARA,CAAkBnuB,EAAA,WCCZsuB,GAAcC,QACW,cAA7BC,OAAOC,SAASC,UAEa,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DA0CJ,SAASC,GAAgBC,GACvBC,UAAUC,cACPC,SAASH,EAAO,CAAEI,MAAO,MACzBC,KAAK,SAAAC,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WAClCD,IACFA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiB9P,QACfuP,UAAUC,cAActvB,WAK1B4mB,QAAQC,IAAI,6CAKZD,QAAQC,IAAI,4CAOvBkJ,MAAM,SAAAC,GACLpJ,QAAQoJ,MAAM,4CAA6CA,mBC/EjEC,EAAA,OACE1vB,EAAA,cAACkuB,GAAG,MACJyB,SAASC,eAAe,SDYX,WAEb,GAAI,kBAAmBd,UAAW,CAMhC,GAJkB,IAAIe,IACpB,IACArB,OAAOC,SAASqB,YAEJ7lB,SAAWukB,OAAOC,SAASxkB,OAIvC,OAGFukB,OAAOuB,iBAAiB,OAAQ,WAC9B,IAAMlB,EAAW,sBAEbP,IAmDV,SAAiCO,GAE/BmB,MAAMnB,GACHK,KAAK,SAAAe,GAGkB,MAApBA,EAASC,SACwD,IAAjED,EAASE,QAAQltB,IAAI,gBAAiBmtB,QAAQ,cAG9CtB,UAAUC,cAAcsB,MAAMnB,KAAK,SAAAC,GACjCA,EAAamB,aAAapB,KAAK,WAC7BV,OAAOC,SAAS8B,aAKpB3B,GAAgBC,KAGnBW,MAAM,WACLnJ,QAAQC,IACN,mEAvEAkK,CAAwB3B,GAIxBC,UAAUC,cAAcsB,MAAMnB,KAAK,WACjC7I,QAAQC,IACN,+GAMJsI,GAAgBC,MC1CxBG,qBCXAyB,EAAAC,QAAA,45TCQAC,EAAA,WAGA,OAHA,gBAKAC,EAAA,SAAA13B,GAGI,SAAA03B,EAAYpjB,EAAiBqjB,GAA7B,IAAAz7B,EACI8D,EAAA0I,KAAAvM,OAAOA,YAiBDD,EAAA07B,WAAa,WACnB,OAAO17B,EAAK27B,cAAc37B,EAAK47B,mBAjB/B57B,EAAKoY,KAAOA,EACZpY,EAAKy7B,IAAMA,IA0BnB,OAhCwCI,EAAA,EAAAL,EAAA13B,GAQ1B03B,EAAAr5B,UAAAw5B,cAAV,SAAwBG,GACpB,OAAOC,EAAA,yBAAMD,IAGPN,EAAAr5B,UAAAy5B,eAAV,eAAA57B,EAAAC,KACUoY,EAAApY,KAAA6V,MAAAuC,KACN,OAAKA,EACyBA,EAAK7T,IAAI,SAACvB,EAAGsX,GACvC,OAAOwhB,EAAA,cAAC/7B,EAAKy7B,IAAGI,EAAA,GAACzxB,IAAKmQ,GAAWtX,MAFnB,MAWtBu4B,EAAAr5B,UAAAuI,OAAA,WACU,IAAA0N,EAAAnY,KAAA6V,MAAAsC,KACN,OAAO2jB,EAAA,cAAAA,EAAA,cACHA,EAAA,cAAC97B,KAAKmY,KAAIyjB,EAAA,KAAKzjB,IACf2jB,EAAA,cAAC97B,KAAKy7B,WAAU,QAG5BF,EAhCA,CAAwCD,IAkCxC,SAAAz3B,GAII,SAAAk4B,EACI7pB,EACAiG,EACAqjB,GAHJ,IAAAz7B,EAII8D,EAAA0I,KAAAvM,OAAOA,YACPD,EAAKmS,IAAMA,EACXnS,EAAKoY,KAAOA,EACZpY,EAAKy7B,IAAMA,IAXyBI,EAAA,EAAAG,EAAAl4B,GAaxCk4B,EAAA75B,UAAAuI,OAAA,eAAA1K,EAAAC,KACI,OAAO87B,EAAA,cAAAA,EAAA,cACF97B,KAAK6V,MAAMtR,IAAI,SAACvB,EAAGsX,GAChB,IAAI0hB,EAAO,IAAIj8B,EAAKmS,IAAInS,EAAKoY,KAAMpY,EAAKy7B,KAExC,OADAQ,EAAKnmB,MAAQ7S,EACN84B,EAAA,cAACA,EAAA,SAAc,CAAC3xB,IAAKmQ,GAAQ0hB,EAAKvxB,cAlBzD,CAA4C6wB,uDC/C5CW,EAAA,oCCAA,IAAAC,EAAAD,EAAA,IAAAA,EAAAE,EAAAC,EAAA,iCAAAF,EAAA,IAAAD,EAAA,IAAAA,EAAA,wBCAAb,EAAAC,QAAiBY,EAAA1tB,EAAuB,oECAxC6sB,EAAAC,QAAiBY,EAAA1tB,EAAuB,4DCAxC6sB,EAAAC,QAAiBY,EAAA1tB,EAAuB,4DCAxC6sB,EAAAC,QAAiBY,EAAA1tB,EAAuB,gECAxC6sB,EAAAC,QAAiBY,EAAA1tB,EAAuB,iECAxC6sB,EAAAC,QAAiBY,EAAA1tB,EAAuB","file":"static/js/main.29540484.chunk.js","sourcesContent":["\r\nexport function groupByProduct(packItems: any[]) {\r\n    let result: any[] = [];\r\n    for (let cd of packItems) {\r\n        let { product, pack, quantity, price, currency } = cd;\r\n        let packRow: any = {\r\n            pack: pack,\r\n            price: price,\r\n            quantity: quantity,\r\n            currency: currency && currency.id\r\n        }\r\n        let cpi = result.find(e => e.product.id === product.id);\r\n        if (cpi === undefined) {\r\n            cpi = { product: product, packs: [] };\r\n            result.push(cpi);\r\n        }\r\n        cpi.packs.push(packRow);\r\n    }\r\n    return result;\r\n}","import { observable, autorun, IReactionDisposer } from 'mobx';\r\nimport _ from 'lodash';\r\nimport { Action, Query, TuidDiv, BoxId, Tuid } from 'tonva';\r\n//import { CCartApp } from '../CCartApp';\r\nimport { PackRow } from 'product/Product';\r\nimport { groupByProduct } from 'tools/groupByProduct';\r\nimport { CApp } from '../CApp';\r\n\r\nexport interface CartItem2 {\r\n    product: BoxId;\r\n    packs: CartPackRow[];\r\n    $isSelected?: boolean;\r\n    $isDeleted?: boolean;\r\n    createdate: number;\r\n}\r\n\r\nexport interface CartPackRow extends PackRow {\r\n    price: number;\r\n    retail?: number;\r\n    currency: any;\r\n}\r\n\r\nexport class Cart {\r\n    cApp: CApp;\r\n\r\n    private cartStore: CartStore;\r\n    private disposer: IReactionDisposer;\r\n\r\n    @observable data: any = {\r\n        list: observable<CartItem2>([]),\r\n    };\r\n    cartItems: CartItem2[];\r\n    count = observable.box<number>(0);\r\n    amount = observable.box<number>(0);\r\n\r\n    constructor(cApp: CApp) {\r\n        this.cApp = cApp;\r\n        this.cartItems = this.data.list;\r\n        this.disposer = autorun(this.calcSum);\r\n    }\r\n\r\n    dispose() {\r\n        this.disposer();\r\n    }\r\n\r\n    protected calcSum = () => {\r\n        let count = 0, amount = 0;\r\n        for (let cp of this.cartItems) {\r\n            let { $isSelected, $isDeleted, packs } = cp;\r\n            if ($isDeleted === true) continue;\r\n            for (let pi of packs) {\r\n                let { price, quantity } = pi;\r\n                count += quantity;\r\n                if (price === Number.NaN || quantity === Number.NaN) continue;\r\n                if ($isSelected === true) {\r\n                    amount += quantity * price;\r\n                }\r\n            }\r\n        }\r\n        this.count.set(count);\r\n        this.amount.set(parseFloat(amount.toFixed(2)));\r\n    }\r\n\r\n    async init(): Promise<void> {\r\n        if (this.cApp.isLogined)\r\n            this.cartStore = new CartRemote(this.cApp);\r\n        else\r\n            this.cartStore = new CartLocal(this.cApp);\r\n        let cartData = await this.cartStore.load();\r\n        let cartDataGrouped = groupByProduct(cartData);\r\n        if (cartDataGrouped && cartDataGrouped.length > 0) {\r\n            for (let i = 0; i < cartDataGrouped.length; i++) {\r\n                let { product, packs, createdate } = cartDataGrouped[i];\r\n                this.cartItems.push({\r\n                    product: product,\r\n                    packs: packs,\r\n                    $isSelected: true,\r\n                    $isDeleted: false,\r\n                    createdate: createdate,\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    /*\r\n    private mergeToRemote(localItems: any[]) {\r\n        let originLength = localItems.length;\r\n        let nowLength = this.items.length;\r\n        if (originLength > 0) {\r\n            if (nowLength > 0) {\r\n                // 合并，谁覆盖谁？\r\n                for (let i = 0; i < originLength; i++) {\r\n                    let { product: tempProduct, pack: tempPack } = localItems[i];\r\n                    let cartItemExits = this.items.find(v => v.product === tempProduct && v.pack === tempPack);\r\n                    if (cartItemExits) {\r\n                        // 如果本地购物车中的产品已经过期，则要删除\r\n                    } else {\r\n                        this.items.push(localItems[i]);\r\n                    }\r\n                }\r\n            } else {\r\n                this.items.push(...localItems);\r\n            }\r\n            // 保存到远程\r\n        }\r\n    }\r\n    */\r\n\r\n    getQuantity(productId: number, packId: number): number {\r\n        let cp = this.cartItems.find(v => v.$isDeleted !== true && v.product.id === productId);\r\n        if (!cp) return 0;\r\n        let cpp = cp.packs.find(v => v.pack.id === packId);\r\n        return cpp === undefined ? 0 : cpp.quantity;\r\n    }\r\n\r\n    isDeleted(productId: number): boolean {\r\n        let i = this.cartItems.findIndex(v => v.$isDeleted === true && v.product.id === productId);\r\n        return i !== -1;\r\n    }\r\n\r\n    getSelectedItems(): CartItem2[] {\r\n        return this.cartItems.filter(v => {\r\n            let { $isSelected, $isDeleted } = v;\r\n            return $isSelected === true && $isDeleted !== true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     *\r\n     */\r\n    add = async (product: BoxId, pack: BoxId, quantity: number, price: number, currency: any) => {\r\n\r\n        let cartItemExists = this.cartItems.find((e) => e.product.id === product.id);\r\n        if (!cartItemExists) {\r\n            cartItemExists = {\r\n                product: product,\r\n                packs: [{ pack: pack, quantity: quantity, price: price, currency: currency }],\r\n                $isSelected: true,\r\n                $isDeleted: false,\r\n                createdate: Date.now()\r\n            };\r\n            this.cartItems.push(cartItemExists);\r\n        }\r\n        else {\r\n            let { $isDeleted, packs } = cartItemExists;\r\n            if ($isDeleted === true)\r\n                packs.splice(0);\r\n\r\n            let packExists: CartPackRow = packs.find(e => e.pack.id === pack.id);\r\n            if (packExists === undefined)\r\n                packs.push({ pack: pack, quantity: quantity, price: price, currency: currency });\r\n            else {\r\n                packExists.quantity = quantity;\r\n                packExists.price = price;\r\n                packExists.currency = currency;\r\n            }\r\n            cartItemExists.$isSelected = true;\r\n            cartItemExists.$isDeleted = false;\r\n            cartItemExists.createdate = Date.now();\r\n        }\r\n\r\n        await this.cartStore.storeCart(product, pack, quantity, price, currency);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param rows\r\n     */\r\n    async removeFromCart(rows: [{ productId: number, packId: number }]) {\r\n        if (rows && rows.length > 0) {\r\n            rows.forEach(pe => {\r\n                let cartItemIndex = this.cartItems.findIndex(e => e.product.id === pe.productId);\r\n                if (cartItemIndex >= 0) {\r\n                    let cartItem = this.cartItems[cartItemIndex];\r\n                    let i = cartItem.packs.findIndex(e => e.pack.id === pe.packId)\r\n                    if (i >= 0) {\r\n                        cartItem.packs.splice(i, 1);\r\n                        if (cartItem.packs.length === 0) {\r\n                            this.cartItems.splice(cartItemIndex, 1);\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n            this.cartStore.removeFromCart(rows);\r\n        }\r\n    }\r\n\r\n    /*\r\n    setDeletedMark(productId: number, packId: number) {\r\n        let cp = this.items.find(v => v.$isDeleted !== true && v.product === productId && v.pack === packId);\r\n        if (cp !== undefined)\r\n            cp.$isDeleted = true;\r\n    }\r\n\r\n    async removeDeletedItem() {\r\n        let rows: { product: number, packItem: CartPackRow }[] = [];\r\n        for (let cp of this.items) {\r\n            let { quantity, $isDeleted } = cp;\r\n            if ($isDeleted === true || quantity === 0) {\r\n                // TODO:\r\n            }\r\n        }\r\n        if (rows.length === 0) return;\r\n        await this.cartStore.removeFromCart(rows);\r\n\r\n        // 下面是从本地数据结构中删除\r\n        for (let cp of this.items) {\r\n            let { packs } = cp;\r\n            let packIndexes: number[] = [];\r\n            let len = packs.length;\r\n            for (let i = 0; i < len; i++) {\r\n                if (packs[i].quantity === 0) packIndexes.push(i);\r\n            }\r\n            for (let i = packIndexes.length - 1; i >= 0; i--) packs.splice(packIndexes[i], 1);\r\n        }\r\n\r\n        let itemIndexes: number[] = [];\r\n        let len = this.items.length;\r\n        for (let i = 0; i < len; i++) {\r\n            let { $isDeleted, packs } = this.items[i];\r\n            if ($isDeleted === true || packs.length === 0) itemIndexes.push(i);\r\n        }\r\n        for (let i = itemIndexes.length - 1; i >= 0; i--) this.items.splice(itemIndexes[i], 1);\r\n    }\r\n\r\n    async clear() {\r\n        this.items.forEach(v => v.$isDeleted = true);\r\n        await this.removeDeletedItem();\r\n    }\r\n    */\r\n\r\n}\r\n\r\nabstract class CartStore {\r\n\r\n    protected cApp: CApp;\r\n    constructor(cApp: CApp) {\r\n        this.cApp = cApp;\r\n    }\r\n    abstract get isLocal(): boolean;\r\n    abstract async load(): Promise<CartItem2[]>;\r\n    abstract async storeCart(product: BoxId, pack: BoxId, quantity: number, price: number, currency: any): Promise<void>;\r\n    abstract async removeFromCart(rows: [{ productId: number, packId: number }]): Promise<void>;\r\n}\r\n\r\nclass CartRemote extends CartStore {\r\n    //private getCartQuery: Query;\r\n    //private setCartAction: Action;\r\n    //private removeFromCartAction: Action;\r\n\r\n    get isLocal(): boolean { return false }\r\n\r\n    /*\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        let { cUqOrder } = this.cApp;\r\n        this.getCartQuery = cUqOrder.query('getcart')\r\n        this.setCartAction = cUqOrder.action('setcart');\r\n        this.removeFromCartAction = cUqOrder.action('removefromcart');\r\n    }\r\n    */\r\n\r\n    async load(): Promise<CartItem2[]> {\r\n        return await this.cApp.uqs.order.GetCart.page(undefined, 0, 100);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param product\r\n     * @param pack\r\n     * @param quantity\r\n     * @param price\r\n     * @param currency\r\n     */\r\n    async storeCart(product: BoxId, pack: BoxId, quantity: number, price: number, currency: any) {\r\n        await this.cApp.uqs.order.SetCart.submit({\r\n            product: product.id,\r\n            pack: pack.id,\r\n            price: price,\r\n            currency: currency,\r\n            quantity: quantity\r\n        });\r\n    }\r\n\r\n    async removeFromCart(rows: [{ productId: number, packId: number }]) {\r\n        let param = rows.map(e => { return { product: e.productId, pack: e.packId } });\r\n        await this.cApp.uqs.order.RemoveFromCart.submit({ rows: param });\r\n    }\r\n}\r\n\r\nconst LOCALCARTNAME: string = \"cart\";\r\nclass CartLocal extends CartStore {\r\n\r\n    private cartData: any[] = [];\r\n    /*\r\n    private productTuid: Tuid;\r\n    private packTuid: TuidDiv;\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n        let { cUqProduct } = cApp;\r\n        this.productTuid = cUqProduct.tuid('productx');\r\n        this.packTuid = cUqProduct.tuidDiv('productx', 'packx');\r\n    }\r\n    */\r\n\r\n    get isLocal(): boolean { return true }\r\n\r\n    async load(): Promise<CartItem2[]> {\r\n        try {\r\n            let productTuid = this.cApp.uqs.product.ProductX;\r\n            let packTuid = productTuid.div('packx');\r\n            let cartstring = localStorage.getItem(LOCALCARTNAME);\r\n            if (cartstring === null) return [];\r\n            this.cartData = JSON.parse(cartstring);\r\n            let cartDataBoxed = [];\r\n            for (let i = 0; i < this.cartData.length; i++) {\r\n                let { product, pack, quantity, price, currency } = this.cartData[i];\r\n                let productbox = productTuid.boxId(product);\r\n                let packbox = packTuid.boxId(pack);\r\n                cartDataBoxed.push({\r\n                    product: productbox,\r\n                    pack: packbox,\r\n                    quantity: quantity,\r\n                    price: price,\r\n                    currency: currency\r\n                })\r\n            }\r\n            return cartDataBoxed;\r\n        }\r\n        catch {\r\n            localStorage.removeItem(LOCALCARTNAME);\r\n            this.cartData = [];\r\n            return this.cartData;\r\n        }\r\n    }\r\n\r\n    async storeCart(product: BoxId, pack: BoxId, quantity: number, price: number, currency: any) {\r\n        let cartItemExists = this.cartData.find(e => e.product === product.id && e.pack === pack.id);\r\n        if (cartItemExists !== undefined) {\r\n            cartItemExists.quantity = quantity;\r\n            cartItemExists.price = price;\r\n            cartItemExists.currency = currency && currency.id;\r\n        } else\r\n            this.cartData.push({ product: product.id, pack: pack.id, quantity: quantity, price: price, currency: currency && currency.id });\r\n        localStorage.setItem(LOCALCARTNAME, JSON.stringify(this.cartData));\r\n    }\r\n\r\n    async removeFromCart(rows: [{ productId: number, packId: number }]) {\r\n\r\n        rows.forEach(e => {\r\n            let i = this.cartData.findIndex(v => v.product = e.productId && v.pack === e.packId);\r\n            if (i >= 0)\r\n                this.cartData.splice(i, 1);\r\n        })\r\n        localStorage.setItem(LOCALCARTNAME, JSON.stringify(this.cartData));\r\n    }\r\n}","import { User, loadAppUqs } from 'tonva';\r\nimport { Map, BoxId, CUq, Tuid } from 'tonva';\r\nimport { observable, computed } from 'mobx';\r\nimport { UQs } from './uqs';\r\n\r\nexport class WebUser {\r\n\r\n    id: number;\r\n    name: string;\r\n    nick?: string;\r\n    icon?: string;\r\n    guest: number;\r\n    token: string;\r\n\r\n    @observable firstName: string;\r\n    gender: string;\r\n    salutation: string;\r\n    @observable organizationName: string;\r\n    departmentName: string;\r\n\r\n    telephone: string;\r\n    @observable mobile: string;\r\n    email: string;\r\n    fax: string;\r\n    address: BoxId;\r\n    addressString: string;\r\n    zipCode: string;\r\n    @computed get allowOrdering() {\r\n        return this.currentCustomer !== undefined ||\r\n            (this.mobile && this.firstName && this.organizationName);\r\n    }\r\n\r\n    private _user: User;\r\n\r\n    private webUserSettings: any;\r\n\r\n    private uqs: UQs;\r\n\r\n\r\n    constructor(uqs: UQs) {// cUsqWebUser: CUq, cUsqCustomer: CUq) {\r\n        this.uqs = uqs;\r\n    }\r\n\r\n    setUser = async (user: User) => {\r\n        if (user !== undefined) {\r\n            this._user = user;\r\n            this.id = user.id;\r\n            this.name = user.name;\r\n            this.nick = user.nick;\r\n            this.icon = user.icon;\r\n            this.guest = user.guest;\r\n            this.token = user.token;\r\n\r\n            await this.loadWebUser();\r\n        }\r\n    }\r\n\r\n    private async loadWebUser() {\r\n        let { id, _user } = this;\r\n        if (this._user !== undefined) {\r\n            let webUser = await this.uqs.webuser.WebUser.load(this.id);\r\n            if (webUser) {\r\n                let { firstName, gender, salutation, organizationName, departmentName } = webUser;\r\n                this.firstName = firstName;\r\n                this.gender = gender;\r\n                this.salutation = salutation;\r\n                this.organizationName = organizationName;\r\n                this.departmentName = departmentName;\r\n            }\r\n            let contact = await this.uqs.webuser.WebUserContact.obj({ webUser: this.id });\r\n            if (contact) {\r\n                let { telephone, mobile, email, fax, address, addressString, zipCode } = contact;\r\n                this.telephone = telephone;\r\n                this.mobile = mobile;\r\n                this.email = email;\r\n                this.fax = fax;\r\n                this.address = address;\r\n                this.addressString = addressString;\r\n                this.zipCode = zipCode;\r\n            }\r\n            this.webUserSettings = await this.uqs.webuser.WebUserSetting.obj({ webUser: this.id }) || { webUser: this.id };\r\n            let value = await this.uqs.webuser.WebUserCustomer.obj({ webUser: this.id });\r\n            if (value != undefined) {\r\n                this.currentCustomer = new Customer(value.customer, this.uqs);\r\n                await this.currentCustomer.init();\r\n            }\r\n        }\r\n    }\r\n\r\n    get isLogined(): boolean {\r\n        return this._user !== undefined;\r\n    }\r\n    get hasCustomer(): boolean {\r\n        return this.currentCustomer !== undefined;\r\n    }\r\n    currentCustomer: Customer;\r\n\r\n    async getContacts(): Promise<any[]> {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            return await this.currentCustomer.getContacts()\r\n        }\r\n        */\r\n        return await this.uqs.webuser.WebUserContacts.table({ webUser: this.id });\r\n    }\r\n\r\n    async addContact(contactId: number) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.addContact(contactId);\r\n            return;\r\n        }\r\n        */\r\n        await this.uqs.webuser.WebUserContacts.add({ webUser: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async delContact(contactId: number) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.delContact(contactId);\r\n            return;\r\n        }\r\n        */\r\n        await this.uqs.webuser.WebUserContacts.del({ webUser: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async getSetting() {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            return this.currentCustomer.getSetting();\r\n        }\r\n        */\r\n        return this.webUserSettings;\r\n    }\r\n\r\n    async setDefaultShippingContact(contactId: BoxId) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultShippingContact(contactId);\r\n            return;\r\n        }\r\n        */\r\n        this.webUserSettings.shippingContact = contactId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoiceContact(contactId: BoxId) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultInvoiceContact(contactId);\r\n            return;\r\n        }\r\n        */\r\n        this.webUserSettings.invoiceContact = contactId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoice(invoiceTypeId: BoxId, invoiceInfoId: BoxId) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultInvoice(invoiceTypeId, invoiceInfoId);\r\n            return;\r\n        }\r\n        */\r\n        // await this.webUserSettingMap.add({ webUser: this.id, arr1: [{ invoiceType: invoiceTypeId, invoiceInfo: invoiceInfoId }] });\r\n        this.webUserSettings.invoiceType = invoiceTypeId;\r\n        this.webUserSettings.invoiceInfo = invoiceInfoId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async saveDefaultSettings() {\r\n        await this.uqs.webuser.WebUserSetting.add(this.webUserSettings);\r\n    }\r\n\r\n\r\n    async changeWebUser(webUser: any) {\r\n        await this.uqs.webuser.WebUser.save(this.id, webUser);\r\n        await this.loadWebUser();\r\n    }\r\n\r\n    async changeWebUserContact(webUserContact: any) {\r\n        webUserContact.webUser = this.id;\r\n        await this.uqs.webuser.WebUserContact.add(webUserContact);\r\n        await this.loadWebUser();\r\n    }\r\n};\r\n\r\nexport class Customer {\r\n    private readonly uqs: UQs;\r\n    //private contactMap: Map;\r\n    id: number;\r\n\r\n    //private customerSettingMap: Map;\r\n\r\n    private customerSettings: any;\r\n\r\n    constructor(customer: BoxId, uqs: UQs) {\r\n        this.id = customer.id;\r\n        this.uqs = uqs;\r\n        /*\r\n        this.contactMap = cUsqCustomer.map('customerContacts');\r\n        this.customerSettingMap = cUsqCustomer.map('customerSetting');\r\n        */\r\n    };\r\n\r\n    async getContacts(): Promise<any[]> {\r\n        return await this.uqs.customer.CustomerContacts.table({ customer: this.id });\r\n    }\r\n\r\n    async addContact(contactId: number) {\r\n        await this.uqs.customer.CustomerContacts.add({ customer: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async delContact(contactId: number) {\r\n        await this.uqs.customer.CustomerContacts.del({ customer: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async init() {\r\n        this.customerSettings = await this.uqs.customer.CustomerSetting.obj({ customer: this.id }) || { customer: this.id };\r\n    }\r\n\r\n    getSetting() {\r\n        return this.customerSettings;\r\n    }\r\n\r\n    async setDefaultShippingContact(contactId: BoxId) {\r\n        this.customerSettings.shippingContact = contactId;\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoiceContact(contactId: BoxId) {\r\n        this.customerSettings.invoiceContact = contactId;\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoice(invoiceTypeId: BoxId, invoiceInfoId: BoxId) {\r\n        this.customerSettings.invoiceType = invoiceTypeId;\r\n        this.customerSettings.invoiceInfo = invoiceInfoId;\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultSettings() {\r\n        await this.uqs.customer.CustomerSetting.add(this.customerSettings);\r\n    }\r\n}","import { CSub, CBase } from \"tonva\";\r\nimport { UQs } from \"./uqs\";\r\n\r\nexport abstract class CUqBase extends CBase {\r\n    protected readonly uqs: UQs;\r\n}\r\n\r\nexport abstract class CUqSub extends CSub {\r\n    protected readonly uqs: UQs;\r\n    protected readonly owner: CUqBase;\r\n}\r\n","import * as React from 'react';\r\nimport { View, nav } from 'tonva';\r\nimport { CHome } from './CHome';\r\nimport { SearchBox } from 'tonva';\r\n\r\nexport class VSearchHeader extends View<CHome> {\r\n\r\n    private onSearch = async (key: string, param: 'home' | 'insearch' | 'productdetail') => {\r\n        let { cProduct, topKey } = this.controller.cApp;\r\n        if (param !== 'home') {\r\n            nav.popTo(topKey);\r\n        }\r\n\r\n        cProduct.start(key);\r\n    }\r\n\r\n    render(param: 'home' | 'insearch' | 'productdetail') {\r\n        let size: any = param === 'home' ? \"md\" : 'sm';\r\n        return <SearchBox className=\"px-1 w-100\"\r\n            size={size}\r\n            onSearch={(key: string) => this.onSearch(key, param)}\r\n            placeholder=\"搜索品名、编号、CAS、MDL等\" />\r\n    }\r\n}","import * as React from 'react';\r\nimport { View, nav } from 'tonva';\r\nimport { LMR, FA, SearchBox } from 'tonva';\r\nimport logo from '../images/logo.png';\r\nimport { CHome } from './CHome';\r\n\r\nexport class VSiteHeader extends View<CHome> {\r\n    render() {\r\n        let currentSalesRegion = <FA name=\"globe\" />\r\n        let login = <div>\r\n            登录\r\n        </div>\r\n        let left = <img className=\"m-1\" src={logo} alt=\"logo\" style={{height: \"3rem\", width: \"3rem\"}} />;\r\n        //let cart = this.controller.cApp.cCart.renderCartLabel();\r\n        let right = undefined;\r\n        /*\r\n        <div className=\"d-flex flex-row mr-1 align-items-center\">\r\n            {currentSalesRegion} &nbsp;\r\n            <button onClick={()=>nav.start()}>Try</button>\r\n        </div>;*/\r\n        return <LMR\r\n            className=\"mb-3 align-items-center bg-white\"\r\n            left={left} right={right}>\r\n            <div className=\"\">\r\n                {this.controller.renderSearchHeader('md')}\r\n            </div>\r\n        </LMR>\r\n        //<div className=\"h4 px-3 mb-0\">百灵威科技</div>\r\n    }\r\n}","import * as React from 'react';\r\nimport { Page, View } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CHome } from './CHome';\r\nimport { VSiteHeader } from './VSiteHeader';\r\n\r\nexport class VHome extends View<CHome> {\r\n\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        return <this.content />\r\n    }\r\n\r\n    private page = observer(() => {\r\n        return <Page header={false}>\r\n            <this.content />\r\n        </Page>;\r\n    })\r\n\r\n    private content = observer(() => {\r\n        let { controller } = this;\r\n        let { renderCategoryRootList } = controller;\r\n        let siteHeader = this.renderVm(VSiteHeader);\r\n        return <>\r\n            {siteHeader}\r\n            {renderCategoryRootList()}\r\n        </>\r\n    });\r\n}","import { Tuid } from 'tonva';\r\n//import { CCartApp } from '../CCartApp';\r\nimport { PageItems, Controller } from 'tonva';\r\nimport { CApp } from '../CApp';\r\nimport { CUqBase } from '../CBase';\r\nimport { VSearchHeader } from './VSearchHeader';\r\nimport { VHome } from './VHome';\r\n\r\nclass HomeSections extends PageItems<any> {\r\n\r\n    private sectionTuid: Tuid;\r\n\r\n    constructor(sectionTuid: Tuid) {\r\n        super();\r\n        this.firstSize = this.pageSize = 13;\r\n        this.sectionTuid = sectionTuid;\r\n    }\r\n\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.sectionTuid.search(\"\", pageStart, pageSize);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        if (item === undefined) return 0;\r\n        return item.id;\r\n    }\r\n}\r\n\r\nexport class CHome extends CUqBase {\r\n\r\n    cApp: CApp;\r\n    homeSections: HomeSections;\r\n    sectionTuid: Tuid;\r\n\r\n    async internalStart(param: any) {\r\n\r\n        let { cProductCategory } = this.cApp;\r\n        await cProductCategory.start();\r\n        this.openVPage(VHome);\r\n    }\r\n\r\n    renderSearchHeader = (size?: string) => {\r\n        return this.renderView(VSearchHeader, size);\r\n    }\r\n\r\n    renderCategoryRootList = () => {\r\n        let { cProductCategory } = this.cApp;\r\n        return cProductCategory.renderRootList();\r\n    }\r\n\r\n    tab = () => this.renderView(VHome);\r\n}","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { View } from 'tonva';\r\nimport { CCart } from './CCart';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VCartLabel extends View<CCart> {\r\n\r\n    private showCart = async () => {\r\n        this.controller.start();\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        return <this.content />\r\n    };\r\n\r\n    private content = observer(() => {\r\n        let { cart } = this.controller.cApp;\r\n        let count: any = cart.count.get();\r\n        let badge, onClick, pointer;\r\n        if (count > 0) {\r\n            onClick = this.showCart;\r\n            pointer = 'cursor-pointer';\r\n            if (count < 100) badge = <u>{count}</u>;\r\n            else badge = <u>99+</u>;\r\n        }\r\n        return <div className={classNames('jk-cart ml-1 mr-2', pointer)} onClick={onClick}>\r\n            <div>\r\n                <span className=\"fa-stack\">\r\n                    <i className=\"fa fa-square fa-stack-2x text-white\"></i>\r\n                    <i className=\"fa fa-shopping-cart fa-stack-1x text-info\"></i>\r\n                </span>\r\n                {badge}\r\n            </div>\r\n        </div>\r\n    });\r\n}","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { UpdownWidget } from 'tonva';\r\n\r\nconst keys = [107, 109, 110, 187, 189];\r\n\r\nexport class MinusPlusWidget extends UpdownWidget {\r\n    @observable protected value: any;\r\n    @observable protected disabled: boolean;\r\n    @observable protected hasFocus: boolean;\r\n\r\n    protected isValidKey(key: number): boolean {\r\n        if (keys.find(v => v === key) !== undefined) return false;\r\n        return super.isValidKey(key);\r\n    }\r\n\r\n    protected onBlur(evt: React.FocusEvent<any>) {\r\n        super.onBlur(evt);\r\n        this.hasFocus = false;\r\n    }\r\n\r\n    protected onFocus(evt: React.FocusEvent<any>) {\r\n        super.onFocus(evt);\r\n        this.hasFocus = true;\r\n    }\r\n\r\n    protected onChange(evt: React.ChangeEvent<any>) {\r\n    }\r\n\r\n    private minusClick = () => {\r\n        let v = this.getValue();\r\n        if (!v) v = 0;\r\n        this.setValue(v - 1);\r\n    }\r\n    private plusClick = () => {\r\n        let v = this.getValue();\r\n        if (!v) v = 0;\r\n        this.setValue(v + 1);\r\n    }\r\n\r\n    private ref = (input: HTMLInputElement) => {\r\n        this.input = input;\r\n        if (this.input === null) return;\r\n        let p: HTMLElement;\r\n        for (p = this.input; ; p = p.parentElement) {\r\n            if (!p) break;\r\n            if (p.tagName !== 'FIELDSET') continue;\r\n            if (p['disabled'] === true) {\r\n                this.disabled = true;\r\n            }\r\n            break;\r\n        }\r\n    }\r\n\r\n    private renderContent = observer((): JSX.Element => {\r\n        let renderTemplet = this.renderTemplet();\r\n        if (renderTemplet !== undefined) return renderTemplet;\r\n        let cn = {\r\n            //'form-control': true,\r\n        };\r\n        if (this.hasError === true) {\r\n            cn['is-invalid'] = true;\r\n        }\r\n        else {\r\n            cn['required-item'] = this.itemSchema.required === true;\r\n        }\r\n        let hasFocus = this.hasFocus; // document.hasFocus() && document.activeElement === this.input;\r\n        let hasAction = this.readOnly !== true && this.disabled !== true;\r\n        let hasValue = this.value !== NaN && this.value !== undefined && this.value > 0;\r\n        let cursorPointer: string,\r\n            minusColor: string, minusClick: any,\r\n            plusColor: string, plusClick: any;\r\n        if (this.disabled === true) {\r\n            cursorPointer = 'cursor-pointer';\r\n            minusColor = plusColor = 'text-light';\r\n        }\r\n        else {\r\n            minusClick = this.minusClick;\r\n            plusClick = this.plusClick;\r\n            minusColor = 'text-danger-2'; //'text-black-50';\r\n            plusColor = 'text-danger';\r\n        }\r\n        let minus = <i className={classNames('fa',\r\n            'fa-minus-circle', 'fa-lg', minusColor, cursorPointer,\r\n            { invisible: !(hasFocus === true || hasAction === true && hasValue === true) })}\r\n            onClick={minusClick} />;\r\n        let input = <input ref={this.ref}\r\n            className={classNames(this.className, cn, 'mx-1 w-4c form-control',\r\n                { invisible: !(hasFocus === true || hasValue === true) })}\r\n            type=\"text\"\r\n            defaultValue={this.value}\r\n            onChange={this.onChange}\r\n            placeholder={this.placeholder}\r\n            readOnly={this.readOnly}\r\n            disabled={this.disabled}\r\n            onKeyDown={this.onKeyDown}\r\n            onFocus={(evt: React.FocusEvent<any>) => this.onFocus(evt)}\r\n            onBlur={(evt: React.FocusEvent<any>) => this.onBlur(evt)}\r\n            maxLength={10} />;\r\n\r\n        let plus = <i className={classNames('fa fa-plus-circle fa-lg',\r\n            plusColor, cursorPointer,\r\n            { invisible: !(hasAction === true) })}\r\n            onClick={plusClick} />;\r\n        return <div className=\"d-flex align-items-center\">{minus}{input}{plus}\r\n            {this.renderErrors()}\r\n        </div>;\r\n    });\r\n\r\n    render() {\r\n        return <this.renderContent />;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, Form, ObjectSchema, NumSchema, ArrSchema, UiSchema, UiArr, FormField } from 'tonva';\r\nimport { List, LMR, FA } from 'tonva';\r\nimport { tv, BoxId } from 'tonva';\r\nimport { MinusPlusWidget } from '../tools';\r\n//import { renderBrand, productPropItem } from '../product/CProduct';\r\n//import { ProductImage } from 'tools/productImage';\r\nimport { CCart } from './CCart';\r\nimport { CartPackRow } from './Cart';\r\n\r\nconst cartSchema = [\r\n    {\r\n        name: 'list',\r\n        type: 'arr',\r\n        arr: [\r\n            { name: 'checked', type: 'boolean' },\r\n            { name: 'product', type: 'object' } as ObjectSchema,\r\n            {\r\n                name: 'packs', type: 'arr', arr: [\r\n                    { name: 'pack', type: 'object' } as ObjectSchema,\r\n                    { name: 'price', type: 'number' } as NumSchema,\r\n                    { name: 'quantity', type: 'number' } as NumSchema,\r\n                    { name: 'currency', type: 'object' } as ObjectSchema,\r\n                    { name: 'inventoryAllocation', type: 'object' } as ObjectSchema,\r\n                    { name: 'futureDeliveryTimeDescription', type: 'string' }\r\n                ]\r\n            }\r\n        ],\r\n    } as ArrSchema\r\n];\r\n\r\nexport class VCart extends VPage<CCart> {\r\n    async open() {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    protected CheckOutButton = observer(() => {\r\n        let { checkOut, cApp } = this.controller;\r\n        let { cart: cartViewModel } = cApp;\r\n        let amount = cartViewModel.amount.get();\r\n        let check = \"去结算\";\r\n        let content = amount > 0 ?\r\n            <>{check} (¥{amount})</> :\r\n            <>{check}</>;\r\n        return <button className=\"btn btn-success w-100\" type=\"button\" onClick={checkOut} disabled={amount <= 0}>\r\n            {content}\r\n        </button>;\r\n    });\r\n\r\n    render(params: any): JSX.Element {\r\n        return <this.tab />;\r\n    }\r\n\r\n    private renderCartItem = (item: any) => {\r\n        let { product } = item;\r\n        let { controller } = this;\r\n        let { onProductClick, renderCartProduct } = controller;\r\n        return <div className=\"pr-1\">\r\n            <div className=\"row\">\r\n                <div className=\"col-lg-6 pb-3\" onClick={() => onProductClick(product)}>\r\n                    {renderCartProduct(product)}\r\n                </div>\r\n                <div className=\"col-lg-6\"><FormField name=\"packs\" /></div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private packsRow = (item: CartPackRow) => {\r\n        let { pack, price, currency } = item;\r\n\r\n        return <div className=\"px-2\">\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-6c mr-4 text-right\"><span className=\"text-danger h5\">¥{price}</span></div>\r\n                <FormField name=\"quantity\" />\r\n            </div>\r\n            <div>{this.controller.renderDeliveryTime(pack)}</div>\r\n        </div>;\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        selectable: true,\r\n        deletable: true,\r\n        restorable: true,\r\n        items: {\r\n            list: {\r\n                widget: 'arr',\r\n                Templet: this.renderCartItem,\r\n                ArrContainer: (label: any, content: JSX.Element) => content,\r\n                RowContainer: (content: JSX.Element) => <div className=\"py-3\">{content}</div>,\r\n                items: {\r\n                    packs: {\r\n                        widget: 'arr',\r\n                        Templet: this.packsRow,\r\n                        selectable: false,\r\n                        deletable: false,\r\n                        ArrContainer: (label: any, content: JSX.Element) => content,\r\n                        RowContainer: (content: JSX.Element) => content,\r\n                        RowSeperator: <div className=\"border border-gray border-top my-3\" />,\r\n                        items: {\r\n                            quantity: {\r\n                                widget: 'custom',\r\n                                className: 'text-center',\r\n                                WidgetClass: MinusPlusWidget,\r\n                                onChanged: this.controller.onQuantityChanged\r\n                            }\r\n                        },\r\n                    } as UiArr\r\n                }\r\n            } as UiArr\r\n        }\r\n    }\r\n\r\n    protected cartForm = observer(() => {\r\n        let { cart } = this.controller.cApp;\r\n        let { data: cartData } = cart;\r\n        return <Form className=\"bg-white flex-fill overflow-auto\" schema={cartSchema} uiSchema={this.uiSchema} formData={cartData} />\r\n    });\r\n\r\n    private empty() {\r\n        return <div className=\"py-5 text-center bg-white\">你的购物车空空如也</div>\r\n    }\r\n\r\n    private test = () => {\r\n        let { cart: cartViewModel } = this.controller.cApp;\r\n        let row = cartViewModel.cartItems[0];\r\n        row.packs[0].quantity = row.packs[0].quantity + 1;\r\n    }\r\n\r\n    private testButton = () => <button onClick={() => this.test()}>test</button>;\r\n\r\n    private page = observer((params: any): JSX.Element => {\r\n        let { cart } = this.controller.cApp;\r\n        let footer: any, content: any;\r\n        if (cart.count.get() === 0 && cart.cartItems.length === 0) {\r\n            content = this.empty();\r\n            footer = undefined;\r\n        }\r\n        else {\r\n            content = <this.cartForm />;\r\n            footer = <this.CheckOutButton />;\r\n        }\r\n        return <Page header=\"购物车\" footer={footer}>\r\n            {content}\r\n        </Page>;\r\n    })\r\n\r\n    private tab = observer(() => {\r\n        let { cart } = this.controller.cApp;\r\n        let header = <header className=\"py-2 text-center bg-info text-white\">\r\n            <FA className=\"align-middle\" name=\"shopping-cart\" size=\"2x\" /> &nbsp; <span className=\"h5 align-middle\">购物车</span>\r\n        </header>;\r\n        if (cart.count.get() === 0 && cart.cartItems.length === 0) {\r\n            return <>\r\n                {header}\r\n                {this.empty()}\r\n            </>;\r\n        }\r\n        return <div className=\"bg-white d-flex flex-column h-100\">\r\n            {header}\r\n            <this.cartForm />\r\n            <footer className=\"p-3\"><this.CheckOutButton /></footer>\r\n        </div>\r\n    });\r\n}","//import * as React from 'react';\r\nimport { Controller, RowContext, nav, User, BoxId } from 'tonva';\r\nimport { CApp } from '../CApp';\r\nimport { CUqBase } from '../CBase';\r\nimport { VCartLabel } from './VCartLabel';\r\n//import { CCartApp } from 'CCartApp';\r\nimport { VCart } from './VCart';\r\nimport { CartPackRow, CartItem2 } from './Cart';\r\n\r\nexport class CCart extends CUqBase {\r\n\r\n    cApp: CApp;\r\n    private selectedCartItems: CartItem2[];\r\n\r\n    protected async internalStart(param: any) {\r\n        this.openVPage(VCart);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * 显示购物车图标\r\n     */\r\n    renderCartLabel() {\r\n        return this.renderView(VCartLabel);\r\n    }\r\n\r\n    onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data, parentData } = context;\r\n        let { product } = parentData;\r\n        let { pack, price, currency } = data as CartPackRow;\r\n        let { cart } = this.cApp;\r\n        if (value > 0)\r\n            await cart.add(product, pack, value, price, currency);\r\n        else\r\n            await cart.removeFromCart([{ productId: product.id, packId: pack.id }]);\r\n    }\r\n\r\n    onRowStateChanged = async (context: RowContext, selected: boolean, deleted: boolean) => {\r\n        alert('onRowStateChanged')\r\n    }\r\n\r\n    private loginCallback = async (user: User): Promise<void> => {\r\n        let { cApp } = this;\r\n        await cApp.currentUser.setUser(user);\r\n        await cApp.loginCallBack(user);\r\n        this.closePage(1);\r\n        await this.doCheckOut();\r\n    };\r\n\r\n    onProductClick(product: BoxId) {\r\n        let { cart, cProduct } = this.cApp;\r\n        if (!cart.isDeleted(product.id)) {\r\n            cProduct.showProductDetail(product);\r\n        }\r\n    }\r\n\r\n    checkOut = async () => {\r\n        let { cart } = this.cApp;\r\n        this.selectedCartItems = cart.getSelectedItems();\r\n        if (this.selectedCartItems === undefined) return;\r\n        if (!this.isLogined) {\r\n            nav.showLogin(this.loginCallback, true);\r\n        } else {\r\n            this.doCheckOut();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 导航到CheckOut界面\r\n     */\r\n    private doCheckOut = async () => {\r\n\r\n        let { cOrder } = this.cApp;\r\n        if (this.selectedCartItems === undefined) return;\r\n        await cOrder.start(this.selectedCartItems);\r\n    }\r\n\r\n    tab = () => this.renderView(VCart);\r\n\r\n    renderDeliveryTime = (pack: BoxId) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderDeliveryTime(pack);\r\n    }\r\n\r\n    renderCartProduct = (product: BoxId) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderCartProduct(product);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { Image } from 'tonva';\r\n\r\nconst imagePath = \"https://www.jkchemical.com/static/Structure/\";\r\nconst altimagePath = \"https://www.jkchemical.com/static/Structure/999.png\";\r\n\r\ninterface ProductImageProps {\r\n    className?: string;\r\n    style?: React.CSSProperties;\r\n    chemicalId: string;\r\n}\r\n\r\nexport function ProductImage(props: ProductImageProps) {\r\n\r\n    let { style, className, chemicalId } = props;\r\n    return <Image src={chemicalId && (imagePath + chemicalId.substr(0, 3) + '/' + chemicalId + '.png')}\r\n        style={style} className={className} altImage={altimagePath} />;\r\n}\r\n","import * as React from 'react';\r\nimport { CProduct, renderBrand, productPropItem } from './CProduct';\r\nimport {\r\n    VPage, Page, Form, ItemSchema, NumSchema, UiSchema, Field,\r\n    ObjectSchema, RowContext, UiCustom, FormField, BoxId\r\n} from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { MinusPlusWidget } from '../tools/minusPlusWidget';\r\nimport { ProductPackRow } from './Product';\r\nimport { ViewMainSubs, MainProductChemical } from 'mainSubs';\r\nimport { ProductImage } from 'tools/productImage';\r\n\r\nconst schema: ItemSchema[] = [\r\n    { name: 'pack', type: 'object' } as ObjectSchema,\r\n    { name: 'retail', type: 'number' } as NumSchema,\r\n    { name: 'vipPrice', type: 'number' } as NumSchema,\r\n    { name: 'promotionPrice', type: 'number' } as NumSchema,\r\n    { name: 'currency', type: 'string' },\r\n    { name: 'quantity', type: 'number' } as NumSchema,\r\n    { name: 'inventoryAllocation', type: 'object' } as ObjectSchema,\r\n    { name: 'futureDeliveryTimeDescription', type: 'string' }\r\n];\r\n\r\nexport class VProduct extends VPage<CProduct> {\r\n    private productBox: BoxId;\r\n\r\n    async open(param: any) {\r\n        let { productData, product } = param;\r\n        this.productBox = product;\r\n        this.openPage(this.page, productData);\r\n    }\r\n\r\n    private renderProduct = (product: MainProductChemical) => {\r\n\r\n        let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n        return <div className=\"mb-3 px-2\">\r\n            <div className=\"py-2\"><strong>{description}</strong></div>\r\n            <div>{descriptionC}</div>\r\n            <div className=\"row mt-3\">\r\n                <div className=\"col-12 col-sm-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-12 col-sm-9\">\r\n                    <div className=\"row mx-3\">\r\n                        {productPropItem('CAS', CAS, \"font-weight-bold\")}\r\n                        {productPropItem('产品编号', origin, \"font-weight-bold\")}\r\n                        {productPropItem('纯度', purity)}\r\n                        {productPropItem('分子式', molecularFomula)}\r\n                        {productPropItem('分子量', molecularWeight)}\r\n                        {renderBrand(brand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private arrTemplet = (item: ProductPackRow) => {\r\n        let { pack, retail, vipPrice, promotionPrice } = item;\r\n        let right = null;\r\n        if (retail) {\r\n            let price: number = this.minPrice(vipPrice, promotionPrice);\r\n            let retailUI: any;\r\n            if (price) {\r\n                retailUI = <small className=\"text-muted\"><del>¥{retail}</del></small>;\r\n            }\r\n            else {\r\n                price = retail;\r\n            }\r\n            right = <div className=\"row\">\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\">\r\n                    <small className=\"text-muted\">{retailUI}</small>&nbsp; &nbsp;\r\n                    <span className=\"text-danger\">¥ <span className=\"h5\">{price}</span></span>\r\n                </div>\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\"><FormField name=\"quantity\" /></div>\r\n            </div >\r\n        } else {\r\n            right = <small>请询价</small>\r\n        }\r\n\r\n        return <div className=\"px-2\">\r\n            <div className=\"row\">\r\n                <div className=\"col-6\">\r\n                    <div><b>{tv(pack)}</b></div>\r\n                    <div>{this.controller.renderDeliveryTime(pack)}</div>\r\n                </div>\r\n                <div className=\"col-6\">\r\n                    {right}\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data } = context;\r\n        let { pack, retail, vipPrice, promotionPrice, currency } = data;\r\n        let price = this.minPrice(vipPrice, promotionPrice) || retail;\r\n        let { cApp } = this.controller;\r\n        let { cart } = cApp;\r\n        if (value > 0)\r\n            await cart.add(this.productBox, pack, value, price, currency);\r\n        else\r\n            await cart.removeFromCart([{ productId: this.productBox.id, packId: pack.id }]);\r\n    }\r\n\r\n    private minPrice(vipPrice: any, promotionPrice: any) {\r\n        if (vipPrice || promotionPrice)\r\n            return Math.min(typeof (vipPrice) === 'number' ? vipPrice : Infinity, typeof (promotionPrice) === 'number' ? promotionPrice : Infinity);\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        Templet: this.arrTemplet,\r\n        items: {\r\n            quantity: {\r\n                widget: 'custom',\r\n                className: 'text-center',\r\n                WidgetClass: MinusPlusWidget as any,\r\n                onChanged: this.onQuantityChanged\r\n            } as UiCustom\r\n        },\r\n    };\r\n\r\n    private renderPack = (pack: ProductPackRow) => {\r\n        return <>\r\n            <div className=\"sep-product-select\" />\r\n            <Form className=\"mx-3\" schema={schema} uiSchema={this.uiSchema} formData={pack} />\r\n        </>;\r\n    }\r\n\r\n    private page = observer((product: any) => {\r\n\r\n        let { cApp } = this.controller;\r\n        let header = cApp.cHome.renderSearchHeader();\r\n        let cartLabel = cApp.cCart.renderCartLabel();\r\n        let viewProduct = new ViewMainSubs<MainProductChemical, ProductPackRow>(this.renderProduct, this.renderPack);\r\n        viewProduct.model = product;\r\n\r\n        return <Page header={header} right={cartLabel}>\r\n            <div className=\"px-2 py-2 bg-white mb-3\">{viewProduct.render()}</div>\r\n        </Page>\r\n\r\n        /*\r\n        return <Page header={header} right={cartLabel}>\r\n            {tv(this.productBox, (value: any) => {\r\n                let { brand, description, descriptionC, origin, imageUrl, packx } = value;\r\n                return <div className=\"p-2 bg-white mb-3\">\r\n                    <div className=\"mb-3 px-2\">\r\n                        <div className=\"py-2\"><strong>{description}</strong></div>\r\n                        <div>{descriptionC}</div>\r\n                        <div className=\"row mt-3\">\r\n                            <div className=\"col-12 col-sm-3\">\r\n                                <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                            </div>\r\n                            <div className=\"col-12 col-sm-9\">\r\n                                <div className=\"row mx-3\">\r\n                                    {productPropItem('产品编号', origin, \"font-weight-bold\")}\r\n                                    {this.controller.renderChemicalInfo(product)}\r\n                                    {tv(brand, renderBrand)}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        {packx.map((v, index) => {\r\n                            return tv(v, (value: any) => {\r\n                                return <>\r\n                                    <div className=\"sep-product-select\" />\r\n                                    <Form className=\"mx-3\" schema={schema} uiSchema={this.uiSchema} formData={pack} />\r\n                                </>\r\n                            })\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            })}\r\n        </Page>\r\n        */\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { CProduct, renderProduct } from './CProduct';\r\nimport { List } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\n//import { cCartApp } from 'ui/CCartApp';\r\n\r\nexport class VProductList extends VPage<CProduct> {\r\n\r\n    private searchKey: string;\r\n    async open(key: string) {\r\n        this.searchKey = key;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onProductClick = async (product: any) => {\r\n        this.controller.showProductDetail(product.id);\r\n    }\r\n\r\n    private onScrollBottom = async () => {\r\n\r\n        await this.controller.pageProducts.more();\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let { pageProducts, cApp } = this.controller;\r\n        let { cHome, cCart } = cApp;\r\n        let header = cHome.renderSearchHeader();\r\n        let cart = cCart.renderCartLabel();\r\n        let none = <div className=\"my-3 mx-2 text-warning\">抱歉，未找到相关产品，请重新搜索！</div>\r\n        return <Page header={header} right={cart} onScrollBottom={this.onScrollBottom}>\r\n            <div className=\"bg-white p-2 mb-1\">搜索条件: <strong>{this.searchKey}</strong></div>\r\n            <List before={''} none={none} items={pageProducts} item={{ render: renderProduct, onClick: this.onProductClick }} />\r\n        </Page>\r\n    });\r\n}","import { Entity } from 'tonva';\r\nimport { CApp } from '../CApp';\r\n//import { CCartApp } from 'CCartApp';\r\n\r\nexport abstract class Loader<T> {\r\n    protected cApp: CApp;\r\n    private entities: Entity[] = [];\r\n    private schemaLoaded: boolean = false;\r\n    constructor(cApp: CApp) {\r\n        this.cApp = cApp;\r\n        //this.initEntities();\r\n    }\r\n\r\n    //protected abstract initEntities(): void;\r\n\r\n    protected async loadSchemas() {\r\n        if (this.schemaLoaded === true) return;\r\n        await Promise.all(this.entities);\r\n        this.schemaLoaded = true;\r\n    }\r\n\r\n    async load(param: any): Promise<T> {\r\n        await this.loadSchemas();\r\n        let data = this.initData();\r\n        await this.loadToData(param, data);\r\n        return data;\r\n    }\r\n    protected abstract async loadToData(param: any, data: T): Promise<void>;\r\n    protected abstract initData(): T;\r\n}\r\n","import { Loader } from '../mainSubs/loader';\r\n\r\nexport class LoaderProductChemical extends Loader<any> {\r\n    protected async loadToData(productId: number, data: any): Promise<void> {\r\n\r\n        let productChemical = await this.cApp.uqs.product.ProductChemical.obj({ product: productId });\r\n        if (productChemical) {\r\n            let { chemical, purity, CAS, molecularFomula, molecularWeight } = productChemical;\r\n            data.chemical = chemical;\r\n            data.purity = purity;\r\n            data.CAS = CAS;\r\n            data.molecularFomula = molecularFomula;\r\n            data.molecularWeight = molecularWeight;\r\n        }\r\n    }\r\n\r\n    protected initData(): any {\r\n        return {};\r\n    }\r\n}","import _ from 'lodash';\r\n//import { Tuid, TuidDiv, Map, Query } from 'tonva';\r\nimport { ProductPackRow } from './Product';\r\nimport { Loader } from '../mainSubs/loader';\r\nimport { MainSubs, MainProductChemical, MainBrand } from '../mainSubs';\r\nimport { LoaderProductChemical } from '../tools/productChemical';\r\n\r\nexport class LoaderBrand extends Loader<MainBrand> {\r\n    /*\r\n    private brandTuid: Tuid;\r\n\r\n    protected initEntities() {\r\n        let { cUqProduct } = this.cApp;\r\n        this.brandTuid = cUqProduct.tuid('brand');\r\n    }\r\n    */\r\n    protected async loadToData(brandId: number, data: MainBrand): Promise<void> {\r\n        let brand = await this.cApp.uqs.product.Brand.load(brandId);\r\n        data.id = brand.id;\r\n        data.name = brand.name;\r\n    }\r\n\r\n    protected initData(): MainBrand {\r\n        return {} as MainBrand;\r\n    }\r\n}\r\n\r\nexport class LoaderProductWithChemical extends Loader<MainProductChemical> {\r\n    /*\r\n    private productTuid: Tuid;\r\n\r\n    protected initEntities() {\r\n\r\n        let { cUqProduct } = this.cApp;\r\n        this.productTuid = cUqProduct.tuid('productx');\r\n    }\r\n    */\r\n\r\n    protected async loadToData(productId: number, data: MainProductChemical): Promise<void> {\r\n\r\n        let product = await this.cApp.uqs.product.ProductX.load(productId);\r\n        if (product === undefined)\r\n            return;\r\n        _.merge(data, product);\r\n\r\n        let brandLoader = new LoaderBrand(this.cApp);\r\n        data.brand = await brandLoader.load(data.brand.id);\r\n\r\n        let productChemicalLoader = new LoaderProductChemical(this.cApp);\r\n        let productChemical: any = await productChemicalLoader.load(productId);\r\n        if (productChemical) {\r\n            let { chemical, purity, CAS, molecularFomula, molecularWeight } = productChemical;\r\n            data.chemical = chemical;\r\n            data.purity = purity;\r\n            data.CAS = CAS;\r\n            data.molecularFomula = molecularFomula;\r\n            data.molecularWeight = molecularWeight;\r\n        }\r\n\r\n        data.packs = [];\r\n        product.packx.forEach(e => {\r\n            // let { id, radiox, radioy, unit } = e;\r\n            data.packs.push(e);\r\n        });\r\n    }\r\n\r\n    protected initData(): MainProductChemical {\r\n        return {} as MainProductChemical;\r\n    }\r\n}\r\n\r\nexport class LoaderProductChemicalWithPrices extends Loader<MainSubs<MainProductChemical, ProductPackRow>> {\r\n\r\n    //private getCustomerDiscount: Query;\r\n    //private priceMap: Map;\r\n    //private getPromotionPackQuery: Query;\r\n\r\n    /*\r\n    protected initEntities() {\r\n\r\n        let { product, customerDiscount, warehouse, promotion } = this.cApp.uqs;\r\n        this.getCustomerDiscount = customerDiscount.query(\"getdiscount\");\r\n        this.priceMap = cUqProduct.map('pricex');\r\n        this.getPromotionPackQuery = cUqPromotion.query(\"getPromotionPack\");\r\n    }\r\n    */\r\n\r\n    protected initData(): MainSubs<MainProductChemical, ProductPackRow> {\r\n        return { main: {} as MainProductChemical, subs: [] as ProductPackRow[] };\r\n    }\r\n\r\n    protected async loadToData(productId: any, data: MainSubs<MainProductChemical, ProductPackRow>): Promise<void> {\r\n        let { customerDiscount, product, promotion } = this.cApp.uqs;\r\n        let productLoader = new LoaderProductWithChemical(this.cApp);\r\n        data.main = await productLoader.load(productId);\r\n\r\n        let discount = 0;\r\n        let { currentUser, currentSalesRegion, cart, currentLanguage } = this.cApp;\r\n        if (currentUser.hasCustomer) {\r\n            let discountSetting = await customerDiscount.GetDiscount.obj({ brand: data.main.brand.id, customer: currentUser.currentCustomer });\r\n            discount = discountSetting && discountSetting.discount;\r\n        }\r\n\r\n        let { id: currentSalesRegionId } = currentSalesRegion;\r\n        let prices = await product.PriceX.table({ product: productId, salesRegion: currentSalesRegionId });\r\n        data.subs = prices.filter(e => e.discountinued === 0 && e.expireDate > Date.now()).sort((a, b) => a.retail - b.retail).map(element => {\r\n            let ret: any = {};\r\n            ret.pack = element.pack;\r\n            ret.retail = element.retail;\r\n            if (discount !== 0)\r\n                ret.vipPrice = Math.round(element.retail * (1 - discount));\r\n            ret.currency = currentSalesRegion.currency;\r\n            ret.quantity = cart.getQuantity(productId, element.pack.id)\r\n            return ret;\r\n        });\r\n\r\n        let promises: PromiseLike<any>[] = [];\r\n        data.subs.forEach(v => {\r\n            promises.push(promotion.GetPromotionPack.obj({ product: productId, pack: v.pack, salesRegion: currentSalesRegion, language: currentLanguage }));\r\n        })\r\n        let results = await Promise.all(promises);\r\n\r\n        for (let i = 0; i < data.subs.length; i++) {\r\n            let promotion = results[i];\r\n            let discount = promotion && promotion.discount;\r\n            if (discount)\r\n                data.subs[i].promotionPrice = Math.round((1 - discount) * data.subs[i].retail);\r\n        }\r\n    }\r\n}\r\n\r\n/*\r\n// 拟用 LoaderProduct 替换\r\nexport class ProductService {\r\n\r\n    private cApp: CCartApp;\r\n    private productTuid: TuidMain;\r\n    private productChemicalMap: Map;\r\n\r\n    constructor(cApp: CCartApp) {\r\n        this.cApp = cApp;\r\n        this.initEntities();\r\n    }\r\n\r\n    protected initEntities() {\r\n\r\n        let { cUqProduct, cUqCustomerDiscount, cUqWarehouse } = this.cApp;\r\n        this.productTuid = cUqProduct.tuid('productx');\r\n        this.productChemicalMap = cUqProduct.map('productChemical');\r\n    }\r\n\r\n    async loadProductChemical(productId: number): Promise<MainProductChemical> {\r\n\r\n        let result: MainProductChemical;\r\n        let product = await this.productTuid.load(productId);\r\n        result = {...product };\r\n\r\n        let productChemical = await this.productChemicalMap.obj({ product: productId });\r\n        if (productChemical) {\r\n            let { chemical, purity, CAS, molecularFomula, molecularWeight } = productChemical;\r\n            result.chemical = chemical;\r\n            result.purity = purity;\r\n            result.CAS = CAS;\r\n            result.molecularFomula = molecularFomula;\r\n            result.molecularWeight = molecularWeight;\r\n        }\r\n        return result;\r\n    }\r\n}\r\n*/","import * as React from 'react';\r\nimport { tv, View } from 'tonva';\r\nimport { CProduct } from './CProduct';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VProductDelivery extends View<CProduct> {\r\n\r\n    render(param: any): JSX.Element {\r\n        let { obj: packObj, id: packId } = param;\r\n        let { owner: productId } = packObj;\r\n        let { controller } = this;\r\n        let { currentSalesRegion } = controller.cApp;\r\n        controller.getInventoryAllocation(productId, packId, currentSalesRegion);\r\n        controller.getFutureDeliveryTimeDescription(productId, currentSalesRegion);\r\n        return <this.content packId={packId} productId={productId} />;\r\n    }\r\n\r\n    private content = observer((param: any) => {\r\n\r\n        let deliveryTimeUI;\r\n        let { packId, productId } = param;\r\n        let { inventoryAllocationContainer, futureDeliveryTimeDescriptionContainer } = this.controller;\r\n        let inventoryAllocation = inventoryAllocationContainer[packId];\r\n        let futureDeliveryTimeDescription = futureDeliveryTimeDescriptionContainer[productId];\r\n        if (inventoryAllocation && inventoryAllocation.length > 0) {\r\n            deliveryTimeUI = inventoryAllocation.map((v, index) => {\r\n                let { warehouse, quantity, deliveryTimeDescription } = v;\r\n                if (quantity > 0) {\r\n                    return <div key={index} className=\"text-success\">\r\n                        {tv(warehouse, (values: any) => <span className=\"small\">{values.name}</span>)}: {(quantity > 10 ? '>10' : quantity)}\r\n                        {deliveryTimeDescription}\r\n                    </div>\r\n                }\r\n            });\r\n        } else {\r\n            deliveryTimeUI = <div>{futureDeliveryTimeDescription && '期货: ' + futureDeliveryTimeDescription}</div>;\r\n        }\r\n        return deliveryTimeUI;\r\n    })\r\n}","import * as React from 'react';\r\nimport { View, tv } from 'tonva';\r\nimport { CProduct, productPropItem, renderBrand } from './CProduct';\r\nimport { ProductImage } from 'tools/productImage';\r\n\r\nexport class VCartProuductView extends View<CProduct> {\r\n\r\n    render(param: any): JSX.Element {\r\n        return <>{tv(param, this.renderCartProduct)}</>;\r\n    }\r\n\r\n\r\n    private renderCartProduct = (product: any) => {\r\n        let { id, brand, description, descriptionC, origin, imageUrl } = product;\r\n\r\n        return <div className=\"row d-flex mb-3 px-2\">\r\n            <div className=\"col-12\">\r\n                <div className=\"py-2\">\r\n                    <strong>{description}</strong>\r\n                </div>\r\n                <div className=\"pb-2\">\r\n                    <strong>{descriptionC}</strong>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3\">\r\n                        <ProductImage chemicalId={imageUrl} className=\"w-4c h-4c\" />\r\n                    </div>\r\n                    <div className=\"col-9\">\r\n                        <div className=\"row\">\r\n                            {this.controller.renderChemicalInfo(product)}\r\n                            {productPropItem('编号', origin)}\r\n                            {tv(brand, renderBrand)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    };\r\n}\r\n\r\n\r\nexport class VProuductView extends View<CProduct> {\r\n\r\n    render(param: any): JSX.Element {\r\n        return <>{tv(param, this.renderProduct)}</>;\r\n    }\r\n\r\n    private renderProduct = (product: any) => {\r\n        let { brand, description, descriptionC, origin, imageUrl } = product;\r\n        return <div className=\"d-block mb-4 px-3\">\r\n            <div className=\"py-2\">\r\n                <div><strong>{description}</strong></div>\r\n                <div>{descriptionC}</div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    <div className=\"row\">\r\n                        {productPropItem('产品编号', origin)}\r\n                        {tv(brand, renderBrand)}\r\n                        {this.controller.renderChemicalInfo(product)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}","import * as React from 'react';\r\nimport { tv, View } from 'tonva';\r\nimport { CProduct, productPropItem } from './CProduct';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VChemicalInfo extends View<CProduct> {\r\n\r\n    render(param: any): JSX.Element {\r\n        let { id: productId } = param;\r\n        let { controller } = this;\r\n        controller.getChemicalInfo(productId);\r\n        return <this.content productId={productId} />;\r\n    }\r\n\r\n    private content = observer((param: any) => {\r\n\r\n        let { productId } = param;\r\n        let { chemicalInfoContainer } = this.controller;\r\n        let chemicalInfo = chemicalInfoContainer[productId];\r\n        if (chemicalInfo !== undefined) {\r\n            let { chemical, purity, CAS, molecularFomula, molecularWeight } = chemicalInfo;\r\n            return <>\r\n                {productPropItem('CAS', CAS)}\r\n                {productPropItem('纯度', purity)}\r\n            </>\r\n        }\r\n        return <></>;\r\n    })\r\n}\r\n","import * as React from 'react';\r\nimport * as _ from 'lodash';\r\nimport { observable } from 'mobx';\r\nimport { Query, tv, BoxId, Map } from 'tonva';\r\nimport { PageItems, Controller, nav, Page, Image } from 'tonva';\r\nimport classNames from 'classnames';\r\nimport { CApp } from '../CApp';\r\nimport { CUqBase } from '../CBase';\r\n//import { CCartApp } from '../CCartApp';\r\nimport { VProduct } from './VProduct';\r\nimport { VProductList } from './VProductList';\r\nimport { LoaderProductChemicalWithPrices } from './itemLoader';\r\nimport { ProductImage } from '../tools/productImage';\r\nimport { VProductDelivery } from './VProductDelivery';\r\nimport { VCartProuductView } from './VProductView';\r\nimport { VChemicalInfo } from './VChemicalInfo';\r\n\r\nclass PageProducts extends PageItems<any> {\r\n\r\n    private searchProductQuery: Query;\r\n\r\n    constructor(searchProductQuery: Query) {\r\n        super();\r\n        this.firstSize = this.pageSize = 10;\r\n        this.searchProductQuery = searchProductQuery;\r\n    }\r\n\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.searchProductQuery.page(param, pageStart, pageSize);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        this.pageStart = item === undefined ? 0 : item.seq;\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n */\r\nexport class CProduct extends CUqBase {\r\n    cApp: CApp;\r\n    pageProducts: PageProducts;\r\n\r\n    @observable inventoryAllocationContainer: { [packId: number]: any[] } = {};\r\n    @observable futureDeliveryTimeDescriptionContainer: { [productId: number]: string } = {};\r\n    @observable chemicalInfoContainer: { [productId: number]: any } = {};\r\n\r\n    protected async internalStart(param: any) {\r\n        this.searchByKey(param);\r\n    }\r\n\r\n    searchByKey(key: string) {\r\n        let { currentSalesRegion } = this.cApp;\r\n        //let searchProductQuery = cUqProduct.query(\"searchProduct\");\r\n        this.pageProducts = new PageProducts(this.uqs.product.SearchProduct);\r\n        this.pageProducts.first({ keyWord: key, salesRegion: currentSalesRegion.id });\r\n        this.openVPage(VProductList, key);\r\n    }\r\n\r\n    async searchByCategory(category: any) {\r\n        let { currentSalesRegion } = this.cApp;\r\n        //let searchProductQuery = .query(\"searchProductByCategory\");\r\n        this.pageProducts = new PageProducts(this.uqs.product.SearchProductByCategory);\r\n        let { productCategoryId, name } = category;\r\n        this.pageProducts.first({ productCategory: productCategoryId, salesRegion: currentSalesRegion.id });\r\n        this.openVPage(VProductList, name);\r\n    }\r\n\r\n    showProductDetail = async (product: BoxId) => {\r\n\r\n        let loader = new LoaderProductChemicalWithPrices(this.cApp);\r\n        let productData = await loader.load(product.id);\r\n        this.openVPage(VProduct, { productData, product });\r\n    }\r\n\r\n    renderPrice = async (productId: number, packId: BoxId, salesRegion: number) => {\r\n\r\n    }\r\n\r\n    renderDeliveryTime = (pack: BoxId) => {\r\n        return this.renderView(VProductDelivery, pack);\r\n    }\r\n\r\n    getInventoryAllocation = async (productId: number, packId: number, salesRegionId: number) => {\r\n        if (this.inventoryAllocationContainer[packId] === undefined)\r\n            this.inventoryAllocationContainer[packId] = await this.uqs.warehouse.GetInventoryAllocation.table({ product: productId, pack: packId, salesRegion: this.cApp.currentSalesRegion });\r\n    }\r\n\r\n    getFutureDeliveryTimeDescription = async (productId: number, salesRegionId: number) => {\r\n        if (this.futureDeliveryTimeDescriptionContainer[productId] === undefined) {\r\n            let futureDeliveryTime = await this.uqs.product.GetFutureDeliveryTime.table({ product: productId, salesRegion: salesRegionId });\r\n            if (futureDeliveryTime.length > 0) {\r\n                let { minValue, maxValue, unit, deliveryTimeDescription } = futureDeliveryTime[0];\r\n                this.futureDeliveryTimeDescriptionContainer[productId] = minValue + (maxValue > minValue ? '~' + maxValue : '') + ' ' + unit;\r\n            } else {\r\n                this.futureDeliveryTimeDescriptionContainer[productId] = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    renderChemicalInfo = (product: BoxId) => {\r\n        return this.renderView(VChemicalInfo, product);\r\n    }\r\n\r\n    getChemicalInfo = async (productId: number) => {\r\n        if (this.chemicalInfoContainer[productId] === undefined) {\r\n            this.chemicalInfoContainer[productId] = await this.uqs.product.ProductChemical.obj({ product: productId });\r\n        }\r\n    }\r\n\r\n    renderCartProduct = (product: BoxId) => {\r\n        return this.renderView(VCartProuductView, product);\r\n    }\r\n}\r\n\r\nexport function renderBrand(brand: any) {\r\n    return productPropItem('品牌', brand.name);\r\n}\r\n\r\nexport function productPropItem(caption: string, value: any, captionClass?: string) {\r\n    if (value === null || value === undefined || value === '0') return null;\r\n    let capClass = captionClass ? classNames(captionClass) : classNames(\"text-muted\");\r\n    let valClass = captionClass ? classNames(captionClass) : \"\";\r\n    return <>\r\n        <div className={classNames(\"col-6 col-sm-2 pr-0 small\", capClass)}> {caption}</div>\r\n        <div className={classNames(\"col-6 col-sm-4\", valClass)}>{value}</div>\r\n    </>;\r\n}\r\n\r\nexport function renderProduct(product: any) {\r\n    let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n    return <div className=\"d-block mb-4 px-3\">\r\n        <div className=\"py-2\">\r\n            <div><strong>{description}</strong></div>\r\n            <div>{descriptionC}</div>\r\n        </div>\r\n        <div className=\"row\">\r\n            <div className=\"col-3\">\r\n                <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n            </div>\r\n            <div className=\"col-9\">\r\n                <div className=\"row\">\r\n                    {productPropItem('CAS', CAS)}\r\n                    {productPropItem('产品编号', origin)}\r\n                    {productPropItem('纯度', purity)}\r\n                    {productPropItem('分子式', molecularFomula)}\r\n                    {productPropItem('分子量', molecularWeight)}\r\n                    {tv(brand, renderBrand)}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, tv, List, LMR, FA } from 'tonva';\r\nimport { COrder } from './COrder';\r\nimport { OrderItem } from './Order';\r\nimport { CartPackRow } from '../cart/Cart';\r\n\r\nconst blankTime = 2000;\r\n\r\nexport class VCreateOrder extends VPage<COrder> {\r\n    @observable private useShippingAddress: boolean = true;\r\n    @observable private shippingAddressIsBlank: boolean = false;\r\n    @observable private invoiceAddressIsBlank: boolean = false;\r\n    @observable private invoiceIsBlank: boolean = false;\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private nullContact = () => {\r\n        return <span className=\"text-primary\">选择收货地址</span>;\r\n    }\r\n\r\n    private packsRow = (item: CartPackRow, index: number) => {\r\n        let { pack, quantity, price, currency } = item;\r\n\r\n        return <div key={index} className=\"px-2 py-2 border-top\">\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-12c mr-4 text-right\">\r\n                    <span className=\"text-danger h5\"><small>¥</small>{parseFloat((price * quantity).toFixed(2))}</span>\r\n                    <small className=\"text-muted\">(¥{parseFloat(price.toFixed(2))} × {quantity})</small>\r\n                </div>\r\n            </div>\r\n            <div>{this.controller.renderDeliveryTime(pack)}</div>\r\n        </div>;\r\n    }\r\n\r\n    private renderOrderItem = (orderItem: OrderItem) => {\r\n        let { product, packs } = orderItem;\r\n        let { controller, packsRow } = this;\r\n        return <div>\r\n            <div className=\"row\">\r\n                <div className=\"col-lg-6 pb-3\">{controller.renderOrderItemProduct(product)}</div>\r\n                <div className=\"col-lg-6\">{\r\n                    packs.map((p, index) => {\r\n                        return packsRow(p, index);\r\n                    })\r\n                }</div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private orderItemKey = (orderItem: OrderItem) => {\r\n        return orderItem.product.id;\r\n    }\r\n\r\n    private renderCoupon = observer((param: any) => {\r\n        let { couponData } = this.controller;\r\n        if (couponData['id'] === undefined) {\r\n            return <span className=\"text-primary\">填写优惠码</span>;\r\n        } else {\r\n            let { id, code, discount, preferential, validitydate, isValid } = couponData;\r\n            let { couponOffsetAmount, couponRemitted } = param;\r\n            let offsetUI, remittedUI;\r\n            if (couponOffsetAmount) {\r\n                offsetUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                    <div className=\"text-muted\">折扣:</div>\r\n                    <div className=\"text-right text-danger\"><small>¥</small>{couponOffsetAmount}</div>\r\n                </div>\r\n            }\r\n            if (couponRemitted) {\r\n                remittedUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                    <div className=\"text-muted\">抵扣:</div>\r\n                    <div className=\"text-right text-danger\"><small>¥</small>{couponRemitted}</div>\r\n                </div>\r\n            }\r\n            return <div className=\"mr-2\">\r\n                <div className=\"text-success\">{code.substr(0, 4)} {code.substr(4)}</div>\r\n                {offsetUI}\r\n                {remittedUI}\r\n            </div>\r\n        }\r\n    });\r\n\r\n    private onSubmit = async () => {\r\n        let { orderData } = this.controller;\r\n        // 必填项验证\r\n        let { shippingContact, invoiceContact, invoiceType, invoiceInfo } = orderData;\r\n        if (!shippingContact) {\r\n            this.shippingAddressIsBlank = true;\r\n            setTimeout(() => this.shippingAddressIsBlank = false, blankTime);\r\n            return;\r\n        }\r\n        if (!invoiceContact) {\r\n            if (this.useShippingAddress) {\r\n                orderData.invoiceContact = shippingContact; //contactBox;\r\n                this.invoiceAddressIsBlank = false;\r\n            } else {\r\n                this.invoiceAddressIsBlank = true;\r\n                setTimeout(() => this.invoiceAddressIsBlank = false, blankTime);\r\n                return;\r\n            }\r\n        }\r\n        if (!invoiceType || !invoiceInfo) {\r\n            this.invoiceIsBlank = true;\r\n            setTimeout(() => this.invoiceIsBlank = false, blankTime);\r\n            return;\r\n        }\r\n\r\n        this.controller.submitOrder();\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let { cApp, orderData, onSelectShippingContact, onSelectInvoiceContact, openMeInfo, onInvoiceInfoEdit, onCouponEdit } = this.controller;\r\n        let { currentUser } = cApp;\r\n        let fillMeInfo = <div onClick={openMeInfo} className=\"alert alert-warning text-primary py-1\" role=\"alert\">\r\n            点击完善您的个人信息\r\n        </div>\r\n        if (currentUser.allowOrdering)\r\n            fillMeInfo = null;\r\n        let footer = <div className=\"d-block\">\r\n            {fillMeInfo}\r\n            <div className=\"w-100 px-3\">\r\n                <div className=\"d-flex justify-content-left flex-grow-1\">\r\n                    <span className=\"text-danger\" style={{ fontSize: '1.8rem' }}><small>¥</small>{orderData.amount}</span>\r\n                </div>\r\n                <button type=\"button\"\r\n                    className=\"btn btn-danger w-30\"\r\n                    onClick={this.onSubmit} disabled={!currentUser.allowOrdering}>提交订单\r\n                </button>\r\n            </div>\r\n        </div>;\r\n\r\n        let chevronRight = <FA name=\"chevron-right\" className=\"cursor-pointer\" />\r\n        let shippingAddressBlankTip = this.shippingAddressIsBlank ?\r\n            <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写收货地址</div>\r\n            : null;\r\n        let invoiceAddressBlankTip = this.invoiceAddressIsBlank ? <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写发票地址</div> : null;\r\n        let divInvoiceContact: any = null;\r\n        if (this.useShippingAddress === false) {\r\n            if (orderData.invoiceContact !== undefined) {\r\n                divInvoiceContact = <div className=\"col-8 col-sm-10 offset-4 offset-sm-2 d-flex\">\r\n                    {tv(orderData.invoiceContact, undefined, undefined, this.nullContact)}\r\n                    <div>{chevronRight}</div>\r\n                </div>\r\n            } else {\r\n                divInvoiceContact = <div className=\"col-8 offset-4 offset-sm-2\">\r\n                    <button className=\"btn btn-outline-primary\"\r\n                        onClick={onSelectInvoiceContact}>选择发票地址</button>\r\n                    {invoiceAddressBlankTip}\r\n                </div>\r\n            }\r\n        }\r\n\r\n        let invoiceContactUI = <div className=\"row py-3 bg-white mb-1\">\r\n            <div className=\"col-4 col-sm-2 pb-2 text-muted\">发票地址:</div>\r\n            <div className=\"col-8 col-sm-10\">\r\n                <div>\r\n                    <label className=\"cursor-pointer\">\r\n                        <input type=\"checkbox\"\r\n                            defaultChecked={this.useShippingAddress}\r\n                            onChange={e => {\r\n                                this.useShippingAddress = e.currentTarget.checked;\r\n                                orderData.invoiceContact = undefined;\r\n                                this.invoiceAddressIsBlank = false;\r\n                            }} /> 同收货地址\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            {divInvoiceContact}\r\n        </div>\r\n\r\n        let invoiceBlankTip = this.invoiceIsBlank ? <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写发票信息</div> : null;\r\n        let invoiceInfoUI = <div className=\"row py-3 bg-white mb-1\" onClick={onInvoiceInfoEdit}>\r\n            <div className=\"col-4 col-sm-2 pb-2 text-muted\">发票信息:</div>\r\n            <div className=\"col-8 col-sm-10\">\r\n                <LMR className=\"w-100 align-items-center\" right={chevronRight}>\r\n                    {tv(orderData.invoiceType, (v) => <>{v.description}</>, undefined, () => <span className=\"text-primary\">填写发票信息</span>)}\r\n                    {tv(orderData.invoiceInfo, (v) => <> -- {v.title}</>, undefined, () => <></>)}\r\n                    {invoiceBlankTip}\r\n                </LMR>\r\n            </div>\r\n        </div>\r\n\r\n        let freightFeeUI = <></>;\r\n        let freightFeeRemittedUI = <></>;\r\n        if (orderData.freightFee) {\r\n            freightFeeUI = <>\r\n                <div className=\"col-4 col-sm-2 pb-2 text-muted\">运费:</div>\r\n                <div className=\"col-8 col-sm-10 text-right text-danger\"><small>¥</small>{orderData.freightFee}</div>\r\n            </>\r\n            if (orderData.freightFeeRemitted) {\r\n                freightFeeRemittedUI = <>\r\n                    <div className=\"col-4 col-sm-2 pb-2 text-muted\">运费减免:</div>\r\n                    <div className=\"col-8 col-sm-10 text-right text-danger\"><small>¥</small>{orderData.freightFeeRemitted}</div>\r\n                </>\r\n            }\r\n        }\r\n\r\n        let couponUI = <></>;\r\n        if (1 === 1) {\r\n            couponUI = <div className=\"row py-3 bg-white mb-1\" onClick={onCouponEdit}>\r\n                <div className=\"col-4 col-sm-2 pb-2 text-muted\">优惠码:</div>\r\n                <div className=\"col-8 col-sm-10\">\r\n                    <LMR className=\"w-100 align-items-center\" right={chevronRight}>\r\n                        <this.renderCoupon couponOffsetAmount={orderData.couponOffsetAmount} couponRemitted={orderData.couponRemitted} />\r\n                    </LMR>\r\n                </div>\r\n            </div>\r\n        }\r\n\r\n        return <Page header=\"订单预览\" footer={footer}>\r\n            <div className=\"px-2\">\r\n                <div className=\"row py-3 bg-white mb-1\" onClick={onSelectShippingContact}>\r\n                    <div className=\"col-4 col-sm-2 pb-2 text-muted\">收货地址:</div>\r\n                    <div className=\"col-8 col-sm-10\">\r\n                        <LMR className=\"w-100 align-items-center\" right={chevronRight}>{tv(orderData.shippingContact, undefined, undefined, this.nullContact)}</LMR>\r\n                        {shippingAddressBlankTip}\r\n                    </div>\r\n                </div>\r\n                {invoiceContactUI}\r\n                {invoiceInfoUI}\r\n            </div>\r\n            <List items={orderData.orderItems} item={{ render: this.renderOrderItem, key: this.orderItemKey as any }} />\r\n            <div className=\"px-2\">\r\n                <div className=\"row py-3 pr-3 bg-white my-1\">\r\n                    <div className=\"col-4 col-sm-2 pb-2 text-muted\">商品总额:</div>\r\n                    <div className=\"col-8 col-sm-10 text-right\"><small>¥</small>{orderData.productAmount}</div>\r\n                    {freightFeeUI}\r\n                    {freightFeeRemittedUI}\r\n                </div >\r\n                {couponUI}\r\n            </div>\r\n        </Page >\r\n    })\r\n}","import { BoxId } from 'tonva';\r\nimport { observable, computed } from 'mobx';\r\nimport { CartPackRow } from 'cart/Cart';\r\n\r\nexport class Order {\r\n\r\n    webUser: any;\r\n    organization: BoxId;\r\n    customer: any;\r\n\r\n    @observable shippingContact: BoxId;\r\n    @observable invoiceContact: BoxId;\r\n    @observable invoiceType: BoxId;\r\n    @observable invoiceInfo: BoxId;\r\n    @observable orderItems: OrderItem[] = [];\r\n\r\n    @observable freightFee: number;\r\n    @observable freightFeeRemitted: number;\r\n\r\n    @computed get amount() {\r\n        return parseFloat((this.orderItems.reduce((pv, cv) => (pv + cv.subAmount), 0) +\r\n            (this.freightFee ? this.freightFee : 0) +\r\n            (this.freightFeeRemitted ? this.freightFeeRemitted : 0) +\r\n            (this.couponOffsetAmount ? this.couponOffsetAmount : 0) +\r\n            (this.couponRemitted ? this.couponRemitted : 0)).toFixed(2));\r\n    };\r\n    @computed get productAmount() {\r\n        return parseFloat(this.orderItems.reduce((pv, cv) => pv + cv.subAmount, 0).toFixed(2));\r\n    };\r\n    currency: BoxId;\r\n    @observable coupon: BoxId;\r\n    @observable couponOffsetAmount: number;\r\n    @observable couponRemitted: number;\r\n\r\n    getDataForSave() {\r\n        let orderItems: any[] = [];\r\n        this.orderItems.forEach(oi => {\r\n            oi.packs.forEach(pk => {\r\n                this.currency = pk.currency;\r\n                orderItems.push({\r\n                    product: oi.product, pack: pk.pack, price: pk.price, quantity: pk.quantity\r\n                    , subAmount: pk.quantity * pk.price\r\n                })\r\n            })\r\n        });\r\n        return {\r\n            webUser: this.webUser,\r\n            organization: this.organization,\r\n            customer: this.customer,\r\n            shippingContact: this.shippingContact,\r\n            invoiceContact: this.invoiceContact,\r\n            invoiceType: this.invoiceType,\r\n            invoiceInfo: this.invoiceInfo,\r\n            amount: this.amount,\r\n            currency: this.currency,\r\n            freightFee: this.freightFee,\r\n            freightFeeRemitted: this.freightFeeRemitted,\r\n            coupon: this.coupon,\r\n            couponOffsetAmount: this.couponOffsetAmount,\r\n            couponRemitted: this.couponRemitted,\r\n            orderitems: orderItems, // 前面的必须是小写的orderitems\r\n        }\r\n    }\r\n}\r\n\r\nexport class OrderItem {\r\n\r\n    product: BoxId;\r\n    @observable packs: CartPackRow[];\r\n    @computed get subAmount() {\r\n        return this.packs.reduce((p, c) => {\r\n            return p + c.price * c.quantity\r\n        }, 0);\r\n    }\r\n    /*\r\n    pack: BoxId;\r\n\r\n    @observable price: number;\r\n    @observable quantity: number;\r\n    @computed get subAmount() {\r\n        return this.price * this.quantity;\r\n    }\r\n    */\r\n}","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { COrder } from './COrder';\r\n\r\nexport class OrderSuccess extends VPage<COrder> {\r\n\r\n    async open(orderCreateResult: any) {\r\n\r\n        this.openPage(this.page, orderCreateResult);\r\n    }\r\n\r\n    private page = (orderCreateResult: any) => {\r\n        return <Page header=\"下单成功\" back=\"close\">\r\n            <div className=\"p-3 bg-white mb-3\">\r\n                <div className=\"mb-3\">下单成功，感谢您对百灵威的厚爱！</div>\r\n                <p className=\"\">\r\n                    订单编号: <span className=\"h5 text-info\">{orderCreateResult.no}</span><br /><br />\r\n                    我们将立刻处理您的订单，请注意查收到货短信。\r\n                </p>\r\n            </div>\r\n        </Page>\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { CSelectContact } from './CSelectContact';\r\nimport { List, LMR, FA } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VContactList extends VPage<CSelectContact> {\r\n\r\n    async open() {\r\n\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onContactRender = (contact: any) => {\r\n        let { onEditContact, onContactSelected } = this.controller;\r\n        let right = <div className=\"p-2 cursor-pointer text-info\" onClick={() => onEditContact(contact)}>\r\n            <FA name=\"edit\" />\r\n        </div>\r\n        return <LMR right={right} className=\"px-3 py-2\">\r\n            <div onClick={() => onContactSelected(contact)}>\r\n                {tv(contact)}\r\n            </div>\r\n        </LMR>\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { onNewContact, userContacts } = this.controller;\r\n        let footer = <button type=\"button\" className=\"btn btn-primary w-100\" onClick={() => onNewContact()} >添加新地址</button>;\r\n        let contactList = <List items={userContacts} item={{ render: this.onContactRender }} none=\"无地址\" />;\r\n        return <Page footer={footer} header=\"管理地址\">\r\n            {contactList}\r\n        </Page>\r\n    })\r\n}","\r\nexport function telephoneValidation(value: string) {\r\n    if (value && !/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/.test(value))\r\n        return \"固定电话格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function mobileValidation(value: string) {\r\n    if (value && !/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(value))\r\n        return \"手机号格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function emailValidation(value: string) {\r\n    if (value && !/\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/.test(value))\r\n        return \"Email格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function faxValidation(value: string) {\r\n    if (value && !/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/.test(value))\r\n        return \"传真号码格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function addressDetailValidation(value: string) {\r\n    return (value && value.length > 200) ? \"详细地址最多200个字！\" : undefined;\r\n}\r\n\r\nexport function zipCodeValidation(value: string) {\r\n    return (value && value.length > 15) ? \"邮编过长，请修改后录入！\" : undefined;\r\n}\r\n\r\n\r\nexport function organizationNameValidation(value: string) {\r\n    return (value && value.length > 100) ? \"单位名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function departmentNameValidation(value: string) {\r\n    return (value && value.length > 100) ? \"部门名称名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function salutationValidation(value: string) {\r\n    return (value && value.length > 100) ? \"单位名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function nameValidation(value: string) {\r\n    return (value && value.length > 50) ? \"姓名最多50个字！\" : undefined;\r\n}","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { VPage, Page, Form, Schema, UiSchema, Context, UiInputItem, UiIdItem, BoxId } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { CSelectContact } from './CSelectContact';\r\nimport { addressDetailValidation, emailValidation, telephoneValidation, mobileValidation, organizationNameValidation, nameValidation } from 'tools/inputValidations';\r\n\r\nconst schema: Schema = [\r\n    { name: 'id', type: 'id', required: false },\r\n    { name: 'name', type: 'string', required: true },\r\n    { name: 'organizationName', type: 'string', required: true },\r\n    { name: 'mobile', type: 'string', required: true },\r\n    { name: 'telephone', type: 'string', required: false },\r\n    { name: 'email', type: 'string', required: false },\r\n    { name: 'address', type: 'id', required: true },\r\n    { name: 'addressString', type: 'string', required: true },\r\n    { name: 'isDefault', type: 'boolean', required: false },\r\n];\r\n\r\nexport class VContact extends VPage<CSelectContact> {\r\n\r\n    private userContactData: any;\r\n    private form: Form;\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            id: { visible: false },\r\n            name: { widget: 'text', label: '姓名', placeholder: '姓名', rules: nameValidation } as UiInputItem,\r\n            organizationName: { widget: 'text', label: '单位名称', placeholder: '单位名称', rules: organizationNameValidation } as UiInputItem,\r\n            mobile: { widget: 'text', label: '手机号', placeholder: '手机号', rules: mobileValidation } as UiInputItem, telephone: { widget: 'text', label: '电话', placeholder: '电话', rules: telephoneValidation } as UiInputItem,\r\n            email: { widget: 'email', label: 'Email', rules: emailValidation, placeholder: 'Email' } as UiInputItem, address: {\r\n                widget: 'id', label: '所在地区', placeholder: '所在地区',\r\n                pickId: async (context: Context, name: string, value: number) => await this.controller.pickAddress(context, name, value),\r\n                Templet: (address: BoxId) => {\r\n                    return tv(address, (addressValue) => {\r\n                        let { country, province, city, county } = addressValue;\r\n                        /* 下面这种在使用tv之前的一堆判断应该是tv或者什么的有bug, 应该让Henry改改 */\r\n                        return <>\r\n                            {country && country.id && tv(country, v => <>{v.chineseName}</>)}\r\n                            {province && province.id && tv(province, (v) => <>{v.chineseName}</>)}\r\n                            {city && city.id && tv(city, (v) => <>{v.chineseName}</>)}\r\n                            {county && county.id && tv(county, (v) => <>{v.chineseName}</>)}\r\n                        </>;\r\n                    }, () => {\r\n                        return <small className=\"text-muted\">请选择地区</small>;\r\n                    })\r\n                }\r\n            } as UiIdItem,\r\n            addressString: { widget: 'text', label: '详细地址', placeholder: '详细地址', rules: addressDetailValidation } as UiInputItem,\r\n            isDefault: { widget: 'checkbox', label: '作为默认地址' },\r\n            submit: { widget: 'button', label: '提交' },\r\n        }\r\n    }\r\n\r\n    async open(userContactData: any) {\r\n        this.userContactData = userContactData;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onSaveContact = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        await this.controller.saveContact(context.form.data);\r\n    }\r\n\r\n    private onDelContact = async () => {\r\n        let { contact } = this.userContactData;\r\n        if (await this.vCall(VConfirmDeleteContact, contact) === true) {\r\n            await this.controller.delContact(contact);\r\n            this.closePage();\r\n        };\r\n    }\r\n\r\n    private page = () => {\r\n        let contactData = _.clone(this.userContactData.contact);\r\n\r\n        let buttonDel: any;\r\n        if (contactData !== undefined) {\r\n            buttonDel = <button className=\"btn btn-sm btn-info\" onClick={this.onDelContact}>删除</button>;\r\n        }\r\n        let { fromOrderCreation } = this.controller;\r\n        let footer = <button type=\"button\"\r\n            className=\"btn btn-primary w-100\"\r\n            onClick={this.onSaveContact}>{fromOrderCreation ? '保存并使用' : '保存'}</button>;\r\n        return <Page header=\"地址信息\" footer={footer} right={buttonDel}>\r\n            <div className=\"App-container container text-left\">\r\n                <Form ref={v => this.form = v} className=\"my-3\"\r\n                    schema={schema}\r\n                    uiSchema={this.uiSchema}\r\n                    formData={contactData}\r\n                    onButtonClick={this.onFormButtonClick}\r\n                    fieldLabelSize={3} />\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n\r\nclass VConfirmDeleteContact extends VPage<CSelectContact> {\r\n    async open(contact: any) {\r\n        this.openPage(this.page, contact);\r\n    }\r\n\r\n    private onConfirm = async () => {\r\n        await this.returnCall(true);\r\n        this.closePage();\r\n    }\r\n\r\n    private onCancel = async () => {\r\n        await this.returnCall(false);\r\n        this.closePage();\r\n    }\r\n\r\n    private page = (contact: any) => {\r\n        return <Page header=\"删除地址\" back=\"close\">\r\n            <div className=\"w-75 mx-auto border border-primary rounded my-3 p-3 bg-white\">\r\n                <div className=\"p-4 position-relative\">\r\n                    <i className=\"fa fa-question-circle position-absolute fa-2x text-warning\" style={{ left: 0, top: 0 }} />\r\n                    <b className=\"\">是否删除该地址？</b>\r\n                </div>\r\n                <div className=\"d-flex mt-3 justify-content-end\">\r\n                    <button className=\"btn btn-danger mr-3\" onClick={this.onConfirm}>删除地址</button>\r\n                    <button className=\"btn btn-outline-info mr-3\" onClick={this.onCancel}>取消</button>\r\n                </div>\r\n            </div>\r\n        </Page>;\r\n    }\r\n}\r\n","import AnalyticalChemistry from '../images/AnalyticalChemistry.png';\r\nimport LabSupplies from '../images/LabSupplies.png';\r\nimport LifeScience from '../images/LifeScience.png';\r\nimport MaterialScience from '../images/MaterialScience.png';\r\nimport OrganicChemistry from '../images/OrganicChemistry.png';\r\n\r\n/*\r\nexport const GLOABLE = {\r\n    CHINA: 44,\r\n    CHINESE: 196,\r\n    SALESREGION_CN: 1,\r\n    ROOTCATEGORY: {\r\n        47: {\r\n            src: OrganicChemistry,\r\n            labelColor: 'text-info',\r\n        },\r\n        470: {\r\n            src: AnalyticalChemistry,\r\n            labelColor: 'text-success',\r\n        },\r\n        1013: {\r\n            src: LifeScience,\r\n            labelColor: 'text-danger',\r\n        },\r\n        1219: {\r\n            src: MaterialScience,\r\n            labelColor: 'text-warning',\r\n        },\r\n        1545: {\r\n            src: LabSupplies,\r\n            labelColor: 'text-primary',\r\n        },\r\n    }\r\n}\r\n*/\r\n\r\nexport const GLOABLE = {\r\n    CHINA: 43,\r\n    CHINESE: 197,\r\n    SALESREGION_CN: 4,\r\n    ROOTCATEGORY: {\r\n        7: {\r\n            src: OrganicChemistry,\r\n            labelColor: 'text-info',\r\n        },\r\n        430: {\r\n            src: AnalyticalChemistry,\r\n            labelColor: 'text-success',\r\n        },\r\n        986: {\r\n            src: LifeScience,\r\n            labelColor: 'text-danger',\r\n        },\r\n        1214: {\r\n            src: MaterialScience,\r\n            labelColor: 'text-warning',\r\n        },\r\n        1545: {\r\n            src: LabSupplies,\r\n            labelColor: 'text-primary',\r\n        },\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, BoxId } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { List, FA } from 'tonva';\r\nimport { CAddress } from './CAddress';\r\nimport { GLOABLE } from 'ui';\r\n\r\nexport class VAddress extends VPage<CAddress> {\r\n    private provinceId: number;\r\n    private cityId: number;\r\n    private countyId: number;\r\n    private backLevel = 0;\r\n\r\n    async open(param: any) {\r\n        let provinces = await this.controller.getCountryProvince(GLOABLE.CHINA);\r\n        this.openPage(this.page, { provinces: provinces });\r\n    }\r\n\r\n    private page = (param: any) => {\r\n        this.backLevel++;\r\n        return <Page header=\"选择所在省市\">\r\n            <div className=\"row no-gutters\">\r\n                {param.provinces.map(v => this.renderPCC(v.province, this.onProvinceClick))}\r\n            </div>\r\n        </Page>\r\n    }\r\n\r\n    private renderPCC = (pcc: BoxId, onClick: any) => {\r\n        return <div key={pcc.id} className=\"col-6 col-md-4 col-lg-3 cursor-pointer\">\r\n            {tv(pcc, (value) => {\r\n                let { id, chineseName } = value;\r\n                return <>\r\n                    <div className=\"pt-1 pb-1 px-2\" onClick={() => onClick(id)}\r\n                        style={{ border: '1px solid #eeeeee', marginRight: '-1px', marginBottom: '-1px' }}\r\n                    >\r\n                        <span className=\"ml-1 align-middle\">\r\n                            <FA name=\"chevron-right\" className=\"text-info small\" />\r\n                            &nbsp; {chineseName}\r\n                        </span>\r\n                    </div>\r\n                </>;\r\n            })}\r\n        </div>\r\n    }\r\n\r\n    private onProvinceClick = async (provinceId: any) => {\r\n        this.provinceId = provinceId;\r\n        let cities = await this.controller.getProvinceCities(provinceId);\r\n        if (cities) {\r\n            let len = cities.length;\r\n            if (len === 1) {\r\n                await this.onCityClick(cities[0].id);\r\n                return;\r\n            }\r\n            if (len > 0) {\r\n                this.backLevel++;\r\n                this.openPageElement(<Page header=\"选择所在城市\">\r\n                    <div className=\"row no-gutters\">\r\n                        {cities.map(v => this.renderPCC(v.city, this.onCityClick))}\r\n                    </div>\r\n                </Page>);\r\n                return;\r\n            }\r\n        } else {\r\n            this.closePage(this.backLevel);\r\n            this.saveAddress();\r\n        }\r\n    }\r\n\r\n    private onCityClick = async (cityId: any) => {\r\n        this.cityId = cityId;\r\n        let counties = await this.controller.getCityCounties(cityId);\r\n        if (counties && counties.length > 0) {\r\n            this.backLevel++;\r\n            this.openPageElement(<Page header=\"选择所在区县\">\r\n                <div className=\"row no-gutters\">\r\n                    {counties.map(v => this.renderPCC(v.county, this.onCountyClick))}\r\n                </div>\r\n            </Page>);\r\n        } else {\r\n            this.closePage(this.backLevel);\r\n            this.saveAddress();\r\n        }\r\n    }\r\n\r\n    private onCountyClick = async (countyId: any) => {\r\n        this.countyId = countyId;\r\n        this.closePage(this.backLevel);\r\n        this.saveAddress();\r\n    }\r\n\r\n    private saveAddress = async () => {\r\n        await this.controller.saveAddress(GLOABLE.CHINA, this.provinceId, this.cityId, this.countyId);\r\n    }\r\n}\r\n","/*\r\nimport * as React from 'react';\r\nimport { Controller } from 'tonva';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { Query, Tuid } from 'tonva';\r\n*/\r\nimport { VAddress } from './VAddress';\r\nimport { CUqBase } from '../CBase';\r\n\r\nexport class CAddress extends CUqBase {\r\n    //private cApp: CCartApp;\r\n    /*\r\n    private getCountryProvincesQuery: Query;\r\n    private getProvinceCitiesQuery: Query;\r\n    private getCityCountiesQuery: Query;\r\n    private addressTuid: Tuid;\r\n    */\r\n\r\n    /*\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n        //this.cApp = cApp;\r\n\r\n        let { cUqCommon } = this.cApp;\r\n        this.getCountryProvincesQuery = cUqCommon.query('GetCountryProvinces');\r\n        this.getProvinceCitiesQuery = cUqCommon.query('GetProvinceCities');\r\n        this.getCityCountiesQuery = cUqCommon.query('GetCityCounties');\r\n        this.addressTuid = cUqCommon.tuid(\"Address\");\r\n    }\r\n    */\r\n    /*\r\n    protected init() {\r\n        let { cUqCommon } = this.cApp;\r\n        this.getCountryProvincesQuery = cUqCommon.query('GetCountryProvinces');\r\n        this.getProvinceCitiesQuery = cUqCommon.query('GetProvinceCities');\r\n        this.getCityCountiesQuery = cUqCommon.query('GetCityCounties');\r\n        this.addressTuid = cUqCommon.tuid(\"Address\");\r\n    }\r\n    */\r\n\r\n    protected async internalStart() {\r\n        this.openVPage(VAddress);\r\n    }\r\n\r\n    getCountryProvince = async (countryId: number): Promise<any[]> => {\r\n        return await this.uqs.common.GetCountryProvinces.table({ country: countryId });\r\n    }\r\n\r\n    getProvinceCities = async (provinceId: number): Promise<any[]> => {\r\n        return await this.uqs.common.GetProvinceCities.table({ province: provinceId });\r\n    }\r\n\r\n    getCityCounties = async (cityId: number): Promise<any[]> => {\r\n        return await this.uqs.common.GetCityCounties.table({ city: cityId });\r\n    }\r\n\r\n    saveAddress = async (countryId: number, provinceId: number, cityId?: number, countyId?: number): Promise<any> => {\r\n        let {Address} = this.uqs.common;\r\n        let newAddress = await Address.save(undefined, { country: countryId, province: provinceId, city: cityId, county: countyId });\r\n        let addressId = newAddress && Address.boxId(newAddress.id);\r\n        this.returnCall(addressId);\r\n    }\r\n}\r\n","//import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport _ from 'lodash';\r\nimport { Tuid, BoxId } from 'tonva';\r\nimport { Controller, Context, nav } from 'tonva';\r\nimport { CUqBase } from '../CBase';\r\nimport { VContactList } from './VContactList';\r\n//import { CCartApp } from 'CCartApp';\r\nimport { VContact } from './VContact';\r\nimport { CAddress } from './CAddress';\r\n\r\nexport abstract class CSelectContact extends CUqBase {\r\n    //protected cApp: CCartApp;\r\n    //private contactTuid: Tuid;\r\n    fromOrderCreation: boolean;\r\n\r\n    @observable userContacts: BoxId[] = [];\r\n\r\n    /*\r\n    constructor(cApp: CCartApp, res: any, fromOrderCreation: boolean) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n        let { cUqCustomer } = cApp;\r\n\r\n        this.contactTuid = cUqCustomer.tuid('contact');\r\n        this.fromOrderCreation = fromOrderCreation;\r\n    }\r\n    */\r\n    /*\r\n    protected init() {\r\n        let { cUqCustomer } = this.cApp;\r\n\r\n        this.contactTuid = cUqCustomer.tuid('contact');\r\n        //this.fromOrderCreation = fromOrderCreation;\r\n    }\r\n    */\r\n\r\n    async internalStart(fromOrderCreation: boolean/*contactType: ContactType*/) {\r\n        this.fromOrderCreation = fromOrderCreation;\r\n        let userContactMaps = await this.cApp.currentUser.getContacts();\r\n        this.userContacts = userContactMaps.map(v => v.contact);\r\n        this.openVPage(VContactList);\r\n        if (this.fromOrderCreation && (!this.userContacts || this.userContacts.length === 0)) {\r\n            this.onNewContact();\r\n        }\r\n    }\r\n\r\n    protected abstract async getIsDefault(userSetting: any, userContactId: number): Promise<boolean>;\r\n\r\n    /**\r\n     * 打开地址新建界面\r\n     */\r\n    onNewContact = async () => {\r\n        this.openVPage(VContact, { contact: undefined });\r\n    }\r\n\r\n    /**\r\n     * 打开地址编辑界面\r\n     */\r\n    onEditContact = async (userContact: BoxId) => {\r\n        let userContactId = userContact.id;\r\n        let contact = await this.uqs.customer.Contact.load(userContactId);\r\n        let userSetting = await this.cApp.currentUser.getSetting();\r\n        contact.isDefault = await this.getIsDefault(userSetting, userContactId);\r\n        let userContactData: any = { contact: contact };\r\n        this.openVPage(VContact, userContactData);\r\n    }\r\n\r\n    delContact = async (contact: any) => {\r\n        let { id } = contact;\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.delContact(id);\r\n        if (contact.isDefault) {\r\n            this.setDefaultContact(undefined);\r\n        }\r\n        let index = this.userContacts.findIndex(v => v.id === id);\r\n        if (index > -1)\r\n            this.userContacts.splice(index, 1);\r\n    }\r\n\r\n    saveContact = async (contact: any) => {\r\n        let {Contact:contactTuid} = this.uqs.customer;\r\n        let newContact = await contactTuid.save(undefined, contact);\r\n        let { id: newContactId } = newContact;\r\n        let contactBox = contactTuid.boxId(newContactId);\r\n\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.addContact(newContactId);\r\n        this.userContacts.push(contactBox);\r\n        let { id, isDefault } = contact;\r\n        if (isDefault === true || this.userContacts.length === 1) {\r\n            await this.setDefaultContact(contactBox);\r\n        }\r\n        // contact.id !== undefined表示是修改了已有的contact(我们只能用“替换”表示“修改”，所以此时需要删除原contact)\r\n        if (id !== undefined) {\r\n            await currentUser.delContact(id);\r\n            let index = this.userContacts.findIndex(v => v.id === id);\r\n            if (index > -1)\r\n                this.userContacts.splice(index, 1);\r\n        }\r\n        this.backPage();\r\n        if (this.fromOrderCreation) {\r\n            this.onContactSelected(contactBox);\r\n        }\r\n    }\r\n\r\n    protected abstract async setDefaultContact(contactId: BoxId);\r\n\r\n    onContactSelected = (contact: BoxId) => {\r\n        if (this.fromOrderCreation) {\r\n            this.backPage();\r\n            this.returnCall(contact);\r\n        }\r\n    }\r\n\r\n    pickAddress = async (context: Context, name: string, value: number): Promise<number> => {\r\n        let cAddress = this.newC(CAddress); // new CAddress(this.cApp, undefined);\r\n        return await cAddress.call<number>();\r\n    }\r\n}\r\n\r\nexport class CSelectShippingContact extends CSelectContact {\r\n    protected async getIsDefault(userSetting: any, userContactId: number): Promise<boolean> {\r\n        if (userSetting !== undefined) {\r\n            let { shippingContact } = userSetting;\r\n            return shippingContact && shippingContact.id === userContactId;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    protected async setDefaultContact(contactId: BoxId) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.setDefaultShippingContact(contactId);\r\n    }\r\n}\r\n\r\nexport class CSelectInvoiceContact extends CSelectContact {\r\n    protected async getIsDefault(userSetting: any, userContactId: number): Promise<boolean> {\r\n        if (userSetting !== undefined) {\r\n            let { invoiceContact } = userSetting;\r\n            return invoiceContact && invoiceContact.id === userContactId;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    protected async setDefaultContact(contactId: BoxId) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.setDefaultInvoiceContact(contactId);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { COrder } from './COrder';\r\nimport { List, EasyDate } from 'tonva';\r\nimport { observable } from 'mobx';\r\nimport { async } from 'q';\r\n\r\nexport class VMyOrders extends VPage<COrder> {\r\n\r\n    @observable private pendingOrders: any[];\r\n    @observable private processingOrders: any[];\r\n    @observable private completedOrders: any[];\r\n    private currentState: string;\r\n    async open(param: any) {\r\n        this.currentState = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderOrder = (order: any, index: number) => {\r\n        let { openOrderDetail } = this.controller;\r\n        let { id, no, date, discription, flow } = order;\r\n        return <div className=\"m-3 justify-content-between cursor-pointer\" onClick={() => openOrderDetail(id)}>\r\n            <div><span className=\"small text-muted\">订单编号: </span><strong>{no}</strong></div>\r\n            <div className=\"small text-muted\"><EasyDate date={date} /></div>\r\n        </div>;\r\n    }\r\n\r\n    private page = () => {\r\n\r\n        let tabs = [{\r\n            title: '待付款',\r\n            content: () => {\r\n                return <List items={this.pendingOrders} item={{ render: this.renderOrder }} none=\"无待付款订单\" />\r\n            },\r\n            isSelected: this.currentState === 'pendingpayment',\r\n            load: async () => {\r\n                this.currentState = 'pendingpayment';\r\n                this.pendingOrders = await this.controller.getMyOrders(this.currentState);\r\n            }\r\n        }, {\r\n            title: '进行中',\r\n            content: () => {\r\n                return <List items={this.processingOrders} item={{ render: this.renderOrder }} none=\"你还没有订单\" />\r\n            },\r\n            isSelected: this.currentState === 'processing',\r\n            load: async () => {\r\n                this.currentState = 'processing';\r\n                this.processingOrders = await this.controller.getMyOrders(this.currentState);\r\n            }\r\n        }, {\r\n            title: '已完成',\r\n            content: () => {\r\n                return <List items={this.completedOrders} item={{ render: this.renderOrder }} none=\"还没有已完成的订单\" />\r\n            },\r\n            isSelected: this.currentState === 'completed',\r\n            load: async () => {\r\n                this.currentState = 'completed';\r\n                this.completedOrders = await this.controller.getMyOrders(this.currentState);\r\n            }\r\n        }];\r\n        return <Page header=\"我的订单\" tabs={tabs} tabPosition=\"top\" />\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, BoxId } from 'tonva';\r\nimport { COrder } from './COrder';\r\nimport { tv } from 'tonva';\r\nimport { List, LMR } from 'tonva';\r\nimport { renderProduct } from 'product';\r\nimport { OrderItem } from './Order';\r\n\r\nexport class VOrderDetail extends VPage<COrder> {\r\n\r\n    async open(order: any) {\r\n\r\n        this.openPage(this.page, order);\r\n    }\r\n\r\n\r\n    private packsRow = (item: any, index: number) => {\r\n        let { pack, quantity, price, currency } = item;\r\n\r\n        return <div key={index} className=\"px-2 py-2 border-top\">\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-12c mr-4 text-right\">\r\n                    <span className=\"text-danger h5\"><small>¥</small>{parseFloat((price * quantity).toFixed(2))}</span>\r\n                    <small className=\"text-muted\">(¥{parseFloat(price.toFixed(2))} × {quantity})</small>\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private renderOrderItem = (orderItem: OrderItem) => {\r\n        let { product, packs } = orderItem;\r\n        let { controller, packsRow } = this;\r\n        return <div>\r\n            <div className=\"row p-1 my-1\">\r\n                <div className=\"col-lg-6 pb-3\">{controller.renderOrderItemProduct(product)}</div>\r\n                <div className=\"col-lg-6\">{\r\n                    packs.map((p, index) => {\r\n                        return packsRow(p, index);\r\n                    })\r\n                }</div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private page = (order: any) => {\r\n\r\n        let { brief, data } = order;\r\n        let { id, no, state, description, date } = brief;\r\n        let { orderItems, currency, shippingContact, invoiceContact, invoiceType, invoiceInfo, amount, couponOffsetAmount, couponRemitted\r\n            , freightFee, freightFeeRemitted } = data;\r\n        let couponUI;\r\n        if (couponOffsetAmount || couponRemitted) {\r\n            let offsetUI, remittedUI;\r\n            if (couponOffsetAmount) {\r\n                offsetUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                    <div className=\"text-muted\">折扣:</div>\r\n                    <div className=\"text-right text-danger\"><small>¥</small>{couponOffsetAmount}</div>\r\n                </div>\r\n            }\r\n            if (couponRemitted) {\r\n                remittedUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                    <div className=\"text-muted\">抵扣:</div>\r\n                    <div className=\"text-right text-danger\"><small>¥</small>{couponRemitted}</div>\r\n                </div>\r\n            }\r\n            couponUI = <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">优惠码:</div>\r\n                <div className=\"col-9\">\r\n                    {offsetUI}\r\n                    {remittedUI}\r\n                </div>\r\n            </div>\r\n        }\r\n\r\n        let freightFeeUI, freightFeeRemittedUI;\r\n        if (freightFee) {\r\n            freightFeeUI = <>\r\n                <div className=\"text-right text-danger\"><small>¥</small>{freightFee}</div>\r\n            </>\r\n            if (freightFeeRemitted) {\r\n                freightFeeRemittedUI = <>\r\n                    <div className=\"text-right text-danger\"><small>¥</small>{freightFeeRemitted}(减免)</div>\r\n                </>\r\n            }\r\n        }\r\n\r\n        let header = <>订单详情: {no}</>\r\n        return <Page header={header}>\r\n            <List items={orderItems} item={{ render: this.renderOrderItem }} />\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">收货地址:</div>\r\n                <div className=\"col-9\">{tv(shippingContact)}</div>\r\n            </div>\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">发票地址:</div>\r\n                <div className=\"col-9\">{tv(invoiceContact)}</div>\r\n            </div>\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">发票信息:</div>\r\n                <div className=\"col-9\">{invoiceTemplate(invoiceType, invoiceInfo)}</div>\r\n            </div>\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">运费:</div>\r\n                <div className=\"col-9\">{freightFeeUI}{freightFeeRemittedUI}</div>\r\n            </div>\r\n            {couponUI}\r\n            <div className=\"bg-white p-3 my-1 text-right\">\r\n                <span className=\"text-danger font-weight-bold\">总金额: {amount}{tv(currency)}</span>\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n\r\nfunction invoiceTemplate(invoiceType: BoxId, invoiceInfo: BoxId): JSX.Element {\r\n    return <>\r\n        {tv(invoiceType, invoiceTypeUI, undefined, () => <></>)}<br />\r\n        {tv(invoiceInfo, invoiceInfoUI, undefined, () => <></>)}\r\n    </>\r\n}\r\n\r\nfunction invoiceTypeUI(values: any) {\r\n    let { id, description } = values;\r\n    return <>{description}</>;\r\n}\r\n\r\nfunction invoiceInfoUI(values: any) {\r\n    let { id, title, taxNo, address, telephone, bank, accountNo } = values;\r\n    return <>{title}</>;\r\n}","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, UiSchema, UiInputItem, Form, Context, tv, BoxId, FA } from 'tonva';\r\nimport { Schema } from 'tonva';\r\nimport { CInvoiceInfo } from './CInvoiceInfo';\r\n\r\nconst schema: Schema = [\r\n    { name: 'id', type: 'id', required: false },\r\n    { name: 'title', type: 'string', required: false },\r\n    { name: 'taxNo', type: 'string', required: false },\r\n    { name: 'address', type: 'id', required: false },\r\n    { name: 'telephone', type: 'string', required: false },\r\n    { name: 'bank', type: 'string', required: false },\r\n    { name: 'accountNo', type: 'string', required: false },\r\n];\r\n\r\nconst uiSchema: UiSchema = {\r\n    items: {\r\n        id: { visible: false },\r\n        title: {\r\n            widget: 'text', label: '单位全称', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                return (value && value.length > 200) ? '单位全称最多200个字！' : undefined;\r\n            }\r\n        } as UiInputItem,\r\n        taxNo: {\r\n            widget: 'text', label: '纳税人识别码', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                if (value) {\r\n                    var regArr = [/^[\\da-z]{10,15}$/i, /^\\d{6}[\\da-z]{10,12}$/i, /^[a-z]\\d{6}[\\da-z]{9,11}$/i, /^[a-z]{2}\\d{6}[\\da-z]{8,10}$/i, /^\\d{14}[\\dx][\\da-z]{4,5}$/i, /^\\d{17}[\\dx][\\da-z]{1,2}$/i, /^[a-z]\\d{14}[\\dx][\\da-z]{3,4}$/i, /^[a-z]\\d{17}[\\dx][\\da-z]{0,1}$/i, /^[\\d]{6}[\\da-z]{13,14}$/i],\r\n                        j = regArr.length;\r\n                    for (var i = 0; i < j; i++) {\r\n                        if (regArr[i].test(value)) {\r\n                            return undefined;\r\n                        }\r\n                    }\r\n                    return '纳税人识别码格式不正确，请重新输入！';\r\n                }\r\n            }\r\n        } as UiInputItem,\r\n        address: {\r\n            widget: 'text', label: '注册地址', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                return (value && value.length > 200) ? '注册地址最多200个字！' : undefined;\r\n            }\r\n        } as UiInputItem,\r\n        telephone: {\r\n            widget: 'text', label: '注册电话', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                if (value && !/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/.test(value))\r\n                    return \"注册电话格式不正确，请重新输入！\";\r\n                else\r\n                    return undefined;\r\n            }\r\n        } as UiInputItem,\r\n        bank: {\r\n            widget: 'text', label: '开户银行', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                return (value && value.length > 100) ? '开户银行名称最多100个字！' : undefined;\r\n            }\r\n        } as UiInputItem,\r\n        accountNo: {\r\n            widget: 'text', label: '银行账号', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                if (value && !/^([1-9]{1})(\\d{14}|\\d{18}|\\d{15})$/.test(value))\r\n                    return \"银行账号格式不正确，请重新输入！\";\r\n                else\r\n                    return undefined;\r\n            }\r\n        } as UiInputItem,\r\n        submit: { widget: 'button', label: '提交' },\r\n    }\r\n}\r\n\r\nconst commonRequired = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: false,\r\n    telephone: false,\r\n    bank: false,\r\n    accountNo: false,\r\n    isDefault: false,\r\n};\r\n\r\nconst valueAddedRequired = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: true,\r\n    telephone: true,\r\n    bank: true,\r\n    accountNo: true,\r\n    isDefault: false,\r\n}\r\n\r\nconst commonVisible = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: false,\r\n    telephone: false,\r\n    bank: false,\r\n    accountNo: false,\r\n    isDefault: true,\r\n};\r\n\r\nconst valueAddedVisible = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: true,\r\n    telephone: true,\r\n    bank: true,\r\n    accountNo: true,\r\n    isDefault: true,\r\n}\r\n\r\nexport class VInvoiceInfo extends VPage<CInvoiceInfo> {\r\n    private form: Form;\r\n    @observable showTip: boolean = false;\r\n    saveTip: string = \"\";\r\n    private invoiceInfoData: any;\r\n\r\n    async open(origInvoice?: any) {\r\n        let { invoiceType, invoiceInfo } = origInvoice;\r\n        this.invoiceType = (invoiceType && invoiceType.id) || 1;\r\n        if (invoiceInfo) {\r\n            invoiceInfo.assure();\r\n            this.invoiceInfoData = { ...invoiceInfo.obj };\r\n        }\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        let { form } = context;\r\n        let { data } = form;\r\n        let invoice = {\r\n            invoiceType: this.invoiceType,\r\n            invoiceInfo: data,\r\n        };\r\n        this.invoiceInfoData = data;\r\n\r\n        try {\r\n            await this.controller.saveInvoiceInfo(invoice);\r\n            this.saveTip = \"发票信息已经保存\";\r\n        } catch (error) {\r\n            this.saveTip = \"发票信息保存失败，请稍后再试\";\r\n        }\r\n        this.showTip = true;\r\n        setTimeout(() => { this.showTip = false; }, 2000);\r\n    }\r\n\r\n    private onSaveInvoice = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    @observable invoiceType: number;\r\n\r\n    private buildForm(): JSX.Element {\r\n        let requiredFields = this.invoiceType === 1 ? commonRequired : valueAddedRequired;\r\n        let visibleFields = this.invoiceType === 1 ? commonVisible : valueAddedVisible;\r\n        schema.forEach(e => {\r\n            let { items } = uiSchema;\r\n            e.required = requiredFields[e.name];\r\n            items[e.name].visible = visibleFields[e.name];\r\n        });\r\n        return <Form ref={v => this.form = v} className=\"my-3\"\r\n            schema={schema}\r\n            uiSchema={uiSchema}\r\n            formData={this.invoiceInfoData}\r\n            onButtonClick={this.onFormButtonClick}\r\n            fieldLabelSize={3} />\r\n    }\r\n\r\n    private onInvoiceTypeClick = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.invoiceType = parseInt(event.currentTarget.value);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let frm = this.buildForm();\r\n\r\n        let tipUI = this.showTip ? (<div className=\"alert alert-primary\" role=\"alert\">\r\n            <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n            {this.saveTip}\r\n        </div>) : null;\r\n        return <Page header=\"发票\">\r\n            <div className=\"px-3\">\r\n                <div className=\"form-group row py-3 mb-1 bg-white\">\r\n                    <div className=\"col-12 col-sm-3 pb-2 text-muted\">发票类型:</div>\r\n                    <div className=\"col-12 col-sm-9\">\r\n                        <div className=\"form-check form-check-inline\">\r\n                            <input className=\"form-check-input\" type=\"radio\" name=\"invoiceType\" id=\"common\" value=\"1\"\r\n                                onChange={(event) => this.onInvoiceTypeClick(event)} checked={this.invoiceType === 1}></input>\r\n                            <label className=\"form-check-label\" htmlFor=\"common\">增值税普通发票</label>\r\n                        </div>\r\n                        <div className=\"form-check form-check-inline\">\r\n                            <input className=\"form-check-input\" type=\"radio\" name=\"invoiceType\" id=\"valueAdded\" value=\"2\"\r\n                                onChange={(event) => this.onInvoiceTypeClick(event)} checked={this.invoiceType === 2}></input>\r\n                            <label className=\"form-check-label\" htmlFor=\"valueAdded\">增值税专用发票</label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"p-3 bg-white\">\r\n                {frm}\r\n                <button type=\"button\"\r\n                    className=\"btn btn-primary w-100\"\r\n                    onClick={this.onSaveInvoice}>确定</button>\r\n                {tipUI}\r\n            </div>\r\n        </Page>\r\n    });\r\n}","//import { Controller } from 'tonva';\r\nimport { CUqBase } from '../CBase';\r\nimport { VInvoiceInfo } from './VInvoiceInfo';\r\n//import { CCartApp } from 'CCartApp';\r\n//import { Tuid } from 'tonva';\r\n\r\nexport class CInvoiceInfo extends CUqBase {\r\n    //protected cApp: CCartApp;\r\n    //private invoiceTypeTuid: Tuid;\r\n    //private invoiceInfoTuid: Tuid;\r\n    fromOrderCreation: boolean;\r\n    /*\r\n    constructor(cApp: CCartApp, res: any, fromOrderCreation: boolean) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n\r\n        let { cUqCommon, cUqCustomer } = cApp;\r\n        this.invoiceTypeTuid = cUqCommon.tuid('invoiceType');\r\n        this.invoiceInfoTuid = cUqCustomer.tuid('invoiceInfo');\r\n        this.fromOrderCreation = fromOrderCreation;\r\n    }\r\n    */\r\n\r\n    /*\r\n    protected init() {\r\n        let { cUqCommon, cUqCustomer } = this.cApp;\r\n        this.invoiceTypeTuid = cUqCommon.tuid('invoiceType');\r\n        this.invoiceInfoTuid = cUqCustomer.tuid('invoiceInfo');\r\n        //this.fromOrderCreation = fromOrderCreation;\r\n    }\r\n    */\r\n\r\n    async internalStart(origInvoice: any, fromOrderCreation: boolean) {\r\n        this.fromOrderCreation = fromOrderCreation;\r\n        this.openVPage(VInvoiceInfo, origInvoice);\r\n    }\r\n\r\n    async saveInvoiceInfo(invoice: any) {\r\n        let { invoiceType, invoiceInfo, isDefault } = invoice;\r\n        let newInvoiceInfo = await this.uqs.common.InvoiceInfo.save(undefined, invoiceInfo);\r\n\r\n        let { id: newInvoiceInfoId } = newInvoiceInfo;\r\n        let invoiceBox = {\r\n            invoiceType: this.uqs.common.InvoiceType.boxId(invoiceType),\r\n            invoiceInfo: this.uqs.common.InvoiceInfo.boxId(newInvoiceInfoId),\r\n        }\r\n        // if (isDefault === true || !this.fromOrderCreation) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.setDefaultInvoice(invoiceBox.invoiceType, invoiceBox.invoiceInfo);\r\n        // }\r\n        if (this.fromOrderCreation) {\r\n            this.backPage();\r\n            this.returnCall(invoiceBox);\r\n        }\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, FA, Page } from 'tonva';\r\nimport { CCoupon } from './CCoupon';\r\nimport { observer } from 'mobx-react';\r\nimport { observable } from 'mobx';\r\n\r\nexport class VCouponEdit extends VPage<CCoupon> {\r\n\r\n    private couponInput: HTMLInputElement;\r\n    @observable tips: string;\r\n    async open(param: any) {\r\n        if (param !== undefined) {\r\n\r\n        }\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private applyCoupon = async () => {\r\n        let coupon = this.couponInput.value;\r\n        if (!coupon)\r\n            return;\r\n        let ret = await this.controller.applyCoupon(coupon);\r\n        switch (ret) {\r\n            case -1:\r\n                this.tips = '对不起，当前服务器繁忙，请稍后再试。';\r\n                break;\r\n            case 1:\r\n                this.tips = '有效';\r\n                break;\r\n            case 0:\r\n            case 2:\r\n            case 3:\r\n            case 5:\r\n                this.tips = '优惠码无效，请重新输入或与您的专属销售人员联系。';\r\n                break;\r\n            case 4:\r\n                this.tips = '该优惠码已经被使用过了，不允许重复使用。';\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let tipsUI = <></>;\r\n        if (this.tips) {\r\n            tipsUI = <div className=\"alert alert-primary\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                {this.tips}\r\n            </div>\r\n        }\r\n        return <Page header=\"填写优惠码\">\r\n            <div className=\"px-2 bg-white\">\r\n                <div className=\"row py-3 pr-3 my-1\">\r\n                    <div className=\"col-4 col-sm-2 pb-2 text-muted\">优惠码:</div>\r\n                    <div className=\"col-8 col-sm-10 d-flex\">\r\n                        <input ref={v => this.couponInput = v} type=\"number\" className=\"form-control\"></input>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row my-1\">\r\n                    <div className=\"col-12\">\r\n                        <button className=\"btn btn-primary w-100\" onClick={this.applyCoupon}>应用</button>\r\n                    </div>\r\n                </div>\r\n                {tipsUI}\r\n            </div>\r\n        </Page>\r\n    })\r\n}","//import { Controller, Action } from 'tonva';\r\n//import { CCartApp } from 'CCartApp';\r\nimport { CUqBase } from '../CBase';\r\nimport { VCouponEdit } from './VCouponEdit';\r\n\r\nexport class CCoupon extends CUqBase {\r\n\r\n    applyCoupon = async (coupon: string) => {\r\n\r\n        let { currentCustomer } = this.cApp.currentUser;\r\n        let validationResult = await this.uqs.salesTask.IsCanUseCoupon.submit({ code: coupon, customer: currentCustomer && currentCustomer.id });\r\n        let rtn = validationResult.result;\r\n        if (rtn === 1) {\r\n            this.returnCall(validationResult);\r\n            this.closePage();\r\n        }\r\n        return rtn;\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n        this.openVPage(VCouponEdit);\r\n    }\r\n}","import { observable } from 'mobx';\r\nimport { Sheet, BoxId, Query, Action, Tuid, Map } from 'tonva';\r\nimport { Controller, nav } from 'tonva';\r\n//import { CCartApp } from 'CCartApp';\r\nimport { CApp } from '../CApp';\r\nimport { CUqBase } from '../CBase';\r\nimport { VCreateOrder } from './VCreateOrder';\r\nimport { Order, OrderItem } from './Order';\r\nimport { OrderSuccess } from './OrderSuccess';\r\nimport { CSelectShippingContact, CSelectInvoiceContact, CSelectContact } from '../customer/CSelectContact';\r\nimport { VMyOrders } from './VMyOrders';\r\nimport { VOrderDetail } from './VOrderDetail';\r\n//import { WebUser } from '../CurrentUser';\r\nimport { CInvoiceInfo } from '../customer/CInvoiceInfo';\r\nimport { groupByProduct } from '../tools/groupByProduct';\r\nimport { LoaderProductWithChemical } from '../product/itemLoader';\r\nimport { CCoupon } from './CCoupon';\r\nimport { CartItem2 } from '../cart/Cart';\r\n\r\nconst FREIGHTFEEFIXED = 12;\r\nconst FREIGHTFEEREMITTEDSTARTPOINT = 100;\r\n\r\nexport class COrder extends CUqBase {\r\n    //private cApp: CCartApp;\r\n    cApp: CApp;\r\n    @observable orderData: Order = new Order();\r\n    @observable couponData: any = {};\r\n\r\n    protected async internalStart(param: any) {\r\n        let cart = param;\r\n        await this.createOrderFromCart(cart);\r\n        this.openVPage(VCreateOrder);\r\n    }\r\n\r\n    private createOrderFromCart = async (cartItems: CartItem2[]) => {\r\n        let { currentUser } = this.cApp;\r\n        this.orderData.webUser = currentUser.id;\r\n        this.removeCoupon();\r\n        if (currentUser.currentCustomer !== undefined) {\r\n            this.orderData.customer = currentUser.currentCustomer.id;\r\n        }\r\n\r\n        if (this.orderData.shippingContact === undefined) {\r\n            this.orderData.shippingContact = await this.getDefaultShippingContact();\r\n        }\r\n\r\n        if (this.orderData.invoiceContact === undefined) {\r\n            this.orderData.invoiceContact = await this.getDefaultInvoiceContact();\r\n        }\r\n\r\n        if (this.orderData.invoiceType === undefined) {\r\n            this.orderData.invoiceType = await this.getDefaultInvoiceType();\r\n        }\r\n\r\n        if (this.orderData.invoiceInfo === undefined) {\r\n            this.orderData.invoiceInfo = await this.getDefaultInvoiceInfo();\r\n        }\r\n\r\n        if (cartItems !== undefined && cartItems.length > 0) {\r\n            this.orderData.currency = cartItems[0].packs[0].currency;\r\n            this.orderData.orderItems = cartItems.map((element: any, index: number) => {\r\n                var item = new OrderItem();\r\n                item.product = element.product;\r\n                item.packs = element.packs.filter(v => v.quantity > 0);\r\n                return item;\r\n            });\r\n\r\n            // 运费和运费减免\r\n            this.orderData.freightFee = FREIGHTFEEFIXED;\r\n            if (this.orderData.productAmount > FREIGHTFEEREMITTEDSTARTPOINT)\r\n                this.orderData.freightFeeRemitted = FREIGHTFEEFIXED * -1;\r\n        }\r\n    }\r\n\r\n    private defaultSetting: any;\r\n    private async getDefaultSetting() {\r\n        if (this.defaultSetting) return this.defaultSetting;\r\n        let { currentUser } = this.cApp;\r\n        return this.defaultSetting = await currentUser.getSetting() || {};\r\n    }\r\n\r\n    private contact0: BoxId;\r\n    private async getContact(): Promise<BoxId> {\r\n        if (this.contact0 === null) return;\r\n        if (this.contact0 !== undefined) return this.contact0;\r\n        let { currentUser } = this.cApp;\r\n        let contactArr = await currentUser.getContacts();\r\n        if (contactArr === undefined || contactArr.length === 0) {\r\n            this.contact0 = null;\r\n            return;\r\n        }\r\n        return this.contact0 = contactArr[0].contact;\r\n    }\r\n\r\n    private async getDefaultShippingContact() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.shippingContact || await this.getContact();\r\n    }\r\n\r\n    private async getDefaultInvoiceContact() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceContact || await this.getContact();\r\n    }\r\n\r\n    private async getDefaultInvoiceType() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceType;\r\n    }\r\n\r\n    private async getDefaultInvoiceInfo() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceInfo;\r\n    }\r\n\r\n    submitOrder = async () => {\r\n        let { orderItems } = this.orderData;\r\n\r\n        let result: any = await this.uqs.order.Order.save(\"order\", this.orderData.getDataForSave());\r\n        await this.uqs.order.Order.action(result.id, result.flow, result.state, \"submit\");\r\n\r\n        let param: [{ productId: number, packId: number }] = [] as any;\r\n        orderItems.forEach(e => {\r\n            e.packs.forEach(v => {\r\n                param.push({ productId: e.product.id, packId: v.pack.id })\r\n            })\r\n        });\r\n        let { cart } = this.cApp;\r\n        cart.removeFromCart(param);\r\n\r\n        // 打开下单成功显示界面\r\n        nav.popTo(this.cApp.topKey);\r\n        this.openVPage(OrderSuccess, result);\r\n    }\r\n\r\n    onSelectShippingContact = async () => {\r\n        let cSelect = this.newC(CSelectShippingContact);\r\n        let contactBox = await cSelect.call<BoxId>(true);\r\n        this.orderData.shippingContact = contactBox;\r\n    }\r\n\r\n    onSelectInvoiceContact = async () => {\r\n        let cSelect = this.newC(CSelectInvoiceContact);\r\n        let contactBox = await cSelect.call<BoxId>(true);\r\n        this.orderData.invoiceContact = contactBox;\r\n    }\r\n\r\n    onCouponEdit = async () => {\r\n        let cCoupon = this.newC(CCoupon); // new CCoupon(this.cApp, undefined);\r\n        let coupon = await cCoupon.call<any>(this.orderData.coupon);\r\n        if (coupon) {\r\n            await this.applyCoupon(coupon);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 使用优惠码后计算折扣金额和抵扣额\r\n     */\r\n    applyCoupon = async (coupon: any) => {\r\n\r\n        let { id, code, discount, preferential, validitydate, isValid } = coupon;\r\n        if (code !== undefined && isValid === 1 && new Date(validitydate).getTime() > Date.now()) {\r\n            this.orderData.coupon = id;\r\n            this.couponData = coupon;\r\n            if (discount) {\r\n                // this.orderData.couponOffsetAmount = Math.round(this.orderData.productAmount * discount) * -1;\r\n                let { orderItems } = this.orderData;\r\n                if (orderItems !== undefined && orderItems.length > 0) {\r\n                    let promises: PromiseLike<any>[] = [];\r\n                    orderItems.forEach(e => {\r\n                        promises.push(this.uqs.product.AgentPrice.table({ product: e.product.id, salesRegion: 1 }));\r\n                    });\r\n                    let agentPrices = await Promise.all(promises);\r\n                    if (agentPrices && agentPrices.length > 0) {\r\n                        let couponOffsetAmount = 0;\r\n                        for (let i = 0; i < orderItems.length; i++) {\r\n                            let oi = orderItems[i];\r\n                            let { product, packs } = oi;\r\n                            let eachAgentPrice = agentPrices[i];\r\n                            for (let j = 0; j < packs.length; j++) {\r\n                                let pk = packs[j];\r\n                                let agentPrice: any = eachAgentPrice.find(\r\n                                    p => p.product.id === product.id &&\r\n                                        p.pack.id === pk.pack.id &&\r\n                                        p.discountinued === 0 &&\r\n                                        p.expireDate > Date.now());\r\n                                if (!agentPrices) break;\r\n                                couponOffsetAmount += Math.min(pk.price - agentPrice.agentPrice, pk.price * discount) * -1;\r\n                                /*\r\n                                if (agentPrice) {\r\n                                    pk.price = Math.round(agentPrice.retail * (1 - discount));\r\n                                }\r\n                                */\r\n                            };\r\n                        };\r\n                        this.orderData.couponOffsetAmount = Math.round(couponOffsetAmount);\r\n                    };\r\n                }\r\n            }\r\n            if (preferential) {\r\n                this.orderData.couponRemitted = preferential * -1;\r\n            }\r\n            // 运费和运费减免\r\n            this.orderData.freightFee = FREIGHTFEEFIXED;\r\n            if (this.orderData.productAmount > FREIGHTFEEREMITTEDSTARTPOINT)\r\n                this.orderData.freightFeeRemitted = FREIGHTFEEFIXED * -1;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 删除优惠码\r\n     */\r\n    removeCoupon = () => {\r\n        this.orderData.coupon = undefined;\r\n        this.couponData = {};\r\n        this.orderData.couponOffsetAmount = 0;\r\n        this.orderData.couponRemitted = 0;\r\n    }\r\n\r\n\r\n    /*\r\n    * 打开我的订单列表（在“我的”界面使用）\r\n    */\r\n    openMyOrders = async (state: string) => {\r\n\r\n        this.openVPage(VMyOrders, state);\r\n    }\r\n\r\n    /**\r\n     * 根据状态读取我的订单\r\n     */\r\n    getMyOrders = async (state: string) => {\r\n\r\n        switch (state) {\r\n            case 'pendingpayment':\r\n                return await this.uqs.order.GetPendingPayment.table(undefined);\r\n                break;\r\n            case 'processing':\r\n                return await this.uqs.order.Order.mySheets(undefined, 1, -20);\r\n                break;\r\n            default:\r\n                return await this.uqs.order.Order.mySheets(\"#\", 1, -20)\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 打开发票信息编辑界面\r\n     */\r\n    onInvoiceInfoEdit = async () => {\r\n        let cInvoiceInfo = this.newC(CInvoiceInfo); // new CInvoiceInfo(this.cApp, undefined, true);\r\n        let { invoiceType, invoiceInfo } = this.orderData;\r\n        let origInvoice = {\r\n            invoiceType: invoiceType,\r\n            invoiceInfo: invoiceInfo,\r\n        }\r\n        let newInvoice = await cInvoiceInfo.call<any>(origInvoice, true);\r\n        this.orderData.invoiceType = newInvoice.invoiceType;\r\n        this.orderData.invoiceInfo = newInvoice.invoiceInfo;\r\n    }\r\n\r\n    openOrderDetail = async (orderId: number) => {\r\n\r\n        let order = await this.uqs.order.Order.getSheet(orderId);\r\n        let { data } = order;\r\n        let { orderitems } = data;\r\n        let orderItemsGrouped = groupByProduct(orderitems);\r\n        let loaderProduct = new LoaderProductWithChemical(this.cApp);\r\n        for (let i = 0; i < orderItemsGrouped.length; i++) {\r\n            let productId = orderItemsGrouped[i].product.id;\r\n            orderItemsGrouped[i].product = await loaderProduct.load(productId);\r\n        }\r\n        data.orderItems = orderItemsGrouped;\r\n        this.openVPage(VOrderDetail, order);\r\n    }\r\n\r\n    openMeInfo = async () => {\r\n        let { cMe } = this.cApp;\r\n        await cMe.openMeInfoFirstOrder();\r\n    }\r\n\r\n    renderDeliveryTime = (pack: BoxId) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderDeliveryTime(pack);\r\n    }\r\n\r\n    renderOrderItemProduct = (product: BoxId) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderCartProduct(product);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { View, tv } from 'tonva';\r\nimport { CProductCategory } from './CProductCategory';\r\nimport { FA } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { GLOABLE } from 'ui';\r\n\r\nconst imgStyle: React.CSSProperties = {\r\n    height: '1.5rem', width: '1.5rem',\r\n    marginLeft: '0.1rem',\r\n    marginRight: '0.3rem'\r\n}\r\n\r\nexport const titleTitle: React.CSSProperties = {\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n}\r\n\r\nexport const subStyle: React.CSSProperties = {\r\n    fontSize: '0.75rem',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n}\r\n\r\nexport class VRootCategory extends View<CProductCategory> {\r\n\r\n    private categoryClick = async (categoryWapper: any, parent: any, labelColor: string) => {\r\n        await this.controller.openMainPage(categoryWapper, parent, labelColor);\r\n    }\r\n\r\n    private renderRootCategory = (item: any, parent: any) => {\r\n        let { name, children, productCategory } = item;\r\n        let { id: productCategoryID } = productCategory;\r\n        let { src, labelColor } = GLOABLE.ROOTCATEGORY[productCategoryID];\r\n        return <div className=\"bg-white mb-3\" key={name}>\r\n            <div className=\"py-2 px-3 cursor-pointer\" onClick={() => this.categoryClick(item, undefined, labelColor)}>\r\n                <img className=\"mr-5\" src={src} alt={name} style={{ height: \"2.5rem\", width: \"2.5rem\" }} />\r\n                <b>{name}</b>\r\n            </div>\r\n            <div className=\"\"\r\n                style={{ paddingRight: '1px' }}\r\n            >\r\n                <div className=\"row no-gutters\">\r\n                    {children.map(v => this.renderSubCategory(v, item, labelColor))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private renderSubCategory = (item: any, parent: any, color: string) => {\r\n        let { name, children, total } = item;\r\n        return <div key={name}\r\n            className=\"col-6 col-md-4 col-lg-3 cursor-pointer\"\r\n            onClick={() => this.categoryClick(item, parent, color)}>\r\n            <div className=\"py-3 px-2\"\r\n                style={{ border: '1px solid #eeeeee', marginRight: '-1px', marginBottom: '-1px' }}\r\n            >\r\n                <div style={titleTitle}>\r\n                    <span className=\"ml-1 align-middle\">\r\n                        <FA name=\"chevron-circle-right\" className={color} />\r\n                        &nbsp; {name}\r\n                    </span>\r\n                </div>\r\n                {renderThirdCategory(children, total)}\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        return <this.content />\r\n    }\r\n\r\n    private content = observer(() => {\r\n        let { categories, categories2 } = this.controller;\r\n        return <>{categories.map(v => this.renderRootCategory(v, undefined))}</>;\r\n        // return <>{categories2.map(v => <div key={v.productCategory.id}>{tv(v, e => this.renderRoot(e))}</div>)}</>;\r\n    });\r\n\r\n    private renderRoot(root: any) {\r\n        let { productCategory } = root;\r\n        let { id } = productCategory;\r\n        console.log(id);\r\n        return <div key={id}>{id}</div>\r\n    }\r\n}\r\n\r\n\r\nexport function renderThirdCategory(items: any, total: number) {\r\n    return <div className=\"py-2 px-1 text-muted small\" style={subStyle}>\r\n        {items.length === 0 ? <>该类产品数量: {total > 1000 ? '>1000' : total}</> : items.map(v => v.name).join(' / ')}\r\n    </div>\r\n}","import * as React from 'react';\r\nimport { CProductCategory } from './CProductCategory';\r\nimport { VPage, Page } from 'tonva';\r\nimport { List, FA } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { titleTitle, subStyle, renderThirdCategory } from './VRootCategory';\r\n\r\nexport class VCategory extends VPage<CProductCategory> {\r\n\r\n    async open(categoryWaper: any) {\r\n\r\n        this.openPage(this.page, categoryWaper);\r\n    }\r\n\r\n    private renderChild = (childWapper: any) => {\r\n\r\n        return <div className=\"py-2\"><FA name=\"hand-o-right mr-2\"></FA>{childWapper.name}</div>\r\n    }\r\n\r\n    private categoryClick = async (childWapper: any, parent: any, labelColor: string) => {\r\n        await this.controller.openMainPage(childWapper, parent, labelColor);\r\n    }\r\n\r\n    private breadCrumb = (item: any, parent: any) => {\r\n        return <nav arial-babel=\"breadcrumb\">\r\n            <ol className=\"breadcrumb\">\r\n                {tv(item, this.breadCrumbItem)}\r\n            </ol>\r\n        </nav>\r\n\r\n    }\r\n\r\n    private breadCrumbItem = (values: any, parent: any) => {\r\n        if (values === undefined || values.productCategory === undefined)\r\n            return <></>;\r\n        return <>\r\n            {tv(values.productCategory.parent, this.breadCrumbItem)}\r\n            <li className=\"breadcrumb-item\" onClick={() => this.categoryClick(values, undefined, \"\")}>{values.name}</li>\r\n        </>\r\n    }\r\n\r\n    private renderRootCategory = (item: any, parent: any, labelColor: string) => {\r\n        let { productCategory, name, children } = item;\r\n        return <div className=\"bg-white mb-3\" key={name}>\r\n            <div className=\"py-2 px-3 cursor-pointer\" onClick={() => this.categoryClick(item, parent, labelColor)}>\r\n                <b>{name}</b>\r\n            </div>\r\n            <div className=\"\"\r\n                style={{ paddingRight: '1px' }}\r\n            >\r\n                <div className=\"row no-gutters\">\r\n                    {children.map(v => this.renderSubCategory(v, item, labelColor))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private renderSubCategory = (item: any, parent: any, labelColor: string) => {\r\n        let { name, children, total } = item;\r\n        return <div key={name}\r\n            className=\"col-6 col-md-4 col-lg-3 cursor-pointer\"\r\n            onClick={() => this.categoryClick(item, parent, labelColor)}>\r\n            <div className=\"pt-1 pb-1 px-2\"\r\n                style={{ border: '1px solid #eeeeee', marginRight: '-1px', marginBottom: '-1px' }}\r\n            >\r\n                <div style={titleTitle}>\r\n                    <span className=\"ml-1 align-middle\">\r\n                        <FA name=\"chevron-circle-right\" className={labelColor} />\r\n                        &nbsp; {name}\r\n                    </span>\r\n                </div>\r\n                {renderThirdCategory(children, total)}\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private page = (categoryWaper: any) => {\r\n\r\n        let { cHome } = this.controller.cApp;\r\n        let header = cHome.renderSearchHeader();\r\n        let cartLabel = this.controller.cApp.cCart.renderCartLabel();\r\n\r\n        let { categoryWaper: item, parent, labelColor } = categoryWaper;\r\n        return <Page header={header} right={cartLabel}>\r\n            {this.renderRootCategory(item, parent, labelColor)}\r\n        </Page>\r\n    }\r\n}","import { observable } from 'mobx';\r\nimport { CApp } from '../CApp';\r\nimport { CUqBase } from '../CBase';\r\nimport { VRootCategory } from './VRootCategory';\r\nimport { VCategory } from './VCategory';\r\n\r\nexport class CProductCategory extends CUqBase {\r\n\r\n    cApp: CApp;\r\n    @observable categories: any[] = [];\r\n    @observable categories2: any[] = [];\r\n\r\n    async internalStart(param: any) {\r\n        let { currentSalesRegion, currentLanguage } = this.cApp;\r\n        let results = await this.uqs.product.GetRootCategory.query({ salesRegion: currentSalesRegion.id, language: currentLanguage.id });\r\n        this.categories = results.first;\r\n        this.categories.forEach(element => {\r\n            this.buildCategories(element, results.secend, results.third);\r\n        })\r\n        /*\r\n        let result2 = await this.getRootCategoriesQuery.query({ salesRegion: currentSalesRegion.id, language: currentLanguage.id });\r\n        if (result2)\r\n            this.categories2 = result2.ret;\r\n        */\r\n    }\r\n\r\n    renderRootList = () => {\r\n        return this.renderView(VRootCategory);\r\n    };\r\n\r\n    async getCategoryChildren(parentCategoryId: number) {\r\n        let { currentSalesRegion, currentLanguage } = this.cApp;\r\n        return await this.uqs.product.GetChildrenCategory.query({ parent: parentCategoryId, salesRegion: currentSalesRegion.id, language: currentLanguage.id });\r\n    }\r\n\r\n    async buildCategories(categoryWapper: any, firstCategory: any, secendCategory: any) {\r\n        firstCategory.forEach(async element => {\r\n            element.children = secendCategory.filter(v => v.parent === element.productCategory.id);\r\n        });\r\n        categoryWapper.children = firstCategory.filter(v => v.parent === categoryWapper.productCategory.id);\r\n    }\r\n\r\n    async openMainPage(categoryWaper: any, parent: any, labelColor: string) {\r\n\r\n        let { productCategory, name } = categoryWaper;\r\n        let { id: productCategoryId } = productCategory;\r\n        let results = await this.getCategoryChildren(productCategoryId);\r\n        if (results.first.length !== 0) {\r\n            this.buildCategories(categoryWaper, results.first, results.secend);\r\n            this.openVPage(VCategory, { categoryWaper, parent, labelColor });\r\n        } else {\r\n            let { cProduct } = this.cApp;\r\n            await cProduct.searchByCategory({ productCategoryId, name });\r\n        }\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Image } from 'tonva';\r\nimport { CMember } from './CMember';\r\nimport { LMR, Muted, FA, Media } from 'tonva';\r\nimport pig from '../images/pig.png';\r\nimport { observer } from 'mobx-react';\r\n\r\nconst stylePig: React.CSSProperties = {\r\n    width: '100%',\r\n    height: '20rem',\r\n    backgroundImage: `url(${pig})`,\r\n    backgroundSize: 'contain',\r\n    backgroundColor: 'rgba(255,255,255,0.1)',\r\n    opacity: 0.09,\r\n    position: 'absolute',\r\n}\r\n\r\nexport class VMember extends VPage<CMember> {\r\n    private recommendationCodeRef = React.createRef<HTMLInputElement>();\r\n\r\n    async open(param: any) {\r\n\r\n    }\r\n\r\n    render(member: any): JSX.Element {\r\n\r\n        return <this.content />;\r\n    }\r\n\r\n    private submitRecommendationCode() {\r\n        let code = this.recommendationCodeRef.current.value;\r\n        if (code) {\r\n            let { setReferrer: submit } = this.controller;\r\n            submit(code);\r\n        }\r\n    }\r\n\r\n    private content = observer(() => {\r\n        let { cApp, member } = this.controller;\r\n        if (member === undefined)\r\n            return <></>;\r\n        let { currentUser } = cApp;\r\n        let { recommendationCode, point } = member;\r\n        if (!point) point = 0;\r\n\r\n        let im = <Image className=\"mr-3 w-3c h-3c\" src={currentUser.icon} />;\r\n        let inviteCode = <div className=\"small\">邀请码: {recommendationCode}</div>;\r\n\r\n        let divPoints = <div className=\"my-3 text-center bg-white h-25\" style={{ position: 'relative' }}>\r\n            <div className=\"w-100 bg-white h-20c\" style={{ position: 'absolute' }} />\r\n            <div className=\"d-flex align-items-center justify-content-center\" style={stylePig} />\r\n            <div className=\"w-100 d-flex align-items-center justify-content-center h-20c\" style={{ position: 'absolute' }}>\r\n                <div className=\"muted mr-3 small\">积分: </div>\r\n                <div className=\"text-danger\" style={{ fontSize: '2rem' }}>{point}</div>\r\n            </div>\r\n        </div>\r\n\r\n        let pointTitle = <p className=\"h4\">我的积分</p>\r\n        let pointDetail = <p className=\"small align-self-end\">查看详情 <FA name=\"angle-right\"></FA></p>\r\n        let pointThisWeek = <><p className=\"h5 mb-0\">0</p><Muted>本周</Muted></>\r\n        let pointAll = <><p className=\"h5 mb-0\">{point}</p><Muted>累计</Muted></>\r\n\r\n        let fansTitle = <p>我的粉丝</p>\r\n        let fansDetail = <p className=\"small align-self-end\">查看详情 <FA name=\"angle-right\"></FA></p>;\r\n        let detail = <div className=\"shadow bg-white rounded p-3 mb-1\">\r\n            <LMR left={fansTitle} right={fansDetail}></LMR>\r\n            <LMR className=\"pb-2\">\r\n                <p className=\"h4 mb-0\">0</p>\r\n                <Muted>今日</Muted>\r\n            </LMR>\r\n            <LMR left={pointThisWeek} right={pointAll} />\r\n            <LMR>\r\n                <input type=\"text\" className=\"form-control\" ref={this.recommendationCodeRef} />\r\n                <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.submitRecommendationCode()}>输入邀请码</button>\r\n            </LMR>\r\n        </div>;\r\n\r\n        return <div>\r\n            <LMR className=\"bg-white p-3 mb-1 align-items-center\"\r\n                left={im} right={inviteCode}>\r\n                <b>{currentUser.name}</b>\r\n            </LMR>\r\n            {divPoints}\r\n            {/*detail*/}\r\n        </div>\r\n    })\r\n}\r\n/*\r\n<div className=\"shadow bg-white rounded p-3 mb-1\">\r\n<LMR left={pointTitle} right={pointDetail}></LMR>\r\n<LMR className=\"pb-2\">\r\n    <p className=\"h4 mb-0\">0</p>\r\n    <Muted>今日</Muted>\r\n</LMR>\r\n<LMR left={pointThisWeek} right={pointAll} />\r\n</div>\r\n*/","import * as React from 'react';\r\n//import Loadable from 'react-loadable';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { FA } from 'tonva';\r\nimport { Controller, Loading, nav } from 'tonva';\r\nimport { Action, Map, BoxId } from 'tonva';\r\nimport { CApp } from '../CApp';\r\nimport { CUqBase } from '../CBase';\r\nimport { VMember } from './VMember';\r\n//import { CCartApp } from 'CCartApp';\r\n//import { jnkTop } from 'me/loginTop';\r\n\r\nexport class CMember extends CUqBase {\r\n\r\n    //cApp: CCartApp;\r\n    cApp: CApp;\r\n    @observable member: any;\r\n    private referrer: BoxId;\r\n    //private memberAction: Action;\r\n    //private memberRecommenverMap: Map;\r\n\r\n    /*\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n\r\n        this.cApp = cApp;\r\n        let { cUqMember } = cApp;\r\n        this.memberAction = cUqMember.action('MemberAction');\r\n        this.memberRecommenverMap = cUqMember.map('MemberRecommender');\r\n    }\r\n    */\r\n    /*\r\n    protected init() {\r\n        let { cUqMember } = this.cApp;\r\n        this.memberAction = cUqMember.action('MemberAction');\r\n        this.memberRecommenverMap = cUqMember.map('MemberRecommender');\r\n    }\r\n    */\r\n\r\n    protected async internalStart(param: any) {\r\n\r\n        if (this.isLogined) {\r\n            let {member} = this.uqs;\r\n            let { id: currentUserId } = this.user;\r\n            let promises: PromiseLike<any>[] = [];\r\n            promises.push(member.MemberAction.submit({}));\r\n            promises.push(member.MemberRecommender.table({ referrer: currentUserId }));\r\n            promises.push(member.MemberRecommender.table({ member: currentUserId }));\r\n            let result = await Promise.all(promises);\r\n            let { code, point } = result[0];\r\n            this.referrer = result[2];\r\n            this.member = { recommendationCode: code, point: point, fans: result[1], referrer: result[2] };\r\n        }\r\n    }\r\n\r\n    private loginCallback = async () => {\r\n        nav.pop();\r\n        await this.internalStart(undefined);\r\n    }\r\n\r\n    render = observer(() => {\r\n        if (this.isLogined) {\r\n            return this.member === undefined ? <Loading /> : this.renderView(VMember);\r\n        } else {\r\n            return <div\r\n                className=\"d-flex h-100 flex-column align-items-center justify-content-center\">\r\n                <div className=\"flex-fill\" />\r\n                <button className=\"btn btn-success w-20c\"\r\n                    onClick={() => nav.showLogin(this.loginCallback, true)}>\r\n                    <FA name=\"sign-out\" size=\"lg\" /> 请登录\r\n                </button>\r\n                <div className=\"flex-fill\" />\r\n                <div className=\"flex-fill\" />\r\n            </div>;\r\n        }\r\n    })\r\n\r\n    tab = () => {\r\n        this.start();\r\n        return <this.render />;\r\n    }\r\n\r\n    setReferrer(code: string) {\r\n        if (code) {\r\n            // 写入map，方法是add，用这个方法可能会写入多次，多以在写入之前要检查有没有，有的话，就不能再调用这个方法了\r\n            // 这个逻辑我认为应该是在服务端，写入的时候要给双方积分，给多少积分的逻辑，也应该在后端，从邀请码到拥有此邀请码\r\n            // 的会员id之间的转换，逻辑也应该在后台，这个后端的逻辑写在ACTION中？\r\n            if (!this.referrer) {\r\n                let { id: currentUserId } = this.user;\r\n            }\r\n        }\r\n    }\r\n}","import * as React from 'react';\r\nimport { Page, nav } from 'tonva';\r\nimport ReactMarkdown from 'react-markdown/with-html';\r\nimport logo from '../images/logo.png';\r\n\r\nconst content = `百灵威科技有限公司是一家致力于研发和生产化学及生命科学相关产品，集敏捷制造、全球营销和现代物流为一体的高科技企业。\r\n\r\n百灵威秉承“诚实守信、开拓创新、合作共赢、实现卓越”的价值观，致力于与化学、生物医药、精细化工、食品工业、现代农业、电子、日化、石化、纺织、生命科学、环境保护、疾病控制、新能源、新材料、航空航天等领域的客户建立互信、长久的合作关系，为实现“促进科技与工业发展，造福人类”的使命而不懈努力！\r\n\r\n<h2>企业使命</h2>\r\n\r\n促进科技与工业发展，造福人类\r\n\r\n<h2>企业愿景</h2>\r\n\r\nJ＆K Scientific想象一个所有人都能在安全和清洁的环境中过上健康，有益的生活的世界。我们致力于纪念未来，努力改善我们的孩子及其子女的世界。当我们与客户合作解决他们的生产需求时，这个愿景指导我们的行动。\r\n\r\n<h2>核心价值观</h2>\r\n\r\n<style>\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n.box {\r\n  float: left;\r\n  width: 25%;\r\n  padding: 1px;\r\n  text-align: center;\r\n}\r\n.clearfix::after {\r\n  content: \"\";\r\n  clear: both;\r\n  display: table;\r\n}\r\n</style>\r\n\r\n<div class=\"clearfix\">\r\n  <div class=\"box\" style=\"background-color:#bbb\">\r\n  <h3>诚实守信</h3>\r\n  <p style=\"color:grey;font-size: 1rem;\">诚实守信</p>\r\n  </div>\r\n  <div class=\"box\" style=\"background-color:#ccc\">\r\n      <h3>开拓创新</h3>\r\n  <p style=\"color:grey;font-size: 1rem;\">开拓创新</p>\r\n  </div>\r\n  <div class=\"box\" style=\"background-color:#ddd\">\r\n      <h3>合作共赢</h3>\r\n  <p style=\"color:grey;font-size: 1rem;\">合作共赢</p>\r\n  </div>\r\n  <div class=\"box\" style=\"background-color:#eee\">\r\n      <h3>实现卓越</h3>\r\n  <p style=\"color:grey;font-size: 1rem;\">实现卓越</p>\r\n  </div>\r\n</div>\r\n\r\n<h2>国际营销中心</h2>\r\n\r\n<style>\r\nimg {\r\n  float: left;\r\n}\r\n</style>\r\n\r\n<img src=\"http://47.92.87.6/wordpress/wp-content/uploads/2019/05/World-Wide-Distribution.png\" alt=\"World Wide Distribution\"\r\n    title=\"ww distribution\" class=\"img-fluid\"/>\r\n    百灵威在中国内地、香港，欧洲及北美等多个国家和地区设有物流中心，实行专业化、个性化的一站式服务，为全球超过200,000 名科技和工业领域的客户提供产品资源及配套技术服务。百灵威具有国际化学技术资源背景及强大的国际操控能力，可以帮助有特殊要求的客户从国外单独进口特种化学产品，为项目试验乃至工业化应用提供强大支持。百灵威具有强大的专业化学品定制、采购和出口能力，更具备众多国际性合作项目（如多国化学实验室联合开发战略性化合物）的运作能力，百灵威愿与中国的同行携 手，共创我国化学事业更加辉煌的未来！\r\n\r\n<h2>国际认证</h2>\r\n\r\n<h3>ISO 9001</h3>\r\n\r\n【配图】\r\n`\r\n\r\nexport class About extends React.Component {\r\n    render() {\r\n        let right = null;\r\n        return <Page header=\"关于百灵威\" right={right}>\r\n            <div className='bg-white p-3'>\r\n                <img className=\"h-3c position-absolute\" src={logo} />\r\n                <div className=\"h3 flex-fill text-center\">\r\n                    <span className=\"text-primary mr-3\">百灵威集团</span>\r\n                </div>\r\n                <ReactMarkdown className=\"mt-5\" source={content} escapeHtml={false} />\r\n            </div>\r\n        </Page>;\r\n    }\r\n}","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport { userApi, ItemSchema, StringSchema, ImageSchema, UiTextItem, UiImageItem, nav, Page, \r\n    Edit, UiSchema, \r\n    VPage, UiRadio, IdSchema, UiIdItem, Context, BoxId, tv } from 'tonva';\r\nimport { CMe } from './CMe';\r\nimport { faxValidation, emailValidation, mobileValidation, telephoneValidation, \r\n    addressDetailValidation, zipCodeValidation, \r\n    organizationNameValidation, departmentNameValidation, \r\n    salutationValidation, nameValidation } from '../tools/inputValidations';\r\n\r\nexport class EditMeInfo extends VPage<CMe>{\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private schema: ItemSchema[] = [\r\n        { name: 'nick', type: 'string' } as StringSchema,\r\n        { name: 'icon', type: 'image' } as ImageSchema,\r\n    ];\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            nick: { widget: 'text', label: '别名', placeholder: '好的别名更方便记忆' } as UiTextItem,\r\n            icon: { widget: 'image', label: '头像' } as UiImageItem,\r\n        }\r\n    }\r\n    @observable private data: any;\r\n\r\n    @observable private webUserData: any;\r\n\r\n    @observable private webUserContactData: any;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        let { nick, icon } = nav.user;\r\n        this.data = {\r\n            nick: nick,\r\n            icon: icon,\r\n        };\r\n\r\n        let { cApp } = this.controller;\r\n        let { firstName, gender, salutation, organizationName, departmentName, telephone\r\n            , mobile, email, fax, zipCode, address, addressString } = cApp.currentUser;\r\n        this.webUserData = {\r\n            firstName: firstName,\r\n            gender: gender,\r\n            salutation: salutation,\r\n            organizationName: organizationName,\r\n            departmentName: departmentName,\r\n        };\r\n\r\n        this.webUserContactData = {\r\n            telephone: telephone,\r\n            mobile: mobile,\r\n            email: email,\r\n            fax: fax,\r\n            address: address,\r\n            addressString: addressString,\r\n            zipCode: zipCode,\r\n        }\r\n    }\r\n\r\n    private onItemChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        await userApi.userSetProp(name, newValue);\r\n        this.data[name] = newValue;\r\n        nav.user[name] = newValue;\r\n        nav.saveLocalUser();\r\n    }\r\n\r\n    private onWebUserChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserData[name] = newValue;\r\n        await this.controller.changeWebUser(this.webUserData);\r\n    }\r\n\r\n    private onWebUserContactChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserContactData[name] = newValue;\r\n        await this.controller.changeWebUserContact(this.webUserContactData);\r\n    }\r\n\r\n    private page = () => {\r\n        let { schema, uiSchema, data, onItemChanged, webUserData, onWebUserChanged, webUserContactData, onWebUserContactChanged, controller } = this;\r\n        return <Page header=\"个人信息\">\r\n            <Edit schema={schema} uiSchema={uiSchema}\r\n                data={data}\r\n                onItemChanged={onItemChanged} />\r\n            <Edit schema={webUserSchema} uiSchema={webUserUiSchema}\r\n                data={webUserData}\r\n                onItemChanged={onWebUserChanged} />\r\n            <Edit schema={webUserContactSchema} uiSchema={webUserContactUiSchema(controller.pickAddress)}\r\n                data={webUserContactData}\r\n                onItemChanged={onWebUserContactChanged} />\r\n        </Page>;\r\n    }\r\n}\r\n\r\nexport const webUserSchema: ItemSchema[] = [\r\n    { name: 'firstName', type: 'string', required: true } as StringSchema,\r\n    { name: 'gender', type: 'string' } as StringSchema,\r\n    { name: 'salutation', type: 'string' } as StringSchema,\r\n    { name: 'organizationName', type: 'string', required: true } as StringSchema,\r\n    { name: 'departmentName', type: 'string' } as StringSchema,\r\n];\r\n\r\nexport const webUserUiSchema: UiSchema = {\r\n    items: {\r\n        firstName: {\r\n            widget: 'text', label: '真实姓名',\r\n            placeholder: '化学品是受国家安全法规限制的特殊商品，百灵威提供技术咨询、资料以及化学产品的对象必须是具有化学管理和应用能力的专业单位（非个人）。为此，需要您重新提供非虚拟的、可核查的信息。',\r\n            rules: nameValidation\r\n        } as UiTextItem,\r\n        gender: { widget: 'radio', label: '性别', list: [{ value: '1', title: '男' }, { value: '0', title: '女' }], defaultValue: 1 } as UiRadio,\r\n        salutation: { widget: 'text', label: '称谓', rules: salutationValidation } as UiTextItem,\r\n        organizationName: { widget: 'text', label: '单位名称', rules: organizationNameValidation } as UiTextItem,\r\n        departmentName: { widget: 'text', label: '部门名称', rules: departmentNameValidation } as UiTextItem,\r\n    }\r\n}\r\n\r\n// 个人联系方式信息\r\nexport const webUserContactSchema: ItemSchema[] = [\r\n    { name: 'telephone', type: 'string' } as StringSchema,\r\n    { name: 'mobile', type: 'string', required: true } as StringSchema,\r\n    { name: 'email', type: 'string' } as StringSchema,\r\n    { name: 'fax', type: 'string', required: false } as StringSchema,\r\n    { name: 'address', type: 'id', required: false } as IdSchema,\r\n    { name: 'addressString', type: 'string', required: false } as StringSchema,\r\n    { name: 'zipCode', type: 'string', required: false } as StringSchema,\r\n];\r\n\r\nexport function webUserContactUiSchema(pickAddress: any) {\r\n    return {\r\n        items: {\r\n            telephone: { widget: 'text', label: '固定电话', rules: telephoneValidation } as UiTextItem,\r\n            mobile: { widget: 'text', label: '手机号', rules: mobileValidation } as UiTextItem,\r\n            email: { widget: 'text', label: 'Email', rules: emailValidation, placeholder: 'Email' } as UiTextItem,\r\n            fax: { widget: 'text', label: '传真', rules: faxValidation } as UiTextItem,\r\n            address: {\r\n                widget: 'id', label: '所在地区',\r\n                pickId: async (context: Context, name: string, value: number) => await pickAddress(context, name, value),\r\n                Templet: (address: BoxId) => {\r\n                    return tv(address, (addressValue) => {\r\n                        let { country, province, city, county } = addressValue;\r\n                        /* 下面这种在使用tv之前的一堆判断应该是tv或者什么的有bug, 应该让Henry改改 */\r\n                        return <>\r\n                            {country !== undefined && country.id !== undefined && tv(country, v => <>{v.chineseName}</>)}\r\n                            {province !== undefined && province.id !== undefined && tv(province, (v) => <>{v.chineseName}</>)}\r\n                            {city !== undefined && city.id !== undefined && tv(city, (v) => <>{v.chineseName}</>)}\r\n                            {county !== undefined && county.id !== undefined && tv(county, (v) => <>{v.chineseName}</>)}\r\n                        </>;\r\n                    }, () => {\r\n                        return <small className=\"text-muted\">请选择地区</small>;\r\n                    })\r\n                }\r\n            } as UiIdItem,\r\n            addressString: { widget: 'text', label: '详细地址', rules: addressDetailValidation } as UiTextItem,\r\n            zipCode: { widget: 'text', label: '邮编', rules: zipCodeValidation } as UiTextItem,\r\n        }\r\n    }\r\n}","import * as React from 'react';\r\nimport { nav, User, Page, Image, VPage } from 'tonva';\r\nimport { Prop, Media, IconText, FA, PropGrid, LMR } from 'tonva';\r\nimport { About } from './about';\r\nimport { observer } from 'mobx-react';\r\nimport { EditMeInfo } from './EditMeInfo';\r\nimport { CMe } from './CMe';\r\n\r\nexport class VMe extends VPage<CMe> {\r\n\r\n    async open(param?: any) {\r\n\r\n    }\r\n\r\n    private exit() {\r\n        nav.showLogout();\r\n    }\r\n\r\n    private about = () => nav.push(<About />);\r\n\r\n    private changePassword = async () => {\r\n        await nav.changePassword();\r\n    }\r\n\r\n    private openContactList = async () => {\r\n        this.controller.openContactList();\r\n    }\r\n\r\n    private openInvoice = async () => {\r\n        this.controller.openInvoice();\r\n    }\r\n\r\n    private meInfo = observer(() => {\r\n        let { user } = nav;\r\n        if (user === undefined) return null;\r\n        let { id, name, nick, icon } = user;\r\n        return <LMR className=\"py-2 cursor-pointer w-100\"\r\n            left={<Image className=\"w-3c h-3c mr-3\" src={icon} />}\r\n            right={<FA className=\"align-self-end\" name=\"angle-right\" />}\r\n            onClick={() => {\r\n                this.openVPage(EditMeInfo);\r\n            }}>\r\n            <div>\r\n                <div>{userSpan(name, nick)}</div>\r\n                <div className=\"small\"><span className=\"text-muted\">ID:</span> {id > 10000 ? id : String(id + 10000).substr(1)}</div>\r\n            </div>\r\n        </LMR>;\r\n    });\r\n\r\n    private orderStates = () => {\r\n\r\n        let { openMyOrders } = this.controller;\r\n        return <div className=\"d-flex justify-content-around w-100 my-3\">\r\n            <div className=\"d-flex flex-column align-items-center\" onClick={() => openMyOrders('pendingpayment')}>\r\n                <FA name=\"file-text-o\" className=\"text-info fa-2x\" />\r\n                <small>待付款</small>\r\n            </div>\r\n            <div className=\"d-flex flex-column align-items-center\" onClick={() => openMyOrders('processing')}>\r\n                <FA name=\"file-text-o\" className=\"text-info fa-2x\" />\r\n                <small>进行中</small>\r\n            </div>\r\n            <div className=\"d-flex flex-column align-items-center\" onClick={() => openMyOrders('completed')}>\r\n                <FA name=\"file-text-o\" className=\"text-info fa-2x\" />\r\n                <small>已完成</small>\r\n            </div>\r\n        </div>\r\n    };\r\n\r\n    render() {\r\n        const { user } = nav;\r\n        let aboutRows: Prop[] = [\r\n            '',\r\n            {\r\n                type: 'component',\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"smile-o\" text=\"关于百灵威\" />,\r\n                onClick: this.about\r\n            },\r\n            '',\r\n        ];\r\n\r\n        let rows: Prop[];\r\n        if (user === undefined) {\r\n            rows = aboutRows;\r\n            rows.push(\r\n                {\r\n                    type: 'component',\r\n                    component: <button className=\"btn btn-success w-100 my-2\" onClick={() => nav.showLogin(undefined, true)}>\r\n                        <FA name=\"sign-out\" size=\"lg\" /> 请登录\r\n                    </button>\r\n                },\r\n            );\r\n        }\r\n        else {\r\n            let logOutRows: Prop[] = [\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    bk: '',\r\n                    component: <button className=\"btn btn-danger w-100\" onClick={this.exit}>\r\n                        <FA name=\"sign-out\" size=\"lg\" /> 退出登录\r\n                </button>\r\n                },\r\n            ];\r\n\r\n            rows = [\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <this.meInfo />\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <this.orderStates />,\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"address-book-o\" text=\"地址管理\" />,\r\n                    onClick: this.openContactList\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"address-book-o\" text=\"发票管理\" />,\r\n                    onClick: this.openInvoice\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"key\" text=\"修改密码\" />,\r\n                    onClick: this.changePassword\r\n                },\r\n            ]\r\n            rows.push(...aboutRows, ...logOutRows);\r\n        }\r\n        return <PropGrid rows={rows} values={{}} />;\r\n    }\r\n}\r\n\r\n\r\nfunction userSpan(name: string, nick: string): JSX.Element {\r\n    return nick ?\r\n        <><b>{nick} &nbsp; <small className=\"muted\">{name}</small></b></>\r\n        : <b>{name}</b>\r\n}\r\n","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport { ItemSchema, Page, Edit, VPage, FA } from 'tonva';\r\nimport { CMe } from './CMe';\r\nimport { webUserSchema, webUserUiSchema, webUserContactSchema, webUserContactUiSchema } from './EditMeInfo';\r\n\r\nexport class EditMeInfoFirstOrder extends VPage<CMe>{\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    @observable private webUserData: any;\r\n    @observable private webUserContactData: any;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n\r\n        let { cApp } = this.controller;\r\n        let { firstName, gender, salutation, organizationName, departmentName, telephone, mobile, email } = cApp.currentUser;\r\n        this.webUserData = {\r\n            firstName: firstName,\r\n            gender: gender,\r\n            salutation: salutation,\r\n            organizationName: organizationName,\r\n            departmentName: departmentName\r\n        };\r\n\r\n        this.webUserContactData = {\r\n            telephone: telephone,\r\n            mobile: mobile,\r\n            email: email\r\n        }\r\n    }\r\n\r\n    private onWebUserChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserData[name] = newValue;\r\n        await this.controller.changeWebUser(this.webUserData);\r\n    }\r\n\r\n    private onWebUserContactChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserContactData[name] = newValue;\r\n        await this.controller.changeWebUserContact(this.webUserContactData);\r\n    }\r\n\r\n    private page = () => {\r\n        return <Page header=\"首次下单补充个人信息\">\r\n            <div className=\"alert alert-primary small\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning mr-3 my-1 float-left\" size=\"3x\" />\r\n                化学品是受国家安全法规限制的特殊商品，百灵威提供技术咨询、资料以及化学产品的对象必须是具有化学管理和应用能力的专业单位（非个人）。\r\n                为此，需要您重新提供非虚拟的、可核查的信息。这些信息包括下面所有带有 <span className=\"text-danger\">*</span> 的信息。\r\n            </div>\r\n            <Edit schema={webUserSchema} uiSchema={webUserUiSchema}\r\n                data={this.webUserData}\r\n                onItemChanged={this.onWebUserChanged} />\r\n            <Edit schema={webUserContactSchema} uiSchema={webUserContactUiSchema(this.controller.pickAddress)}\r\n                data={this.webUserContactData}\r\n                onItemChanged={this.onWebUserContactChanged} />\r\n            <div className=\"p-3 bg-white\">\r\n                <button type=\"button\" className=\"btn btn-primary w-100\" onClick={() => this.backPage()}>保存并返回</button>\r\n            </div>\r\n        </Page>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { Controller, Context } from 'tonva';\r\n//import { CCartApp } from 'CCartApp';\r\nimport { CApp } from '../CApp';\r\nimport { CUqBase } from '../CBase';\r\nimport { VMe } from './VMe';\r\nimport { CSelectShippingContact } from '../customer/CSelectContact';\r\nimport { EditMeInfoFirstOrder } from './EditMeInfoFirstOrder';\r\nimport { CInvoiceInfo } from '../customer/CInvoiceInfo';\r\nimport { CAddress } from '../customer/CAddress';\r\n\r\nexport class CMe extends CUqBase {\r\n    cApp: CApp;\r\n    /*\r\n    cApp: CCartApp;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n\r\n        this.cApp = cApp;\r\n    }\r\n    */\r\n\r\n    protected async internalStart() {\r\n\r\n    }\r\n\r\n    async changeWebUser(webUser: any) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.changeWebUser(webUser);\r\n    }\r\n\r\n    async changeWebUserContact(webUserContact: any) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.changeWebUserContact(webUserContact);\r\n    }\r\n\r\n    tab = () => this.renderView(VMe);\r\n\r\n    openMyOrders = async (state: string) => {\r\n        let { cOrder } = this.cApp;\r\n        await cOrder.openMyOrders(state);\r\n    }\r\n\r\n    openContactList = async () => {\r\n        let contactList = this.newC(CSelectShippingContact); // new CSelectShippingContact(this.cApp, undefined, false);\r\n        await contactList.start(false);\r\n    }\r\n\r\n    openInvoice = async () => {\r\n        let cInvoiceInfo = this.newC(CInvoiceInfo); // new CInvoiceInfo(this.cApp, undefined, false);\r\n        let { currentUser } = this.cApp;\r\n        let defaultSetting = await currentUser.getSetting();\r\n\r\n        let origInvoice = _.pick(defaultSetting, ['invoiceType', 'invoiceInfo']);\r\n        cInvoiceInfo.start(origInvoice);\r\n    }\r\n\r\n    openMeInfoFirstOrder = async () => {\r\n        await this.openVPage(EditMeInfoFirstOrder);\r\n    }\r\n\r\n    pickAddress = async (context: Context, name: string, value: number): Promise<number> => {\r\n        let cAddress = this.newC(CAddress); // new CAddress(this.cApp, undefined);\r\n        return await cAddress.call<number>();\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, TabCaptionComponent, Page, Tabs } from 'tonva';\r\nimport { CApp } from '../CApp';\r\n//import { CCartApp } from 'CCartApp';\r\n\r\nexport const store = {\r\n    //homeCount: observable.box<number>(-1),\r\n    //cartCount: observable.box<number>(101),\r\n};\r\n\r\nconst color = (selected: boolean) => selected === true ? 'text-primary' : 'text-muted';\r\n\r\nexport class VMain extends VPage<CApp> {\r\n    async open(param?: any) {\r\n        this.openPage(this.render);\r\n    }\r\n    render = (param?: any): JSX.Element => {\r\n        let { cHome, cMember, cCart, cMe, cart } = this.controller;\r\n        let faceTabs = [\r\n            { name: 'home', label: '首页', icon: 'home', content: cHome.tab, notify: undefined/*store.homeCount*/ },\r\n            // { name: 'member', label: '会员', icon: 'vcard', content: cMember.tab },\r\n            { name: 'cart', label: '购物车', icon: 'shopping-cart', content: cCart.tab, notify: cart.count },\r\n            { name: 'me', label: '我的', icon: 'user', content: cMe.tab }\r\n        ].map(v => {\r\n            let { name, label, icon, content, notify } = v;\r\n            return {\r\n                name: name,\r\n                caption: (selected: boolean) => TabCaptionComponent(label, icon, color(selected)),\r\n                content: content,\r\n                notify: notify,\r\n            }\r\n        });\r\n        return <Page header={false}>\r\n            <Tabs tabs={faceTabs} />\r\n        </Page>;\r\n    }\r\n}\r\n","import { CAppBase, IConstructor, User, nav } from \"tonva\";\r\nimport { UQs } from \"./uqs\";\r\nimport { Cart } from \"./cart/Cart\";\r\nimport { WebUser } from \"./CurrentUser\";\r\nimport { CHome } from \"./home\";\r\nimport { CCart } from \"./cart\";\r\nimport { CProduct } from \"./product\";\r\nimport { COrder } from \"./order/COrder\";\r\nimport { CProductCategory } from \"./productCategory/CProductCategory\";\r\nimport { CMember } from \"./member\";\r\nimport { CMe } from \"./me/CMe\";\r\nimport { CUqBase } from \"./CBase\";\r\nimport { GLOABLE } from 'ui';\r\nimport { VMain } from 'ui/main';\r\n\r\nexport class CApp extends CAppBase {\r\n    readonly uqs: UQs;\r\n\r\n    cart: Cart;\r\n    topKey: any;\r\n\r\n    currentSalesRegion: any;\r\n    currentLanguage: any;\r\n    currentUser: WebUser;\r\n\r\n    cHome: CHome;\r\n    cCart: CCart;\r\n    cProduct: CProduct;\r\n    cOrder: COrder;\r\n    cProductCategory: CProductCategory;\r\n    cMember: CMember;\r\n    cMe: CMe;\r\n\r\n    protected newC<T extends CUqBase>(type: IConstructor<T>): T {\r\n        return new type(this);\r\n    }\r\n\r\n    protected async internalStart() {\r\n        this.currentSalesRegion = await this.uqs.common.SalesRegion.load(GLOABLE.SALESREGION_CN);\r\n\r\n        this.currentLanguage = await this.uqs.common.Language.load(GLOABLE.CHINESE);\r\n\r\n        this.currentUser = new WebUser(this.uqs); //this.cUqWebUser, this.cUqCustomer);\r\n        if (this.isLogined) {\r\n            this.currentUser.setUser(this.user);\r\n        }\r\n\r\n        this.cart = new Cart(this);\r\n        await this.cart.init();\r\n\r\n        this.cProductCategory = this.newC(CProductCategory); // new CProductCategory(this, undefined);\r\n        this.cCart = this.newC(CCart); // new CCart(this, undefined);\r\n        this.cHome = this.newC(CHome); // new CHome(this, undefined);\r\n        this.cProduct = this.newC(CProduct); // new CProduct(this, undefined);\r\n        this.cOrder = this.newC(COrder); // new COrder(this, undefined);\r\n        //this.cSelectContact = new CSelectContact(this, undefined);\r\n        this.cMember = this.newC(CMember); // new CMember(this, undefined);\r\n        this.cMe = this.newC(CMe); // new CMe(this, undefined);\r\n\r\n        let promises: PromiseLike<void>[] = [];\r\n        promises.push(this.cProductCategory.start());\r\n        await Promise.all(promises);\r\n        this.showMain();\r\n        this.topKey = nav.topKey();\r\n    }\r\n\r\n    showMain(initTabName?: string) {\r\n        this.openVPage(VMain, initTabName);\r\n    }\r\n\r\n    async loginCallBack(user: User) {\r\n        /*\r\n        if (this.cartService.isLocal) {\r\n            let cartLocal = { ...this.cartViewModel } as CartViewModel;\r\n            // this.cartService.clear(this.cartViewModel);\r\n            this.cartService = CartServiceFactory.getCartService(this);\r\n            this.cartViewModel = await this.cartService.load();\r\n            // this.cartViewModel = await this.cartService.merge(cartLocal);\r\n        }\r\n        */\r\n    }\r\n\r\n    protected onDispose() {\r\n        this.cart.dispose();\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { tv } from 'tonva';\r\n\r\nexport const tvAddress = (values: any) => {\r\n    let { country, province, city, county } = values;\r\n    return <>\r\n        {tv(country)}{tv(province, undefined, undefined, () => <></>)}{tv(city, undefined, undefined, () => <></>)}{tv(county, undefined, undefined, () => <></>)}\r\n    </>\r\n}\r\n\r\nexport const tvCountry = (values: any) => {\r\n    return <> {values.chineseName} </>;\r\n}\r\n\r\nexport const tvCurrency = (values: any) => {\r\n    return <> {values.name} </>;\r\n}\r\n\r\nexport const common = {\r\n    address: tvAddress,\r\n    country: tvCountry,\r\n    province: tvCountry,\r\n    city: tvCountry,\r\n    county: tvCountry,\r\n    currency: tvCurrency,\r\n};\r\n","import * as React from 'react';\r\nimport { tv } from 'tonva';\r\nimport { ProductImage } from 'tools/productImage';\r\n\r\nexport const tvProduct = (values: any) => {\r\n    let product = values;\r\n    let { brand, description, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n    return <div className=\"row d-flex\">\r\n        <div className=\"col-12\">\r\n            <div className=\"row py-2\">\r\n                <div className=\"col-12\"><strong>{description}</strong></div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    <div className=\"row\">\r\n                        {item('CAS', CAS)}\r\n                        {item('纯度', purity)}\r\n                        {item('分子式', molecularFomula)}\r\n                        {item('分子量', molecularWeight)}\r\n                        {item('产品编号', origin)}\r\n                        {tv(brand, (values: any) => <>{item(\"品牌\", values.name)}</>)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n};\r\n\r\nconst tvPackx = (values: any) => {\r\n    let { radiox, radioy, unit } = values;\r\n    if (radiox !== 1) return <>{radiox} * {radioy}{unit}</>;\r\n    return <>{radioy}{unit}</>;\r\n}\r\n\r\nfunction item(caption: string, value: any) {\r\n    if (value === null || value === undefined) return null;\r\n    return <>\r\n        <div className=\"col-4 text-muted pr-0\">{caption}:</div>\r\n        <div className=\"col-8\">{value}</div>\r\n    </>;\r\n}\r\n\r\nconst tvProductCategory = (values: any) => {\r\n    let { children } = values;\r\n    return <>\r\n        aaa\r\n    </>\r\n};\r\n\r\nexport const product = {\r\n    productx: tvProduct,\r\n    packx: tvPackx,\r\n    productCategory: tvProductCategory,\r\n}\r\n","import * as React from 'react';\r\nimport { tv } from 'tonva';\r\nimport { tvAddress, tvCountry } from './common';\r\n\r\nexport const tvContact = (values: any) => {\r\n    let { name, mobile, organizationName, address, addressString } = values;\r\n    return <div className=\"flex-grow-1\">\r\n        <b>\r\n            {name}\r\n        </b>\r\n        &nbsp; {mobile} &nbsp; {organizationName}<br />\r\n        <small>{tv(address)} {addressString}</small>\r\n    </div>\r\n}\r\n\r\nexport const tvInvoiceType = (values: any) => {\r\n    let { id, description } = values;\r\n    return <div className=\"flex-grow-1\">\r\n        {description}\r\n    </div>\r\n}\r\n\r\nexport const tvInvoiceInfo = (values: any) => {\r\n    let { title, taxNo } = values;\r\n    return <div className=\"flex-grow-1\">\r\n        <b>\r\n            {title}\r\n        </b>\r\n        &nbsp; {taxNo}\r\n    </div>\r\n}\r\n\r\nexport const customer = {\r\n    contact: tvContact,\r\n    address: tvAddress,\r\n    country: tvCountry,\r\n    province: tvCountry,\r\n    city: tvCountry,\r\n    county: tvCountry,\r\n    invoiceInfo: tvInvoiceInfo,\r\n    invoiceType: tvInvoiceType\r\n}\r\n","import { AppConfig } from \"tonva\";\r\nimport { jnkTop } from \"./me/loginTop\";\r\nimport { tvs } from \"./tvs\";\r\n\r\nexport { CApp } from './CApp';\r\n\r\nexport const appConfig: AppConfig = {\r\n    appName: \"百灵威系统工程部/cart\",\r\n    version: \"1.0.2\",                   // 版本变化，缓存的uqs才会重载\r\n    tvs: tvs,\r\n    loginTop: jnkTop,\r\n};\r\n","import { TVs } from \"tonva\";\r\nimport { common } from \"./common\";\r\nimport { warehouse } from \"./warehouse\";\r\nimport { product } from \"./product\";\r\nimport { order } from \"./order\";\r\nimport { customer } from './customer';\r\n\r\nexport const tvs:TVs = {\r\n    common: common,\r\n    warehouse: warehouse,\r\n    product: product,\r\n    order: order,\r\n    customer: customer,\r\n}","import * as React from 'react';\r\n\r\nconst tvWarehouse = (values: any) => {\r\n    let { name } = values;\r\n    return <div>\r\n        {name}\r\n    </div>\r\n}\r\n\r\nexport const warehouse = {\r\n    warehouse: tvWarehouse,\r\n}\r\n","import { tvProduct } from \"./product\";\r\nimport { tvAddress, tvCountry, tvCurrency } from \"./common\";\r\nimport { tvContact } from \"./customer\";\r\n\r\nexport const order = {\r\n    productx: tvProduct,\r\n    address: tvAddress,\r\n    country: tvCountry,\r\n    province: tvCountry,\r\n    city: tvCountry,\r\n    county: tvCountry,\r\n    contact: tvContact,\r\n    currency: tvCurrency,\r\n}\r\n","import * as React from 'react';\r\nimport logo from '../images/logo.png';\r\n\r\nexport const jnkTop = <div className=\"d-flex align-items-center\">\r\n    <img className=\"h-3c position-absolute\" src={logo} />\r\n    <div className=\"h3 flex-fill text-center\">\r\n        <span className=\"text-primary mr-3\">百灵威</span>\r\n    </div>\r\n</div>;\r\n","\r\nimport * as React from 'react';\r\nimport './App.css';\r\nimport { NavView, nav, Page, Tabs, start } from 'tonva';\r\nimport { CApp } from 'CApp';\r\nimport { appConfig } from 'index';\r\n\r\n//const tonvaApp = \"bruce/TestApp\";\r\nnav.setSettings(appConfig);\r\n\r\nclass App extends React.Component {\r\n\r\n  private onLogined = async () => {\r\n    await start(CApp, appConfig);\r\n  }\r\n  public render() {\r\n    return <NavView onLogined={this.onLogined} notLogined={this.onLogined} />\r\n  }\r\n}\r\n\r\nexport default App;","// tslint:disable:no-console\r\n// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the 'N+1' visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n  // [::1] is the IPv6 localhost address.\r\n  window.location.hostname === '[::1]' ||\r\n  // 127.0.0.1/8 is considered localhost for IPv4.\r\n  window.location.hostname.match(\r\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n  )\r\n);\r\n\r\nexport default function register() {\r\n  // if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n  if ('serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL!,\r\n      window.location.toString()\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n            'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string) {\r\n  navigator.serviceWorker\r\n    .register(swUrl, { scope: '.' })\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker) {\r\n          installingWorker.onstatechange = () => {\r\n            if (installingWorker.state === 'installed') {\r\n              if (navigator.serviceWorker.controller) {\r\n                // At this point, the old content will have been purged and\r\n                // the fresh content will have been added to the cache.\r\n                // It's the perfect time to display a 'New content is\r\n                // available; please refresh.' message in your web app.\r\n                console.log('New content is available; please refresh.');\r\n              } else {\r\n                // At this point, everything has been precached.\r\n                // It's the perfect time to display a\r\n                // 'Content is cached for offline use.' message.\r\n                console.log('Content is cached for offline use.');\r\n              }\r\n            }\r\n          };\r\n        }\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type')!.indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root') as HTMLElement\n);\nregisterServiceWorker();\n","module.exports = \"data:image/png;base64,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\"","import * as React from 'react';\r\nimport { Render } from './render';\r\n\r\nexport interface MainSubs<M, S> {\r\n    main: M;\r\n    subs: S[];\r\n}\r\n\r\nexport abstract class ViewBase<T> {\r\n    model: T;\r\n    abstract render(): JSX.Element;\r\n}\r\n\r\nexport class ViewMainSubs<M, S> extends ViewBase<MainSubs<M, S>> {\r\n    protected main: Render<M>;\r\n    protected sub: Render<S>;\r\n    constructor(main: Render<M>, sub: Render<S>) {\r\n        super();\r\n        this.main = main;\r\n        this.sub = sub;\r\n    }\r\n    protected subsContainer(subViews: JSX.Element[]): JSX.Element {\r\n        return <div>{subViews}</div>\r\n    }\r\n\r\n    protected renderSubItems(): JSX.Element[] {\r\n        let { subs } = this.model;\r\n        if (!subs) return null;\r\n        let subViews: JSX.Element[] = subs.map((v, index) => {\r\n            return <this.sub key={index} {...v} />;\r\n        });\r\n        return subViews;\r\n    }\r\n\r\n    protected renderSubs = (): JSX.Element => {\r\n        return this.subsContainer(this.renderSubItems());\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        let { main } = this.model;\r\n        return <>\r\n            <this.main {...main} />\r\n            <this.renderSubs />\r\n        </>;\r\n    }\r\n}\r\n\r\nexport class ViewListMainSubs<M, S> extends ViewBase<MainSubs<M, S>[]> {\r\n    private row: new (main: Render<M>, sub: Render<S>) => ViewMainSubs<M, S>;\r\n    private main: Render<M>;\r\n    private sub: Render<S>;\r\n    constructor(\r\n        row: new (main: Render<M>, sub: Render<S>) => ViewMainSubs<M, S>,\r\n        main: Render<M>,\r\n        sub: Render<S>) {\r\n        super();\r\n        this.row = row;\r\n        this.main = main;\r\n        this.sub = sub;\r\n    }\r\n    render(): JSX.Element {\r\n        return <>\r\n            {this.model.map((v, index) => {\r\n                let view = new this.row(this.main, this.sub);\r\n                view.model = v;\r\n                return <React.Fragment key={index}>{view.render()}</React.Fragment>;\r\n            })}\r\n        </>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { MainProduct, SubPack } from './model';\r\n\r\nexport type Render<T> = (model: T) => JSX.Element;\r\n\r\nexport function renderMainProduct(model: MainProduct): JSX.Element {\r\n    return <div>\r\n        {model.description}\r\n    </div>\r\n}\r\n\r\nexport function renderSubPack(model: SubPack): JSX.Element {\r\n    let { pack, vipPrice, price, quantity, amount } = model;\r\n    return <div>\r\n        {pack.unit}, {vipPrice}, {price}, {quantity}, {amount}\r\n    </div>\r\n}\r\n","export * from './mainSubs';\r\nexport * from './model';\r\nexport * from './render';\r\n","module.exports = __webpack_public_path__ + \"static/media/AnalyticalChemistry.f85ff3e0.png\";","module.exports = __webpack_public_path__ + \"static/media/LabSupplies.3f6ce00f.png\";","module.exports = __webpack_public_path__ + \"static/media/LifeScience.5c2e6ff5.png\";","module.exports = __webpack_public_path__ + \"static/media/MaterialScience.f2439aa0.png\";","module.exports = __webpack_public_path__ + \"static/media/OrganicChemistry.6d56971c.png\";","module.exports = __webpack_public_path__ + \"static/media/pig.772a31a6.png\";"],"sourceRoot":""}